const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-CrUiACa7.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/lz4-B_Exjfmr.js","assets/zstd-u5eweWyS.js"])))=>i.map(i=>d[i]);
function $4(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(i,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function Md(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dh={exports:{}},Is={};var Tg;function ey(){if(Tg)return Is;Tg=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:e,type:i,key:l,ref:a!==void 0?a:null,props:o}}return Is.Fragment=t,Is.jsx=n,Is.jsxs=n,Is}var Rg;function ty(){return Rg||(Rg=1,dh.exports=ey()),dh.exports}var $=ty(),mh={exports:{}},Se={};var Fg;function ny(){if(Fg)return Se;Fg=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),p=Symbol.iterator;function A(X){return X===null||typeof X!="object"?null:(X=p&&X[p]||X["@@iterator"],typeof X=="function"?X:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,w={};function C(X,K,te){this.props=X,this.context=K,this.refs=w,this.updater=te||v}C.prototype.isReactComponent={},C.prototype.setState=function(X,K){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,K,"setState")},C.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function S(){}S.prototype=C.prototype;function E(X,K,te){this.props=X,this.context=K,this.refs=w,this.updater=te||v}var M=E.prototype=new S;M.constructor=E,y(M,C.prototype),M.isPureReactComponent=!0;var R=Array.isArray;function D(){}var T={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function U(X,K,te){var ae=te.ref;return{$$typeof:e,type:X,key:K,ref:ae!==void 0?ae:null,props:te}}function I(X,K){return U(X.type,K,X.props)}function V(X){return typeof X=="object"&&X!==null&&X.$$typeof===e}function N(X){var K={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(te){return K[te]})}var Y=/\/+/g;function P(X,K){return typeof X=="object"&&X!==null&&X.key!=null?N(""+X.key):K.toString(36)}function Q(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(D,D):(X.status="pending",X.then(function(K){X.status==="pending"&&(X.status="fulfilled",X.value=K)},function(K){X.status==="pending"&&(X.status="rejected",X.reason=K)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function k(X,K,te,ae,fe){var de=typeof X;(de==="undefined"||de==="boolean")&&(X=null);var he=!1;if(X===null)he=!0;else switch(de){case"bigint":case"string":case"number":he=!0;break;case"object":switch(X.$$typeof){case e:case t:he=!0;break;case d:return he=X._init,k(he(X._payload),K,te,ae,fe)}}if(he)return fe=fe(X),he=ae===""?"."+P(X,0):ae,R(fe)?(te="",he!=null&&(te=he.replace(Y,"$&/")+"/"),k(fe,K,te,"",function(Lt){return Lt})):fe!=null&&(V(fe)&&(fe=I(fe,te+(fe.key==null||X&&X.key===fe.key?"":(""+fe.key).replace(Y,"$&/")+"/")+he)),K.push(fe)),1;he=0;var Pe=ae===""?".":ae+":";if(R(X))for(var Re=0;Re<X.length;Re++)ae=X[Re],de=Pe+P(ae,Re),he+=k(ae,K,te,de,fe);else if(Re=A(X),typeof Re=="function")for(X=Re.call(X),Re=0;!(ae=X.next()).done;)ae=ae.value,de=Pe+P(ae,Re++),he+=k(ae,K,te,de,fe);else if(de==="object"){if(typeof X.then=="function")return k(Q(X),K,te,ae,fe);throw K=String(X),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return he}function j(X,K,te){if(X==null)return X;var ae=[],fe=0;return k(X,ae,"","",function(de){return K.call(te,de,fe++)}),ae}function H(X){if(X._status===-1){var K=X._result;K=K(),K.then(function(te){(X._status===0||X._status===-1)&&(X._status=1,X._result=te)},function(te){(X._status===0||X._status===-1)&&(X._status=2,X._result=te)}),X._status===-1&&(X._status=0,X._result=K)}if(X._status===1)return X._result.default;throw X._result}var Z=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},J={map:j,forEach:function(X,K,te){j(X,function(){K.apply(this,arguments)},te)},count:function(X){var K=0;return j(X,function(){K++}),K},toArray:function(X){return j(X,function(K){return K})||[]},only:function(X){if(!V(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return Se.Activity=m,Se.Children=J,Se.Component=C,Se.Fragment=n,Se.Profiler=a,Se.PureComponent=E,Se.StrictMode=i,Se.Suspense=f,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Se.__COMPILER_RUNTIME={__proto__:null,c:function(X){return T.H.useMemoCache(X)}},Se.cache=function(X){return function(){return X.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(X,K,te){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var ae=y({},X.props),fe=X.key;if(K!=null)for(de in K.key!==void 0&&(fe=""+K.key),K)!F.call(K,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&K.ref===void 0||(ae[de]=K[de]);var de=arguments.length-2;if(de===1)ae.children=te;else if(1<de){for(var he=Array(de),Pe=0;Pe<de;Pe++)he[Pe]=arguments[Pe+2];ae.children=he}return U(X.type,fe,ae)},Se.createContext=function(X){return X={$$typeof:l,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:o,_context:X},X},Se.createElement=function(X,K,te){var ae,fe={},de=null;if(K!=null)for(ae in K.key!==void 0&&(de=""+K.key),K)F.call(K,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(fe[ae]=K[ae]);var he=arguments.length-2;if(he===1)fe.children=te;else if(1<he){for(var Pe=Array(he),Re=0;Re<he;Re++)Pe[Re]=arguments[Re+2];fe.children=Pe}if(X&&X.defaultProps)for(ae in he=X.defaultProps,he)fe[ae]===void 0&&(fe[ae]=he[ae]);return U(X,de,fe)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(X){return{$$typeof:u,render:X}},Se.isValidElement=V,Se.lazy=function(X){return{$$typeof:d,_payload:{_status:-1,_result:X},_init:H}},Se.memo=function(X,K){return{$$typeof:h,type:X,compare:K===void 0?null:K}},Se.startTransition=function(X){var K=T.T,te={};T.T=te;try{var ae=X(),fe=T.S;fe!==null&&fe(te,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(D,Z)}catch(de){Z(de)}finally{K!==null&&te.types!==null&&(K.types=te.types),T.T=K}},Se.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Se.use=function(X){return T.H.use(X)},Se.useActionState=function(X,K,te){return T.H.useActionState(X,K,te)},Se.useCallback=function(X,K){return T.H.useCallback(X,K)},Se.useContext=function(X){return T.H.useContext(X)},Se.useDebugValue=function(){},Se.useDeferredValue=function(X,K){return T.H.useDeferredValue(X,K)},Se.useEffect=function(X,K){return T.H.useEffect(X,K)},Se.useEffectEvent=function(X){return T.H.useEffectEvent(X)},Se.useId=function(){return T.H.useId()},Se.useImperativeHandle=function(X,K,te){return T.H.useImperativeHandle(X,K,te)},Se.useInsertionEffect=function(X,K){return T.H.useInsertionEffect(X,K)},Se.useLayoutEffect=function(X,K){return T.H.useLayoutEffect(X,K)},Se.useMemo=function(X,K){return T.H.useMemo(X,K)},Se.useOptimistic=function(X,K){return T.H.useOptimistic(X,K)},Se.useReducer=function(X,K,te){return T.H.useReducer(X,K,te)},Se.useRef=function(X){return T.H.useRef(X)},Se.useState=function(X){return T.H.useState(X)},Se.useSyncExternalStore=function(X,K,te){return T.H.useSyncExternalStore(X,K,te)},Se.useTransition=function(){return T.H.useTransition()},Se.version="19.2.3",Se}var Bg;function Ed(){return Bg||(Bg=1,mh.exports=ny()),mh.exports}var z=Ed();const qi=Md(z),Dd=$4({__proto__:null,default:qi},[z]);var gh={exports:{}},Vs={},ph={exports:{}},Ah={};var Ug;function iy(){return Ug||(Ug=1,(function(e){function t(k,j){var H=k.length;k.push(j);e:for(;0<H;){var Z=H-1>>>1,J=k[Z];if(0<a(J,j))k[Z]=j,k[H]=J,H=Z;else break e}}function n(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var j=k[0],H=k.pop();if(H!==j){k[0]=H;e:for(var Z=0,J=k.length,X=J>>>1;Z<X;){var K=2*(Z+1)-1,te=k[K],ae=K+1,fe=k[ae];if(0>a(te,H))ae<J&&0>a(fe,te)?(k[Z]=fe,k[ae]=H,Z=ae):(k[Z]=te,k[K]=H,Z=K);else if(ae<J&&0>a(fe,H))k[Z]=fe,k[ae]=H,Z=ae;else break e}}return j}function a(k,j){var H=k.sortIndex-j.sortIndex;return H!==0?H:k.id-j.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var f=[],h=[],d=1,m=null,p=3,A=!1,v=!1,y=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function M(k){for(var j=n(h);j!==null;){if(j.callback===null)i(h);else if(j.startTime<=k)i(h),j.sortIndex=j.expirationTime,t(f,j);else break;j=n(h)}}function R(k){if(y=!1,M(k),!v)if(n(f)!==null)v=!0,D||(D=!0,N());else{var j=n(h);j!==null&&Q(R,j.startTime-k)}}var D=!1,T=-1,F=5,U=-1;function I(){return w?!0:!(e.unstable_now()-U<F)}function V(){if(w=!1,D){var k=e.unstable_now();U=k;var j=!0;try{e:{v=!1,y&&(y=!1,S(T),T=-1),A=!0;var H=p;try{t:{for(M(k),m=n(f);m!==null&&!(m.expirationTime>k&&I());){var Z=m.callback;if(typeof Z=="function"){m.callback=null,p=m.priorityLevel;var J=Z(m.expirationTime<=k);if(k=e.unstable_now(),typeof J=="function"){m.callback=J,M(k),j=!0;break t}m===n(f)&&i(f),M(k)}else i(f);m=n(f)}if(m!==null)j=!0;else{var X=n(h);X!==null&&Q(R,X.startTime-k),j=!1}}break e}finally{m=null,p=H,A=!1}j=void 0}}finally{j?N():D=!1}}}var N;if(typeof E=="function")N=function(){E(V)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,P=Y.port2;Y.port1.onmessage=V,N=function(){P.postMessage(null)}}else N=function(){C(V,0)};function Q(k,j){T=C(function(){k(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(k){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var H=p;p=j;try{return k()}finally{p=H}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(k,j){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var H=p;p=k;try{return j()}finally{p=H}},e.unstable_scheduleCallback=function(k,j,H){var Z=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Z+H:Z):H=Z,k){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=H+J,k={id:d++,callback:j,priorityLevel:k,startTime:H,expirationTime:J,sortIndex:-1},H>Z?(k.sortIndex=H,t(h,k),n(f)===null&&k===n(h)&&(y?(S(T),T=-1):y=!0,Q(R,H-Z))):(k.sortIndex=J,t(f,k),v||A||(v=!0,D||(D=!0,N()))),k},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(k){var j=p;return function(){var H=p;p=j;try{return k.apply(this,arguments)}finally{p=H}}}})(Ah)),Ah}var Ng;function ry(){return Ng||(Ng=1,ph.exports=iy()),ph.exports}var vh={exports:{}},Bt={};var Ig;function ay(){if(Ig)return Bt;Ig=1;var e=Ed();function t(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,h,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:f,containerInfo:h,implementation:d}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Bt.createPortal=function(f,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(f,h,null,d)},Bt.flushSync=function(f){var h=l.T,d=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=h,i.p=d,i.d.f()}},Bt.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(f,h))},Bt.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Bt.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var d=h.as,m=u(d,h.crossOrigin),p=typeof h.integrity=="string"?h.integrity:void 0,A=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?i.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:p,fetchPriority:A}):d==="script"&&i.d.X(f,{crossOrigin:m,integrity:p,fetchPriority:A,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Bt.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=u(h.as,h.crossOrigin);i.d.M(f,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(f)},Bt.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,m=u(d,h.crossOrigin);i.d.L(f,d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Bt.preloadModule=function(f,h){if(typeof f=="string")if(h){var d=u(h.as,h.crossOrigin);i.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(f)},Bt.requestFormReset=function(f){i.d.r(f)},Bt.unstable_batchedUpdates=function(f,h){return f(h)},Bt.useFormState=function(f,h,d){return l.H.useFormState(f,h,d)},Bt.useFormStatus=function(){return l.H.useHostTransitionStatus()},Bt.version="19.2.3",Bt}var Vg;function xA(){if(Vg)return vh.exports;Vg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),vh.exports=ay(),vh.exports}var Og;function sy(){if(Og)return Vs;Og=1;var e=ry(),t=Ed(),n=xA();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var s=r,c=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(c=s.return),r=s.return;while(r)}return s.tag===3?c:null}function l(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function u(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(o(r)!==r)throw Error(i(188))}function h(r){var s=r.alternate;if(!s){if(s=o(r),s===null)throw Error(i(188));return s!==r?null:r}for(var c=r,g=s;;){var x=c.return;if(x===null)break;var b=x.alternate;if(b===null){if(g=x.return,g!==null){c=g;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===c)return f(x),r;if(b===g)return f(x),s;b=b.sibling}throw Error(i(188))}if(c.return!==g.return)c=x,g=b;else{for(var B=!1,O=x.child;O;){if(O===c){B=!0,c=x,g=b;break}if(O===g){B=!0,g=x,c=b;break}O=O.sibling}if(!B){for(O=b.child;O;){if(O===c){B=!0,c=b,g=x;break}if(O===g){B=!0,g=b,c=x;break}O=O.sibling}if(!B)throw Error(i(189))}}if(c.alternate!==g)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:s}function d(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=d(r),s!==null)return s;r=r.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function N(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var Y=Symbol.for("react.client.reference");function P(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===Y?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case y:return"Fragment";case C:return"Profiler";case w:return"StrictMode";case R:return"Suspense";case D:return"SuspenseList";case U:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case v:return"Portal";case E:return r.displayName||"Context";case S:return(r._context.displayName||"Context")+".Consumer";case M:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case T:return s=r.displayName||null,s!==null?s:P(r.type)||"Memo";case F:s=r._payload,r=r._init;try{return P(r(s))}catch{}}return null}var Q=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},Z=[],J=-1;function X(r){return{current:r}}function K(r){0>J||(r.current=Z[J],Z[J]=null,J--)}function te(r,s){J++,Z[J]=r.current,r.current=s}var ae=X(null),fe=X(null),de=X(null),he=X(null);function Pe(r,s){switch(te(de,s),te(fe,r),te(ae,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Z2(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Z2(s),r=J2(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}K(ae),te(ae,r)}function Re(){K(ae),K(fe),K(de)}function Lt(r){r.memoizedState!==null&&te(he,r);var s=ae.current,c=J2(s,r.type);s!==c&&(te(fe,r),te(ae,c))}function Wt(r){fe.current===r&&(K(ae),K(fe)),he.current===r&&(K(he),Fs._currentValue=H)}var Zt,In;function rr(r){if(Zt===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);Zt=s&&s[1]||"",In=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zt+r+In}var Qc=!1;function Wc(r,s){if(!r||Qc)return"";Qc=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(re){var ie=re}Reflect.construct(r,[],le)}else{try{le.call()}catch(re){ie=re}r.call(le.prototype)}}else{try{throw Error()}catch(re){ie=re}(le=r())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(re){if(re&&ie&&typeof re.stack=="string")return[re.stack,ie.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=g.DetermineComponentFrameRoot(),B=b[0],O=b[1];if(B&&O){var q=B.split(`
`),ne=O.split(`
`);for(x=g=0;g<q.length&&!q[g].includes("DetermineComponentFrameRoot");)g++;for(;x<ne.length&&!ne[x].includes("DetermineComponentFrameRoot");)x++;if(g===q.length||x===ne.length)for(g=q.length-1,x=ne.length-1;1<=g&&0<=x&&q[g]!==ne[x];)x--;for(;1<=g&&0<=x;g--,x--)if(q[g]!==ne[x]){if(g!==1||x!==1)do if(g--,x--,0>x||q[g]!==ne[x]){var se=`
`+q[g].replace(" at new "," at ");return r.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",r.displayName)),se}while(1<=g&&0<=x);break}}}finally{Qc=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?rr(c):""}function F5(r,s){switch(r.tag){case 26:case 27:case 5:return rr(r.type);case 16:return rr("Lazy");case 13:return r.child!==s&&s!==null?rr("Suspense Fallback"):rr("Suspense");case 19:return rr("SuspenseList");case 0:case 15:return Wc(r.type,!1);case 11:return Wc(r.type.render,!1);case 1:return Wc(r.type,!0);case 31:return rr("Activity");default:return""}}function T0(r){try{var s="",c=null;do s+=F5(r,c),c=r,r=r.return;while(r);return s}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Zc=Object.prototype.hasOwnProperty,Jc=e.unstable_scheduleCallback,$c=e.unstable_cancelCallback,B5=e.unstable_shouldYield,U5=e.unstable_requestPaint,Jt=e.unstable_now,N5=e.unstable_getCurrentPriorityLevel,R0=e.unstable_ImmediatePriority,F0=e.unstable_UserBlockingPriority,wo=e.unstable_NormalPriority,I5=e.unstable_LowPriority,B0=e.unstable_IdlePriority,V5=e.log,O5=e.unstable_setDisableYieldValue,Ya=null,$t=null;function vi(r){if(typeof V5=="function"&&O5(r),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Ya,r)}catch{}}var en=Math.clz32?Math.clz32:z5,L5=Math.log,P5=Math.LN2;function z5(r){return r>>>=0,r===0?32:31-(L5(r)/P5|0)|0}var bo=256,Co=262144,So=4194304;function ar(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Mo(r,s,c){var g=r.pendingLanes;if(g===0)return 0;var x=0,b=r.suspendedLanes,B=r.pingedLanes;r=r.warmLanes;var O=g&134217727;return O!==0?(g=O&~b,g!==0?x=ar(g):(B&=O,B!==0?x=ar(B):c||(c=O&~r,c!==0&&(x=ar(c))))):(O=g&~b,O!==0?x=ar(O):B!==0?x=ar(B):c||(c=g&~r,c!==0&&(x=ar(c)))),x===0?0:s!==0&&s!==x&&(s&b)===0&&(b=x&-x,c=s&-s,b>=c||b===32&&(c&4194048)!==0)?s:x}function Ha(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function k5(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U0(){var r=So;return So<<=1,(So&62914560)===0&&(So=4194304),r}function eu(r){for(var s=[],c=0;31>c;c++)s.push(r);return s}function Xa(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function G5(r,s,c,g,x,b){var B=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var O=r.entanglements,q=r.expirationTimes,ne=r.hiddenUpdates;for(c=B&~c;0<c;){var se=31-en(c),le=1<<se;O[se]=0,q[se]=-1;var ie=ne[se];if(ie!==null)for(ne[se]=null,se=0;se<ie.length;se++){var re=ie[se];re!==null&&(re.lane&=-536870913)}c&=~le}g!==0&&N0(r,g,0),b!==0&&x===0&&r.tag!==0&&(r.suspendedLanes|=b&~(B&~s))}function N0(r,s,c){r.pendingLanes|=s,r.suspendedLanes&=~s;var g=31-en(s);r.entangledLanes|=s,r.entanglements[g]=r.entanglements[g]|1073741824|c&261930}function I0(r,s){var c=r.entangledLanes|=s;for(r=r.entanglements;c;){var g=31-en(c),x=1<<g;x&s|r[g]&s&&(r[g]|=s),c&=~x}}function V0(r,s){var c=s&-s;return c=(c&42)!==0?1:tu(c),(c&(r.suspendedLanes|s))!==0?0:c}function tu(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function nu(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function O0(){var r=j.p;return r!==0?r:(r=window.event,r===void 0?32:wg(r.type))}function L0(r,s){var c=j.p;try{return j.p=r,s()}finally{j.p=c}}var xi=Math.random().toString(36).slice(2),St="__reactFiber$"+xi,Pt="__reactProps$"+xi,Lr="__reactContainer$"+xi,iu="__reactEvents$"+xi,Y5="__reactListeners$"+xi,H5="__reactHandles$"+xi,P0="__reactResources$"+xi,ja="__reactMarker$"+xi;function ru(r){delete r[St],delete r[Pt],delete r[iu],delete r[Y5],delete r[H5]}function Pr(r){var s=r[St];if(s)return s;for(var c=r.parentNode;c;){if(s=c[Lr]||c[St]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(r=ag(r);r!==null;){if(c=r[St])return c;r=ag(r)}return s}r=c,c=r.parentNode}return null}function zr(r){if(r=r[St]||r[Lr]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function qa(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function kr(r){var s=r[P0];return s||(s=r[P0]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function xt(r){r[ja]=!0}var z0=new Set,k0={};function sr(r,s){Gr(r,s),Gr(r+"Capture",s)}function Gr(r,s){for(k0[r]=s,r=0;r<s.length;r++)z0.add(s[r])}var X5=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),G0={},Y0={};function j5(r){return Zc.call(Y0,r)?!0:Zc.call(G0,r)?!1:X5.test(r)?Y0[r]=!0:(G0[r]=!0,!1)}function Eo(r,s,c){if(j5(s))if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+c)}}function Do(r,s,c){if(c===null)r.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+c)}}function qn(r,s,c,g){if(g===null)r.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(s,c,""+g)}}function fn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function H0(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function q5(r,s,c){var g=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,b=g.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return x.call(this)},set:function(B){c=""+B,b.call(this,B)}}),Object.defineProperty(r,s,{enumerable:g.enumerable}),{getValue:function(){return c},setValue:function(B){c=""+B},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function au(r){if(!r._valueTracker){var s=H0(r)?"checked":"value";r._valueTracker=q5(r,s,""+r[s])}}function X0(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var c=s.getValue(),g="";return r&&(g=H0(r)?r.checked?"true":"false":r.value),r=g,r!==c?(s.setValue(r),!0):!1}function To(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var _5=/[\n"\\]/g;function hn(r){return r.replace(_5,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function su(r,s,c,g,x,b,B,O){r.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?r.type=B:r.removeAttribute("type"),s!=null?B==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+fn(s)):r.value!==""+fn(s)&&(r.value=""+fn(s)):B!=="submit"&&B!=="reset"||r.removeAttribute("value"),s!=null?ou(r,B,fn(s)):c!=null?ou(r,B,fn(c)):g!=null&&r.removeAttribute("value"),x==null&&b!=null&&(r.defaultChecked=!!b),x!=null&&(r.checked=x&&typeof x!="function"&&typeof x!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.name=""+fn(O):r.removeAttribute("name")}function j0(r,s,c,g,x,b,B,O){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.type=b),s!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||s!=null)){au(r);return}c=c!=null?""+fn(c):"",s=s!=null?""+fn(s):c,O||s===r.value||(r.value=s),r.defaultValue=s}g=g??x,g=typeof g!="function"&&typeof g!="symbol"&&!!g,r.checked=O?r.checked:!!g,r.defaultChecked=!!g,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(r.name=B),au(r)}function ou(r,s,c){s==="number"&&To(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function Yr(r,s,c,g){if(r=r.options,s){s={};for(var x=0;x<c.length;x++)s["$"+c[x]]=!0;for(c=0;c<r.length;c++)x=s.hasOwnProperty("$"+r[c].value),r[c].selected!==x&&(r[c].selected=x),x&&g&&(r[c].defaultSelected=!0)}else{for(c=""+fn(c),s=null,x=0;x<r.length;x++){if(r[x].value===c){r[x].selected=!0,g&&(r[x].defaultSelected=!0);return}s!==null||r[x].disabled||(s=r[x])}s!==null&&(s.selected=!0)}}function q0(r,s,c){if(s!=null&&(s=""+fn(s),s!==r.value&&(r.value=s),c==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=c!=null?""+fn(c):""}function _0(r,s,c,g){if(s==null){if(g!=null){if(c!=null)throw Error(i(92));if(Q(g)){if(1<g.length)throw Error(i(93));g=g[0]}c=g}c==null&&(c=""),s=c}c=fn(s),r.defaultValue=c,g=r.textContent,g===c&&g!==""&&g!==null&&(r.value=g),au(r)}function Hr(r,s){if(s){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=s;return}}r.textContent=s}var K5=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function K0(r,s,c){var g=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?g?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":g?r.setProperty(s,c):typeof c!="number"||c===0||K5.has(s)?s==="float"?r.cssFloat=c:r[s]=(""+c).trim():r[s]=c+"px"}function Q0(r,s,c){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,c!=null){for(var g in c)!c.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?r.setProperty(g,""):g==="float"?r.cssFloat="":r[g]="");for(var x in s)g=s[x],s.hasOwnProperty(x)&&c[x]!==g&&K0(r,x,g)}else for(var b in s)s.hasOwnProperty(b)&&K0(r,b,s[b])}function lu(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Q5=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),W5=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ro(r){return W5.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function _n(){}var cu=null;function uu(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Xr=null,jr=null;function W0(r){var s=zr(r);if(s&&(r=s.stateNode)){var c=r[Pt]||null;e:switch(r=s.stateNode,s.type){case"input":if(su(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+hn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var g=c[s];if(g!==r&&g.form===r.form){var x=g[Pt]||null;if(!x)throw Error(i(90));su(g,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(s=0;s<c.length;s++)g=c[s],g.form===r.form&&X0(g)}break e;case"textarea":q0(r,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Yr(r,!!c.multiple,s,!1)}}}var fu=!1;function Z0(r,s,c){if(fu)return r(s,c);fu=!0;try{var g=r(s);return g}finally{if(fu=!1,(Xr!==null||jr!==null)&&(pl(),Xr&&(s=Xr,r=jr,jr=Xr=null,W0(s),r)))for(s=0;s<r.length;s++)W0(r[s])}}function _a(r,s){var c=r.stateNode;if(c===null)return null;var g=c[Pt]||null;if(g===null)return null;c=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(r=r.type,g=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!g;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,s,typeof c));return c}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hu=!1;if(Kn)try{var Ka={};Object.defineProperty(Ka,"passive",{get:function(){hu=!0}}),window.addEventListener("test",Ka,Ka),window.removeEventListener("test",Ka,Ka)}catch{hu=!1}var yi=null,du=null,Fo=null;function J0(){if(Fo)return Fo;var r,s=du,c=s.length,g,x="value"in yi?yi.value:yi.textContent,b=x.length;for(r=0;r<c&&s[r]===x[r];r++);var B=c-r;for(g=1;g<=B&&s[c-g]===x[b-g];g++);return Fo=x.slice(r,1<g?1-g:void 0)}function Bo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Uo(){return!0}function $0(){return!1}function zt(r){function s(c,g,x,b,B){this._reactName=c,this._targetInst=x,this.type=g,this.nativeEvent=b,this.target=B,this.currentTarget=null;for(var O in r)r.hasOwnProperty(O)&&(c=r[O],this[O]=c?c(b):b[O]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Uo:$0,this.isPropagationStopped=$0,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Uo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Uo)},persist:function(){},isPersistent:Uo}),s}var or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},No=zt(or),Qa=m({},or,{view:0,detail:0}),Z5=zt(Qa),mu,gu,Wa,Io=m({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Au,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Wa&&(Wa&&r.type==="mousemove"?(mu=r.screenX-Wa.screenX,gu=r.screenY-Wa.screenY):gu=mu=0,Wa=r),mu)},movementY:function(r){return"movementY"in r?r.movementY:gu}}),e1=zt(Io),J5=m({},Io,{dataTransfer:0}),$5=zt(J5),e3=m({},Qa,{relatedTarget:0}),pu=zt(e3),t3=m({},or,{animationName:0,elapsedTime:0,pseudoElement:0}),n3=zt(t3),i3=m({},or,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),r3=zt(i3),a3=m({},or,{data:0}),t1=zt(a3),s3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c3(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=l3[r])?!!s[r]:!1}function Au(){return c3}var u3=m({},Qa,{key:function(r){if(r.key){var s=s3[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Bo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?o3[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Au,charCode:function(r){return r.type==="keypress"?Bo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Bo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),f3=zt(u3),h3=m({},Io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n1=zt(h3),d3=m({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Au}),m3=zt(d3),g3=m({},or,{propertyName:0,elapsedTime:0,pseudoElement:0}),p3=zt(g3),A3=m({},Io,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),v3=zt(A3),x3=m({},or,{newState:0,oldState:0}),y3=zt(x3),w3=[9,13,27,32],vu=Kn&&"CompositionEvent"in window,Za=null;Kn&&"documentMode"in document&&(Za=document.documentMode);var b3=Kn&&"TextEvent"in window&&!Za,i1=Kn&&(!vu||Za&&8<Za&&11>=Za),r1=" ",a1=!1;function s1(r,s){switch(r){case"keyup":return w3.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function o1(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var qr=!1;function C3(r,s){switch(r){case"compositionend":return o1(s);case"keypress":return s.which!==32?null:(a1=!0,r1);case"textInput":return r=s.data,r===r1&&a1?null:r;default:return null}}function S3(r,s){if(qr)return r==="compositionend"||!vu&&s1(r,s)?(r=J0(),Fo=du=yi=null,qr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return i1&&s.locale!=="ko"?null:s.data;default:return null}}var M3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l1(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!M3[r.type]:s==="textarea"}function c1(r,s,c,g){Xr?jr?jr.push(g):jr=[g]:Xr=g,s=Cl(s,"onChange"),0<s.length&&(c=new No("onChange","change",null,c,g),r.push({event:c,listeners:s}))}var Ja=null,$a=null;function E3(r){j2(r,0)}function Vo(r){var s=qa(r);if(X0(s))return r}function u1(r,s){if(r==="change")return s}var f1=!1;if(Kn){var xu;if(Kn){var yu="oninput"in document;if(!yu){var h1=document.createElement("div");h1.setAttribute("oninput","return;"),yu=typeof h1.oninput=="function"}xu=yu}else xu=!1;f1=xu&&(!document.documentMode||9<document.documentMode)}function d1(){Ja&&(Ja.detachEvent("onpropertychange",m1),$a=Ja=null)}function m1(r){if(r.propertyName==="value"&&Vo($a)){var s=[];c1(s,$a,r,uu(r)),Z0(E3,s)}}function D3(r,s,c){r==="focusin"?(d1(),Ja=s,$a=c,Ja.attachEvent("onpropertychange",m1)):r==="focusout"&&d1()}function T3(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Vo($a)}function R3(r,s){if(r==="click")return Vo(s)}function F3(r,s){if(r==="input"||r==="change")return Vo(s)}function B3(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var tn=typeof Object.is=="function"?Object.is:B3;function es(r,s){if(tn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var c=Object.keys(r),g=Object.keys(s);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var x=c[g];if(!Zc.call(s,x)||!tn(r[x],s[x]))return!1}return!0}function g1(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function p1(r,s){var c=g1(r);r=0;for(var g;c;){if(c.nodeType===3){if(g=r+c.textContent.length,r<=s&&g>=s)return{node:c,offset:s-r};r=g}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=g1(c)}}function A1(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?A1(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function v1(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=To(r.document);s instanceof r.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)r=s.contentWindow;else break;s=To(r.document)}return s}function wu(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var U3=Kn&&"documentMode"in document&&11>=document.documentMode,_r=null,bu=null,ts=null,Cu=!1;function x1(r,s,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Cu||_r==null||_r!==To(g)||(g=_r,"selectionStart"in g&&wu(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ts&&es(ts,g)||(ts=g,g=Cl(bu,"onSelect"),0<g.length&&(s=new No("onSelect","select",null,s,c),r.push({event:s,listeners:g}),s.target=_r)))}function lr(r,s){var c={};return c[r.toLowerCase()]=s.toLowerCase(),c["Webkit"+r]="webkit"+s,c["Moz"+r]="moz"+s,c}var Kr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},Su={},y1={};Kn&&(y1=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function cr(r){if(Su[r])return Su[r];if(!Kr[r])return r;var s=Kr[r],c;for(c in s)if(s.hasOwnProperty(c)&&c in y1)return Su[r]=s[c];return r}var w1=cr("animationend"),b1=cr("animationiteration"),C1=cr("animationstart"),N3=cr("transitionrun"),I3=cr("transitionstart"),V3=cr("transitioncancel"),S1=cr("transitionend"),M1=new Map,Mu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mu.push("scrollEnd");function Mn(r,s){M1.set(r,s),sr(s,[r])}var Oo=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},dn=[],Qr=0,Eu=0;function Lo(){for(var r=Qr,s=Eu=Qr=0;s<r;){var c=dn[s];dn[s++]=null;var g=dn[s];dn[s++]=null;var x=dn[s];dn[s++]=null;var b=dn[s];if(dn[s++]=null,g!==null&&x!==null){var B=g.pending;B===null?x.next=x:(x.next=B.next,B.next=x),g.pending=x}b!==0&&E1(c,x,b)}}function Po(r,s,c,g){dn[Qr++]=r,dn[Qr++]=s,dn[Qr++]=c,dn[Qr++]=g,Eu|=g,r.lanes|=g,r=r.alternate,r!==null&&(r.lanes|=g)}function Du(r,s,c,g){return Po(r,s,c,g),zo(r)}function ur(r,s){return Po(r,null,null,s),zo(r)}function E1(r,s,c){r.lanes|=c;var g=r.alternate;g!==null&&(g.lanes|=c);for(var x=!1,b=r.return;b!==null;)b.childLanes|=c,g=b.alternate,g!==null&&(g.childLanes|=c),b.tag===22&&(r=b.stateNode,r===null||r._visibility&1||(x=!0)),r=b,b=b.return;return r.tag===3?(b=r.stateNode,x&&s!==null&&(x=31-en(c),r=b.hiddenUpdates,g=r[x],g===null?r[x]=[s]:g.push(s),s.lane=c|536870912),b):null}function zo(r){if(50<Cs)throw Cs=0,Lf=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Wr={};function O3(r,s,c,g){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(r,s,c,g){return new O3(r,s,c,g)}function Tu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Qn(r,s){var c=r.alternate;return c===null?(c=nn(r.tag,s,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=s,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,s=r.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function D1(r,s){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,s=c.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function ko(r,s,c,g,x,b){var B=0;if(g=r,typeof r=="function")Tu(r)&&(B=1);else if(typeof r=="string")B=G4(r,c,ae.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case U:return r=nn(31,c,s,x),r.elementType=U,r.lanes=b,r;case y:return fr(c.children,x,b,s);case w:B=8,x|=24;break;case C:return r=nn(12,c,s,x|2),r.elementType=C,r.lanes=b,r;case R:return r=nn(13,c,s,x),r.elementType=R,r.lanes=b,r;case D:return r=nn(19,c,s,x),r.elementType=D,r.lanes=b,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E:B=10;break e;case S:B=9;break e;case M:B=11;break e;case T:B=14;break e;case F:B=16,g=null;break e}B=29,c=Error(i(130,r===null?"null":typeof r,"")),g=null}return s=nn(B,c,s,x),s.elementType=r,s.type=g,s.lanes=b,s}function fr(r,s,c,g){return r=nn(7,r,g,s),r.lanes=c,r}function Ru(r,s,c){return r=nn(6,r,null,s),r.lanes=c,r}function T1(r){var s=nn(18,null,null,0);return s.stateNode=r,s}function Fu(r,s,c){return s=nn(4,r.children!==null?r.children:[],r.key,s),s.lanes=c,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var R1=new WeakMap;function mn(r,s){if(typeof r=="object"&&r!==null){var c=R1.get(r);return c!==void 0?c:(s={value:r,source:s,stack:T0(s)},R1.set(r,s),s)}return{value:r,source:s,stack:T0(s)}}var Zr=[],Jr=0,Go=null,ns=0,gn=[],pn=0,wi=null,Vn=1,On="";function Wn(r,s){Zr[Jr++]=ns,Zr[Jr++]=Go,Go=r,ns=s}function F1(r,s,c){gn[pn++]=Vn,gn[pn++]=On,gn[pn++]=wi,wi=r;var g=Vn;r=On;var x=32-en(g)-1;g&=~(1<<x),c+=1;var b=32-en(s)+x;if(30<b){var B=x-x%5;b=(g&(1<<B)-1).toString(32),g>>=B,x-=B,Vn=1<<32-en(s)+x|c<<x|g,On=b+r}else Vn=1<<b|c<<x|g,On=r}function Bu(r){r.return!==null&&(Wn(r,1),F1(r,1,0))}function Uu(r){for(;r===Go;)Go=Zr[--Jr],Zr[Jr]=null,ns=Zr[--Jr],Zr[Jr]=null;for(;r===wi;)wi=gn[--pn],gn[pn]=null,On=gn[--pn],gn[pn]=null,Vn=gn[--pn],gn[pn]=null}function B1(r,s){gn[pn++]=Vn,gn[pn++]=On,gn[pn++]=wi,Vn=s.id,On=s.overflow,wi=r}var Mt=null,$e=null,Oe=!1,bi=null,An=!1,Nu=Error(i(519));function Ci(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw is(mn(s,r)),Nu}function U1(r){var s=r.stateNode,c=r.type,g=r.memoizedProps;switch(s[St]=r,s[Pt]=g,c){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(c=0;c<Ms.length;c++)Be(Ms[c],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":Be("invalid",s),j0(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Be("invalid",s);break;case"textarea":Be("invalid",s),_0(s,g.value,g.defaultValue,g.children)}c=g.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||g.suppressHydrationWarning===!0||Q2(s.textContent,c)?(g.popover!=null&&(Be("beforetoggle",s),Be("toggle",s)),g.onScroll!=null&&Be("scroll",s),g.onScrollEnd!=null&&Be("scrollend",s),g.onClick!=null&&(s.onclick=_n),s=!0):s=!1,s||Ci(r,!0)}function N1(r){for(Mt=r.return;Mt;)switch(Mt.tag){case 5:case 31:case 13:An=!1;return;case 27:case 3:An=!0;return;default:Mt=Mt.return}}function $r(r){if(r!==Mt)return!1;if(!Oe)return N1(r),Oe=!0,!1;var s=r.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||Jf(r.type,r.memoizedProps)),c=!c),c&&$e&&Ci(r),N1(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));$e=rg(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));$e=rg(r)}else s===27?(s=$e,Li(r.type)?(r=ih,ih=null,$e=r):$e=s):$e=Mt?xn(r.stateNode.nextSibling):null;return!0}function hr(){$e=Mt=null,Oe=!1}function Iu(){var r=bi;return r!==null&&(Ht===null?Ht=r:Ht.push.apply(Ht,r),bi=null),r}function is(r){bi===null?bi=[r]:bi.push(r)}var Vu=X(null),dr=null,Zn=null;function Si(r,s,c){te(Vu,s._currentValue),s._currentValue=c}function Jn(r){r._currentValue=Vu.current,K(Vu)}function Ou(r,s,c){for(;r!==null;){var g=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),r===c)break;r=r.return}}function Lu(r,s,c,g){var x=r.child;for(x!==null&&(x.return=r);x!==null;){var b=x.dependencies;if(b!==null){var B=x.child;b=b.firstContext;e:for(;b!==null;){var O=b;b=x;for(var q=0;q<s.length;q++)if(O.context===s[q]){b.lanes|=c,O=b.alternate,O!==null&&(O.lanes|=c),Ou(b.return,c,r),g||(B=null);break e}b=O.next}}else if(x.tag===18){if(B=x.return,B===null)throw Error(i(341));B.lanes|=c,b=B.alternate,b!==null&&(b.lanes|=c),Ou(B,c,r),B=null}else B=x.child;if(B!==null)B.return=x;else for(B=x;B!==null;){if(B===r){B=null;break}if(x=B.sibling,x!==null){x.return=B.return,B=x;break}B=B.return}x=B}}function ea(r,s,c,g){r=null;for(var x=s,b=!1;x!==null;){if(!b){if((x.flags&524288)!==0)b=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var B=x.alternate;if(B===null)throw Error(i(387));if(B=B.memoizedProps,B!==null){var O=x.type;tn(x.pendingProps.value,B.value)||(r!==null?r.push(O):r=[O])}}else if(x===he.current){if(B=x.alternate,B===null)throw Error(i(387));B.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(r!==null?r.push(Fs):r=[Fs])}x=x.return}r!==null&&Lu(s,r,c,g),s.flags|=262144}function Yo(r){for(r=r.firstContext;r!==null;){if(!tn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function mr(r){dr=r,Zn=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Et(r){return I1(dr,r)}function Ho(r,s){return dr===null&&mr(r),I1(r,s)}function I1(r,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Zn===null){if(r===null)throw Error(i(308));Zn=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Zn=Zn.next=s;return c}var L3=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(c,g){r.push(g)}};this.abort=function(){s.aborted=!0,r.forEach(function(c){return c()})}},P3=e.unstable_scheduleCallback,z3=e.unstable_NormalPriority,ft={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pu(){return{controller:new L3,data:new Map,refCount:0}}function rs(r){r.refCount--,r.refCount===0&&P3(z3,function(){r.controller.abort()})}var as=null,zu=0,ta=0,na=null;function k3(r,s){if(as===null){var c=as=[];zu=0,ta=Hf(),na={status:"pending",value:void 0,then:function(g){c.push(g)}}}return zu++,s.then(V1,V1),s}function V1(){if(--zu===0&&as!==null){na!==null&&(na.status="fulfilled");var r=as;as=null,ta=0,na=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function G3(r,s){var c=[],g={status:"pending",value:null,reason:null,then:function(x){c.push(x)}};return r.then(function(){g.status="fulfilled",g.value=s;for(var x=0;x<c.length;x++)(0,c[x])(s)},function(x){for(g.status="rejected",g.reason=x,x=0;x<c.length;x++)(0,c[x])(void 0)}),g}var O1=k.S;k.S=function(r,s){x2=Jt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&k3(r,s),O1!==null&&O1(r,s)};var gr=X(null);function ku(){var r=gr.current;return r!==null?r:Ze.pooledCache}function Xo(r,s){s===null?te(gr,gr.current):te(gr,s.pool)}function L1(){var r=ku();return r===null?null:{parent:ft._currentValue,pool:r}}var ia=Error(i(460)),Gu=Error(i(474)),jo=Error(i(542)),qo={then:function(){}};function P1(r){return r=r.status,r==="fulfilled"||r==="rejected"}function z1(r,s,c){switch(c=r[c],c===void 0?r.push(s):c!==s&&(s.then(_n,_n),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,G1(r),r;default:if(typeof s.status=="string")s.then(_n,_n);else{if(r=Ze,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(g){if(s.status==="pending"){var x=s;x.status="fulfilled",x.value=g}},function(g){if(s.status==="pending"){var x=s;x.status="rejected",x.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,G1(r),r}throw Ar=s,ia}}function pr(r){try{var s=r._init;return s(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ar=c,ia):c}}var Ar=null;function k1(){if(Ar===null)throw Error(i(459));var r=Ar;return Ar=null,r}function G1(r){if(r===ia||r===jo)throw Error(i(483))}var ra=null,ss=0;function _o(r){var s=ss;return ss+=1,ra===null&&(ra=[]),z1(ra,r,s)}function os(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Ko(r,s){throw s.$$typeof===p?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Y1(r){function s(W,_){if(r){var ee=W.deletions;ee===null?(W.deletions=[_],W.flags|=16):ee.push(_)}}function c(W,_){if(!r)return null;for(;_!==null;)s(W,_),_=_.sibling;return null}function g(W){for(var _=new Map;W!==null;)W.key!==null?_.set(W.key,W):_.set(W.index,W),W=W.sibling;return _}function x(W,_){return W=Qn(W,_),W.index=0,W.sibling=null,W}function b(W,_,ee){return W.index=ee,r?(ee=W.alternate,ee!==null?(ee=ee.index,ee<_?(W.flags|=67108866,_):ee):(W.flags|=67108866,_)):(W.flags|=1048576,_)}function B(W){return r&&W.alternate===null&&(W.flags|=67108866),W}function O(W,_,ee,oe){return _===null||_.tag!==6?(_=Ru(ee,W.mode,oe),_.return=W,_):(_=x(_,ee),_.return=W,_)}function q(W,_,ee,oe){var ye=ee.type;return ye===y?se(W,_,ee.props.children,oe,ee.key):_!==null&&(_.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===F&&pr(ye)===_.type)?(_=x(_,ee.props),os(_,ee),_.return=W,_):(_=ko(ee.type,ee.key,ee.props,null,W.mode,oe),os(_,ee),_.return=W,_)}function ne(W,_,ee,oe){return _===null||_.tag!==4||_.stateNode.containerInfo!==ee.containerInfo||_.stateNode.implementation!==ee.implementation?(_=Fu(ee,W.mode,oe),_.return=W,_):(_=x(_,ee.children||[]),_.return=W,_)}function se(W,_,ee,oe,ye){return _===null||_.tag!==7?(_=fr(ee,W.mode,oe,ye),_.return=W,_):(_=x(_,ee),_.return=W,_)}function le(W,_,ee){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=Ru(""+_,W.mode,ee),_.return=W,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case A:return ee=ko(_.type,_.key,_.props,null,W.mode,ee),os(ee,_),ee.return=W,ee;case v:return _=Fu(_,W.mode,ee),_.return=W,_;case F:return _=pr(_),le(W,_,ee)}if(Q(_)||N(_))return _=fr(_,W.mode,ee,null),_.return=W,_;if(typeof _.then=="function")return le(W,_o(_),ee);if(_.$$typeof===E)return le(W,Ho(W,_),ee);Ko(W,_)}return null}function ie(W,_,ee,oe){var ye=_!==null?_.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ye!==null?null:O(W,_,""+ee,oe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case A:return ee.key===ye?q(W,_,ee,oe):null;case v:return ee.key===ye?ne(W,_,ee,oe):null;case F:return ee=pr(ee),ie(W,_,ee,oe)}if(Q(ee)||N(ee))return ye!==null?null:se(W,_,ee,oe,null);if(typeof ee.then=="function")return ie(W,_,_o(ee),oe);if(ee.$$typeof===E)return ie(W,_,Ho(W,ee),oe);Ko(W,ee)}return null}function re(W,_,ee,oe,ye){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return W=W.get(ee)||null,O(_,W,""+oe,ye);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case A:return W=W.get(oe.key===null?ee:oe.key)||null,q(_,W,oe,ye);case v:return W=W.get(oe.key===null?ee:oe.key)||null,ne(_,W,oe,ye);case F:return oe=pr(oe),re(W,_,ee,oe,ye)}if(Q(oe)||N(oe))return W=W.get(ee)||null,se(_,W,oe,ye,null);if(typeof oe.then=="function")return re(W,_,ee,_o(oe),ye);if(oe.$$typeof===E)return re(W,_,ee,Ho(_,oe),ye);Ko(_,oe)}return null}function ge(W,_,ee,oe){for(var ye=null,ke=null,xe=_,De=_=0,Ve=null;xe!==null&&De<ee.length;De++){xe.index>De?(Ve=xe,xe=null):Ve=xe.sibling;var Ge=ie(W,xe,ee[De],oe);if(Ge===null){xe===null&&(xe=Ve);break}r&&xe&&Ge.alternate===null&&s(W,xe),_=b(Ge,_,De),ke===null?ye=Ge:ke.sibling=Ge,ke=Ge,xe=Ve}if(De===ee.length)return c(W,xe),Oe&&Wn(W,De),ye;if(xe===null){for(;De<ee.length;De++)xe=le(W,ee[De],oe),xe!==null&&(_=b(xe,_,De),ke===null?ye=xe:ke.sibling=xe,ke=xe);return Oe&&Wn(W,De),ye}for(xe=g(xe);De<ee.length;De++)Ve=re(xe,W,De,ee[De],oe),Ve!==null&&(r&&Ve.alternate!==null&&xe.delete(Ve.key===null?De:Ve.key),_=b(Ve,_,De),ke===null?ye=Ve:ke.sibling=Ve,ke=Ve);return r&&xe.forEach(function(Yi){return s(W,Yi)}),Oe&&Wn(W,De),ye}function we(W,_,ee,oe){if(ee==null)throw Error(i(151));for(var ye=null,ke=null,xe=_,De=_=0,Ve=null,Ge=ee.next();xe!==null&&!Ge.done;De++,Ge=ee.next()){xe.index>De?(Ve=xe,xe=null):Ve=xe.sibling;var Yi=ie(W,xe,Ge.value,oe);if(Yi===null){xe===null&&(xe=Ve);break}r&&xe&&Yi.alternate===null&&s(W,xe),_=b(Yi,_,De),ke===null?ye=Yi:ke.sibling=Yi,ke=Yi,xe=Ve}if(Ge.done)return c(W,xe),Oe&&Wn(W,De),ye;if(xe===null){for(;!Ge.done;De++,Ge=ee.next())Ge=le(W,Ge.value,oe),Ge!==null&&(_=b(Ge,_,De),ke===null?ye=Ge:ke.sibling=Ge,ke=Ge);return Oe&&Wn(W,De),ye}for(xe=g(xe);!Ge.done;De++,Ge=ee.next())Ge=re(xe,W,De,Ge.value,oe),Ge!==null&&(r&&Ge.alternate!==null&&xe.delete(Ge.key===null?De:Ge.key),_=b(Ge,_,De),ke===null?ye=Ge:ke.sibling=Ge,ke=Ge);return r&&xe.forEach(function(J4){return s(W,J4)}),Oe&&Wn(W,De),ye}function We(W,_,ee,oe){if(typeof ee=="object"&&ee!==null&&ee.type===y&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case A:e:{for(var ye=ee.key;_!==null;){if(_.key===ye){if(ye=ee.type,ye===y){if(_.tag===7){c(W,_.sibling),oe=x(_,ee.props.children),oe.return=W,W=oe;break e}}else if(_.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===F&&pr(ye)===_.type){c(W,_.sibling),oe=x(_,ee.props),os(oe,ee),oe.return=W,W=oe;break e}c(W,_);break}else s(W,_);_=_.sibling}ee.type===y?(oe=fr(ee.props.children,W.mode,oe,ee.key),oe.return=W,W=oe):(oe=ko(ee.type,ee.key,ee.props,null,W.mode,oe),os(oe,ee),oe.return=W,W=oe)}return B(W);case v:e:{for(ye=ee.key;_!==null;){if(_.key===ye)if(_.tag===4&&_.stateNode.containerInfo===ee.containerInfo&&_.stateNode.implementation===ee.implementation){c(W,_.sibling),oe=x(_,ee.children||[]),oe.return=W,W=oe;break e}else{c(W,_);break}else s(W,_);_=_.sibling}oe=Fu(ee,W.mode,oe),oe.return=W,W=oe}return B(W);case F:return ee=pr(ee),We(W,_,ee,oe)}if(Q(ee))return ge(W,_,ee,oe);if(N(ee)){if(ye=N(ee),typeof ye!="function")throw Error(i(150));return ee=ye.call(ee),we(W,_,ee,oe)}if(typeof ee.then=="function")return We(W,_,_o(ee),oe);if(ee.$$typeof===E)return We(W,_,Ho(W,ee),oe);Ko(W,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,_!==null&&_.tag===6?(c(W,_.sibling),oe=x(_,ee),oe.return=W,W=oe):(c(W,_),oe=Ru(ee,W.mode,oe),oe.return=W,W=oe),B(W)):c(W,_)}return function(W,_,ee,oe){try{ss=0;var ye=We(W,_,ee,oe);return ra=null,ye}catch(xe){if(xe===ia||xe===jo)throw xe;var ke=nn(29,xe,null,W.mode);return ke.lanes=oe,ke.return=W,ke}}}var vr=Y1(!0),H1=Y1(!1),Mi=!1;function Yu(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hu(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ei(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Di(r,s,c){var g=r.updateQueue;if(g===null)return null;if(g=g.shared,(He&2)!==0){var x=g.pending;return x===null?s.next=s:(s.next=x.next,x.next=s),g.pending=s,s=zo(r),E1(r,null,c),s}return Po(r,g,s,c),zo(r)}function ls(r,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var g=s.lanes;g&=r.pendingLanes,c|=g,s.lanes=c,I0(r,c)}}function Xu(r,s){var c=r.updateQueue,g=r.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var x=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var B={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?x=b=B:b=b.next=B,c=c.next}while(c!==null);b===null?x=b=s:b=b.next=s}else x=b=s;c={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:g.shared,callbacks:g.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=s:r.next=s,c.lastBaseUpdate=s}var ju=!1;function cs(){if(ju){var r=na;if(r!==null)throw r}}function us(r,s,c,g){ju=!1;var x=r.updateQueue;Mi=!1;var b=x.firstBaseUpdate,B=x.lastBaseUpdate,O=x.shared.pending;if(O!==null){x.shared.pending=null;var q=O,ne=q.next;q.next=null,B===null?b=ne:B.next=ne,B=q;var se=r.alternate;se!==null&&(se=se.updateQueue,O=se.lastBaseUpdate,O!==B&&(O===null?se.firstBaseUpdate=ne:O.next=ne,se.lastBaseUpdate=q))}if(b!==null){var le=x.baseState;B=0,se=ne=q=null,O=b;do{var ie=O.lane&-536870913,re=ie!==O.lane;if(re?(Ie&ie)===ie:(g&ie)===ie){ie!==0&&ie===ta&&(ju=!0),se!==null&&(se=se.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var ge=r,we=O;ie=s;var We=c;switch(we.tag){case 1:if(ge=we.payload,typeof ge=="function"){le=ge.call(We,le,ie);break e}le=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=we.payload,ie=typeof ge=="function"?ge.call(We,le,ie):ge,ie==null)break e;le=m({},le,ie);break e;case 2:Mi=!0}}ie=O.callback,ie!==null&&(r.flags|=64,re&&(r.flags|=8192),re=x.callbacks,re===null?x.callbacks=[ie]:re.push(ie))}else re={lane:ie,tag:O.tag,payload:O.payload,callback:O.callback,next:null},se===null?(ne=se=re,q=le):se=se.next=re,B|=ie;if(O=O.next,O===null){if(O=x.shared.pending,O===null)break;re=O,O=re.next,re.next=null,x.lastBaseUpdate=re,x.shared.pending=null}}while(!0);se===null&&(q=le),x.baseState=q,x.firstBaseUpdate=ne,x.lastBaseUpdate=se,b===null&&(x.shared.lanes=0),Ui|=B,r.lanes=B,r.memoizedState=le}}function X1(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function j1(r,s){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)X1(c[r],s)}var aa=X(null),Qo=X(0);function q1(r,s){r=oi,te(Qo,r),te(aa,s),oi=r|s.baseLanes}function qu(){te(Qo,oi),te(aa,aa.current)}function _u(){oi=Qo.current,K(aa),K(Qo)}var rn=X(null),vn=null;function Ti(r){var s=r.alternate;te(ct,ct.current&1),te(rn,r),vn===null&&(s===null||aa.current!==null||s.memoizedState!==null)&&(vn=r)}function Ku(r){te(ct,ct.current),te(rn,r),vn===null&&(vn=r)}function _1(r){r.tag===22?(te(ct,ct.current),te(rn,r),vn===null&&(vn=r)):Ri()}function Ri(){te(ct,ct.current),te(rn,rn.current)}function an(r){K(rn),vn===r&&(vn=null),K(ct)}var ct=X(0);function Wo(r){for(var s=r;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||th(c)||nh(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var $n=0,Ee=null,Ke=null,ht=null,Zo=!1,sa=!1,xr=!1,Jo=0,fs=0,oa=null,Y3=0;function st(){throw Error(i(321))}function Qu(r,s){if(s===null)return!1;for(var c=0;c<s.length&&c<r.length;c++)if(!tn(r[c],s[c]))return!1;return!0}function Wu(r,s,c,g,x,b){return $n=b,Ee=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,k.H=r===null||r.memoizedState===null?Fm:hf,xr=!1,b=c(g,x),xr=!1,sa&&(b=Q1(s,c,g,x)),K1(r),b}function K1(r){k.H=ms;var s=Ke!==null&&Ke.next!==null;if($n=0,ht=Ke=Ee=null,Zo=!1,fs=0,oa=null,s)throw Error(i(300));r===null||dt||(r=r.dependencies,r!==null&&Yo(r)&&(dt=!0))}function Q1(r,s,c,g){Ee=r;var x=0;do{if(sa&&(oa=null),fs=0,sa=!1,25<=x)throw Error(i(301));if(x+=1,ht=Ke=null,r.updateQueue!=null){var b=r.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}k.H=Bm,b=s(c,g)}while(sa);return b}function H3(){var r=k.H,s=r.useState()[0];return s=typeof s.then=="function"?hs(s):s,r=r.useState()[0],(Ke!==null?Ke.memoizedState:null)!==r&&(Ee.flags|=1024),s}function Zu(){var r=Jo!==0;return Jo=0,r}function Ju(r,s,c){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~c}function $u(r){if(Zo){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zo=!1}$n=0,ht=Ke=Ee=null,sa=!1,fs=Jo=0,oa=null}function Ut(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ee.memoizedState=ht=r:ht=ht.next=r,ht}function ut(){if(Ke===null){var r=Ee.alternate;r=r!==null?r.memoizedState:null}else r=Ke.next;var s=ht===null?Ee.memoizedState:ht.next;if(s!==null)ht=s,Ke=r;else{if(r===null)throw Ee.alternate===null?Error(i(467)):Error(i(310));Ke=r,r={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},ht===null?Ee.memoizedState=ht=r:ht=ht.next=r}return ht}function $o(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hs(r){var s=fs;return fs+=1,oa===null&&(oa=[]),r=z1(oa,r,s),s=Ee,(ht===null?s.memoizedState:ht.next)===null&&(s=s.alternate,k.H=s===null||s.memoizedState===null?Fm:hf),r}function el(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return hs(r);if(r.$$typeof===E)return Et(r)}throw Error(i(438,String(r)))}function ef(r){var s=null,c=Ee.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var g=Ee.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(x){return x.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=$o(),Ee.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(r),g=0;g<r;g++)c[g]=I;return s.index++,c}function ei(r,s){return typeof s=="function"?s(r):s}function tl(r){var s=ut();return tf(s,Ke,r)}function tf(r,s,c){var g=r.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=c;var x=r.baseQueue,b=g.pending;if(b!==null){if(x!==null){var B=x.next;x.next=b.next,b.next=B}s.baseQueue=x=b,g.pending=null}if(b=r.baseState,x===null)r.memoizedState=b;else{s=x.next;var O=B=null,q=null,ne=s,se=!1;do{var le=ne.lane&-536870913;if(le!==ne.lane?(Ie&le)===le:($n&le)===le){var ie=ne.revertLane;if(ie===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),le===ta&&(se=!0);else if(($n&ie)===ie){ne=ne.next,ie===ta&&(se=!0);continue}else le={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},q===null?(O=q=le,B=b):q=q.next=le,Ee.lanes|=ie,Ui|=ie;le=ne.action,xr&&c(b,le),b=ne.hasEagerState?ne.eagerState:c(b,le)}else ie={lane:le,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},q===null?(O=q=ie,B=b):q=q.next=ie,Ee.lanes|=le,Ui|=le;ne=ne.next}while(ne!==null&&ne!==s);if(q===null?B=b:q.next=O,!tn(b,r.memoizedState)&&(dt=!0,se&&(c=na,c!==null)))throw c;r.memoizedState=b,r.baseState=B,r.baseQueue=q,g.lastRenderedState=b}return x===null&&(g.lanes=0),[r.memoizedState,g.dispatch]}function nf(r){var s=ut(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var g=c.dispatch,x=c.pending,b=s.memoizedState;if(x!==null){c.pending=null;var B=x=x.next;do b=r(b,B.action),B=B.next;while(B!==x);tn(b,s.memoizedState)||(dt=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),c.lastRenderedState=b}return[b,g]}function W1(r,s,c){var g=Ee,x=ut(),b=Oe;if(b){if(c===void 0)throw Error(i(407));c=c()}else c=s();var B=!tn((Ke||x).memoizedState,c);if(B&&(x.memoizedState=c,dt=!0),x=x.queue,sf($1.bind(null,g,x,r),[r]),x.getSnapshot!==s||B||ht!==null&&ht.memoizedState.tag&1){if(g.flags|=2048,la(9,{destroy:void 0},J1.bind(null,g,x,c,s),null),Ze===null)throw Error(i(349));b||($n&127)!==0||Z1(g,s,c)}return c}function Z1(r,s,c){r.flags|=16384,r={getSnapshot:s,value:c},s=Ee.updateQueue,s===null?(s=$o(),Ee.updateQueue=s,s.stores=[r]):(c=s.stores,c===null?s.stores=[r]:c.push(r))}function J1(r,s,c,g){s.value=c,s.getSnapshot=g,em(s)&&tm(r)}function $1(r,s,c){return c(function(){em(s)&&tm(r)})}function em(r){var s=r.getSnapshot;r=r.value;try{var c=s();return!tn(r,c)}catch{return!0}}function tm(r){var s=ur(r,2);s!==null&&Xt(s,r,2)}function rf(r){var s=Ut();if(typeof r=="function"){var c=r;if(r=c(),xr){vi(!0);try{c()}finally{vi(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:r},s}function nm(r,s,c,g){return r.baseState=c,tf(r,Ke,typeof g=="function"?g:ei)}function X3(r,s,c,g,x){if(rl(r))throw Error(i(485));if(r=s.action,r!==null){var b={payload:x,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){b.listeners.push(B)}};k.T!==null?c(!0):b.isTransition=!1,g(b),c=s.pending,c===null?(b.next=s.pending=b,im(s,b)):(b.next=c.next,s.pending=c.next=b)}}function im(r,s){var c=s.action,g=s.payload,x=r.state;if(s.isTransition){var b=k.T,B={};k.T=B;try{var O=c(x,g),q=k.S;q!==null&&q(B,O),rm(r,s,O)}catch(ne){af(r,s,ne)}finally{b!==null&&B.types!==null&&(b.types=B.types),k.T=b}}else try{b=c(x,g),rm(r,s,b)}catch(ne){af(r,s,ne)}}function rm(r,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(g){am(r,s,g)},function(g){return af(r,s,g)}):am(r,s,c)}function am(r,s,c){s.status="fulfilled",s.value=c,sm(s),r.state=c,s=r.pending,s!==null&&(c=s.next,c===s?r.pending=null:(c=c.next,s.next=c,im(r,c)))}function af(r,s,c){var g=r.pending;if(r.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=c,sm(s),s=s.next;while(s!==g)}r.action=null}function sm(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function om(r,s){return s}function lm(r,s){if(Oe){var c=Ze.formState;if(c!==null){e:{var g=Ee;if(Oe){if($e){t:{for(var x=$e,b=An;x.nodeType!==8;){if(!b){x=null;break t}if(x=xn(x.nextSibling),x===null){x=null;break t}}b=x.data,x=b==="F!"||b==="F"?x:null}if(x){$e=xn(x.nextSibling),g=x.data==="F!";break e}}Ci(g)}g=!1}g&&(s=c[0])}}return c=Ut(),c.memoizedState=c.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:om,lastRenderedState:s},c.queue=g,c=Dm.bind(null,Ee,g),g.dispatch=c,g=rf(!1),b=ff.bind(null,Ee,!1,g.queue),g=Ut(),x={state:s,dispatch:null,action:r,pending:null},g.queue=x,c=X3.bind(null,Ee,x,b,c),x.dispatch=c,g.memoizedState=r,[s,c,!1]}function cm(r){var s=ut();return um(s,Ke,r)}function um(r,s,c){if(s=tf(r,s,om)[0],r=tl(ei)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var g=hs(s)}catch(B){throw B===ia?jo:B}else g=s;s=ut();var x=s.queue,b=x.dispatch;return c!==s.memoizedState&&(Ee.flags|=2048,la(9,{destroy:void 0},j3.bind(null,x,c),null)),[g,b,r]}function j3(r,s){r.action=s}function fm(r){var s=ut(),c=Ke;if(c!==null)return um(s,c,r);ut(),s=s.memoizedState,c=ut();var g=c.queue.dispatch;return c.memoizedState=r,[s,g,!1]}function la(r,s,c,g){return r={tag:r,create:c,deps:g,inst:s,next:null},s=Ee.updateQueue,s===null&&(s=$o(),Ee.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=r.next=r:(g=c.next,c.next=r,r.next=g,s.lastEffect=r),r}function hm(){return ut().memoizedState}function nl(r,s,c,g){var x=Ut();Ee.flags|=r,x.memoizedState=la(1|s,{destroy:void 0},c,g===void 0?null:g)}function il(r,s,c,g){var x=ut();g=g===void 0?null:g;var b=x.memoizedState.inst;Ke!==null&&g!==null&&Qu(g,Ke.memoizedState.deps)?x.memoizedState=la(s,b,c,g):(Ee.flags|=r,x.memoizedState=la(1|s,b,c,g))}function dm(r,s){nl(8390656,8,r,s)}function sf(r,s){il(2048,8,r,s)}function q3(r){Ee.flags|=4;var s=Ee.updateQueue;if(s===null)s=$o(),Ee.updateQueue=s,s.events=[r];else{var c=s.events;c===null?s.events=[r]:c.push(r)}}function mm(r){var s=ut().memoizedState;return q3({ref:s,nextImpl:r}),function(){if((He&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function gm(r,s){return il(4,2,r,s)}function pm(r,s){return il(4,4,r,s)}function Am(r,s){if(typeof s=="function"){r=r();var c=s(r);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function vm(r,s,c){c=c!=null?c.concat([r]):null,il(4,4,Am.bind(null,s,r),c)}function of(){}function xm(r,s){var c=ut();s=s===void 0?null:s;var g=c.memoizedState;return s!==null&&Qu(s,g[1])?g[0]:(c.memoizedState=[r,s],r)}function ym(r,s){var c=ut();s=s===void 0?null:s;var g=c.memoizedState;if(s!==null&&Qu(s,g[1]))return g[0];if(g=r(),xr){vi(!0);try{r()}finally{vi(!1)}}return c.memoizedState=[g,s],g}function lf(r,s,c){return c===void 0||($n&1073741824)!==0&&(Ie&261930)===0?r.memoizedState=s:(r.memoizedState=c,r=w2(),Ee.lanes|=r,Ui|=r,c)}function wm(r,s,c,g){return tn(c,s)?c:aa.current!==null?(r=lf(r,c,g),tn(r,s)||(dt=!0),r):($n&42)===0||($n&1073741824)!==0&&(Ie&261930)===0?(dt=!0,r.memoizedState=c):(r=w2(),Ee.lanes|=r,Ui|=r,s)}function bm(r,s,c,g,x){var b=j.p;j.p=b!==0&&8>b?b:8;var B=k.T,O={};k.T=O,ff(r,!1,s,c);try{var q=x(),ne=k.S;if(ne!==null&&ne(O,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var se=G3(q,g);ds(r,s,se,ln(r))}else ds(r,s,g,ln(r))}catch(le){ds(r,s,{then:function(){},status:"rejected",reason:le},ln())}finally{j.p=b,B!==null&&O.types!==null&&(B.types=O.types),k.T=B}}function _3(){}function cf(r,s,c,g){if(r.tag!==5)throw Error(i(476));var x=Cm(r).queue;bm(r,x,s,H,c===null?_3:function(){return Sm(r),c(g)})}function Cm(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:H},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:c},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Sm(r){var s=Cm(r);s.next===null&&(s=r.alternate.memoizedState),ds(r,s.next.queue,{},ln())}function uf(){return Et(Fs)}function Mm(){return ut().memoizedState}function Em(){return ut().memoizedState}function K3(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var c=ln();r=Ei(c);var g=Di(s,r,c);g!==null&&(Xt(g,s,c),ls(g,s,c)),s={cache:Pu()},r.payload=s;return}s=s.return}}function Q3(r,s,c){var g=ln();c={lane:g,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},rl(r)?Tm(s,c):(c=Du(r,s,c,g),c!==null&&(Xt(c,r,g),Rm(c,s,g)))}function Dm(r,s,c){var g=ln();ds(r,s,c,g)}function ds(r,s,c,g){var x={lane:g,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(rl(r))Tm(s,x);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var B=s.lastRenderedState,O=b(B,c);if(x.hasEagerState=!0,x.eagerState=O,tn(O,B))return Po(r,s,x,0),Ze===null&&Lo(),!1}catch{}if(c=Du(r,s,x,g),c!==null)return Xt(c,r,g),Rm(c,s,g),!0}return!1}function ff(r,s,c,g){if(g={lane:2,revertLane:Hf(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},rl(r)){if(s)throw Error(i(479))}else s=Du(r,c,g,2),s!==null&&Xt(s,r,2)}function rl(r){var s=r.alternate;return r===Ee||s!==null&&s===Ee}function Tm(r,s){sa=Zo=!0;var c=r.pending;c===null?s.next=s:(s.next=c.next,c.next=s),r.pending=s}function Rm(r,s,c){if((c&4194048)!==0){var g=s.lanes;g&=r.pendingLanes,c|=g,s.lanes=c,I0(r,c)}}var ms={readContext:Et,use:el,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st};ms.useEffectEvent=st;var Fm={readContext:Et,use:el,useCallback:function(r,s){return Ut().memoizedState=[r,s===void 0?null:s],r},useContext:Et,useEffect:dm,useImperativeHandle:function(r,s,c){c=c!=null?c.concat([r]):null,nl(4194308,4,Am.bind(null,s,r),c)},useLayoutEffect:function(r,s){return nl(4194308,4,r,s)},useInsertionEffect:function(r,s){nl(4,2,r,s)},useMemo:function(r,s){var c=Ut();s=s===void 0?null:s;var g=r();if(xr){vi(!0);try{r()}finally{vi(!1)}}return c.memoizedState=[g,s],g},useReducer:function(r,s,c){var g=Ut();if(c!==void 0){var x=c(s);if(xr){vi(!0);try{c(s)}finally{vi(!1)}}}else x=s;return g.memoizedState=g.baseState=x,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:x},g.queue=r,r=r.dispatch=Q3.bind(null,Ee,r),[g.memoizedState,r]},useRef:function(r){var s=Ut();return r={current:r},s.memoizedState=r},useState:function(r){r=rf(r);var s=r.queue,c=Dm.bind(null,Ee,s);return s.dispatch=c,[r.memoizedState,c]},useDebugValue:of,useDeferredValue:function(r,s){var c=Ut();return lf(c,r,s)},useTransition:function(){var r=rf(!1);return r=bm.bind(null,Ee,r.queue,!0,!1),Ut().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,c){var g=Ee,x=Ut();if(Oe){if(c===void 0)throw Error(i(407));c=c()}else{if(c=s(),Ze===null)throw Error(i(349));(Ie&127)!==0||Z1(g,s,c)}x.memoizedState=c;var b={value:c,getSnapshot:s};return x.queue=b,dm($1.bind(null,g,b,r),[r]),g.flags|=2048,la(9,{destroy:void 0},J1.bind(null,g,b,c,s),null),c},useId:function(){var r=Ut(),s=Ze.identifierPrefix;if(Oe){var c=On,g=Vn;c=(g&~(1<<32-en(g)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Jo++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=Y3++,s="_"+s+"r_"+c.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:uf,useFormState:lm,useActionState:lm,useOptimistic:function(r){var s=Ut();s.memoizedState=s.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=ff.bind(null,Ee,!0,c),c.dispatch=s,[r,s]},useMemoCache:ef,useCacheRefresh:function(){return Ut().memoizedState=K3.bind(null,Ee)},useEffectEvent:function(r){var s=Ut(),c={impl:r};return s.memoizedState=c,function(){if((He&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},hf={readContext:Et,use:el,useCallback:xm,useContext:Et,useEffect:sf,useImperativeHandle:vm,useInsertionEffect:gm,useLayoutEffect:pm,useMemo:ym,useReducer:tl,useRef:hm,useState:function(){return tl(ei)},useDebugValue:of,useDeferredValue:function(r,s){var c=ut();return wm(c,Ke.memoizedState,r,s)},useTransition:function(){var r=tl(ei)[0],s=ut().memoizedState;return[typeof r=="boolean"?r:hs(r),s]},useSyncExternalStore:W1,useId:Mm,useHostTransitionStatus:uf,useFormState:cm,useActionState:cm,useOptimistic:function(r,s){var c=ut();return nm(c,Ke,r,s)},useMemoCache:ef,useCacheRefresh:Em};hf.useEffectEvent=mm;var Bm={readContext:Et,use:el,useCallback:xm,useContext:Et,useEffect:sf,useImperativeHandle:vm,useInsertionEffect:gm,useLayoutEffect:pm,useMemo:ym,useReducer:nf,useRef:hm,useState:function(){return nf(ei)},useDebugValue:of,useDeferredValue:function(r,s){var c=ut();return Ke===null?lf(c,r,s):wm(c,Ke.memoizedState,r,s)},useTransition:function(){var r=nf(ei)[0],s=ut().memoizedState;return[typeof r=="boolean"?r:hs(r),s]},useSyncExternalStore:W1,useId:Mm,useHostTransitionStatus:uf,useFormState:fm,useActionState:fm,useOptimistic:function(r,s){var c=ut();return Ke!==null?nm(c,Ke,r,s):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:ef,useCacheRefresh:Em};Bm.useEffectEvent=mm;function df(r,s,c,g){s=r.memoizedState,c=c(g,s),c=c==null?s:m({},s,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var mf={enqueueSetState:function(r,s,c){r=r._reactInternals;var g=ln(),x=Ei(g);x.payload=s,c!=null&&(x.callback=c),s=Di(r,x,g),s!==null&&(Xt(s,r,g),ls(s,r,g))},enqueueReplaceState:function(r,s,c){r=r._reactInternals;var g=ln(),x=Ei(g);x.tag=1,x.payload=s,c!=null&&(x.callback=c),s=Di(r,x,g),s!==null&&(Xt(s,r,g),ls(s,r,g))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var c=ln(),g=Ei(c);g.tag=2,s!=null&&(g.callback=s),s=Di(r,g,c),s!==null&&(Xt(s,r,c),ls(s,r,c))}};function Um(r,s,c,g,x,b,B){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(g,b,B):s.prototype&&s.prototype.isPureReactComponent?!es(c,g)||!es(x,b):!0}function Nm(r,s,c,g){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,g),s.state!==r&&mf.enqueueReplaceState(s,s.state,null)}function yr(r,s){var c=s;if("ref"in s){c={};for(var g in s)g!=="ref"&&(c[g]=s[g])}if(r=r.defaultProps){c===s&&(c=m({},c));for(var x in r)c[x]===void 0&&(c[x]=r[x])}return c}function Im(r){Oo(r)}function Vm(r){console.error(r)}function Om(r){Oo(r)}function al(r,s){try{var c=r.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function Lm(r,s,c){try{var g=r.onCaughtError;g(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function gf(r,s,c){return c=Ei(c),c.tag=3,c.payload={element:null},c.callback=function(){al(r,s)},c}function Pm(r){return r=Ei(r),r.tag=3,r}function zm(r,s,c,g){var x=c.type.getDerivedStateFromError;if(typeof x=="function"){var b=g.value;r.payload=function(){return x(b)},r.callback=function(){Lm(s,c,g)}}var B=c.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(r.callback=function(){Lm(s,c,g),typeof x!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var O=g.stack;this.componentDidCatch(g.value,{componentStack:O!==null?O:""})})}function W3(r,s,c,g,x){if(c.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=c.alternate,s!==null&&ea(s,c,x,!0),c=rn.current,c!==null){switch(c.tag){case 31:case 13:return vn===null?Al():c.alternate===null&&ot===0&&(ot=3),c.flags&=-257,c.flags|=65536,c.lanes=x,g===qo?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([g]):s.add(g),kf(r,g,x)),!1;case 22:return c.flags|=65536,g===qo?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([g]):c.add(g)),kf(r,g,x)),!1}throw Error(i(435,c.tag))}return kf(r,g,x),Al(),!1}if(Oe)return s=rn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=x,g!==Nu&&(r=Error(i(422),{cause:g}),is(mn(r,c)))):(g!==Nu&&(s=Error(i(423),{cause:g}),is(mn(s,c))),r=r.current.alternate,r.flags|=65536,x&=-x,r.lanes|=x,g=mn(g,c),x=gf(r.stateNode,g,x),Xu(r,x),ot!==4&&(ot=2)),!1;var b=Error(i(520),{cause:g});if(b=mn(b,c),bs===null?bs=[b]:bs.push(b),ot!==4&&(ot=2),s===null)return!0;g=mn(g,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,r=x&-x,c.lanes|=r,r=gf(c.stateNode,g,r),Xu(c,r),!1;case 1:if(s=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ni===null||!Ni.has(b))))return c.flags|=65536,x&=-x,c.lanes|=x,x=Pm(x),zm(x,r,c,g),Xu(c,x),!1}c=c.return}while(c!==null);return!1}var pf=Error(i(461)),dt=!1;function Dt(r,s,c,g){s.child=r===null?H1(s,null,c,g):vr(s,r.child,c,g)}function km(r,s,c,g,x){c=c.render;var b=s.ref;if("ref"in g){var B={};for(var O in g)O!=="ref"&&(B[O]=g[O])}else B=g;return mr(s),g=Wu(r,s,c,B,b,x),O=Zu(),r!==null&&!dt?(Ju(r,s,x),ti(r,s,x)):(Oe&&O&&Bu(s),s.flags|=1,Dt(r,s,g,x),s.child)}function Gm(r,s,c,g,x){if(r===null){var b=c.type;return typeof b=="function"&&!Tu(b)&&b.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=b,Ym(r,s,b,g,x)):(r=ko(c.type,null,g,s,s.mode,x),r.ref=s.ref,r.return=s,s.child=r)}if(b=r.child,!Sf(r,x)){var B=b.memoizedProps;if(c=c.compare,c=c!==null?c:es,c(B,g)&&r.ref===s.ref)return ti(r,s,x)}return s.flags|=1,r=Qn(b,g),r.ref=s.ref,r.return=s,s.child=r}function Ym(r,s,c,g,x){if(r!==null){var b=r.memoizedProps;if(es(b,g)&&r.ref===s.ref)if(dt=!1,s.pendingProps=g=b,Sf(r,x))(r.flags&131072)!==0&&(dt=!0);else return s.lanes=r.lanes,ti(r,s,x)}return Af(r,s,c,g,x)}function Hm(r,s,c,g){var x=g.children,b=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((s.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,r!==null){for(g=s.child=r.child,x=0;g!==null;)x=x|g.lanes|g.childLanes,g=g.sibling;g=x&~b}else g=0,s.child=null;return Xm(r,s,b,c,g)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Xo(s,b!==null?b.cachePool:null),b!==null?q1(s,b):qu(),_1(s);else return g=s.lanes=536870912,Xm(r,s,b!==null?b.baseLanes|c:c,c,g)}else b!==null?(Xo(s,b.cachePool),q1(s,b),Ri(),s.memoizedState=null):(r!==null&&Xo(s,null),qu(),Ri());return Dt(r,s,x,c),s.child}function gs(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Xm(r,s,c,g,x){var b=ku();return b=b===null?null:{parent:ft._currentValue,pool:b},s.memoizedState={baseLanes:c,cachePool:b},r!==null&&Xo(s,null),qu(),_1(s),r!==null&&ea(r,s,g,!0),s.childLanes=x,null}function sl(r,s){return s=ll({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function jm(r,s,c){return vr(s,r.child,null,c),r=sl(s,s.pendingProps),r.flags|=2,an(s),s.memoizedState=null,r}function Z3(r,s,c){var g=s.pendingProps,x=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(Oe){if(g.mode==="hidden")return r=sl(s,g),s.lanes=536870912,gs(null,r);if(Ku(s),(r=$e)?(r=ig(r,An),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:wi!==null?{id:Vn,overflow:On}:null,retryLane:536870912,hydrationErrors:null},c=T1(r),c.return=s,s.child=c,Mt=s,$e=null)):r=null,r===null)throw Ci(s);return s.lanes=536870912,null}return sl(s,g)}var b=r.memoizedState;if(b!==null){var B=b.dehydrated;if(Ku(s),x)if(s.flags&256)s.flags&=-257,s=jm(r,s,c);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(dt||ea(r,s,c,!1),x=(c&r.childLanes)!==0,dt||x){if(g=Ze,g!==null&&(B=V0(g,c),B!==0&&B!==b.retryLane))throw b.retryLane=B,ur(r,B),Xt(g,r,B),pf;Al(),s=jm(r,s,c)}else r=b.treeContext,$e=xn(B.nextSibling),Mt=s,Oe=!0,bi=null,An=!1,r!==null&&B1(s,r),s=sl(s,g),s.flags|=4096;return s}return r=Qn(r.child,{mode:g.mode,children:g.children}),r.ref=s.ref,s.child=r,r.return=s,r}function ol(r,s){var c=s.ref;if(c===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(s.flags|=4194816)}}function Af(r,s,c,g,x){return mr(s),c=Wu(r,s,c,g,void 0,x),g=Zu(),r!==null&&!dt?(Ju(r,s,x),ti(r,s,x)):(Oe&&g&&Bu(s),s.flags|=1,Dt(r,s,c,x),s.child)}function qm(r,s,c,g,x,b){return mr(s),s.updateQueue=null,c=Q1(s,g,c,x),K1(r),g=Zu(),r!==null&&!dt?(Ju(r,s,b),ti(r,s,b)):(Oe&&g&&Bu(s),s.flags|=1,Dt(r,s,c,b),s.child)}function _m(r,s,c,g,x){if(mr(s),s.stateNode===null){var b=Wr,B=c.contextType;typeof B=="object"&&B!==null&&(b=Et(B)),b=new c(g,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=mf,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=g,b.state=s.memoizedState,b.refs={},Yu(s),B=c.contextType,b.context=typeof B=="object"&&B!==null?Et(B):Wr,b.state=s.memoizedState,B=c.getDerivedStateFromProps,typeof B=="function"&&(df(s,c,B,g),b.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(B=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),B!==b.state&&mf.enqueueReplaceState(b,b.state,null),us(s,g,b,x),cs(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(r===null){b=s.stateNode;var O=s.memoizedProps,q=yr(c,O);b.props=q;var ne=b.context,se=c.contextType;B=Wr,typeof se=="object"&&se!==null&&(B=Et(se));var le=c.getDerivedStateFromProps;se=typeof le=="function"||typeof b.getSnapshotBeforeUpdate=="function",O=s.pendingProps!==O,se||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(O||ne!==B)&&Nm(s,b,g,B),Mi=!1;var ie=s.memoizedState;b.state=ie,us(s,g,b,x),cs(),ne=s.memoizedState,O||ie!==ne||Mi?(typeof le=="function"&&(df(s,c,le,g),ne=s.memoizedState),(q=Mi||Um(s,c,q,g,ie,ne,B))?(se||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=ne),b.props=g,b.state=ne,b.context=B,g=q):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{b=s.stateNode,Hu(r,s),B=s.memoizedProps,se=yr(c,B),b.props=se,le=s.pendingProps,ie=b.context,ne=c.contextType,q=Wr,typeof ne=="object"&&ne!==null&&(q=Et(ne)),O=c.getDerivedStateFromProps,(ne=typeof O=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(B!==le||ie!==q)&&Nm(s,b,g,q),Mi=!1,ie=s.memoizedState,b.state=ie,us(s,g,b,x),cs();var re=s.memoizedState;B!==le||ie!==re||Mi||r!==null&&r.dependencies!==null&&Yo(r.dependencies)?(typeof O=="function"&&(df(s,c,O,g),re=s.memoizedState),(se=Mi||Um(s,c,se,g,ie,re,q)||r!==null&&r.dependencies!==null&&Yo(r.dependencies))?(ne||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(g,re,q),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(g,re,q)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||B===r.memoizedProps&&ie===r.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||B===r.memoizedProps&&ie===r.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=re),b.props=g,b.state=re,b.context=q,g=se):(typeof b.componentDidUpdate!="function"||B===r.memoizedProps&&ie===r.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||B===r.memoizedProps&&ie===r.memoizedState||(s.flags|=1024),g=!1)}return b=g,ol(r,s),g=(s.flags&128)!==0,b||g?(b=s.stateNode,c=g&&typeof c.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,r!==null&&g?(s.child=vr(s,r.child,null,x),s.child=vr(s,null,c,x)):Dt(r,s,c,x),s.memoizedState=b.state,r=s.child):r=ti(r,s,x),r}function Km(r,s,c,g){return hr(),s.flags|=256,Dt(r,s,c,g),s.child}var vf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xf(r){return{baseLanes:r,cachePool:L1()}}function yf(r,s,c){return r=r!==null?r.childLanes&~c:0,s&&(r|=on),r}function Qm(r,s,c){var g=s.pendingProps,x=!1,b=(s.flags&128)!==0,B;if((B=b)||(B=r!==null&&r.memoizedState===null?!1:(ct.current&2)!==0),B&&(x=!0,s.flags&=-129),B=(s.flags&32)!==0,s.flags&=-33,r===null){if(Oe){if(x?Ti(s):Ri(),(r=$e)?(r=ig(r,An),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:wi!==null?{id:Vn,overflow:On}:null,retryLane:536870912,hydrationErrors:null},c=T1(r),c.return=s,s.child=c,Mt=s,$e=null)):r=null,r===null)throw Ci(s);return nh(r)?s.lanes=32:s.lanes=536870912,null}var O=g.children;return g=g.fallback,x?(Ri(),x=s.mode,O=ll({mode:"hidden",children:O},x),g=fr(g,x,c,null),O.return=s,g.return=s,O.sibling=g,s.child=O,g=s.child,g.memoizedState=xf(c),g.childLanes=yf(r,B,c),s.memoizedState=vf,gs(null,g)):(Ti(s),wf(s,O))}var q=r.memoizedState;if(q!==null&&(O=q.dehydrated,O!==null)){if(b)s.flags&256?(Ti(s),s.flags&=-257,s=bf(r,s,c)):s.memoizedState!==null?(Ri(),s.child=r.child,s.flags|=128,s=null):(Ri(),O=g.fallback,x=s.mode,g=ll({mode:"visible",children:g.children},x),O=fr(O,x,c,null),O.flags|=2,g.return=s,O.return=s,g.sibling=O,s.child=g,vr(s,r.child,null,c),g=s.child,g.memoizedState=xf(c),g.childLanes=yf(r,B,c),s.memoizedState=vf,s=gs(null,g));else if(Ti(s),nh(O)){if(B=O.nextSibling&&O.nextSibling.dataset,B)var ne=B.dgst;B=ne,g=Error(i(419)),g.stack="",g.digest=B,is({value:g,source:null,stack:null}),s=bf(r,s,c)}else if(dt||ea(r,s,c,!1),B=(c&r.childLanes)!==0,dt||B){if(B=Ze,B!==null&&(g=V0(B,c),g!==0&&g!==q.retryLane))throw q.retryLane=g,ur(r,g),Xt(B,r,g),pf;th(O)||Al(),s=bf(r,s,c)}else th(O)?(s.flags|=192,s.child=r.child,s=null):(r=q.treeContext,$e=xn(O.nextSibling),Mt=s,Oe=!0,bi=null,An=!1,r!==null&&B1(s,r),s=wf(s,g.children),s.flags|=4096);return s}return x?(Ri(),O=g.fallback,x=s.mode,q=r.child,ne=q.sibling,g=Qn(q,{mode:"hidden",children:g.children}),g.subtreeFlags=q.subtreeFlags&65011712,ne!==null?O=Qn(ne,O):(O=fr(O,x,c,null),O.flags|=2),O.return=s,g.return=s,g.sibling=O,s.child=g,gs(null,g),g=s.child,O=r.child.memoizedState,O===null?O=xf(c):(x=O.cachePool,x!==null?(q=ft._currentValue,x=x.parent!==q?{parent:q,pool:q}:x):x=L1(),O={baseLanes:O.baseLanes|c,cachePool:x}),g.memoizedState=O,g.childLanes=yf(r,B,c),s.memoizedState=vf,gs(r.child,g)):(Ti(s),c=r.child,r=c.sibling,c=Qn(c,{mode:"visible",children:g.children}),c.return=s,c.sibling=null,r!==null&&(B=s.deletions,B===null?(s.deletions=[r],s.flags|=16):B.push(r)),s.child=c,s.memoizedState=null,c)}function wf(r,s){return s=ll({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function ll(r,s){return r=nn(22,r,null,s),r.lanes=0,r}function bf(r,s,c){return vr(s,r.child,null,c),r=wf(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Wm(r,s,c){r.lanes|=s;var g=r.alternate;g!==null&&(g.lanes|=s),Ou(r.return,s,c)}function Cf(r,s,c,g,x,b){var B=r.memoizedState;B===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:x,treeForkCount:b}:(B.isBackwards=s,B.rendering=null,B.renderingStartTime=0,B.last=g,B.tail=c,B.tailMode=x,B.treeForkCount=b)}function Zm(r,s,c){var g=s.pendingProps,x=g.revealOrder,b=g.tail;g=g.children;var B=ct.current,O=(B&2)!==0;if(O?(B=B&1|2,s.flags|=128):B&=1,te(ct,B),Dt(r,s,g,c),g=Oe?ns:0,!O&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Wm(r,c,s);else if(r.tag===19)Wm(r,c,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(x){case"forwards":for(c=s.child,x=null;c!==null;)r=c.alternate,r!==null&&Wo(r)===null&&(x=c),c=c.sibling;c=x,c===null?(x=s.child,s.child=null):(x=c.sibling,c.sibling=null),Cf(s,!1,x,c,b,g);break;case"backwards":case"unstable_legacy-backwards":for(c=null,x=s.child,s.child=null;x!==null;){if(r=x.alternate,r!==null&&Wo(r)===null){s.child=x;break}r=x.sibling,x.sibling=c,c=x,x=r}Cf(s,!0,c,null,b,g);break;case"together":Cf(s,!1,null,null,void 0,g);break;default:s.memoizedState=null}return s.child}function ti(r,s,c){if(r!==null&&(s.dependencies=r.dependencies),Ui|=s.lanes,(c&s.childLanes)===0)if(r!==null){if(ea(r,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,c=Qn(r,r.pendingProps),s.child=c,c.return=s;r.sibling!==null;)r=r.sibling,c=c.sibling=Qn(r,r.pendingProps),c.return=s;c.sibling=null}return s.child}function Sf(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Yo(r)))}function J3(r,s,c){switch(s.tag){case 3:Pe(s,s.stateNode.containerInfo),Si(s,ft,r.memoizedState.cache),hr();break;case 27:case 5:Lt(s);break;case 4:Pe(s,s.stateNode.containerInfo);break;case 10:Si(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ku(s),null;break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(Ti(s),s.flags|=128,null):(c&s.child.childLanes)!==0?Qm(r,s,c):(Ti(s),r=ti(r,s,c),r!==null?r.sibling:null);Ti(s);break;case 19:var x=(r.flags&128)!==0;if(g=(c&s.childLanes)!==0,g||(ea(r,s,c,!1),g=(c&s.childLanes)!==0),x){if(g)return Zm(r,s,c);s.flags|=128}if(x=s.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),te(ct,ct.current),g)break;return null;case 22:return s.lanes=0,Hm(r,s,c,s.pendingProps);case 24:Si(s,ft,r.memoizedState.cache)}return ti(r,s,c)}function Jm(r,s,c){if(r!==null)if(r.memoizedProps!==s.pendingProps)dt=!0;else{if(!Sf(r,c)&&(s.flags&128)===0)return dt=!1,J3(r,s,c);dt=(r.flags&131072)!==0}else dt=!1,Oe&&(s.flags&1048576)!==0&&F1(s,ns,s.index);switch(s.lanes=0,s.tag){case 16:e:{var g=s.pendingProps;if(r=pr(s.elementType),s.type=r,typeof r=="function")Tu(r)?(g=yr(r,g),s.tag=1,s=_m(null,s,r,g,c)):(s.tag=0,s=Af(null,s,r,g,c));else{if(r!=null){var x=r.$$typeof;if(x===M){s.tag=11,s=km(null,s,r,g,c);break e}else if(x===T){s.tag=14,s=Gm(null,s,r,g,c);break e}}throw s=P(r)||r,Error(i(306,s,""))}}return s;case 0:return Af(r,s,s.type,s.pendingProps,c);case 1:return g=s.type,x=yr(g,s.pendingProps),_m(r,s,g,x,c);case 3:e:{if(Pe(s,s.stateNode.containerInfo),r===null)throw Error(i(387));g=s.pendingProps;var b=s.memoizedState;x=b.element,Hu(r,s),us(s,g,null,c);var B=s.memoizedState;if(g=B.cache,Si(s,ft,g),g!==b.cache&&Lu(s,[ft],c,!0),cs(),g=B.element,b.isDehydrated)if(b={element:g,isDehydrated:!1,cache:B.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=Km(r,s,g,c);break e}else if(g!==x){x=mn(Error(i(424)),s),is(x),s=Km(r,s,g,c);break e}else for(r=s.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,$e=xn(r.firstChild),Mt=s,Oe=!0,bi=null,An=!0,c=H1(s,null,g,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(hr(),g===x){s=ti(r,s,c);break e}Dt(r,s,g,c)}s=s.child}return s;case 26:return ol(r,s),r===null?(c=cg(s.type,null,s.pendingProps,null))?s.memoizedState=c:Oe||(c=s.type,r=s.pendingProps,g=Sl(de.current).createElement(c),g[St]=s,g[Pt]=r,Tt(g,c,r),xt(g),s.stateNode=g):s.memoizedState=cg(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Lt(s),r===null&&Oe&&(g=s.stateNode=sg(s.type,s.pendingProps,de.current),Mt=s,An=!0,x=$e,Li(s.type)?(ih=x,$e=xn(g.firstChild)):$e=x),Dt(r,s,s.pendingProps.children,c),ol(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Oe&&((x=g=$e)&&(g=T4(g,s.type,s.pendingProps,An),g!==null?(s.stateNode=g,Mt=s,$e=xn(g.firstChild),An=!1,x=!0):x=!1),x||Ci(s)),Lt(s),x=s.type,b=s.pendingProps,B=r!==null?r.memoizedProps:null,g=b.children,Jf(x,b)?g=null:B!==null&&Jf(x,B)&&(s.flags|=32),s.memoizedState!==null&&(x=Wu(r,s,H3,null,null,c),Fs._currentValue=x),ol(r,s),Dt(r,s,g,c),s.child;case 6:return r===null&&Oe&&((r=c=$e)&&(c=R4(c,s.pendingProps,An),c!==null?(s.stateNode=c,Mt=s,$e=null,r=!0):r=!1),r||Ci(s)),null;case 13:return Qm(r,s,c);case 4:return Pe(s,s.stateNode.containerInfo),g=s.pendingProps,r===null?s.child=vr(s,null,g,c):Dt(r,s,g,c),s.child;case 11:return km(r,s,s.type,s.pendingProps,c);case 7:return Dt(r,s,s.pendingProps,c),s.child;case 8:return Dt(r,s,s.pendingProps.children,c),s.child;case 12:return Dt(r,s,s.pendingProps.children,c),s.child;case 10:return g=s.pendingProps,Si(s,s.type,g.value),Dt(r,s,g.children,c),s.child;case 9:return x=s.type._context,g=s.pendingProps.children,mr(s),x=Et(x),g=g(x),s.flags|=1,Dt(r,s,g,c),s.child;case 14:return Gm(r,s,s.type,s.pendingProps,c);case 15:return Ym(r,s,s.type,s.pendingProps,c);case 19:return Zm(r,s,c);case 31:return Z3(r,s,c);case 22:return Hm(r,s,c,s.pendingProps);case 24:return mr(s),g=Et(ft),r===null?(x=ku(),x===null&&(x=Ze,b=Pu(),x.pooledCache=b,b.refCount++,b!==null&&(x.pooledCacheLanes|=c),x=b),s.memoizedState={parent:g,cache:x},Yu(s),Si(s,ft,x)):((r.lanes&c)!==0&&(Hu(r,s),us(s,null,null,c),cs()),x=r.memoizedState,b=s.memoizedState,x.parent!==g?(x={parent:g,cache:g},s.memoizedState=x,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=x),Si(s,ft,g)):(g=b.cache,Si(s,ft,g),g!==x.cache&&Lu(s,[ft],c,!0))),Dt(r,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ni(r){r.flags|=4}function Mf(r,s,c,g,x){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(x&335544128)===x)if(r.stateNode.complete)r.flags|=8192;else if(M2())r.flags|=8192;else throw Ar=qo,Gu}else r.flags&=-16777217}function $m(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!mg(s))if(M2())r.flags|=8192;else throw Ar=qo,Gu}function cl(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?U0():536870912,r.lanes|=s,ha|=s)}function ps(r,s){if(!Oe)switch(r.tailMode){case"hidden":s=r.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:g.sibling=null}}function et(r){var s=r.alternate!==null&&r.alternate.child===r.child,c=0,g=0;if(s)for(var x=r.child;x!==null;)c|=x.lanes|x.childLanes,g|=x.subtreeFlags&65011712,g|=x.flags&65011712,x.return=r,x=x.sibling;else for(x=r.child;x!==null;)c|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=r,x=x.sibling;return r.subtreeFlags|=g,r.childLanes=c,s}function $3(r,s,c){var g=s.pendingProps;switch(Uu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(s),null;case 1:return et(s),null;case 3:return c=s.stateNode,g=null,r!==null&&(g=r.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),Jn(ft),Re(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&($r(s)?ni(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Iu())),et(s),null;case 26:var x=s.type,b=s.memoizedState;return r===null?(ni(s),b!==null?(et(s),$m(s,b)):(et(s),Mf(s,x,null,g,c))):b?b!==r.memoizedState?(ni(s),et(s),$m(s,b)):(et(s),s.flags&=-16777217):(r=r.memoizedProps,r!==g&&ni(s),et(s),Mf(s,x,r,g,c)),null;case 27:if(Wt(s),c=de.current,x=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==g&&ni(s);else{if(!g){if(s.stateNode===null)throw Error(i(166));return et(s),null}r=ae.current,$r(s)?U1(s):(r=sg(x,g,c),s.stateNode=r,ni(s))}return et(s),null;case 5:if(Wt(s),x=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==g&&ni(s);else{if(!g){if(s.stateNode===null)throw Error(i(166));return et(s),null}if(b=ae.current,$r(s))U1(s);else{var B=Sl(de.current);switch(b){case 1:b=B.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:b=B.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":b=B.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":b=B.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":b=B.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof g.is=="string"?B.createElement("select",{is:g.is}):B.createElement("select"),g.multiple?b.multiple=!0:g.size&&(b.size=g.size);break;default:b=typeof g.is=="string"?B.createElement(x,{is:g.is}):B.createElement(x)}}b[St]=s,b[Pt]=g;e:for(B=s.child;B!==null;){if(B.tag===5||B.tag===6)b.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===s)break e;for(;B.sibling===null;){if(B.return===null||B.return===s)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}s.stateNode=b;e:switch(Tt(b,x,g),x){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&ni(s)}}return et(s),Mf(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,c),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==g&&ni(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(i(166));if(r=de.current,$r(s)){if(r=s.stateNode,c=s.memoizedProps,g=null,x=Mt,x!==null)switch(x.tag){case 27:case 5:g=x.memoizedProps}r[St]=s,r=!!(r.nodeValue===c||g!==null&&g.suppressHydrationWarning===!0||Q2(r.nodeValue,c)),r||Ci(s,!0)}else r=Sl(r).createTextNode(g),r[St]=s,s.stateNode=r}return et(s),null;case 31:if(c=s.memoizedState,r===null||r.memoizedState!==null){if(g=$r(s),c!==null){if(r===null){if(!g)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[St]=s}else hr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;et(s),r=!1}else c=Iu(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return s.flags&256?(an(s),s):(an(s),null);if((s.flags&128)!==0)throw Error(i(558))}return et(s),null;case 13:if(g=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(x=$r(s),g!==null&&g.dehydrated!==null){if(r===null){if(!x)throw Error(i(318));if(x=s.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[St]=s}else hr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;et(s),x=!1}else x=Iu(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=x),x=!0;if(!x)return s.flags&256?(an(s),s):(an(s),null)}return an(s),(s.flags&128)!==0?(s.lanes=c,s):(c=g!==null,r=r!==null&&r.memoizedState!==null,c&&(g=s.child,x=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(x=g.alternate.memoizedState.cachePool.pool),b=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(b=g.memoizedState.cachePool.pool),b!==x&&(g.flags|=2048)),c!==r&&c&&(s.child.flags|=8192),cl(s,s.updateQueue),et(s),null);case 4:return Re(),r===null&&_f(s.stateNode.containerInfo),et(s),null;case 10:return Jn(s.type),et(s),null;case 19:if(K(ct),g=s.memoizedState,g===null)return et(s),null;if(x=(s.flags&128)!==0,b=g.rendering,b===null)if(x)ps(g,!1);else{if(ot!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(b=Wo(r),b!==null){for(s.flags|=128,ps(g,!1),r=b.updateQueue,s.updateQueue=r,cl(s,r),s.subtreeFlags=0,r=c,c=s.child;c!==null;)D1(c,r),c=c.sibling;return te(ct,ct.current&1|2),Oe&&Wn(s,g.treeForkCount),s.child}r=r.sibling}g.tail!==null&&Jt()>ml&&(s.flags|=128,x=!0,ps(g,!1),s.lanes=4194304)}else{if(!x)if(r=Wo(b),r!==null){if(s.flags|=128,x=!0,r=r.updateQueue,s.updateQueue=r,cl(s,r),ps(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!Oe)return et(s),null}else 2*Jt()-g.renderingStartTime>ml&&c!==536870912&&(s.flags|=128,x=!0,ps(g,!1),s.lanes=4194304);g.isBackwards?(b.sibling=s.child,s.child=b):(r=g.last,r!==null?r.sibling=b:s.child=b,g.last=b)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=Jt(),r.sibling=null,c=ct.current,te(ct,x?c&1|2:c&1),Oe&&Wn(s,g.treeForkCount),r):(et(s),null);case 22:case 23:return an(s),_u(),g=s.memoizedState!==null,r!==null?r.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?(c&536870912)!==0&&(s.flags&128)===0&&(et(s),s.subtreeFlags&6&&(s.flags|=8192)):et(s),c=s.updateQueue,c!==null&&cl(s,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==c&&(s.flags|=2048),r!==null&&K(gr),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Jn(ft),et(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function e4(r,s){switch(Uu(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Jn(ft),Re(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Wt(s),null;case 31:if(s.memoizedState!==null){if(an(s),s.alternate===null)throw Error(i(340));hr()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(an(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));hr()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return K(ct),null;case 4:return Re(),null;case 10:return Jn(s.type),null;case 22:case 23:return an(s),_u(),r!==null&&K(gr),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Jn(ft),null;case 25:return null;default:return null}}function e2(r,s){switch(Uu(s),s.tag){case 3:Jn(ft),Re();break;case 26:case 27:case 5:Wt(s);break;case 4:Re();break;case 31:s.memoizedState!==null&&an(s);break;case 13:an(s);break;case 19:K(ct);break;case 10:Jn(s.type);break;case 22:case 23:an(s),_u(),r!==null&&K(gr);break;case 24:Jn(ft)}}function As(r,s){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var x=g.next;c=x;do{if((c.tag&r)===r){g=void 0;var b=c.create,B=c.inst;g=b(),B.destroy=g}c=c.next}while(c!==x)}}catch(O){_e(s,s.return,O)}}function Fi(r,s,c){try{var g=s.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var b=x.next;g=b;do{if((g.tag&r)===r){var B=g.inst,O=B.destroy;if(O!==void 0){B.destroy=void 0,x=s;var q=c,ne=O;try{ne()}catch(se){_e(x,q,se)}}}g=g.next}while(g!==b)}}catch(se){_e(s,s.return,se)}}function t2(r){var s=r.updateQueue;if(s!==null){var c=r.stateNode;try{j1(s,c)}catch(g){_e(r,r.return,g)}}}function n2(r,s,c){c.props=yr(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(g){_e(r,s,g)}}function vs(r,s){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var g=r.stateNode;break;case 30:g=r.stateNode;break;default:g=r.stateNode}typeof c=="function"?r.refCleanup=c(g):c.current=g}}catch(x){_e(r,s,x)}}function Ln(r,s){var c=r.ref,g=r.refCleanup;if(c!==null)if(typeof g=="function")try{g()}catch(x){_e(r,s,x)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(x){_e(r,s,x)}else c.current=null}function i2(r){var s=r.type,c=r.memoizedProps,g=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&g.focus();break e;case"img":c.src?g.src=c.src:c.srcSet&&(g.srcset=c.srcSet)}}catch(x){_e(r,r.return,x)}}function Ef(r,s,c){try{var g=r.stateNode;b4(g,r.type,c,s),g[Pt]=s}catch(x){_e(r,r.return,x)}}function r2(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Li(r.type)||r.tag===4}function Df(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||r2(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Li(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Tf(r,s,c){var g=r.tag;if(g===5||g===6)r=r.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(r),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=_n));else if(g!==4&&(g===27&&Li(r.type)&&(c=r.stateNode,s=null),r=r.child,r!==null))for(Tf(r,s,c),r=r.sibling;r!==null;)Tf(r,s,c),r=r.sibling}function ul(r,s,c){var g=r.tag;if(g===5||g===6)r=r.stateNode,s?c.insertBefore(r,s):c.appendChild(r);else if(g!==4&&(g===27&&Li(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(ul(r,s,c),r=r.sibling;r!==null;)ul(r,s,c),r=r.sibling}function a2(r){var s=r.stateNode,c=r.memoizedProps;try{for(var g=r.type,x=s.attributes;x.length;)s.removeAttributeNode(x[0]);Tt(s,g,c),s[St]=r,s[Pt]=c}catch(b){_e(r,r.return,b)}}var ii=!1,mt=!1,Rf=!1,s2=typeof WeakSet=="function"?WeakSet:Set,yt=null;function t4(r,s){if(r=r.containerInfo,Wf=Bl,r=v1(r),wu(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var x=g.anchorOffset,b=g.focusNode;g=g.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var B=0,O=-1,q=-1,ne=0,se=0,le=r,ie=null;t:for(;;){for(var re;le!==c||x!==0&&le.nodeType!==3||(O=B+x),le!==b||g!==0&&le.nodeType!==3||(q=B+g),le.nodeType===3&&(B+=le.nodeValue.length),(re=le.firstChild)!==null;)ie=le,le=re;for(;;){if(le===r)break t;if(ie===c&&++ne===x&&(O=B),ie===b&&++se===g&&(q=B),(re=le.nextSibling)!==null)break;le=ie,ie=le.parentNode}le=re}c=O===-1||q===-1?null:{start:O,end:q}}else c=null}c=c||{start:0,end:0}}else c=null;for(Zf={focusedElem:r,selectionRange:c},Bl=!1,yt=s;yt!==null;)if(s=yt,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,yt=r;else for(;yt!==null;){switch(s=yt,b=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)x=r[c],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&b!==null){r=void 0,c=s,x=b.memoizedProps,b=b.memoizedState,g=c.stateNode;try{var ge=yr(c.type,x);r=g.getSnapshotBeforeUpdate(ge,b),g.__reactInternalSnapshotBeforeUpdate=r}catch(we){_e(c,c.return,we)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,c=r.nodeType,c===9)eh(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":eh(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,yt=r;break}yt=s.return}}function o2(r,s,c){var g=c.flags;switch(c.tag){case 0:case 11:case 15:ai(r,c),g&4&&As(5,c);break;case 1:if(ai(r,c),g&4)if(r=c.stateNode,s===null)try{r.componentDidMount()}catch(B){_e(c,c.return,B)}else{var x=yr(c.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(x,s,r.__reactInternalSnapshotBeforeUpdate)}catch(B){_e(c,c.return,B)}}g&64&&t2(c),g&512&&vs(c,c.return);break;case 3:if(ai(r,c),g&64&&(r=c.updateQueue,r!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{j1(r,s)}catch(B){_e(c,c.return,B)}}break;case 27:s===null&&g&4&&a2(c);case 26:case 5:ai(r,c),s===null&&g&4&&i2(c),g&512&&vs(c,c.return);break;case 12:ai(r,c);break;case 31:ai(r,c),g&4&&u2(r,c);break;case 13:ai(r,c),g&4&&f2(r,c),g&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=u4.bind(null,c),F4(r,c))));break;case 22:if(g=c.memoizedState!==null||ii,!g){s=s!==null&&s.memoizedState!==null||mt,x=ii;var b=mt;ii=g,(mt=s)&&!b?si(r,c,(c.subtreeFlags&8772)!==0):ai(r,c),ii=x,mt=b}break;case 30:break;default:ai(r,c)}}function l2(r){var s=r.alternate;s!==null&&(r.alternate=null,l2(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&ru(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var it=null,kt=!1;function ri(r,s,c){for(c=c.child;c!==null;)c2(r,s,c),c=c.sibling}function c2(r,s,c){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Ya,c)}catch{}switch(c.tag){case 26:mt||Ln(c,s),ri(r,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:mt||Ln(c,s);var g=it,x=kt;Li(c.type)&&(it=c.stateNode,kt=!1),ri(r,s,c),Ds(c.stateNode),it=g,kt=x;break;case 5:mt||Ln(c,s);case 6:if(g=it,x=kt,it=null,ri(r,s,c),it=g,kt=x,it!==null)if(kt)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(c.stateNode)}catch(b){_e(c,s,b)}else try{it.removeChild(c.stateNode)}catch(b){_e(c,s,b)}break;case 18:it!==null&&(kt?(r=it,tg(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),ya(r)):tg(it,c.stateNode));break;case 4:g=it,x=kt,it=c.stateNode.containerInfo,kt=!0,ri(r,s,c),it=g,kt=x;break;case 0:case 11:case 14:case 15:Fi(2,c,s),mt||Fi(4,c,s),ri(r,s,c);break;case 1:mt||(Ln(c,s),g=c.stateNode,typeof g.componentWillUnmount=="function"&&n2(c,s,g)),ri(r,s,c);break;case 21:ri(r,s,c);break;case 22:mt=(g=mt)||c.memoizedState!==null,ri(r,s,c),mt=g;break;default:ri(r,s,c)}}function u2(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ya(r)}catch(c){_e(s,s.return,c)}}}function f2(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ya(r)}catch(c){_e(s,s.return,c)}}function n4(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new s2),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new s2),s;default:throw Error(i(435,r.tag))}}function fl(r,s){var c=n4(r);s.forEach(function(g){if(!c.has(g)){c.add(g);var x=f4.bind(null,r,g);g.then(x,x)}})}function Gt(r,s){var c=s.deletions;if(c!==null)for(var g=0;g<c.length;g++){var x=c[g],b=r,B=s,O=B;e:for(;O!==null;){switch(O.tag){case 27:if(Li(O.type)){it=O.stateNode,kt=!1;break e}break;case 5:it=O.stateNode,kt=!1;break e;case 3:case 4:it=O.stateNode.containerInfo,kt=!0;break e}O=O.return}if(it===null)throw Error(i(160));c2(b,B,x),it=null,kt=!1,b=x.alternate,b!==null&&(b.return=null),x.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)h2(s,r),s=s.sibling}var En=null;function h2(r,s){var c=r.alternate,g=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Gt(s,r),Yt(r),g&4&&(Fi(3,r,r.return),As(3,r),Fi(5,r,r.return));break;case 1:Gt(s,r),Yt(r),g&512&&(mt||c===null||Ln(c,c.return)),g&64&&ii&&(r=r.updateQueue,r!==null&&(g=r.callbacks,g!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?g:c.concat(g))));break;case 26:var x=En;if(Gt(s,r),Yt(r),g&512&&(mt||c===null||Ln(c,c.return)),g&4){var b=c!==null?c.memoizedState:null;if(g=r.memoizedState,c===null)if(g===null)if(r.stateNode===null){e:{g=r.type,c=r.memoizedProps,x=x.ownerDocument||x;t:switch(g){case"title":b=x.getElementsByTagName("title")[0],(!b||b[ja]||b[St]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=x.createElement(g),x.head.insertBefore(b,x.querySelector("head > title"))),Tt(b,g,c),b[St]=r,xt(b),g=b;break e;case"link":var B=hg("link","href",x).get(g+(c.href||""));if(B){for(var O=0;O<B.length;O++)if(b=B[O],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){B.splice(O,1);break t}}b=x.createElement(g),Tt(b,g,c),x.head.appendChild(b);break;case"meta":if(B=hg("meta","content",x).get(g+(c.content||""))){for(O=0;O<B.length;O++)if(b=B[O],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){B.splice(O,1);break t}}b=x.createElement(g),Tt(b,g,c),x.head.appendChild(b);break;default:throw Error(i(468,g))}b[St]=r,xt(b),g=b}r.stateNode=g}else dg(x,r.type,r.stateNode);else r.stateNode=fg(x,g,r.memoizedProps);else b!==g?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,g===null?dg(x,r.type,r.stateNode):fg(x,g,r.memoizedProps)):g===null&&r.stateNode!==null&&Ef(r,r.memoizedProps,c.memoizedProps)}break;case 27:Gt(s,r),Yt(r),g&512&&(mt||c===null||Ln(c,c.return)),c!==null&&g&4&&Ef(r,r.memoizedProps,c.memoizedProps);break;case 5:if(Gt(s,r),Yt(r),g&512&&(mt||c===null||Ln(c,c.return)),r.flags&32){x=r.stateNode;try{Hr(x,"")}catch(ge){_e(r,r.return,ge)}}g&4&&r.stateNode!=null&&(x=r.memoizedProps,Ef(r,x,c!==null?c.memoizedProps:x)),g&1024&&(Rf=!0);break;case 6:if(Gt(s,r),Yt(r),g&4){if(r.stateNode===null)throw Error(i(162));g=r.memoizedProps,c=r.stateNode;try{c.nodeValue=g}catch(ge){_e(r,r.return,ge)}}break;case 3:if(Dl=null,x=En,En=Ml(s.containerInfo),Gt(s,r),En=x,Yt(r),g&4&&c!==null&&c.memoizedState.isDehydrated)try{ya(s.containerInfo)}catch(ge){_e(r,r.return,ge)}Rf&&(Rf=!1,d2(r));break;case 4:g=En,En=Ml(r.stateNode.containerInfo),Gt(s,r),Yt(r),En=g;break;case 12:Gt(s,r),Yt(r);break;case 31:Gt(s,r),Yt(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,fl(r,g)));break;case 13:Gt(s,r),Yt(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(dl=Jt()),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,fl(r,g)));break;case 22:x=r.memoizedState!==null;var q=c!==null&&c.memoizedState!==null,ne=ii,se=mt;if(ii=ne||x,mt=se||q,Gt(s,r),mt=se,ii=ne,Yt(r),g&8192)e:for(s=r.stateNode,s._visibility=x?s._visibility&-2:s._visibility|1,x&&(c===null||q||ii||mt||wr(r)),c=null,s=r;;){if(s.tag===5||s.tag===26){if(c===null){q=c=s;try{if(b=q.stateNode,x)B=b.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{O=q.stateNode;var le=q.memoizedProps.style,ie=le!=null&&le.hasOwnProperty("display")?le.display:null;O.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(ge){_e(q,q.return,ge)}}}else if(s.tag===6){if(c===null){q=s;try{q.stateNode.nodeValue=x?"":q.memoizedProps}catch(ge){_e(q,q.return,ge)}}}else if(s.tag===18){if(c===null){q=s;try{var re=q.stateNode;x?ng(re,!0):ng(q.stateNode,!1)}catch(ge){_e(q,q.return,ge)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=r.updateQueue,g!==null&&(c=g.retryQueue,c!==null&&(g.retryQueue=null,fl(r,c))));break;case 19:Gt(s,r),Yt(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,fl(r,g)));break;case 30:break;case 21:break;default:Gt(s,r),Yt(r)}}function Yt(r){var s=r.flags;if(s&2){try{for(var c,g=r.return;g!==null;){if(r2(g)){c=g;break}g=g.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var x=c.stateNode,b=Df(r);ul(r,b,x);break;case 5:var B=c.stateNode;c.flags&32&&(Hr(B,""),c.flags&=-33);var O=Df(r);ul(r,O,B);break;case 3:case 4:var q=c.stateNode.containerInfo,ne=Df(r);Tf(r,ne,q);break;default:throw Error(i(161))}}catch(se){_e(r,r.return,se)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function d2(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;d2(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function ai(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)o2(r,s.alternate,s),s=s.sibling}function wr(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Fi(4,s,s.return),wr(s);break;case 1:Ln(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&n2(s,s.return,c),wr(s);break;case 27:Ds(s.stateNode);case 26:case 5:Ln(s,s.return),wr(s);break;case 22:s.memoizedState===null&&wr(s);break;case 30:wr(s);break;default:wr(s)}r=r.sibling}}function si(r,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,x=r,b=s,B=b.flags;switch(b.tag){case 0:case 11:case 15:si(x,b,c),As(4,b);break;case 1:if(si(x,b,c),g=b,x=g.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(ne){_e(g,g.return,ne)}if(g=b,x=g.updateQueue,x!==null){var O=g.stateNode;try{var q=x.shared.hiddenCallbacks;if(q!==null)for(x.shared.hiddenCallbacks=null,x=0;x<q.length;x++)X1(q[x],O)}catch(ne){_e(g,g.return,ne)}}c&&B&64&&t2(b),vs(b,b.return);break;case 27:a2(b);case 26:case 5:si(x,b,c),c&&g===null&&B&4&&i2(b),vs(b,b.return);break;case 12:si(x,b,c);break;case 31:si(x,b,c),c&&B&4&&u2(x,b);break;case 13:si(x,b,c),c&&B&4&&f2(x,b);break;case 22:b.memoizedState===null&&si(x,b,c),vs(b,b.return);break;case 30:break;default:si(x,b,c)}s=s.sibling}}function Ff(r,s){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&rs(c))}function Bf(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&rs(r))}function Dn(r,s,c,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)m2(r,s,c,g),s=s.sibling}function m2(r,s,c,g){var x=s.flags;switch(s.tag){case 0:case 11:case 15:Dn(r,s,c,g),x&2048&&As(9,s);break;case 1:Dn(r,s,c,g);break;case 3:Dn(r,s,c,g),x&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&rs(r)));break;case 12:if(x&2048){Dn(r,s,c,g),r=s.stateNode;try{var b=s.memoizedProps,B=b.id,O=b.onPostCommit;typeof O=="function"&&O(B,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(q){_e(s,s.return,q)}}else Dn(r,s,c,g);break;case 31:Dn(r,s,c,g);break;case 13:Dn(r,s,c,g);break;case 23:break;case 22:b=s.stateNode,B=s.alternate,s.memoizedState!==null?b._visibility&2?Dn(r,s,c,g):xs(r,s):b._visibility&2?Dn(r,s,c,g):(b._visibility|=2,ca(r,s,c,g,(s.subtreeFlags&10256)!==0||!1)),x&2048&&Ff(B,s);break;case 24:Dn(r,s,c,g),x&2048&&Bf(s.alternate,s);break;default:Dn(r,s,c,g)}}function ca(r,s,c,g,x){for(x=x&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var b=r,B=s,O=c,q=g,ne=B.flags;switch(B.tag){case 0:case 11:case 15:ca(b,B,O,q,x),As(8,B);break;case 23:break;case 22:var se=B.stateNode;B.memoizedState!==null?se._visibility&2?ca(b,B,O,q,x):xs(b,B):(se._visibility|=2,ca(b,B,O,q,x)),x&&ne&2048&&Ff(B.alternate,B);break;case 24:ca(b,B,O,q,x),x&&ne&2048&&Bf(B.alternate,B);break;default:ca(b,B,O,q,x)}s=s.sibling}}function xs(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=r,g=s,x=g.flags;switch(g.tag){case 22:xs(c,g),x&2048&&Ff(g.alternate,g);break;case 24:xs(c,g),x&2048&&Bf(g.alternate,g);break;default:xs(c,g)}s=s.sibling}}var ys=8192;function ua(r,s,c){if(r.subtreeFlags&ys)for(r=r.child;r!==null;)g2(r,s,c),r=r.sibling}function g2(r,s,c){switch(r.tag){case 26:ua(r,s,c),r.flags&ys&&r.memoizedState!==null&&Y4(c,En,r.memoizedState,r.memoizedProps);break;case 5:ua(r,s,c);break;case 3:case 4:var g=En;En=Ml(r.stateNode.containerInfo),ua(r,s,c),En=g;break;case 22:r.memoizedState===null&&(g=r.alternate,g!==null&&g.memoizedState!==null?(g=ys,ys=16777216,ua(r,s,c),ys=g):ua(r,s,c));break;default:ua(r,s,c)}}function p2(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function ws(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];yt=g,v2(g,r)}p2(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)A2(r),r=r.sibling}function A2(r){switch(r.tag){case 0:case 11:case 15:ws(r),r.flags&2048&&Fi(9,r,r.return);break;case 3:ws(r);break;case 12:ws(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,hl(r)):ws(r);break;default:ws(r)}}function hl(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];yt=g,v2(g,r)}p2(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Fi(8,s,s.return),hl(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,hl(s));break;default:hl(s)}r=r.sibling}}function v2(r,s){for(;yt!==null;){var c=yt;switch(c.tag){case 0:case 11:case 15:Fi(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var g=c.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:rs(c.memoizedState.cache)}if(g=c.child,g!==null)g.return=c,yt=g;else e:for(c=r;yt!==null;){g=yt;var x=g.sibling,b=g.return;if(l2(g),g===c){yt=null;break e}if(x!==null){x.return=b,yt=x;break e}yt=b}}}var i4={getCacheForType:function(r){var s=Et(ft),c=s.data.get(r);return c===void 0&&(c=r(),s.data.set(r,c)),c},cacheSignal:function(){return Et(ft).controller.signal}},r4=typeof WeakMap=="function"?WeakMap:Map,He=0,Ze=null,Fe=null,Ie=0,qe=0,sn=null,Bi=!1,fa=!1,Uf=!1,oi=0,ot=0,Ui=0,br=0,Nf=0,on=0,ha=0,bs=null,Ht=null,If=!1,dl=0,x2=0,ml=1/0,gl=null,Ni=null,pt=0,Ii=null,da=null,li=0,Vf=0,Of=null,y2=null,Cs=0,Lf=null;function ln(){return(He&2)!==0&&Ie!==0?Ie&-Ie:k.T!==null?Hf():O0()}function w2(){if(on===0)if((Ie&536870912)===0||Oe){var r=Co;Co<<=1,(Co&3932160)===0&&(Co=262144),on=r}else on=536870912;return r=rn.current,r!==null&&(r.flags|=32),on}function Xt(r,s,c){(r===Ze&&(qe===2||qe===9)||r.cancelPendingCommit!==null)&&(ma(r,0),Vi(r,Ie,on,!1)),Xa(r,c),((He&2)===0||r!==Ze)&&(r===Ze&&((He&2)===0&&(br|=c),ot===4&&Vi(r,Ie,on,!1)),Pn(r))}function b2(r,s,c){if((He&6)!==0)throw Error(i(327));var g=!c&&(s&127)===0&&(s&r.expiredLanes)===0||Ha(r,s),x=g?o4(r,s):zf(r,s,!0),b=g;do{if(x===0){fa&&!g&&Vi(r,s,0,!1);break}else{if(c=r.current.alternate,b&&!a4(c)){x=zf(r,s,!1),b=!1;continue}if(x===2){if(b=s,r.errorRecoveryDisabledLanes&b)var B=0;else B=r.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){s=B;e:{var O=r;x=bs;var q=O.current.memoizedState.isDehydrated;if(q&&(ma(O,B).flags|=256),B=zf(O,B,!1),B!==2){if(Uf&&!q){O.errorRecoveryDisabledLanes|=b,br|=b,x=4;break e}b=Ht,Ht=x,b!==null&&(Ht===null?Ht=b:Ht.push.apply(Ht,b))}x=B}if(b=!1,x!==2)continue}}if(x===1){ma(r,0),Vi(r,s,0,!0);break}e:{switch(g=r,b=x,b){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Vi(g,s,on,!Bi);break e;case 2:Ht=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(x=dl+300-Jt(),10<x)){if(Vi(g,s,on,!Bi),Mo(g,0,!0)!==0)break e;li=s,g.timeoutHandle=$2(C2.bind(null,g,c,Ht,gl,If,s,on,br,ha,Bi,b,"Throttled",-0,0),x);break e}C2(g,c,Ht,gl,If,s,on,br,ha,Bi,b,null,-0,0)}}break}while(!0);Pn(r)}function C2(r,s,c,g,x,b,B,O,q,ne,se,le,ie,re){if(r.timeoutHandle=-1,le=s.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_n},g2(s,b,le);var ge=(b&62914560)===b?dl-Jt():(b&4194048)===b?x2-Jt():0;if(ge=H4(le,ge),ge!==null){li=b,r.cancelPendingCommit=ge(B2.bind(null,r,s,b,c,g,x,B,O,q,se,le,null,ie,re)),Vi(r,b,B,!ne);return}}B2(r,s,b,c,g,x,B,O,q)}function a4(r){for(var s=r;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var g=0;g<c.length;g++){var x=c[g],b=x.getSnapshot;x=x.value;try{if(!tn(b(),x))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Vi(r,s,c,g){s&=~Nf,s&=~br,r.suspendedLanes|=s,r.pingedLanes&=~s,g&&(r.warmLanes|=s),g=r.expirationTimes;for(var x=s;0<x;){var b=31-en(x),B=1<<b;g[b]=-1,x&=~B}c!==0&&N0(r,c,s)}function pl(){return(He&6)===0?(Ss(0),!1):!0}function Pf(){if(Fe!==null){if(qe===0)var r=Fe.return;else r=Fe,Zn=dr=null,$u(r),ra=null,ss=0,r=Fe;for(;r!==null;)e2(r.alternate,r),r=r.return;Fe=null}}function ma(r,s){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,M4(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),li=0,Pf(),Ze=r,Fe=c=Qn(r.current,null),Ie=s,qe=0,sn=null,Bi=!1,fa=Ha(r,s),Uf=!1,ha=on=Nf=br=Ui=ot=0,Ht=bs=null,If=!1,(s&8)!==0&&(s|=s&32);var g=r.entangledLanes;if(g!==0)for(r=r.entanglements,g&=s;0<g;){var x=31-en(g),b=1<<x;s|=r[x],g&=~b}return oi=s,Lo(),c}function S2(r,s){Ee=null,k.H=ms,s===ia||s===jo?(s=k1(),qe=3):s===Gu?(s=k1(),qe=4):qe=s===pf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,sn=s,Fe===null&&(ot=1,al(r,mn(s,r.current)))}function M2(){var r=rn.current;return r===null?!0:(Ie&4194048)===Ie?vn===null:(Ie&62914560)===Ie||(Ie&536870912)!==0?r===vn:!1}function E2(){var r=k.H;return k.H=ms,r===null?ms:r}function D2(){var r=k.A;return k.A=i4,r}function Al(){ot=4,Bi||(Ie&4194048)!==Ie&&rn.current!==null||(fa=!0),(Ui&134217727)===0&&(br&134217727)===0||Ze===null||Vi(Ze,Ie,on,!1)}function zf(r,s,c){var g=He;He|=2;var x=E2(),b=D2();(Ze!==r||Ie!==s)&&(gl=null,ma(r,s)),s=!1;var B=ot;e:do try{if(qe!==0&&Fe!==null){var O=Fe,q=sn;switch(qe){case 8:Pf(),B=6;break e;case 3:case 2:case 9:case 6:rn.current===null&&(s=!0);var ne=qe;if(qe=0,sn=null,ga(r,O,q,ne),c&&fa){B=0;break e}break;default:ne=qe,qe=0,sn=null,ga(r,O,q,ne)}}s4(),B=ot;break}catch(se){S2(r,se)}while(!0);return s&&r.shellSuspendCounter++,Zn=dr=null,He=g,k.H=x,k.A=b,Fe===null&&(Ze=null,Ie=0,Lo()),B}function s4(){for(;Fe!==null;)T2(Fe)}function o4(r,s){var c=He;He|=2;var g=E2(),x=D2();Ze!==r||Ie!==s?(gl=null,ml=Jt()+500,ma(r,s)):fa=Ha(r,s);e:do try{if(qe!==0&&Fe!==null){s=Fe;var b=sn;t:switch(qe){case 1:qe=0,sn=null,ga(r,s,b,1);break;case 2:case 9:if(P1(b)){qe=0,sn=null,R2(s);break}s=function(){qe!==2&&qe!==9||Ze!==r||(qe=7),Pn(r)},b.then(s,s);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:P1(b)?(qe=0,sn=null,R2(s)):(qe=0,sn=null,ga(r,s,b,7));break;case 5:var B=null;switch(Fe.tag){case 26:B=Fe.memoizedState;case 5:case 27:var O=Fe;if(B?mg(B):O.stateNode.complete){qe=0,sn=null;var q=O.sibling;if(q!==null)Fe=q;else{var ne=O.return;ne!==null?(Fe=ne,vl(ne)):Fe=null}break t}}qe=0,sn=null,ga(r,s,b,5);break;case 6:qe=0,sn=null,ga(r,s,b,6);break;case 8:Pf(),ot=6;break e;default:throw Error(i(462))}}l4();break}catch(se){S2(r,se)}while(!0);return Zn=dr=null,k.H=g,k.A=x,He=c,Fe!==null?0:(Ze=null,Ie=0,Lo(),ot)}function l4(){for(;Fe!==null&&!B5();)T2(Fe)}function T2(r){var s=Jm(r.alternate,r,oi);r.memoizedProps=r.pendingProps,s===null?vl(r):Fe=s}function R2(r){var s=r,c=s.alternate;switch(s.tag){case 15:case 0:s=qm(c,s,s.pendingProps,s.type,void 0,Ie);break;case 11:s=qm(c,s,s.pendingProps,s.type.render,s.ref,Ie);break;case 5:$u(s);default:e2(c,s),s=Fe=D1(s,oi),s=Jm(c,s,oi)}r.memoizedProps=r.pendingProps,s===null?vl(r):Fe=s}function ga(r,s,c,g){Zn=dr=null,$u(s),ra=null,ss=0;var x=s.return;try{if(W3(r,x,s,c,Ie)){ot=1,al(r,mn(c,r.current)),Fe=null;return}}catch(b){if(x!==null)throw Fe=x,b;ot=1,al(r,mn(c,r.current)),Fe=null;return}s.flags&32768?(Oe||g===1?r=!0:fa||(Ie&536870912)!==0?r=!1:(Bi=r=!0,(g===2||g===9||g===3||g===6)&&(g=rn.current,g!==null&&g.tag===13&&(g.flags|=16384))),F2(s,r)):vl(s)}function vl(r){var s=r;do{if((s.flags&32768)!==0){F2(s,Bi);return}r=s.return;var c=$3(s.alternate,s,oi);if(c!==null){Fe=c;return}if(s=s.sibling,s!==null){Fe=s;return}Fe=s=r}while(s!==null);ot===0&&(ot=5)}function F2(r,s){do{var c=e4(r.alternate,r);if(c!==null){c.flags&=32767,Fe=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(r=r.sibling,r!==null)){Fe=r;return}Fe=r=c}while(r!==null);ot=6,Fe=null}function B2(r,s,c,g,x,b,B,O,q){r.cancelPendingCommit=null;do xl();while(pt!==0);if((He&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(b=s.lanes|s.childLanes,b|=Eu,G5(r,c,b,B,O,q),r===Ze&&(Fe=Ze=null,Ie=0),da=s,Ii=r,li=c,Vf=b,Of=x,y2=g,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,h4(wo,function(){return O2(),null})):(r.callbackNode=null,r.callbackPriority=0),g=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||g){g=k.T,k.T=null,x=j.p,j.p=2,B=He,He|=4;try{t4(r,s,c)}finally{He=B,j.p=x,k.T=g}}pt=1,U2(),N2(),I2()}}function U2(){if(pt===1){pt=0;var r=Ii,s=da,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=k.T,k.T=null;var g=j.p;j.p=2;var x=He;He|=4;try{h2(s,r);var b=Zf,B=v1(r.containerInfo),O=b.focusedElem,q=b.selectionRange;if(B!==O&&O&&O.ownerDocument&&A1(O.ownerDocument.documentElement,O)){if(q!==null&&wu(O)){var ne=q.start,se=q.end;if(se===void 0&&(se=ne),"selectionStart"in O)O.selectionStart=ne,O.selectionEnd=Math.min(se,O.value.length);else{var le=O.ownerDocument||document,ie=le&&le.defaultView||window;if(ie.getSelection){var re=ie.getSelection(),ge=O.textContent.length,we=Math.min(q.start,ge),We=q.end===void 0?we:Math.min(q.end,ge);!re.extend&&we>We&&(B=We,We=we,we=B);var W=p1(O,we),_=p1(O,We);if(W&&_&&(re.rangeCount!==1||re.anchorNode!==W.node||re.anchorOffset!==W.offset||re.focusNode!==_.node||re.focusOffset!==_.offset)){var ee=le.createRange();ee.setStart(W.node,W.offset),re.removeAllRanges(),we>We?(re.addRange(ee),re.extend(_.node,_.offset)):(ee.setEnd(_.node,_.offset),re.addRange(ee))}}}}for(le=[],re=O;re=re.parentNode;)re.nodeType===1&&le.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<le.length;O++){var oe=le[O];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Bl=!!Wf,Zf=Wf=null}finally{He=x,j.p=g,k.T=c}}r.current=s,pt=2}}function N2(){if(pt===2){pt=0;var r=Ii,s=da,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=k.T,k.T=null;var g=j.p;j.p=2;var x=He;He|=4;try{o2(r,s.alternate,s)}finally{He=x,j.p=g,k.T=c}}pt=3}}function I2(){if(pt===4||pt===3){pt=0,U5();var r=Ii,s=da,c=li,g=y2;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?pt=5:(pt=0,da=Ii=null,V2(r,r.pendingLanes));var x=r.pendingLanes;if(x===0&&(Ni=null),nu(c),s=s.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Ya,s,void 0,(s.current.flags&128)===128)}catch{}if(g!==null){s=k.T,x=j.p,j.p=2,k.T=null;try{for(var b=r.onRecoverableError,B=0;B<g.length;B++){var O=g[B];b(O.value,{componentStack:O.stack})}}finally{k.T=s,j.p=x}}(li&3)!==0&&xl(),Pn(r),x=r.pendingLanes,(c&261930)!==0&&(x&42)!==0?r===Lf?Cs++:(Cs=0,Lf=r):Cs=0,Ss(0)}}function V2(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,rs(s)))}function xl(){return U2(),N2(),I2(),O2()}function O2(){if(pt!==5)return!1;var r=Ii,s=Vf;Vf=0;var c=nu(li),g=k.T,x=j.p;try{j.p=32>c?32:c,k.T=null,c=Of,Of=null;var b=Ii,B=li;if(pt=0,da=Ii=null,li=0,(He&6)!==0)throw Error(i(331));var O=He;if(He|=4,A2(b.current),m2(b,b.current,B,c),He=O,Ss(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Ya,b)}catch{}return!0}finally{j.p=x,k.T=g,V2(r,s)}}function L2(r,s,c){s=mn(c,s),s=gf(r.stateNode,s,2),r=Di(r,s,2),r!==null&&(Xa(r,2),Pn(r))}function _e(r,s,c){if(r.tag===3)L2(r,r,c);else for(;s!==null;){if(s.tag===3){L2(s,r,c);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ni===null||!Ni.has(g))){r=mn(c,r),c=Pm(2),g=Di(s,c,2),g!==null&&(zm(c,g,s,r),Xa(g,2),Pn(g));break}}s=s.return}}function kf(r,s,c){var g=r.pingCache;if(g===null){g=r.pingCache=new r4;var x=new Set;g.set(s,x)}else x=g.get(s),x===void 0&&(x=new Set,g.set(s,x));x.has(c)||(Uf=!0,x.add(c),r=c4.bind(null,r,s,c),s.then(r,r))}function c4(r,s,c){var g=r.pingCache;g!==null&&g.delete(s),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,Ze===r&&(Ie&c)===c&&(ot===4||ot===3&&(Ie&62914560)===Ie&&300>Jt()-dl?(He&2)===0&&ma(r,0):Nf|=c,ha===Ie&&(ha=0)),Pn(r)}function P2(r,s){s===0&&(s=U0()),r=ur(r,s),r!==null&&(Xa(r,s),Pn(r))}function u4(r){var s=r.memoizedState,c=0;s!==null&&(c=s.retryLane),P2(r,c)}function f4(r,s){var c=0;switch(r.tag){case 31:case 13:var g=r.stateNode,x=r.memoizedState;x!==null&&(c=x.retryLane);break;case 19:g=r.stateNode;break;case 22:g=r.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(s),P2(r,c)}function h4(r,s){return Jc(r,s)}var yl=null,pa=null,Gf=!1,wl=!1,Yf=!1,Oi=0;function Pn(r){r!==pa&&r.next===null&&(pa===null?yl=pa=r:pa=pa.next=r),wl=!0,Gf||(Gf=!0,m4())}function Ss(r,s){if(!Yf&&wl){Yf=!0;do for(var c=!1,g=yl;g!==null;){if(r!==0){var x=g.pendingLanes;if(x===0)var b=0;else{var B=g.suspendedLanes,O=g.pingedLanes;b=(1<<31-en(42|r)+1)-1,b&=x&~(B&~O),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,Y2(g,b))}else b=Ie,b=Mo(g,g===Ze?b:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(b&3)===0||Ha(g,b)||(c=!0,Y2(g,b));g=g.next}while(c);Yf=!1}}function d4(){z2()}function z2(){wl=Gf=!1;var r=0;Oi!==0&&S4()&&(r=Oi);for(var s=Jt(),c=null,g=yl;g!==null;){var x=g.next,b=k2(g,s);b===0?(g.next=null,c===null?yl=x:c.next=x,x===null&&(pa=c)):(c=g,(r!==0||(b&3)!==0)&&(wl=!0)),g=x}pt!==0&&pt!==5||Ss(r),Oi!==0&&(Oi=0)}function k2(r,s){for(var c=r.suspendedLanes,g=r.pingedLanes,x=r.expirationTimes,b=r.pendingLanes&-62914561;0<b;){var B=31-en(b),O=1<<B,q=x[B];q===-1?((O&c)===0||(O&g)!==0)&&(x[B]=k5(O,s)):q<=s&&(r.expiredLanes|=O),b&=~O}if(s=Ze,c=Ie,c=Mo(r,r===s?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g=r.callbackNode,c===0||r===s&&(qe===2||qe===9)||r.cancelPendingCommit!==null)return g!==null&&g!==null&&$c(g),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Ha(r,c)){if(s=c&-c,s===r.callbackPriority)return s;switch(g!==null&&$c(g),nu(c)){case 2:case 8:c=F0;break;case 32:c=wo;break;case 268435456:c=B0;break;default:c=wo}return g=G2.bind(null,r),c=Jc(c,g),r.callbackPriority=s,r.callbackNode=c,s}return g!==null&&g!==null&&$c(g),r.callbackPriority=2,r.callbackNode=null,2}function G2(r,s){if(pt!==0&&pt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(xl()&&r.callbackNode!==c)return null;var g=Ie;return g=Mo(r,r===Ze?g:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g===0?null:(b2(r,g,s),k2(r,Jt()),r.callbackNode!=null&&r.callbackNode===c?G2.bind(null,r):null)}function Y2(r,s){if(xl())return null;b2(r,s,!0)}function m4(){E4(function(){(He&6)!==0?Jc(R0,d4):z2()})}function Hf(){if(Oi===0){var r=ta;r===0&&(r=bo,bo<<=1,(bo&261888)===0&&(bo=256)),Oi=r}return Oi}function H2(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ro(""+r)}function X2(r,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,r.id&&c.setAttribute("form",r.id),s.parentNode.insertBefore(c,s),r=new FormData(r),c.parentNode.removeChild(c),r}function g4(r,s,c,g,x){if(s==="submit"&&c&&c.stateNode===x){var b=H2((x[Pt]||null).action),B=g.submitter;B&&(s=(s=B[Pt]||null)?H2(s.formAction):B.getAttribute("formAction"),s!==null&&(b=s,B=null));var O=new No("action","action",null,g,x);r.push({event:O,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Oi!==0){var q=B?X2(x,B):new FormData(x);cf(c,{pending:!0,data:q,method:x.method,action:b},null,q)}}else typeof b=="function"&&(O.preventDefault(),q=B?X2(x,B):new FormData(x),cf(c,{pending:!0,data:q,method:x.method,action:b},b,q))},currentTarget:x}]})}}for(var Xf=0;Xf<Mu.length;Xf++){var jf=Mu[Xf],p4=jf.toLowerCase(),A4=jf[0].toUpperCase()+jf.slice(1);Mn(p4,"on"+A4)}Mn(w1,"onAnimationEnd"),Mn(b1,"onAnimationIteration"),Mn(C1,"onAnimationStart"),Mn("dblclick","onDoubleClick"),Mn("focusin","onFocus"),Mn("focusout","onBlur"),Mn(N3,"onTransitionRun"),Mn(I3,"onTransitionStart"),Mn(V3,"onTransitionCancel"),Mn(S1,"onTransitionEnd"),Gr("onMouseEnter",["mouseout","mouseover"]),Gr("onMouseLeave",["mouseout","mouseover"]),Gr("onPointerEnter",["pointerout","pointerover"]),Gr("onPointerLeave",["pointerout","pointerover"]),sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ms));function j2(r,s){s=(s&4)!==0;for(var c=0;c<r.length;c++){var g=r[c],x=g.event;g=g.listeners;e:{var b=void 0;if(s)for(var B=g.length-1;0<=B;B--){var O=g[B],q=O.instance,ne=O.currentTarget;if(O=O.listener,q!==b&&x.isPropagationStopped())break e;b=O,x.currentTarget=ne;try{b(x)}catch(se){Oo(se)}x.currentTarget=null,b=q}else for(B=0;B<g.length;B++){if(O=g[B],q=O.instance,ne=O.currentTarget,O=O.listener,q!==b&&x.isPropagationStopped())break e;b=O,x.currentTarget=ne;try{b(x)}catch(se){Oo(se)}x.currentTarget=null,b=q}}}}function Be(r,s){var c=s[iu];c===void 0&&(c=s[iu]=new Set);var g=r+"__bubble";c.has(g)||(q2(s,r,2,!1),c.add(g))}function qf(r,s,c){var g=0;s&&(g|=4),q2(c,r,g,s)}var bl="_reactListening"+Math.random().toString(36).slice(2);function _f(r){if(!r[bl]){r[bl]=!0,z0.forEach(function(c){c!=="selectionchange"&&(v4.has(c)||qf(c,!1,r),qf(c,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[bl]||(s[bl]=!0,qf("selectionchange",!1,s))}}function q2(r,s,c,g){switch(wg(s)){case 2:var x=q4;break;case 8:x=_4;break;default:x=lh}c=x.bind(null,s,c,r),x=void 0,!hu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(x=!0),g?x!==void 0?r.addEventListener(s,c,{capture:!0,passive:x}):r.addEventListener(s,c,!0):x!==void 0?r.addEventListener(s,c,{passive:x}):r.addEventListener(s,c,!1)}function Kf(r,s,c,g,x){var b=g;if((s&1)===0&&(s&2)===0&&g!==null)e:for(;;){if(g===null)return;var B=g.tag;if(B===3||B===4){var O=g.stateNode.containerInfo;if(O===x)break;if(B===4)for(B=g.return;B!==null;){var q=B.tag;if((q===3||q===4)&&B.stateNode.containerInfo===x)return;B=B.return}for(;O!==null;){if(B=Pr(O),B===null)return;if(q=B.tag,q===5||q===6||q===26||q===27){g=b=B;continue e}O=O.parentNode}}g=g.return}Z0(function(){var ne=b,se=uu(c),le=[];e:{var ie=M1.get(r);if(ie!==void 0){var re=No,ge=r;switch(r){case"keypress":if(Bo(c)===0)break e;case"keydown":case"keyup":re=f3;break;case"focusin":ge="focus",re=pu;break;case"focusout":ge="blur",re=pu;break;case"beforeblur":case"afterblur":re=pu;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=e1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=$5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=m3;break;case w1:case b1:case C1:re=n3;break;case S1:re=p3;break;case"scroll":case"scrollend":re=Z5;break;case"wheel":re=v3;break;case"copy":case"cut":case"paste":re=r3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=n1;break;case"toggle":case"beforetoggle":re=y3}var we=(s&4)!==0,We=!we&&(r==="scroll"||r==="scrollend"),W=we?ie!==null?ie+"Capture":null:ie;we=[];for(var _=ne,ee;_!==null;){var oe=_;if(ee=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||ee===null||W===null||(oe=_a(_,W),oe!=null&&we.push(Es(_,oe,ee))),We)break;_=_.return}0<we.length&&(ie=new re(ie,ge,null,c,se),le.push({event:ie,listeners:we}))}}if((s&7)===0){e:{if(ie=r==="mouseover"||r==="pointerover",re=r==="mouseout"||r==="pointerout",ie&&c!==cu&&(ge=c.relatedTarget||c.fromElement)&&(Pr(ge)||ge[Lr]))break e;if((re||ie)&&(ie=se.window===se?se:(ie=se.ownerDocument)?ie.defaultView||ie.parentWindow:window,re?(ge=c.relatedTarget||c.toElement,re=ne,ge=ge?Pr(ge):null,ge!==null&&(We=o(ge),we=ge.tag,ge!==We||we!==5&&we!==27&&we!==6)&&(ge=null)):(re=null,ge=ne),re!==ge)){if(we=e1,oe="onMouseLeave",W="onMouseEnter",_="mouse",(r==="pointerout"||r==="pointerover")&&(we=n1,oe="onPointerLeave",W="onPointerEnter",_="pointer"),We=re==null?ie:qa(re),ee=ge==null?ie:qa(ge),ie=new we(oe,_+"leave",re,c,se),ie.target=We,ie.relatedTarget=ee,oe=null,Pr(se)===ne&&(we=new we(W,_+"enter",ge,c,se),we.target=ee,we.relatedTarget=We,oe=we),We=oe,re&&ge)t:{for(we=x4,W=re,_=ge,ee=0,oe=W;oe;oe=we(oe))ee++;oe=0;for(var ye=_;ye;ye=we(ye))oe++;for(;0<ee-oe;)W=we(W),ee--;for(;0<oe-ee;)_=we(_),oe--;for(;ee--;){if(W===_||_!==null&&W===_.alternate){we=W;break t}W=we(W),_=we(_)}we=null}else we=null;re!==null&&_2(le,ie,re,we,!1),ge!==null&&We!==null&&_2(le,We,ge,we,!0)}}e:{if(ie=ne?qa(ne):window,re=ie.nodeName&&ie.nodeName.toLowerCase(),re==="select"||re==="input"&&ie.type==="file")var ke=u1;else if(l1(ie))if(f1)ke=F3;else{ke=T3;var xe=D3}else re=ie.nodeName,!re||re.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ne&&lu(ne.elementType)&&(ke=u1):ke=R3;if(ke&&(ke=ke(r,ne))){c1(le,ke,c,se);break e}xe&&xe(r,ie,ne),r==="focusout"&&ne&&ie.type==="number"&&ne.memoizedProps.value!=null&&ou(ie,"number",ie.value)}switch(xe=ne?qa(ne):window,r){case"focusin":(l1(xe)||xe.contentEditable==="true")&&(_r=xe,bu=ne,ts=null);break;case"focusout":ts=bu=_r=null;break;case"mousedown":Cu=!0;break;case"contextmenu":case"mouseup":case"dragend":Cu=!1,x1(le,c,se);break;case"selectionchange":if(U3)break;case"keydown":case"keyup":x1(le,c,se)}var De;if(vu)e:{switch(r){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else qr?s1(r,c)&&(Ve="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Ve="onCompositionStart");Ve&&(i1&&c.locale!=="ko"&&(qr||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&qr&&(De=J0()):(yi=se,du="value"in yi?yi.value:yi.textContent,qr=!0)),xe=Cl(ne,Ve),0<xe.length&&(Ve=new t1(Ve,r,null,c,se),le.push({event:Ve,listeners:xe}),De?Ve.data=De:(De=o1(c),De!==null&&(Ve.data=De)))),(De=b3?C3(r,c):S3(r,c))&&(Ve=Cl(ne,"onBeforeInput"),0<Ve.length&&(xe=new t1("onBeforeInput","beforeinput",null,c,se),le.push({event:xe,listeners:Ve}),xe.data=De)),g4(le,r,ne,c,se)}j2(le,s)})}function Es(r,s,c){return{instance:r,listener:s,currentTarget:c}}function Cl(r,s){for(var c=s+"Capture",g=[];r!==null;){var x=r,b=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||b===null||(x=_a(r,c),x!=null&&g.unshift(Es(r,x,b)),x=_a(r,s),x!=null&&g.push(Es(r,x,b))),r.tag===3)return g;r=r.return}return[]}function x4(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function _2(r,s,c,g,x){for(var b=s._reactName,B=[];c!==null&&c!==g;){var O=c,q=O.alternate,ne=O.stateNode;if(O=O.tag,q!==null&&q===g)break;O!==5&&O!==26&&O!==27||ne===null||(q=ne,x?(ne=_a(c,b),ne!=null&&B.unshift(Es(c,ne,q))):x||(ne=_a(c,b),ne!=null&&B.push(Es(c,ne,q)))),c=c.return}B.length!==0&&r.push({event:s,listeners:B})}var y4=/\r\n?/g,w4=/\u0000|\uFFFD/g;function K2(r){return(typeof r=="string"?r:""+r).replace(y4,`
`).replace(w4,"")}function Q2(r,s){return s=K2(s),K2(r)===s}function Qe(r,s,c,g,x,b){switch(c){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||Hr(r,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&Hr(r,""+g);break;case"className":Do(r,"class",g);break;case"tabIndex":Do(r,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Do(r,c,g);break;case"style":Q0(r,g,b);break;case"data":if(s!=="object"){Do(r,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||c!=="href")){r.removeAttribute(c);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(c);break}g=Ro(""+g),r.setAttribute(c,g);break;case"action":case"formAction":if(typeof g=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(s!=="input"&&Qe(r,s,"name",x.name,x,null),Qe(r,s,"formEncType",x.formEncType,x,null),Qe(r,s,"formMethod",x.formMethod,x,null),Qe(r,s,"formTarget",x.formTarget,x,null)):(Qe(r,s,"encType",x.encType,x,null),Qe(r,s,"method",x.method,x,null),Qe(r,s,"target",x.target,x,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(c);break}g=Ro(""+g),r.setAttribute(c,g);break;case"onClick":g!=null&&(r.onclick=_n);break;case"onScroll":g!=null&&Be("scroll",r);break;case"onScrollEnd":g!=null&&Be("scrollend",r);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(c=g.__html,c!=null){if(x.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":r.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){r.removeAttribute("xlink:href");break}c=Ro(""+g),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(c,""+g):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":g===!0?r.setAttribute(c,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(c,g):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?r.setAttribute(c,g):r.removeAttribute(c);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?r.removeAttribute(c):r.setAttribute(c,g);break;case"popover":Be("beforetoggle",r),Be("toggle",r),Eo(r,"popover",g);break;case"xlinkActuate":qn(r,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":qn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":qn(r,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":qn(r,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":qn(r,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":qn(r,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":qn(r,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":qn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":qn(r,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Eo(r,"is",g);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Q5.get(c)||c,Eo(r,c,g))}}function Qf(r,s,c,g,x,b){switch(c){case"style":Q0(r,g,b);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(c=g.__html,c!=null){if(x.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof g=="string"?Hr(r,g):(typeof g=="number"||typeof g=="bigint")&&Hr(r,""+g);break;case"onScroll":g!=null&&Be("scroll",r);break;case"onScrollEnd":g!=null&&Be("scrollend",r);break;case"onClick":g!=null&&(r.onclick=_n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!k0.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(x=c.endsWith("Capture"),s=c.slice(2,x?c.length-7:void 0),b=r[Pt]||null,b=b!=null?b[c]:null,typeof b=="function"&&r.removeEventListener(s,b,x),typeof g=="function")){typeof b!="function"&&b!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(s,g,x);break e}c in r?r[c]=g:g===!0?r.setAttribute(c,""):Eo(r,c,g)}}}function Tt(r,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",r),Be("load",r);var g=!1,x=!1,b;for(b in c)if(c.hasOwnProperty(b)){var B=c[b];if(B!=null)switch(b){case"src":g=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Qe(r,s,b,B,c,null)}}x&&Qe(r,s,"srcSet",c.srcSet,c,null),g&&Qe(r,s,"src",c.src,c,null);return;case"input":Be("invalid",r);var O=b=B=x=null,q=null,ne=null;for(g in c)if(c.hasOwnProperty(g)){var se=c[g];if(se!=null)switch(g){case"name":x=se;break;case"type":B=se;break;case"checked":q=se;break;case"defaultChecked":ne=se;break;case"value":b=se;break;case"defaultValue":O=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,s));break;default:Qe(r,s,g,se,c,null)}}j0(r,b,O,q,ne,B,x,!1);return;case"select":Be("invalid",r),g=B=b=null;for(x in c)if(c.hasOwnProperty(x)&&(O=c[x],O!=null))switch(x){case"value":b=O;break;case"defaultValue":B=O;break;case"multiple":g=O;default:Qe(r,s,x,O,c,null)}s=b,c=B,r.multiple=!!g,s!=null?Yr(r,!!g,s,!1):c!=null&&Yr(r,!!g,c,!0);return;case"textarea":Be("invalid",r),b=x=g=null;for(B in c)if(c.hasOwnProperty(B)&&(O=c[B],O!=null))switch(B){case"value":g=O;break;case"defaultValue":x=O;break;case"children":b=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:Qe(r,s,B,O,c,null)}_0(r,g,x,b);return;case"option":for(q in c)c.hasOwnProperty(q)&&(g=c[q],g!=null)&&(q==="selected"?r.selected=g&&typeof g!="function"&&typeof g!="symbol":Qe(r,s,q,g,c,null));return;case"dialog":Be("beforetoggle",r),Be("toggle",r),Be("cancel",r),Be("close",r);break;case"iframe":case"object":Be("load",r);break;case"video":case"audio":for(g=0;g<Ms.length;g++)Be(Ms[g],r);break;case"image":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"embed":case"source":case"link":Be("error",r),Be("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in c)if(c.hasOwnProperty(ne)&&(g=c[ne],g!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Qe(r,s,ne,g,c,null)}return;default:if(lu(s)){for(se in c)c.hasOwnProperty(se)&&(g=c[se],g!==void 0&&Qf(r,s,se,g,c,void 0));return}}for(O in c)c.hasOwnProperty(O)&&(g=c[O],g!=null&&Qe(r,s,O,g,c,null))}function b4(r,s,c,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,b=null,B=null,O=null,q=null,ne=null,se=null;for(re in c){var le=c[re];if(c.hasOwnProperty(re)&&le!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":q=le;default:g.hasOwnProperty(re)||Qe(r,s,re,null,g,le)}}for(var ie in g){var re=g[ie];if(le=c[ie],g.hasOwnProperty(ie)&&(re!=null||le!=null))switch(ie){case"type":b=re;break;case"name":x=re;break;case"checked":ne=re;break;case"defaultChecked":se=re;break;case"value":B=re;break;case"defaultValue":O=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,s));break;default:re!==le&&Qe(r,s,ie,re,g,le)}}su(r,B,O,q,ne,se,b,x);return;case"select":re=B=O=ie=null;for(b in c)if(q=c[b],c.hasOwnProperty(b)&&q!=null)switch(b){case"value":break;case"multiple":re=q;default:g.hasOwnProperty(b)||Qe(r,s,b,null,g,q)}for(x in g)if(b=g[x],q=c[x],g.hasOwnProperty(x)&&(b!=null||q!=null))switch(x){case"value":ie=b;break;case"defaultValue":O=b;break;case"multiple":B=b;default:b!==q&&Qe(r,s,x,b,g,q)}s=O,c=B,g=re,ie!=null?Yr(r,!!c,ie,!1):!!g!=!!c&&(s!=null?Yr(r,!!c,s,!0):Yr(r,!!c,c?[]:"",!1));return;case"textarea":re=ie=null;for(O in c)if(x=c[O],c.hasOwnProperty(O)&&x!=null&&!g.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Qe(r,s,O,null,g,x)}for(B in g)if(x=g[B],b=c[B],g.hasOwnProperty(B)&&(x!=null||b!=null))switch(B){case"value":ie=x;break;case"defaultValue":re=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==b&&Qe(r,s,B,x,g,b)}q0(r,ie,re);return;case"option":for(var ge in c)ie=c[ge],c.hasOwnProperty(ge)&&ie!=null&&!g.hasOwnProperty(ge)&&(ge==="selected"?r.selected=!1:Qe(r,s,ge,null,g,ie));for(q in g)ie=g[q],re=c[q],g.hasOwnProperty(q)&&ie!==re&&(ie!=null||re!=null)&&(q==="selected"?r.selected=ie&&typeof ie!="function"&&typeof ie!="symbol":Qe(r,s,q,ie,g,re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in c)ie=c[we],c.hasOwnProperty(we)&&ie!=null&&!g.hasOwnProperty(we)&&Qe(r,s,we,null,g,ie);for(ne in g)if(ie=g[ne],re=c[ne],g.hasOwnProperty(ne)&&ie!==re&&(ie!=null||re!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,s));break;default:Qe(r,s,ne,ie,g,re)}return;default:if(lu(s)){for(var We in c)ie=c[We],c.hasOwnProperty(We)&&ie!==void 0&&!g.hasOwnProperty(We)&&Qf(r,s,We,void 0,g,ie);for(se in g)ie=g[se],re=c[se],!g.hasOwnProperty(se)||ie===re||ie===void 0&&re===void 0||Qf(r,s,se,ie,g,re);return}}for(var W in c)ie=c[W],c.hasOwnProperty(W)&&ie!=null&&!g.hasOwnProperty(W)&&Qe(r,s,W,null,g,ie);for(le in g)ie=g[le],re=c[le],!g.hasOwnProperty(le)||ie===re||ie==null&&re==null||Qe(r,s,le,ie,g,re)}function W2(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function C4(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,c=performance.getEntriesByType("resource"),g=0;g<c.length;g++){var x=c[g],b=x.transferSize,B=x.initiatorType,O=x.duration;if(b&&O&&W2(B)){for(B=0,O=x.responseEnd,g+=1;g<c.length;g++){var q=c[g],ne=q.startTime;if(ne>O)break;var se=q.transferSize,le=q.initiatorType;se&&W2(le)&&(q=q.responseEnd,B+=se*(q<O?1:(O-ne)/(q-ne)))}if(--g,s+=8*(b+B)/(x.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Wf=null,Zf=null;function Sl(r){return r.nodeType===9?r:r.ownerDocument}function Z2(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function J2(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Jf(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $f=null;function S4(){var r=window.event;return r&&r.type==="popstate"?r===$f?!1:($f=r,!0):($f=null,!1)}var $2=typeof setTimeout=="function"?setTimeout:void 0,M4=typeof clearTimeout=="function"?clearTimeout:void 0,eg=typeof Promise=="function"?Promise:void 0,E4=typeof queueMicrotask=="function"?queueMicrotask:typeof eg<"u"?function(r){return eg.resolve(null).then(r).catch(D4)}:$2;function D4(r){setTimeout(function(){throw r})}function Li(r){return r==="head"}function tg(r,s){var c=s,g=0;do{var x=c.nextSibling;if(r.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"||c==="/&"){if(g===0){r.removeChild(x),ya(s);return}g--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")g++;else if(c==="html")Ds(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,Ds(c);for(var b=c.firstChild;b;){var B=b.nextSibling,O=b.nodeName;b[ja]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=B}}else c==="body"&&Ds(r.ownerDocument.body);c=x}while(c);ya(s)}function ng(r,s){var c=r;r=0;do{var g=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=g}while(c)}function eh(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":eh(c),ru(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function T4(r,s,c,g){for(;r.nodeType===1;){var x=c;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(g){if(!r[ja])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(b=r.getAttribute("rel"),b==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(b!==x.rel||r.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||r.getAttribute("title")!==(x.title==null?null:x.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(b=r.getAttribute("src"),(b!==(x.src==null?null:x.src)||r.getAttribute("type")!==(x.type==null?null:x.type)||r.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&b&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var b=x.name==null?null:""+x.name;if(x.type==="hidden"&&r.getAttribute("name")===b)return r}else return r;if(r=xn(r.nextSibling),r===null)break}return null}function R4(r,s,c){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=xn(r.nextSibling),r===null))return null;return r}function ig(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=xn(r.nextSibling),r===null))return null;return r}function th(r){return r.data==="$?"||r.data==="$~"}function nh(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function F4(r,s){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||c.readyState!=="loading")s();else{var g=function(){s(),c.removeEventListener("DOMContentLoaded",g)};c.addEventListener("DOMContentLoaded",g),r._reactRetry=g}}function xn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var ih=null;function rg(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(s===0)return xn(r.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}r=r.nextSibling}return null}function ag(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return r;s--}else c!=="/$"&&c!=="/&"||s++}r=r.previousSibling}return null}function sg(r,s,c){switch(s=Sl(c),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Ds(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);ru(r)}var yn=new Map,og=new Set;function Ml(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ci=j.d;j.d={f:B4,r:U4,D:N4,C:I4,L:V4,m:O4,X:P4,S:L4,M:z4};function B4(){var r=ci.f(),s=pl();return r||s}function U4(r){var s=zr(r);s!==null&&s.tag===5&&s.type==="form"?Sm(s):ci.r(r)}var Aa=typeof document>"u"?null:document;function lg(r,s,c){var g=Aa;if(g&&typeof s=="string"&&s){var x=hn(s);x='link[rel="'+r+'"][href="'+x+'"]',typeof c=="string"&&(x+='[crossorigin="'+c+'"]'),og.has(x)||(og.add(x),r={rel:r,crossOrigin:c,href:s},g.querySelector(x)===null&&(s=g.createElement("link"),Tt(s,"link",r),xt(s),g.head.appendChild(s)))}}function N4(r){ci.D(r),lg("dns-prefetch",r,null)}function I4(r,s){ci.C(r,s),lg("preconnect",r,s)}function V4(r,s,c){ci.L(r,s,c);var g=Aa;if(g&&r&&s){var x='link[rel="preload"][as="'+hn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(x+='[imagesrcset="'+hn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(x+='[imagesizes="'+hn(c.imageSizes)+'"]')):x+='[href="'+hn(r)+'"]';var b=x;switch(s){case"style":b=va(r);break;case"script":b=xa(r)}yn.has(b)||(r=m({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:r,as:s},c),yn.set(b,r),g.querySelector(x)!==null||s==="style"&&g.querySelector(Ts(b))||s==="script"&&g.querySelector(Rs(b))||(s=g.createElement("link"),Tt(s,"link",r),xt(s),g.head.appendChild(s)))}}function O4(r,s){ci.m(r,s);var c=Aa;if(c&&r){var g=s&&typeof s.as=="string"?s.as:"script",x='link[rel="modulepreload"][as="'+hn(g)+'"][href="'+hn(r)+'"]',b=x;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=xa(r)}if(!yn.has(b)&&(r=m({rel:"modulepreload",href:r},s),yn.set(b,r),c.querySelector(x)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Rs(b)))return}g=c.createElement("link"),Tt(g,"link",r),xt(g),c.head.appendChild(g)}}}function L4(r,s,c){ci.S(r,s,c);var g=Aa;if(g&&r){var x=kr(g).hoistableStyles,b=va(r);s=s||"default";var B=x.get(b);if(!B){var O={loading:0,preload:null};if(B=g.querySelector(Ts(b)))O.loading=5;else{r=m({rel:"stylesheet",href:r,"data-precedence":s},c),(c=yn.get(b))&&rh(r,c);var q=B=g.createElement("link");xt(q),Tt(q,"link",r),q._p=new Promise(function(ne,se){q.onload=ne,q.onerror=se}),q.addEventListener("load",function(){O.loading|=1}),q.addEventListener("error",function(){O.loading|=2}),O.loading|=4,El(B,s,g)}B={type:"stylesheet",instance:B,count:1,state:O},x.set(b,B)}}}function P4(r,s){ci.X(r,s);var c=Aa;if(c&&r){var g=kr(c).hoistableScripts,x=xa(r),b=g.get(x);b||(b=c.querySelector(Rs(x)),b||(r=m({src:r,async:!0},s),(s=yn.get(x))&&ah(r,s),b=c.createElement("script"),xt(b),Tt(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},g.set(x,b))}}function z4(r,s){ci.M(r,s);var c=Aa;if(c&&r){var g=kr(c).hoistableScripts,x=xa(r),b=g.get(x);b||(b=c.querySelector(Rs(x)),b||(r=m({src:r,async:!0,type:"module"},s),(s=yn.get(x))&&ah(r,s),b=c.createElement("script"),xt(b),Tt(b,"link",r),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},g.set(x,b))}}function cg(r,s,c,g){var x=(x=de.current)?Ml(x):null;if(!x)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=va(c.href),c=kr(x).hoistableStyles,g=c.get(s),g||(g={type:"style",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=va(c.href);var b=kr(x).hoistableStyles,B=b.get(r);if(B||(x=x.ownerDocument||x,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(r,B),(b=x.querySelector(Ts(r)))&&!b._p&&(B.instance=b,B.state.loading=5),yn.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},yn.set(r,c),b||k4(x,r,c,B.state))),s&&g===null)throw Error(i(528,""));return B}if(s&&g!==null)throw Error(i(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=xa(c),c=kr(x).hoistableScripts,g=c.get(s),g||(g={type:"script",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function va(r){return'href="'+hn(r)+'"'}function Ts(r){return'link[rel="stylesheet"]['+r+"]"}function ug(r){return m({},r,{"data-precedence":r.precedence,precedence:null})}function k4(r,s,c,g){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=r.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),Tt(s,"link",c),xt(s),r.head.appendChild(s))}function xa(r){return'[src="'+hn(r)+'"]'}function Rs(r){return"script[async]"+r}function fg(r,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var g=r.querySelector('style[data-href~="'+hn(c.href)+'"]');if(g)return s.instance=g,xt(g),g;var x=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return g=(r.ownerDocument||r).createElement("style"),xt(g),Tt(g,"style",x),El(g,c.precedence,r),s.instance=g;case"stylesheet":x=va(c.href);var b=r.querySelector(Ts(x));if(b)return s.state.loading|=4,s.instance=b,xt(b),b;g=ug(c),(x=yn.get(x))&&rh(g,x),b=(r.ownerDocument||r).createElement("link"),xt(b);var B=b;return B._p=new Promise(function(O,q){B.onload=O,B.onerror=q}),Tt(b,"link",g),s.state.loading|=4,El(b,c.precedence,r),s.instance=b;case"script":return b=xa(c.src),(x=r.querySelector(Rs(b)))?(s.instance=x,xt(x),x):(g=c,(x=yn.get(b))&&(g=m({},c),ah(g,x)),r=r.ownerDocument||r,x=r.createElement("script"),xt(x),Tt(x,"link",g),r.head.appendChild(x),s.instance=x);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(g=s.instance,s.state.loading|=4,El(g,c.precedence,r));return s.instance}function El(r,s,c){for(var g=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=g.length?g[g.length-1]:null,b=x,B=0;B<g.length;B++){var O=g[B];if(O.dataset.precedence===s)b=O;else if(b!==x)break}b?b.parentNode.insertBefore(r,b.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(r,s.firstChild))}function rh(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function ah(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Dl=null;function hg(r,s,c){if(Dl===null){var g=new Map,x=Dl=new Map;x.set(c,g)}else x=Dl,g=x.get(c),g||(g=new Map,x.set(c,g));if(g.has(r))return g;for(g.set(r,null),c=c.getElementsByTagName(r),x=0;x<c.length;x++){var b=c[x];if(!(b[ja]||b[St]||r==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var B=b.getAttribute(s)||"";B=r+B;var O=g.get(B);O?O.push(b):g.set(B,[b])}}return g}function dg(r,s,c){r=r.ownerDocument||r,r.head.insertBefore(c,s==="title"?r.querySelector("head > title"):null)}function G4(r,s,c){if(c===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(r=s.disabled,typeof s.precedence=="string"&&r==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function mg(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function Y4(r,s,c,g){if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=va(g.href),b=s.querySelector(Ts(x));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Tl.bind(r),s.then(r,r)),c.state.loading|=4,c.instance=b,xt(b);return}b=s.ownerDocument||s,g=ug(g),(x=yn.get(x))&&rh(g,x),b=b.createElement("link"),xt(b);var B=b;B._p=new Promise(function(O,q){B.onload=O,B.onerror=q}),Tt(b,"link",g),c.instance=b}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=Tl.bind(r),s.addEventListener("load",c),s.addEventListener("error",c))}}var sh=0;function H4(r,s){return r.stylesheets&&r.count===0&&Fl(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var g=setTimeout(function(){if(r.stylesheets&&Fl(r,r.stylesheets),r.unsuspend){var b=r.unsuspend;r.unsuspend=null,b()}},6e4+s);0<r.imgBytes&&sh===0&&(sh=62500*C4());var x=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Fl(r,r.stylesheets),r.unsuspend)){var b=r.unsuspend;r.unsuspend=null,b()}},(r.imgBytes>sh?50:800)+s);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(g),clearTimeout(x)}}:null}function Tl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fl(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Rl=null;function Fl(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Rl=new Map,s.forEach(X4,r),Rl=null,Tl.call(r))}function X4(r,s){if(!(s.state.loading&4)){var c=Rl.get(r);if(c)var g=c.get(null);else{c=new Map,Rl.set(r,c);for(var x=r.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<x.length;b++){var B=x[b];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(c.set(B.dataset.precedence,B),g=B)}g&&c.set(null,g)}x=s.instance,B=x.getAttribute("data-precedence"),b=c.get(B)||g,b===g&&c.set(null,x),c.set(B,x),this.count++,g=Tl.bind(this),x.addEventListener("load",g),x.addEventListener("error",g),b?b.parentNode.insertBefore(x,b.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(x,r.firstChild)),s.state.loading|=4}}var Fs={$$typeof:E,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function j4(r,s,c,g,x,b,B,O,q){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eu(0),this.hiddenUpdates=eu(null),this.identifierPrefix=g,this.onUncaughtError=x,this.onCaughtError=b,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function gg(r,s,c,g,x,b,B,O,q,ne,se,le){return r=new j4(r,s,c,B,q,ne,se,le,O),s=1,b===!0&&(s|=24),b=nn(3,null,null,s),r.current=b,b.stateNode=r,s=Pu(),s.refCount++,r.pooledCache=s,s.refCount++,b.memoizedState={element:g,isDehydrated:c,cache:s},Yu(b),r}function pg(r){return r?(r=Wr,r):Wr}function Ag(r,s,c,g,x,b){x=pg(x),g.context===null?g.context=x:g.pendingContext=x,g=Ei(s),g.payload={element:c},b=b===void 0?null:b,b!==null&&(g.callback=b),c=Di(r,g,s),c!==null&&(Xt(c,r,s),ls(c,r,s))}function vg(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<s?c:s}}function oh(r,s){vg(r,s),(r=r.alternate)&&vg(r,s)}function xg(r){if(r.tag===13||r.tag===31){var s=ur(r,67108864);s!==null&&Xt(s,r,67108864),oh(r,67108864)}}function yg(r){if(r.tag===13||r.tag===31){var s=ln();s=tu(s);var c=ur(r,s);c!==null&&Xt(c,r,s),oh(r,s)}}var Bl=!0;function q4(r,s,c,g){var x=k.T;k.T=null;var b=j.p;try{j.p=2,lh(r,s,c,g)}finally{j.p=b,k.T=x}}function _4(r,s,c,g){var x=k.T;k.T=null;var b=j.p;try{j.p=8,lh(r,s,c,g)}finally{j.p=b,k.T=x}}function lh(r,s,c,g){if(Bl){var x=ch(g);if(x===null)Kf(r,s,g,Ul,c),bg(r,g);else if(Q4(x,r,s,c,g))g.stopPropagation();else if(bg(r,g),s&4&&-1<K4.indexOf(r)){for(;x!==null;){var b=zr(x);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var B=ar(b.pendingLanes);if(B!==0){var O=b;for(O.pendingLanes|=2,O.entangledLanes|=2;B;){var q=1<<31-en(B);O.entanglements[1]|=q,B&=~q}Pn(b),(He&6)===0&&(ml=Jt()+500,Ss(0))}}break;case 31:case 13:O=ur(b,2),O!==null&&Xt(O,b,2),pl(),oh(b,2)}if(b=ch(g),b===null&&Kf(r,s,g,Ul,c),b===x)break;x=b}x!==null&&g.stopPropagation()}else Kf(r,s,g,null,c)}}function ch(r){return r=uu(r),uh(r)}var Ul=null;function uh(r){if(Ul=null,r=Pr(r),r!==null){var s=o(r);if(s===null)r=null;else{var c=s.tag;if(c===13){if(r=l(s),r!==null)return r;r=null}else if(c===31){if(r=u(s),r!==null)return r;r=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Ul=r,null}function wg(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(N5()){case R0:return 2;case F0:return 8;case wo:case I5:return 32;case B0:return 268435456;default:return 32}default:return 32}}var fh=!1,Pi=null,zi=null,ki=null,Bs=new Map,Us=new Map,Gi=[],K4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bg(r,s){switch(r){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":ki=null;break;case"pointerover":case"pointerout":Bs.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Us.delete(s.pointerId)}}function Ns(r,s,c,g,x,b){return r===null||r.nativeEvent!==b?(r={blockedOn:s,domEventName:c,eventSystemFlags:g,nativeEvent:b,targetContainers:[x]},s!==null&&(s=zr(s),s!==null&&xg(s)),r):(r.eventSystemFlags|=g,s=r.targetContainers,x!==null&&s.indexOf(x)===-1&&s.push(x),r)}function Q4(r,s,c,g,x){switch(s){case"focusin":return Pi=Ns(Pi,r,s,c,g,x),!0;case"dragenter":return zi=Ns(zi,r,s,c,g,x),!0;case"mouseover":return ki=Ns(ki,r,s,c,g,x),!0;case"pointerover":var b=x.pointerId;return Bs.set(b,Ns(Bs.get(b)||null,r,s,c,g,x)),!0;case"gotpointercapture":return b=x.pointerId,Us.set(b,Ns(Us.get(b)||null,r,s,c,g,x)),!0}return!1}function Cg(r){var s=Pr(r.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=l(c),s!==null){r.blockedOn=s,L0(r.priority,function(){yg(c)});return}}else if(s===31){if(s=u(c),s!==null){r.blockedOn=s,L0(r.priority,function(){yg(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Nl(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var c=ch(r.nativeEvent);if(c===null){c=r.nativeEvent;var g=new c.constructor(c.type,c);cu=g,c.target.dispatchEvent(g),cu=null}else return s=zr(c),s!==null&&xg(s),r.blockedOn=c,!1;s.shift()}return!0}function Sg(r,s,c){Nl(r)&&c.delete(s)}function W4(){fh=!1,Pi!==null&&Nl(Pi)&&(Pi=null),zi!==null&&Nl(zi)&&(zi=null),ki!==null&&Nl(ki)&&(ki=null),Bs.forEach(Sg),Us.forEach(Sg)}function Il(r,s){r.blockedOn===s&&(r.blockedOn=null,fh||(fh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,W4)))}var Vl=null;function Mg(r){Vl!==r&&(Vl=r,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Vl===r&&(Vl=null);for(var s=0;s<r.length;s+=3){var c=r[s],g=r[s+1],x=r[s+2];if(typeof g!="function"){if(uh(g||c)===null)continue;break}var b=zr(c);b!==null&&(r.splice(s,3),s-=3,cf(b,{pending:!0,data:x,method:c.method,action:g},g,x))}}))}function ya(r){function s(q){return Il(q,r)}Pi!==null&&Il(Pi,r),zi!==null&&Il(zi,r),ki!==null&&Il(ki,r),Bs.forEach(s),Us.forEach(s);for(var c=0;c<Gi.length;c++){var g=Gi[c];g.blockedOn===r&&(g.blockedOn=null)}for(;0<Gi.length&&(c=Gi[0],c.blockedOn===null);)Cg(c),c.blockedOn===null&&Gi.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(g=0;g<c.length;g+=3){var x=c[g],b=c[g+1],B=x[Pt]||null;if(typeof b=="function")B||Mg(c);else if(B){var O=null;if(b&&b.hasAttribute("formAction")){if(x=b,B=b[Pt]||null)O=B.formAction;else if(uh(x)!==null)continue}else O=B.action;typeof O=="function"?c[g+1]=O:(c.splice(g,3),g-=3),Mg(c)}}}function Eg(){function r(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(B){return x=B})},focusReset:"manual",scroll:"manual"})}function s(){x!==null&&(x(),x=null),g||setTimeout(c,20)}function c(){if(!g&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,x=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){g=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),x!==null&&(x(),x=null)}}}function hh(r){this._internalRoot=r}Ol.prototype.render=hh.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var c=s.current,g=ln();Ag(c,g,r,s,null,null)},Ol.prototype.unmount=hh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Ag(r.current,2,null,r,null,null),pl(),s[Lr]=null}};function Ol(r){this._internalRoot=r}Ol.prototype.unstable_scheduleHydration=function(r){if(r){var s=O0();r={blockedOn:null,target:r,priority:s};for(var c=0;c<Gi.length&&s!==0&&s<Gi[c].priority;c++);Gi.splice(c,0,r),c===0&&Cg(r)}};var Dg=t.version;if(Dg!=="19.2.3")throw Error(i(527,Dg,"19.2.3"));j.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(s),r=r!==null?d(r):null,r=r===null?null:r.stateNode,r};var Z4={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ll.isDisabled&&Ll.supportsFiber)try{Ya=Ll.inject(Z4),$t=Ll}catch{}}return Vs.createRoot=function(r,s){if(!a(r))throw Error(i(299));var c=!1,g="",x=Im,b=Vm,B=Om;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(x=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(B=s.onRecoverableError)),s=gg(r,1,!1,null,null,c,g,null,x,b,B,Eg),r[Lr]=s.current,_f(r),new hh(s)},Vs.hydrateRoot=function(r,s,c){if(!a(r))throw Error(i(299));var g=!1,x="",b=Im,B=Vm,O=Om,q=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(B=c.onCaughtError),c.onRecoverableError!==void 0&&(O=c.onRecoverableError),c.formState!==void 0&&(q=c.formState)),s=gg(r,1,!0,s,c??null,g,x,q,b,B,O,Eg),s.context=pg(null),c=s.current,g=ln(),g=tu(g),x=Ei(g),x.callback=null,Di(c,x,g),c=g,s.current.lanes=c,Xa(s,c),Pn(s),r[Lr]=s.current,_f(r),new Ol(s)},Vs.version="19.2.3",Vs}var Lg;function oy(){if(Lg)return gh.exports;Lg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),gh.exports=sy(),gh.exports}var ly=oy();const cy={theme:"system",setTheme:()=>null},uy=z.createContext(cy);function fy({children:e,defaultTheme:t="dark",storageKey:n="nii-viewer-theme",...i}){const[a,o]=z.useState(()=>localStorage.getItem(n)||t);z.useEffect(()=>{const u=window.document.documentElement;if(u.classList.remove("light","dark"),a==="system"){const f=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";u.classList.add(f);return}u.classList.add(a)},[a]);const l={theme:a,setTheme:u=>{localStorage.setItem(n,u),o(u)}};return $.jsx(uy.Provider,{...i,value:l,children:e})}var hy=1e-6,Ct=typeof Float32Array<"u"?Float32Array:Array;function ed(){var e=new Ct(9);return Ct!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function dy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Wi(e,t,n,i,a,o,l,u,f){var h=new Ct(9);return h[0]=e,h[1]=t,h[2]=n,h[3]=i,h[4]=a,h[5]=o,h[6]=l,h[7]=u,h[8]=f,h}function my(e,t){var n=t[0],i=t[1],a=t[2],o=t[3],l=t[4],u=t[5],f=t[6],h=t[7],d=t[8],m=d*l-u*h,p=-d*o+u*f,A=h*o-l*f,v=n*m+i*p+a*A;return v?(v=1/v,e[0]=m*v,e[1]=(-d*i+a*h)*v,e[2]=(u*i-a*l)*v,e[3]=p*v,e[4]=(d*n-a*f)*v,e[5]=(-u*n+a*o)*v,e[6]=A*v,e[7]=(-h*n+i*f)*v,e[8]=(l*n-i*o)*v,e):null}function yA(e,t,n){var i=t[0],a=t[1],o=t[2],l=t[3],u=t[4],f=t[5],h=t[6],d=t[7],m=t[8],p=n[0],A=n[1],v=n[2],y=n[3],w=n[4],C=n[5],S=n[6],E=n[7],M=n[8];return e[0]=p*i+A*l+v*h,e[1]=p*a+A*u+v*d,e[2]=p*o+A*f+v*m,e[3]=y*i+w*l+C*h,e[4]=y*a+w*u+C*d,e[5]=y*o+w*f+C*m,e[6]=S*i+E*l+M*h,e[7]=S*a+E*u+M*d,e[8]=S*o+E*f+M*m,e}function Ue(){var e=new Ct(16);return Ct!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function lt(e){var t=new Ct(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function gy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Cn(e,t,n,i,a,o,l,u,f,h,d,m,p,A,v,y){var w=new Ct(16);return w[0]=e,w[1]=t,w[2]=n,w[3]=i,w[4]=a,w[5]=o,w[6]=l,w[7]=u,w[8]=f,w[9]=h,w[10]=d,w[11]=m,w[12]=p,w[13]=A,w[14]=v,w[15]=y,w}function wA(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _t(e,t){if(e===t){var n=t[1],i=t[2],a=t[3],o=t[6],l=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=o,e[11]=t[14],e[12]=a,e[13]=l,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Kt(e,t){var n=t[0],i=t[1],a=t[2],o=t[3],l=t[4],u=t[5],f=t[6],h=t[7],d=t[8],m=t[9],p=t[10],A=t[11],v=t[12],y=t[13],w=t[14],C=t[15],S=n*u-i*l,E=n*f-a*l,M=n*h-o*l,R=i*f-a*u,D=i*h-o*u,T=a*h-o*f,F=d*y-m*v,U=d*w-p*v,I=d*C-A*v,V=m*w-p*y,N=m*C-A*y,Y=p*C-A*w,P=S*Y-E*N+M*V+R*I-D*U+T*F;return P?(P=1/P,e[0]=(u*Y-f*N+h*V)*P,e[1]=(a*N-i*Y-o*V)*P,e[2]=(y*T-w*D+C*R)*P,e[3]=(p*D-m*T-A*R)*P,e[4]=(f*I-l*Y-h*U)*P,e[5]=(n*Y-a*I+o*U)*P,e[6]=(w*M-v*T-C*E)*P,e[7]=(d*T-p*M+A*E)*P,e[8]=(l*N-u*I+h*F)*P,e[9]=(i*I-n*N-o*F)*P,e[10]=(v*D-y*M+C*S)*P,e[11]=(m*M-d*D-A*S)*P,e[12]=(u*U-l*V-f*F)*P,e[13]=(n*V-i*U+a*F)*P,e[14]=(y*E-v*R-w*S)*P,e[15]=(d*R-m*E+p*S)*P,e):null}function Tr(e,t,n){var i=t[0],a=t[1],o=t[2],l=t[3],u=t[4],f=t[5],h=t[6],d=t[7],m=t[8],p=t[9],A=t[10],v=t[11],y=t[12],w=t[13],C=t[14],S=t[15],E=n[0],M=n[1],R=n[2],D=n[3];return e[0]=E*i+M*u+R*m+D*y,e[1]=E*a+M*f+R*p+D*w,e[2]=E*o+M*h+R*A+D*C,e[3]=E*l+M*d+R*v+D*S,E=n[4],M=n[5],R=n[6],D=n[7],e[4]=E*i+M*u+R*m+D*y,e[5]=E*a+M*f+R*p+D*w,e[6]=E*o+M*h+R*A+D*C,e[7]=E*l+M*d+R*v+D*S,E=n[8],M=n[9],R=n[10],D=n[11],e[8]=E*i+M*u+R*m+D*y,e[9]=E*a+M*f+R*p+D*w,e[10]=E*o+M*h+R*A+D*C,e[11]=E*l+M*d+R*v+D*S,E=n[12],M=n[13],R=n[14],D=n[15],e[12]=E*i+M*u+R*m+D*y,e[13]=E*a+M*f+R*p+D*w,e[14]=E*o+M*h+R*A+D*C,e[15]=E*l+M*d+R*v+D*S,e}function Ba(e,t,n){var i=n[0],a=n[1],o=n[2],l,u,f,h,d,m,p,A,v,y,w,C;return t===e?(e[12]=t[0]*i+t[4]*a+t[8]*o+t[12],e[13]=t[1]*i+t[5]*a+t[9]*o+t[13],e[14]=t[2]*i+t[6]*a+t[10]*o+t[14],e[15]=t[3]*i+t[7]*a+t[11]*o+t[15]):(l=t[0],u=t[1],f=t[2],h=t[3],d=t[4],m=t[5],p=t[6],A=t[7],v=t[8],y=t[9],w=t[10],C=t[11],e[0]=l,e[1]=u,e[2]=f,e[3]=h,e[4]=d,e[5]=m,e[6]=p,e[7]=A,e[8]=v,e[9]=y,e[10]=w,e[11]=C,e[12]=l*i+d*a+v*o+t[12],e[13]=u*i+m*a+y*o+t[13],e[14]=f*i+p*a+w*o+t[14],e[15]=h*i+A*a+C*o+t[15]),e}function bA(e,t,n){var i=n[0],a=n[1],o=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function vc(e,t,n){var i=Math.sin(n),a=Math.cos(n),o=t[4],l=t[5],u=t[6],f=t[7],h=t[8],d=t[9],m=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*a+h*i,e[5]=l*a+d*i,e[6]=u*a+m*i,e[7]=f*a+p*i,e[8]=h*a-o*i,e[9]=d*a-l*i,e[10]=m*a-u*i,e[11]=p*a-f*i,e}function xc(e,t,n){var i=Math.sin(n),a=Math.cos(n),o=t[0],l=t[1],u=t[2],f=t[3],h=t[4],d=t[5],m=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a+h*i,e[1]=l*a+d*i,e[2]=u*a+m*i,e[3]=f*a+p*i,e[4]=h*a-o*i,e[5]=d*a-l*i,e[6]=m*a-u*i,e[7]=p*a-f*i,e}function py(e,t,n){var i=n[0],a=n[1],o=n[2],l=Math.sqrt(i*i+a*a+o*o),u,f,h;return l<hy?null:(l=1/l,i*=l,a*=l,o*=l,u=Math.sin(t),f=Math.cos(t),h=1-f,e[0]=i*i*h+f,e[1]=a*i*h+o*u,e[2]=o*i*h-a*u,e[3]=0,e[4]=i*a*h-o*u,e[5]=a*a*h+f,e[6]=o*a*h+i*u,e[7]=0,e[8]=i*o*h+a*u,e[9]=a*o*h-i*u,e[10]=o*o*h+f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Ay(e,t,n,i,a,o,l){var u=1/(t-n),f=1/(i-a),h=1/(o-l);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(t+n)*u,e[13]=(a+i)*f,e[14]=(l+o)*h,e[15]=1,e}var yc=Ay;function vy(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}var CA=Tr;function je(){var e=new Ct(3);return Ct!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function wn(e){var t=new Ct(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function $i(e){var t=e[0],n=e[1],i=e[2];return Math.sqrt(t*t+n*n+i*i)}function ce(e,t,n){var i=new Ct(3);return i[0]=e,i[1]=t,i[2]=n,i}function Pg(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Rr(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Je(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Td(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Rd(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function xy(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function yy(e,t){var n=t[0]-e[0],i=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(n*n+i*i+a*a)}function wy(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function bn(e,t){var n=t[0],i=t[1],a=t[2],o=n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function by(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ic(e,t,n){var i=t[0],a=t[1],o=t[2],l=n[0],u=n[1],f=n[2];return e[0]=a*f-o*u,e[1]=o*l-i*f,e[2]=i*u-a*l,e}function Cy(e,t,n,i){var a=t[0],o=t[1],l=t[2];return e[0]=a+i*(n[0]-a),e[1]=o+i*(n[1]-o),e[2]=l+i*(n[2]-l),e}function zg(e,t,n){var i=t[0],a=t[1],o=t[2];return e[0]=i*n[0]+a*n[3]+o*n[6],e[1]=i*n[1]+a*n[4]+o*n[7],e[2]=i*n[2]+a*n[5]+o*n[8],e}function xh(e,t){var n=e[0],i=e[1],a=e[2],o=t[0],l=t[1],u=t[2],f=Math.sqrt((n*n+i*i+a*a)*(o*o+l*l+u*u)),h=f&&by(e,t)/f;return Math.acos(Math.min(Math.max(h,-1),1))}var kg=Je,no=$i;(function(){var e=je();return function(t,n,i,a,o,l){var u,f;for(n||(n=3),i||(i=0),a?f=Math.min(a*n+i,t.length):f=t.length,u=i;u<f;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],o(e,e,l),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}})();function mi(){var e=new Ct(4);return Ct!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function hi(e){var t=new Ct(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function nt(e,t,n,i){var a=new Ct(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=i,a}function Gg(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function Sy(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function My(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Ft(e,t,n){var i=t[0],a=t[1],o=t[2],l=t[3];return e[0]=n[0]*i+n[4]*a+n[8]*o+n[12]*l,e[1]=n[1]*i+n[5]*a+n[9]*o+n[13]*l,e[2]=n[2]*i+n[6]*a+n[10]*o+n[14]*l,e[3]=n[3]*i+n[7]*a+n[11]*o+n[15]*l,e}var Ey=Sy;(function(){var e=mi();return function(t,n,i,a,o,l){var u,f;for(n||(n=4),i||(i=0),a?f=Math.min(a*n+i,t.length):f=t.length,u=i;u<f;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],o(e,e,l),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}})();function Dy(){var e=new Ct(2);return Ct!=Float32Array&&(e[0]=0,e[1]=0),e}function Ty(e,t){var n=new Ct(2);return n[0]=e,n[1]=t,n}(function(){var e=Dy();return function(t,n,i,a,o,l){var u,f;for(n||(n=2),i||(i=0),a?f=Math.min(a*n+i,t.length):f=t.length,u=i;u<f;u+=n)e[0]=t[u],e[1]=t[u+1],o(e,e,l),t[u]=e[0],t[u+1]=e[1];return t}})();var Er=256,rc=[],Pl;for(;Er--;)rc[Er]=(Er+256).toString(16).substring(1);function td(){var e=0,t,n="";if(!Pl||Er+16>256){for(Pl=Array(e=256);e--;)Pl[e]=256*Math.random()|0;e=Er=0}for(;e<16;e++)t=Pl[Er+e],e==6?n+=rc[t&15|64]:e==8?n+=rc[t&63|128]:n+=rc[t],e&1&&e>1&&e<11&&(n+="-");return Er++,n}var yh,Yg;function Ry(){return Yg||(Yg=1,yh=function(t,n){var i=t.length;if(t===n)return!0;if(i!==n.length)return!1;for(var a=0;a<i;a++)if(t[a]!==n[a])return!1;return!0}),yh}var Fy=Ry();const By=Md(Fy),SA=-1,Ic=0,Js=1,wc=2,Fd=3,Bd=4,Ud=5,Nd=6,MA=7,EA=8,Hg=typeof self=="object"?self:globalThis,Uy=(e,t)=>{const n=(a,o)=>(e.set(o,a),a),i=a=>{if(e.has(a))return e.get(a);const[o,l]=t[a];switch(o){case Ic:case SA:return n(l,a);case Js:{const u=n([],a);for(const f of l)u.push(i(f));return u}case wc:{const u=n({},a);for(const[f,h]of l)u[i(f)]=i(h);return u}case Fd:return n(new Date(l),a);case Bd:{const{source:u,flags:f}=l;return n(new RegExp(u,f),a)}case Ud:{const u=n(new Map,a);for(const[f,h]of l)u.set(i(f),i(h));return u}case Nd:{const u=n(new Set,a);for(const f of l)u.add(i(f));return u}case MA:{const{name:u,message:f}=l;return n(new Hg[u](f),a)}case EA:return n(BigInt(l),a);case"BigInt":return n(Object(BigInt(l)),a);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new Hg[o](l),a)};return i},Ny=e=>Uy(new Map,e)(0),wa="",{toString:Iy}={},{keys:Vy}=Object,Os=e=>{const t=typeof e;if(t!=="object"||!e)return[Ic,t];const n=Iy.call(e).slice(8,-1);switch(n){case"Array":return[Js,wa];case"Object":return[wc,wa];case"Date":return[Fd,wa];case"RegExp":return[Bd,wa];case"Map":return[Ud,wa];case"Set":return[Nd,wa];case"DataView":return[Js,n]}return n.includes("Array")?[Js,n]:n.includes("Error")?[MA,n]:[wc,n]},zl=([e,t])=>e===Ic&&(t==="function"||t==="symbol"),Oy=(e,t,n,i)=>{const a=(l,u)=>{const f=i.push(l)-1;return n.set(u,f),f},o=l=>{if(n.has(l))return n.get(l);let[u,f]=Os(l);switch(u){case Ic:{let d=l;switch(f){case"bigint":u=EA,d=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+f);d=null;break;case"undefined":return a([SA],l)}return a([u,d],l)}case Js:{if(f){let p=l;return f==="DataView"?p=new Uint8Array(l.buffer):f==="ArrayBuffer"&&(p=new Uint8Array(l)),a([f,[...p]],l)}const d=[],m=a([u,d],l);for(const p of l)d.push(o(p));return m}case wc:{if(f)switch(f){case"BigInt":return a([f,l.toString()],l);case"Boolean":case"Number":case"String":return a([f,l.valueOf()],l)}if(t&&"toJSON"in l)return o(l.toJSON());const d=[],m=a([u,d],l);for(const p of Vy(l))(e||!zl(Os(l[p])))&&d.push([o(p),o(l[p])]);return m}case Fd:return a([u,l.toISOString()],l);case Bd:{const{source:d,flags:m}=l;return a([u,{source:d,flags:m}],l)}case Ud:{const d=[],m=a([u,d],l);for(const[p,A]of l)(e||!(zl(Os(p))||zl(Os(A))))&&d.push([o(p),o(A)]);return m}case Nd:{const d=[],m=a([u,d],l);for(const p of l)(e||!zl(Os(p)))&&d.push(o(p));return m}}const{message:h}=l;return a([u,{name:f,message:h}],l)};return o},Ly=(e,{json:t,lossy:n}={})=>{const i=[];return Oy(!(t||n),!!t,new Map,i)(e),i};var bt=Uint8Array,Fa=Uint16Array,Py=Int32Array,DA=new bt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),TA=new bt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zy=new bt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),RA=function(e,t){for(var n=new Fa(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];for(var a=new Py(n[30]),i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)a[o]=o-n[i]<<5|i;return{b:n,r:a}},FA=RA(DA,2),BA=FA.b,ky=FA.r;BA[28]=258,ky[258]=28;var Gy=RA(TA,0),Yy=Gy.b,nd=new Fa(32768);for(var tt=0;tt<32768;++tt){var Hi=(tt&43690)>>1|(tt&21845)<<1;Hi=(Hi&52428)>>2|(Hi&13107)<<2,Hi=(Hi&61680)>>4|(Hi&3855)<<4,nd[tt]=((Hi&65280)>>8|(Hi&255)<<8)>>1}var $s=(function(e,t,n){for(var i=e.length,a=0,o=new Fa(t);a<i;++a)e[a]&&++o[e[a]-1];var l=new Fa(t);for(a=1;a<t;++a)l[a]=l[a-1]+o[a-1]<<1;var u;if(n){u=new Fa(1<<t);var f=15-t;for(a=0;a<i;++a)if(e[a])for(var h=a<<4|e[a],d=t-e[a],m=l[e[a]-1]++<<d,p=m|(1<<d)-1;m<=p;++m)u[nd[m]>>f]=h}else for(u=new Fa(i),a=0;a<i;++a)e[a]&&(u[a]=nd[l[e[a]-1]++]>>15-e[a]);return u}),oo=new bt(288);for(var tt=0;tt<144;++tt)oo[tt]=8;for(var tt=144;tt<256;++tt)oo[tt]=9;for(var tt=256;tt<280;++tt)oo[tt]=7;for(var tt=280;tt<288;++tt)oo[tt]=8;var UA=new bt(32);for(var tt=0;tt<32;++tt)UA[tt]=5;var Hy=$s(oo,9,1),Xy=$s(UA,5,1),wh=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Tn=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(t&7)&n},bh=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},NA=function(e){return(e+7)/8|0},ac=function(e,t,n){return(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length),new bt(e.subarray(t,n))},jy=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Nt=function(e,t,n){var i=new Error(t||jy[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,Nt),!n)throw i;return i},Vc=function(e,t,n,i){var a=e.length,o=0;if(!a||t.f&&!t.l)return n||new bt(0);var l=!n,u=l||t.i!=2,f=t.i;l&&(n=new bt(a*3));var h=function(Wt){var Zt=n.length;if(Wt>Zt){var In=new bt(Math.max(Zt*2,Wt));In.set(n),n=In}},d=t.f||0,m=t.p||0,p=t.b||0,A=t.l,v=t.d,y=t.m,w=t.n,C=a*8;do{if(!A){d=Tn(e,m,1);var S=Tn(e,m+1,3);if(m+=3,S)if(S==1)A=Hy,v=Xy,y=9,w=5;else if(S==2){var D=Tn(e,m,31)+257,T=Tn(e,m+10,15)+4,F=D+Tn(e,m+5,31)+1;m+=14;for(var U=new bt(F),I=new bt(19),V=0;V<T;++V)I[zy[V]]=Tn(e,m+V*3,7);m+=T*3;for(var N=wh(I),Y=(1<<N)-1,P=$s(I,N,1),V=0;V<F;){var Q=P[Tn(e,m,Y)];m+=Q&15;var E=Q>>4;if(E<16)U[V++]=E;else{var k=0,j=0;for(E==16?(j=3+Tn(e,m,3),m+=2,k=U[V-1]):E==17?(j=3+Tn(e,m,7),m+=3):E==18&&(j=11+Tn(e,m,127),m+=7);j--;)U[V++]=k}}var H=U.subarray(0,D),Z=U.subarray(D);y=wh(H),w=wh(Z),A=$s(H,y,1),v=$s(Z,w,1)}else Nt(1);else{var E=NA(m)+4,M=e[E-4]|e[E-3]<<8,R=E+M;if(R>a){f&&Nt(0);break}u&&h(p+M),n.set(e.subarray(E,R),p),t.b=p+=M,t.p=m=R*8,t.f=d;continue}if(m>C){f&&Nt(0);break}}u&&h(p+131072);for(var J=(1<<y)-1,X=(1<<w)-1,K=m;;K=m){var k=A[bh(e,m)&J],te=k>>4;if(m+=k&15,m>C){f&&Nt(0);break}if(k||Nt(2),te<256)n[p++]=te;else if(te==256){K=m,A=null;break}else{var ae=te-254;if(te>264){var V=te-257,fe=DA[V];ae=Tn(e,m,(1<<fe)-1)+BA[V],m+=fe}var de=v[bh(e,m)&X],he=de>>4;de||Nt(3),m+=de&15;var Z=Yy[he];if(he>3){var fe=TA[he];Z+=bh(e,m)&(1<<fe)-1,m+=fe}if(m>C){f&&Nt(0);break}u&&h(p+131072);var Pe=p+ae;if(p<Z){var Re=o-Z,Lt=Math.min(Z,Pe);for(Re+p<0&&Nt(3);p<Lt;++p)n[p]=i[Re+p]}for(;p<Pe;++p)n[p]=n[p-Z]}}t.l=A,t.p=K,t.b=p,t.f=d,A&&(d=1,t.m=y,t.d=v,t.n=w)}while(!d);return p!=n.length&&l?ac(n,0,p):n.subarray(0,p)},qy=new bt(0),IA=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Nt(6,"invalid gzip data");var t=e[3],n=10;t&4&&(n+=(e[10]|e[11]<<8)+2);for(var i=(t>>3&1)+(t>>4&1);i>0;i-=!e[n++]);return n+(t&2)},_y=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},Ky=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Nt(6,"invalid zlib data"),(e[1]>>5&1)==1&&Nt(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2},Ch=(function(){function e(t,n){typeof t=="function"&&(n=t,t={}),this.ondata=n;var i=t&&t.dictionary&&t.dictionary.subarray(-32768);this.s={i:0,b:i?i.length:0},this.o=new bt(32768),this.p=new bt(0),i&&this.o.set(i)}return e.prototype.e=function(t){if(this.ondata||Nt(5),this.d&&Nt(4),!this.p.length)this.p=t;else if(t.length){var n=new bt(this.p.length+t.length);n.set(this.p),n.set(t,this.p.length),this.p=n}},e.prototype.c=function(t){this.s.i=+(this.d=t||!1);var n=this.s.b,i=Vc(this.p,this.s,this.o);this.ondata(ac(i,n,this.s.b),this.d),this.o=ac(i,this.s.b-32768),this.s.b=this.o.length,this.p=ac(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(t,n){this.e(t),this.c(n)},e})();function Qy(e,t){return Vc(e,{i:2},t,t)}var Wy=(function(){function e(t,n){this.v=1,this.r=0,Ch.call(this,t,n)}return e.prototype.push=function(t,n){if(Ch.prototype.e.call(this,t),this.r+=t.length,this.v){var i=this.p.subarray(this.v-1),a=i.length>3?IA(i):4;if(a>i.length){if(!n)return}else this.v>1&&this.onmember&&this.onmember(this.r-i.length);this.p=i.subarray(a),this.v=0}Ch.prototype.c.call(this,n),this.s.f&&!this.s.l&&!n&&(this.v=NA(this.s.p)+9,this.s={i:0},this.o=new bt(0),this.push(new bt(0),n))},e})();function Zy(e,t){var n=IA(e);return n+8>e.length&&Nt(6,"invalid gzip data"),Vc(e.subarray(n,-8),{i:2},new bt(_y(e)),t)}function Jy(e,t){return Vc(e.subarray(Ky(e),-4),{i:2},t,t)}function $y(e,t){return e[0]==31&&e[1]==139&&e[2]==8?Zy(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?Qy(e,t):Jy(e,t)}var ew=typeof TextDecoder<"u"&&new TextDecoder,tw=0;try{ew.decode(qy,{stream:!0}),tw=1}catch{}class VA{esize;ecode;edata;littleEndian;constructor(t,n,i,a){if(t%16!=0)throw new Error("This does not appear to be a NIFTI extension");this.esize=t,this.ecode=n,this.edata=i,this.littleEndian=a}toArrayBuffer(){let t=new Uint8Array(this.esize),n=new Uint8Array(this.edata);t.set(n,8);let i=new DataView(t.buffer);return i.setInt32(0,this.esize,this.littleEndian),i.setInt32(4,this.ecode,this.littleEndian),t.buffer}}class ue{static crcTable=null;static GUNZIP_MAGIC_COOKIE1=31;static GUNZIP_MAGIC_COOKIE2=139;static getStringAt(t,n,i){var a="",o,l;for(o=n;o<i;o+=1)l=t.getUint8(o),l!==0&&(a+=String.fromCharCode(l));return a}static getByteAt=function(t,n){return t.getUint8(n)};static getShortAt=function(t,n,i){return t.getInt16(n,i)};static getIntAt(t,n,i){return t.getInt32(n,i)}static getFloatAt(t,n,i){return t.getFloat32(n,i)}static getDoubleAt(t,n,i){return t.getFloat64(n,i)}static getInt64At(t,n,i){const a=t.getUint32(n,i),o=t.getInt32(n+4,i);let l;return i?l=o*2**32+a:l=a*2**32+o,o<0&&(l+=-1*2**32*2**32),l}static getUint64At(t,n,i){const a=t.getUint32(n+(i?0:4),i),o=t.getUint32(n+(i?4:0),i);return i?o*2**32+a:a*2**32+o}static getExtensionsAt(t,n,i,a){let o=[],l=n;for(;l<a;){let u=i,f=ue.getIntAt(t,l,i);if(!f)break;if(f+l>a&&(u=!u,f=ue.getIntAt(t,l,u),f+l>a))throw new Error("This does not appear to be a valid NIFTI extension");if(f%16!=0)throw new Error("This does not appear to be a NIFTI extension");let h=ue.getIntAt(t,l+4,u),d=t.buffer.slice(l+8,l+f),m=new VA(f,h,d,u);o.push(m),l+=f}return o}static toArrayBuffer(t){var n,i,a;for(n=new ArrayBuffer(t.length),i=new Uint8Array(n),a=0;a<t.length;a+=1)i[a]=t[a];return n}static isString(t){return typeof t=="string"||t instanceof String}static formatNumber(t,n=void 0){let i;return ue.isString(t)?i=Number(t):i=t,n?i=i.toPrecision(5):i=i.toPrecision(7),parseFloat(i)}static makeCRCTable(){let t,n=[];for(var i=0;i<256;i++){t=i;for(var a=0;a<8;a++)t=t&1?3988292384^t>>>1:t>>>1;n[i]=t}return n}static crc32(t){ue.crcTable||(ue.crcTable=ue.makeCRCTable());const n=ue.crcTable;let i=-1;for(var a=0;a<t.byteLength;a++)i=i>>>8^n[(i^t.getUint8(a))&255];return(i^-1)>>>0}}class me{littleEndian=!1;dim_info=0;dims=[];intent_p1=0;intent_p2=0;intent_p3=0;intent_code=0;datatypeCode=0;numBitsPerVoxel=0;slice_start=0;slice_end=0;slice_code=0;pixDims=[];vox_offset=0;scl_slope=1;scl_inter=0;xyzt_units=0;cal_max=0;cal_min=0;slice_duration=0;toffset=0;description="";aux_file="";intent_name="";qform_code=0;sform_code=0;quatern_a=0;quatern_b=0;quatern_c=0;quatern_d=0;qoffset_x=0;qoffset_y=0;qoffset_z=0;affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];qfac=1;quatern_R;magic="0";isHDR=!1;extensionFlag=[0,0,0,0];extensionSize=0;extensionCode=0;extensions=[];static TYPE_NONE=0;static TYPE_BINARY=1;static TYPE_UINT8=2;static TYPE_INT16=4;static TYPE_INT32=8;static TYPE_FLOAT32=16;static TYPE_COMPLEX64=32;static TYPE_FLOAT64=64;static TYPE_RGB24=128;static TYPE_INT8=256;static TYPE_UINT16=512;static TYPE_UINT32=768;static TYPE_INT64=1024;static TYPE_UINT64=1280;static TYPE_FLOAT128=1536;static TYPE_COMPLEX128=1792;static TYPE_COMPLEX256=2048;static XFORM_UNKNOWN=0;static XFORM_SCANNER_ANAT=1;static XFORM_ALIGNED_ANAT=2;static XFORM_TALAIRACH=3;static XFORM_MNI_152=4;static SPATIAL_UNITS_MASK=7;static TEMPORAL_UNITS_MASK=56;static UNITS_UNKNOWN=0;static UNITS_METER=1;static UNITS_MM=2;static UNITS_MICRON=3;static UNITS_SEC=8;static UNITS_MSEC=16;static UNITS_USEC=24;static UNITS_HZ=32;static UNITS_PPM=40;static UNITS_RADS=48;static MAGIC_COOKIE=348;static STANDARD_HEADER_SIZE=348;static MAGIC_NUMBER_LOCATION=344;static MAGIC_NUMBER=[110,43,49];static MAGIC_NUMBER2=[110,105,49];static EXTENSION_HEADER_SIZE=8;readHeader(t){var n=new DataView(t),i=ue.getIntAt(n,0,this.littleEndian),a,o,l,u;if(i!==me.MAGIC_COOKIE&&(this.littleEndian=!0,i=ue.getIntAt(n,0,this.littleEndian)),i!==me.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.dim_info=ue.getByteAt(n,39),a=0;a<8;a+=1)u=40+a*2,this.dims[a]=ue.getShortAt(n,u,this.littleEndian);for(this.intent_p1=ue.getFloatAt(n,56,this.littleEndian),this.intent_p2=ue.getFloatAt(n,60,this.littleEndian),this.intent_p3=ue.getFloatAt(n,64,this.littleEndian),this.intent_code=ue.getShortAt(n,68,this.littleEndian),this.datatypeCode=ue.getShortAt(n,70,this.littleEndian),this.numBitsPerVoxel=ue.getShortAt(n,72,this.littleEndian),this.slice_start=ue.getShortAt(n,74,this.littleEndian),a=0;a<8;a+=1)u=76+a*4,this.pixDims[a]=ue.getFloatAt(n,u,this.littleEndian);if(this.vox_offset=ue.getFloatAt(n,108,this.littleEndian),this.scl_slope=ue.getFloatAt(n,112,this.littleEndian),this.scl_inter=ue.getFloatAt(n,116,this.littleEndian),this.slice_end=ue.getShortAt(n,120,this.littleEndian),this.slice_code=ue.getByteAt(n,122),this.xyzt_units=ue.getByteAt(n,123),this.cal_max=ue.getFloatAt(n,124,this.littleEndian),this.cal_min=ue.getFloatAt(n,128,this.littleEndian),this.slice_duration=ue.getFloatAt(n,132,this.littleEndian),this.toffset=ue.getFloatAt(n,136,this.littleEndian),this.description=ue.getStringAt(n,148,228),this.aux_file=ue.getStringAt(n,228,252),this.qform_code=ue.getShortAt(n,252,this.littleEndian),this.sform_code=ue.getShortAt(n,254,this.littleEndian),this.quatern_b=ue.getFloatAt(n,256,this.littleEndian),this.quatern_c=ue.getFloatAt(n,260,this.littleEndian),this.quatern_d=ue.getFloatAt(n,264,this.littleEndian),this.quatern_a=Math.sqrt(1-(Math.pow(this.quatern_b,2)+Math.pow(this.quatern_c,2)+Math.pow(this.quatern_d,2))),this.qoffset_x=ue.getFloatAt(n,268,this.littleEndian),this.qoffset_y=ue.getFloatAt(n,272,this.littleEndian),this.qoffset_z=ue.getFloatAt(n,276,this.littleEndian),this.qform_code<1&&this.sform_code<1&&(this.affine[0][0]=this.pixDims[1],this.affine[1][1]=this.pixDims[2],this.affine[2][2]=this.pixDims[3]),this.qform_code>0&&this.sform_code<this.qform_code){const f=this.quatern_a,h=this.quatern_b,d=this.quatern_c,m=this.quatern_d;for(this.qfac=this.pixDims[0]===0?1:this.pixDims[0],this.quatern_R=[[f*f+h*h-d*d-m*m,2*h*d-2*f*m,2*h*m+2*f*d],[2*h*d+2*f*m,f*f+d*d-h*h-m*m,2*d*m-2*f*h],[2*h*m-2*f*d,2*d*m+2*f*h,f*f+m*m-d*d-h*h]],o=0;o<3;o+=1)for(l=0;l<3;l+=1)this.affine[o][l]=this.quatern_R[o][l]*this.pixDims[l+1],l===2&&(this.affine[o][l]*=this.qfac);this.affine[0][3]=this.qoffset_x,this.affine[1][3]=this.qoffset_y,this.affine[2][3]=this.qoffset_z}else if(this.sform_code>0)for(o=0;o<3;o+=1)for(l=0;l<4;l+=1)u=280+(o*4+l)*4,this.affine[o][l]=ue.getFloatAt(n,u,this.littleEndian);if(this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.intent_name=ue.getStringAt(n,328,344),this.magic=ue.getStringAt(n,344,348),this.isHDR=this.magic===String.fromCharCode.apply(null,me.MAGIC_NUMBER2),n.byteLength>me.MAGIC_COOKIE){this.extensionFlag[0]=ue.getByteAt(n,348),this.extensionFlag[1]=ue.getByteAt(n,349),this.extensionFlag[2]=ue.getByteAt(n,350),this.extensionFlag[3]=ue.getByteAt(n,351);let f=!0;!this.isHDR&&this.vox_offset<=352&&(f=!1),n.byteLength<=368&&(f=!1),f&&this.extensionFlag[0]&&(this.extensions=ue.getExtensionsAt(n,this.getExtensionLocation(),this.littleEndian,this.vox_offset),this.extensionSize=this.extensions[0].esize,this.extensionCode=this.extensions[0].ecode)}}toFormattedString(){var t=ue.formatNumber,n="";return n+="Dim Info = "+this.dim_info+`
`,n+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+`
`,n+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+`
`,n+="Intent Code = "+this.intent_code+`
`,n+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+`)
`,n+="Bits Per Voxel = "+this.numBitsPerVoxel+`
`,n+="Slice Start = "+this.slice_start+`
`,n+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+`
`,n+="Image Offset = "+this.vox_offset+`
`,n+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+`
`,n+="Slice End = "+this.slice_end+`
`,n+="Slice Code = "+this.slice_code+`
`,n+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(me.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(me.TEMPORAL_UNITS_MASK&this.xyzt_units)+`)
`,n+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+`
`,n+="Slice Duration = "+this.slice_duration+`
`,n+="Time Axis Shift = "+this.toffset+`
`,n+='Description: "'+this.description+`"
`,n+='Auxiliary File: "'+this.aux_file+`"
`,n+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+`)
`,n+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+`)
`,n+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+`
`,n+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+`
`,n+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+`
`,n+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+`
`,n+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+`
`,n+='Intent Name: "'+this.intent_name+`"
`,this.extensionFlag[0]&&(n+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+`
`),n}getDatatypeCodeString=function(t){return t===me.TYPE_UINT8?"1-Byte Unsigned Integer":t===me.TYPE_INT16?"2-Byte Signed Integer":t===me.TYPE_INT32?"4-Byte Signed Integer":t===me.TYPE_FLOAT32?"4-Byte Float":t===me.TYPE_FLOAT64?"8-Byte Float":t===me.TYPE_RGB24?"RGB":t===me.TYPE_INT8?"1-Byte Signed Integer":t===me.TYPE_UINT16?"2-Byte Unsigned Integer":t===me.TYPE_UINT32?"4-Byte Unsigned Integer":t===me.TYPE_INT64?"8-Byte Signed Integer":t===me.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"};getTransformCodeString=function(t){return t===me.XFORM_SCANNER_ANAT?"Scanner":t===me.XFORM_ALIGNED_ANAT?"Aligned":t===me.XFORM_TALAIRACH?"Talairach":t===me.XFORM_MNI_152?"MNI":"Unknown"};getUnitsCodeString=function(t){return t===me.UNITS_METER?"Meters":t===me.UNITS_MM?"Millimeters":t===me.UNITS_MICRON?"Microns":t===me.UNITS_SEC?"Seconds":t===me.UNITS_MSEC?"Milliseconds":t===me.UNITS_USEC?"Microseconds":t===me.UNITS_HZ?"Hz":t===me.UNITS_PPM?"PPM":t===me.UNITS_RADS?"Rads":"Unknown"};getQformMat(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])}convertNiftiQFormToNiftiSForm(t,n,i,a,o,l,u,f,h,d){var m=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],p,A=t,v=n,y=i,w,C,S;return m[3][0]=m[3][1]=m[3][2]=0,m[3][3]=1,p=1-(A*A+v*v+y*y),p<1e-7?(p=1/Math.sqrt(A*A+v*v+y*y),A*=p,v*=p,y*=p,p=0):p=Math.sqrt(p),w=u>0?u:1,C=f>0?f:1,S=h>0?h:1,d<0&&(S=-S),m[0][0]=(p*p+A*A-v*v-y*y)*w,m[0][1]=2*(A*v-p*y)*C,m[0][2]=2*(A*y+p*v)*S,m[1][0]=2*(A*v+p*y)*w,m[1][1]=(p*p+v*v-A*A-y*y)*C,m[1][2]=2*(v*y-p*A)*S,m[2][0]=2*(A*y-p*v)*w,m[2][1]=2*(v*y+p*A)*C,m[2][2]=(p*p+y*y-v*v-A*A)*S,m[0][3]=a,m[1][3]=o,m[2][3]=l,m}convertNiftiSFormToNEMA(t){var n,i,a,o,l,u,f,h,d,m,p,A,v,y,w,C,S,E,M,R,D,T,F,U,I,V,N,Y,P,Q,k,j,H,Z;if(w=0,N=[[0,0,0],[0,0,0],[0,0,0]],Y=[[0,0,0],[0,0,0],[0,0,0]],n=t[0][0],i=t[0][1],a=t[0][2],o=t[1][0],l=t[1][1],u=t[1][2],f=t[2][0],h=t[2][1],d=t[2][2],m=Math.sqrt(n*n+o*o+f*f),m===0||(n/=m,o/=m,f/=m,m=Math.sqrt(i*i+l*l+h*h),m===0))return null;if(i/=m,l/=m,h/=m,m=n*i+o*l+f*h,Math.abs(m)>1e-4){if(i-=m*n,l-=m*o,h-=m*f,m=Math.sqrt(i*i+l*l+h*h),m===0)return null;i/=m,l/=m,h/=m}if(m=Math.sqrt(a*a+u*u+d*d),m===0?(a=o*h-f*l,u=f*i-h*n,d=n*l-o*i):(a/=m,u/=m,d/=m),m=n*a+o*u+f*d,Math.abs(m)>1e-4){if(a-=m*n,u-=m*o,d-=m*f,m=Math.sqrt(a*a+u*u+d*d),m===0)return null;a/=m,u/=m,d/=m}if(m=i*a+l*u+h*d,Math.abs(m)>1e-4){if(a-=m*i,u-=m*l,d-=m*h,m=Math.sqrt(a*a+u*u+d*d),m===0)return null;a/=m,u/=m,d/=m}if(N[0][0]=n,N[0][1]=i,N[0][2]=a,N[1][0]=o,N[1][1]=l,N[1][2]=u,N[2][0]=f,N[2][1]=h,N[2][2]=d,p=this.nifti_mat33_determ(N),p===0)return null;for(V=-666,M=T=F=U=1,R=2,D=3,v=1;v<=3;v+=1)for(y=1;y<=3;y+=1)if(v!==y){for(w=1;w<=3;w+=1)if(!(v===w||y===w))for(Y[0][0]=Y[0][1]=Y[0][2]=Y[1][0]=Y[1][1]=Y[1][2]=Y[2][0]=Y[2][1]=Y[2][2]=0,C=-1;C<=1;C+=2)for(S=-1;S<=1;S+=2)for(E=-1;E<=1;E+=2)Y[0][v-1]=C,Y[1][y-1]=S,Y[2][w-1]=E,A=this.nifti_mat33_determ(Y),A*p>0&&(I=this.nifti_mat33_mul(Y,N),m=I[0][0]+I[1][1]+I[2][2],m>V&&(V=m,M=v,R=y,D=w,T=C,F=S,U=E))}switch(P=Q=k=j=H=Z="",M*T){case 1:P="X",j="+";break;case-1:P="X",j="-";break;case 2:P="Y",j="+";break;case-2:P="Y",j="-";break;case 3:P="Z",j="+";break;case-3:P="Z",j="-";break}switch(R*F){case 1:Q="X",H="+";break;case-1:Q="X",H="-";break;case 2:Q="Y",H="+";break;case-2:Q="Y",H="-";break;case 3:Q="Z",H="+";break;case-3:Q="Z",H="-";break}switch(D*U){case 1:k="X",Z="+";break;case-1:k="X",Z="-";break;case 2:k="Y",Z="+";break;case-2:k="Y",Z="-";break;case 3:k="Z",Z="+";break;case-3:k="Z",Z="-";break}return P+Q+k+j+H+Z}nifti_mat33_mul=function(t,n){var i=[[0,0,0],[0,0,0],[0,0,0]],a,o;for(a=0;a<3;a+=1)for(o=0;o<3;o+=1)i[a][o]=t[a][0]*n[0][o]+t[a][1]*n[1][o]+t[a][2]*n[2][o];return i};nifti_mat33_determ=function(t){var n,i,a,o,l,u,f,h,d;return n=t[0][0],i=t[0][1],a=t[0][2],o=t[1][0],l=t[1][1],u=t[1][2],f=t[2][0],h=t[2][1],d=t[2][2],n*l*d-n*h*u-o*i*d+o*h*a+f*i*u-f*l*a};getExtensionLocation(){return me.MAGIC_COOKIE+4}getExtensionSize(t){return ue.getIntAt(t,this.getExtensionLocation(),this.littleEndian)}getExtensionCode(t){return ue.getIntAt(t,this.getExtensionLocation()+4,this.littleEndian)}addExtension(t,n=-1){n==-1?this.extensions.push(t):this.extensions.splice(n,0,t),this.vox_offset+=t.esize}removeExtension(t){let n=this.extensions[t];n&&(this.vox_offset-=n.esize),this.extensions.splice(t,1)}toArrayBuffer(t=!1){let a=352;if(t)for(let f of this.extensions)a+=f.esize;let o=new Uint8Array(a),l=new DataView(o.buffer);l.setInt32(0,348,this.littleEndian),l.setUint8(39,this.dim_info);for(let f=0;f<8;f++)l.setUint16(40+2*f,this.dims[f],this.littleEndian);l.setFloat32(56,this.intent_p1,this.littleEndian),l.setFloat32(60,this.intent_p2,this.littleEndian),l.setFloat32(64,this.intent_p3,this.littleEndian),l.setInt16(68,this.intent_code,this.littleEndian),l.setInt16(70,this.datatypeCode,this.littleEndian),l.setInt16(72,this.numBitsPerVoxel,this.littleEndian),l.setInt16(74,this.slice_start,this.littleEndian);for(let f=0;f<8;f++)l.setFloat32(76+4*f,this.pixDims[f],this.littleEndian);l.setFloat32(108,this.vox_offset,this.littleEndian),l.setFloat32(112,this.scl_slope,this.littleEndian),l.setFloat32(116,this.scl_inter,this.littleEndian),l.setInt16(120,this.slice_end,this.littleEndian),l.setUint8(122,this.slice_code),l.setUint8(123,this.xyzt_units),l.setFloat32(124,this.cal_max,this.littleEndian),l.setFloat32(128,this.cal_min,this.littleEndian),l.setFloat32(132,this.slice_duration,this.littleEndian),l.setFloat32(136,this.toffset,this.littleEndian),o.set(new TextEncoder().encode(this.description),148),o.set(new TextEncoder().encode(this.aux_file),228),l.setInt16(252,this.qform_code,this.littleEndian),l.setInt16(254,this.sform_code,this.littleEndian),l.setFloat32(256,this.quatern_b,this.littleEndian),l.setFloat32(260,this.quatern_c,this.littleEndian),l.setFloat32(264,this.quatern_d,this.littleEndian),l.setFloat32(268,this.qoffset_x,this.littleEndian),l.setFloat32(272,this.qoffset_y,this.littleEndian),l.setFloat32(276,this.qoffset_z,this.littleEndian);const u=this.affine.flat();for(let f=0;f<12;f++)l.setFloat32(280+4*f,u[f],this.littleEndian);if(o.set(new TextEncoder().encode(this.intent_name),328),o.set(new TextEncoder().encode(this.magic),344),t){o.set(Uint8Array.from([1,0,0,0]),348);let f=this.getExtensionLocation();for(const h of this.extensions)l.setInt32(f,h.esize,h.littleEndian),l.setInt32(f+4,h.ecode,h.littleEndian),o.set(new Uint8Array(h.edata),f+8),f+=h.esize}else o.set(new Uint8Array(4).fill(0),348);return o.buffer}}class Rt{littleEndian=!1;dim_info=0;dims=[];intent_p1=0;intent_p2=0;intent_p3=0;intent_code=0;datatypeCode=0;numBitsPerVoxel=0;slice_start=0;slice_end=0;slice_code=0;pixDims=[];vox_offset=0;scl_slope=1;scl_inter=0;xyzt_units=0;cal_max=0;cal_min=0;slice_duration=0;toffset=0;description="";aux_file="";intent_name="";qform_code=0;sform_code=0;quatern_b=0;quatern_c=0;quatern_d=0;qoffset_x=0;qoffset_y=0;qoffset_z=0;affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];magic="0";extensionFlag=[0,0,0,0];extensions=[];extensionSize=0;extensionCode=0;static MAGIC_COOKIE=540;static MAGIC_NUMBER_LOCATION=4;static MAGIC_NUMBER=[110,43,50,0,13,10,26,10];static MAGIC_NUMBER2=[110,105,50,0,13,10,26,10];readHeader(t){var n=new DataView(t),i=ue.getIntAt(n,0,this.littleEndian),a,o,l,u;if(i!==Rt.MAGIC_COOKIE&&(this.littleEndian=!0,i=ue.getIntAt(n,0,this.littleEndian)),i!==Rt.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.magic=ue.getStringAt(n,4,12),this.datatypeCode=ue.getShortAt(n,12,this.littleEndian),this.numBitsPerVoxel=ue.getShortAt(n,14,this.littleEndian),a=0;a<8;a+=1)u=16+a*8,this.dims[a]=ue.getInt64At(n,u,this.littleEndian);for(this.intent_p1=ue.getDoubleAt(n,80,this.littleEndian),this.intent_p2=ue.getDoubleAt(n,88,this.littleEndian),this.intent_p3=ue.getDoubleAt(n,96,this.littleEndian),a=0;a<8;a+=1)u=104+a*8,this.pixDims[a]=ue.getDoubleAt(n,u,this.littleEndian);for(this.vox_offset=ue.getInt64At(n,168,this.littleEndian),this.scl_slope=ue.getDoubleAt(n,176,this.littleEndian),this.scl_inter=ue.getDoubleAt(n,184,this.littleEndian),this.cal_max=ue.getDoubleAt(n,192,this.littleEndian),this.cal_min=ue.getDoubleAt(n,200,this.littleEndian),this.slice_duration=ue.getDoubleAt(n,208,this.littleEndian),this.toffset=ue.getDoubleAt(n,216,this.littleEndian),this.slice_start=ue.getInt64At(n,224,this.littleEndian),this.slice_end=ue.getInt64At(n,232,this.littleEndian),this.description=ue.getStringAt(n,240,320),this.aux_file=ue.getStringAt(n,320,344),this.qform_code=ue.getIntAt(n,344,this.littleEndian),this.sform_code=ue.getIntAt(n,348,this.littleEndian),this.quatern_b=ue.getDoubleAt(n,352,this.littleEndian),this.quatern_c=ue.getDoubleAt(n,360,this.littleEndian),this.quatern_d=ue.getDoubleAt(n,368,this.littleEndian),this.qoffset_x=ue.getDoubleAt(n,376,this.littleEndian),this.qoffset_y=ue.getDoubleAt(n,384,this.littleEndian),this.qoffset_z=ue.getDoubleAt(n,392,this.littleEndian),o=0;o<3;o+=1)for(l=0;l<4;l+=1)u=400+(o*4+l)*8,this.affine[o][l]=ue.getDoubleAt(n,u,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.slice_code=ue.getIntAt(n,496,this.littleEndian),this.xyzt_units=ue.getIntAt(n,500,this.littleEndian),this.intent_code=ue.getIntAt(n,504,this.littleEndian),this.intent_name=ue.getStringAt(n,508,524),this.dim_info=ue.getByteAt(n,524),n.byteLength>Rt.MAGIC_COOKIE&&(this.extensionFlag[0]=ue.getByteAt(n,540),this.extensionFlag[1]=ue.getByteAt(n,541),this.extensionFlag[2]=ue.getByteAt(n,542),this.extensionFlag[3]=ue.getByteAt(n,543),this.extensionFlag[0]&&(this.extensions=ue.getExtensionsAt(n,this.getExtensionLocation(),this.littleEndian,this.vox_offset),this.extensionSize=this.extensions[0].esize,this.extensionCode=this.extensions[0].ecode))}toFormattedString(){var t=ue.formatNumber,n="";return n+="Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+`)
`,n+="Bits Per Voxel =  = "+this.numBitsPerVoxel+`
`,n+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+`
`,n+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+`
`,n+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+`
`,n+="Image Offset = "+this.vox_offset+`
`,n+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+`
`,n+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+`
`,n+="Slice Duration = "+this.slice_duration+`
`,n+="Time Axis Shift = "+this.toffset+`
`,n+="Slice Start = "+this.slice_start+`
`,n+="Slice End = "+this.slice_end+`
`,n+='Description: "'+this.description+`"
`,n+='Auxiliary File: "'+this.aux_file+`"
`,n+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+`)
`,n+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+`)
`,n+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+`
`,n+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+`
`,n+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+`
`,n+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+`
`,n+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+`
`,n+="Slice Code = "+this.slice_code+`
`,n+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(me.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(me.TEMPORAL_UNITS_MASK&this.xyzt_units)+`)
`,n+="Intent Code = "+this.intent_code+`
`,n+='Intent Name: "'+this.intent_name+`"
`,n+="Dim Info = "+this.dim_info+`
`,n}getExtensionLocation=function(){return Rt.MAGIC_COOKIE+4};getExtensionSize=me.prototype.getExtensionSize;getExtensionCode=me.prototype.getExtensionCode;addExtension=me.prototype.addExtension;removeExtension=me.prototype.removeExtension;getDatatypeCodeString=me.prototype.getDatatypeCodeString;getTransformCodeString=me.prototype.getTransformCodeString;getUnitsCodeString=me.prototype.getUnitsCodeString;getQformMat=me.prototype.getQformMat;convertNiftiQFormToNiftiSForm=me.prototype.convertNiftiQFormToNiftiSForm;convertNiftiSFormToNEMA=me.prototype.convertNiftiSFormToNEMA;nifti_mat33_mul=me.prototype.nifti_mat33_mul;nifti_mat33_determ=me.prototype.nifti_mat33_determ;toArrayBuffer(t=!1){let a=544;if(t)for(let f of this.extensions)a+=f.esize;let o=new Uint8Array(a),l=new DataView(o.buffer);l.setInt32(0,540,this.littleEndian),o.set(new TextEncoder().encode(this.magic),4),l.setInt16(12,this.datatypeCode,this.littleEndian),l.setInt16(14,this.numBitsPerVoxel,this.littleEndian);for(let f=0;f<8;f++)l.setBigInt64(16+8*f,BigInt(this.dims[f]),this.littleEndian);l.setFloat64(80,this.intent_p1,this.littleEndian),l.setFloat64(88,this.intent_p2,this.littleEndian),l.setFloat64(96,this.intent_p3,this.littleEndian);for(let f=0;f<8;f++)l.setFloat64(104+8*f,this.pixDims[f],this.littleEndian);l.setBigInt64(168,BigInt(this.vox_offset),this.littleEndian),l.setFloat64(176,this.scl_slope,this.littleEndian),l.setFloat64(184,this.scl_inter,this.littleEndian),l.setFloat64(192,this.cal_max,this.littleEndian),l.setFloat64(200,this.cal_min,this.littleEndian),l.setFloat64(208,this.slice_duration,this.littleEndian),l.setFloat64(216,this.toffset,this.littleEndian),l.setBigInt64(224,BigInt(this.slice_start),this.littleEndian),l.setBigInt64(232,BigInt(this.slice_end),this.littleEndian),o.set(new TextEncoder().encode(this.description),240),o.set(new TextEncoder().encode(this.aux_file),320),l.setInt32(344,this.qform_code,this.littleEndian),l.setInt32(348,this.sform_code,this.littleEndian),l.setFloat64(352,this.quatern_b,this.littleEndian),l.setFloat64(360,this.quatern_c,this.littleEndian),l.setFloat64(368,this.quatern_d,this.littleEndian),l.setFloat64(376,this.qoffset_x,this.littleEndian),l.setFloat64(384,this.qoffset_y,this.littleEndian),l.setFloat64(392,this.qoffset_z,this.littleEndian);const u=this.affine.flat();for(let f=0;f<12;f++)l.setFloat64(400+8*f,u[f],this.littleEndian);if(l.setInt32(496,this.slice_code,this.littleEndian),l.setInt32(500,this.xyzt_units,this.littleEndian),l.setInt32(504,this.intent_code,this.littleEndian),o.set(new TextEncoder().encode(this.intent_name),508),l.setUint8(524,this.dim_info),t){o.set(Uint8Array.from([1,0,0,0]),540);let f=this.getExtensionLocation();for(const h of this.extensions)l.setInt32(f,h.esize,h.littleEndian),l.setInt32(f+4,h.ecode,h.littleEndian),o.set(new Uint8Array(h.edata),f+8),f+=h.esize}else o.set(new Uint8Array(4).fill(0),540);return o.buffer}}function nw(e,t=!1){var n,i,a,o;return e.byteLength<me.STANDARD_HEADER_SIZE?!1:(n=new DataView(e),n&&(i=n.getUint8(me.MAGIC_NUMBER_LOCATION)),a=n.getUint8(me.MAGIC_NUMBER_LOCATION+1),o=n.getUint8(me.MAGIC_NUMBER_LOCATION+2),t&&i===me.MAGIC_NUMBER2[0]&&a===me.MAGIC_NUMBER2[1]&&o===me.MAGIC_NUMBER2[2]?!0:i===me.MAGIC_NUMBER[0]&&a===me.MAGIC_NUMBER[1]&&o===me.MAGIC_NUMBER[2])}function iw(e,t=!1){var n,i,a,o;return e.byteLength<me.STANDARD_HEADER_SIZE?!1:(n=new DataView(e),i=n.getUint8(Rt.MAGIC_NUMBER_LOCATION),a=n.getUint8(Rt.MAGIC_NUMBER_LOCATION+1),o=n.getUint8(Rt.MAGIC_NUMBER_LOCATION+2),t&&i===Rt.MAGIC_NUMBER2[0]&&a===Rt.MAGIC_NUMBER2[1]&&o===Rt.MAGIC_NUMBER2[2]?!0:i===Rt.MAGIC_NUMBER[0]&&a===Rt.MAGIC_NUMBER[1]&&o===Rt.MAGIC_NUMBER[2])}function Id(e){var t,n,i;return!!(e&&(t=new DataView(e),n=t.getUint8(0),i=t.getUint8(1),n===ue.GUNZIP_MAGIC_COOKIE1||i===ue.GUNZIP_MAGIC_COOKIE2))}function rw(e){return $y(new Uint8Array(e)).buffer}async function aw(e){const t=new Uint8Array(e),n=t[0]===31&&t[1]===139&&t[2]===8?"gzip":t[0]===120&&(t[1]===1||t[1]===94||t[1]===156||t[1]===218)?"deflate":"deflate-raw",i=new DecompressionStream(n),a=i.writable.getWriter();a.write(t).catch(console.error);const o=a.close().catch(console.error),u=await new Response(i.readable).arrayBuffer();return await o,u}async function Xg(e,t=1/0){const n=A=>A[0]===31&&A[1]===139&&A[2]===8?"gzip":A[0]===120&&[1,94,156,218].includes(A[1])?"deflate":"deflate-raw",i=new Uint8Array(e),a=n(i),o=new DecompressionStream(a),l=new TransformStream({transform(A,v){v.enqueue(A)},flush(A){A.terminate()}}),{readable:u,writable:f}=o,h=f.getWriter(),d=u.pipeThrough(l).getReader();h.write(i).catch(A=>{A instanceof Error&&A.name==="AbortError"||console.error("Error during write:",A)});const m=[];let p=0;try{for(;p<t;){const{done:A,value:v}=await d.read();if(A)break;const y=t-p,w=v.subarray(0,Math.min(v.length,y));if(m.push(w),p+=w.length,p>=t){await Promise.all([d.cancel().catch(()=>{}),h.abort().catch(()=>{})]);break}}}catch(A){A instanceof Error&&A.name==="AbortError"||console.error("Error during decompression:",A)}finally{await Promise.allSettled([d.cancel().catch(()=>{}),h.close().catch(()=>{})])}return m.length===1?m[0].buffer:m.reduce((A,v)=>{const y=new Uint8Array(A.byteLength+v.byteLength);return y.set(new Uint8Array(A),0),y.set(v,A.byteLength),y.buffer},new ArrayBuffer(0))}function sw(e,t=!1){let n=null;if(Id(e)&&(e=rw(e)),nw(e,t)?n=new me:iw(e,t)&&(n=new Rt),n)n.readHeader(e);else throw new Error("That file does not appear to be NIFTI!");return n}async function lo(e,t=!1){if(!Id(e))return sw(e,t);let n=null,i=await Xg(e,540),a=!0,o=!0;var l=new DataView(i);const u=l.getInt32(0,!0),f=l.getInt32(0,!1);if(u!==348)if(f===348)a=!1;else if(u===540)o=!1;else if(f===540)o=!1,a=!1;else throw new Error("That file does not appear to be NIFTI!");let h=Math.round(l.getFloat32(108,a));return Rt&&(h=ue.getUint64At(l,168,a)),h>i.byteLength&&(i=await Xg(e,h)),o?n=new me:n=new Rt,n.readHeader(i),n}function ow(e){return e.extensionFlag[0]!=0}function jg(e,t){var n=e.vox_offset,i=1,a=1;e.dims[4]&&(i=e.dims[4]),e.dims[5]&&(a=e.dims[5]);var o=e.dims[1]*e.dims[2]*e.dims[3]*i*a*(e.numBitsPerVoxel/8);return t.slice(n,n+o)}function OA(e,t,n,i={}){return t!==void 0&&n!==void 0&&(i={...i,headers:{...i.headers,Range:`bytes=${t}-${t+n-1}`}}),fetch(e,i)}function lw(e,t){return{...e,...t,headers:{...e.headers,...t.headers}}}function qg(e,t){const n=typeof e=="string"?new URL(e):e;n.pathname.endsWith("/")||(n.pathname+="/");const i=new URL(t.slice(1),n);return i.search=n.search,i}async function _g(e){if(e.status!==404){if(e.status===200||e.status===206)return new Uint8Array(await e.arrayBuffer());throw new Error(`Unexpected response status ${e.status} ${e.statusText}`)}}async function cw(e,t,n,i){if(i)return fetch(e,{...n,headers:{...n.headers,Range:`bytes=-${t}`}});let a=await fetch(e,{...n,method:"HEAD"});if(!a.ok)return a;let o=a.headers.get("Content-Length"),l=Number(o);return OA(e,l-t,l,n)}class uw{url;#e;#t;constructor(t,n={}){this.url=t,this.#e=n.overrides??{},this.#t=n.useSuffixRequest??!1}#n(t){return lw(this.#e,t)}async get(t,n={}){let i=qg(this.url,t).href,a=await fetch(i,this.#n(n));return _g(a)}async getRange(t,n,i={}){let a=qg(this.url,t),o=this.#n(i),l;return"suffixLength"in n?l=await cw(a,n.suffixLength,o,this.#t):l=await OA(a,n.offset,n.length,o),_g(l)}}const fw="modulepreload",hw=function(e){return"/"+e},Kg={},Sh=function(t,n,i){let a=Promise.resolve();if(n&&n.length>0){let h=function(d){return Promise.all(d.map(m=>Promise.resolve(m).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};var l=h;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");a=h(n.map(d=>{if(d=hw(d),d in Kg)return;Kg[d]=!0;const m=d.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const A=document.createElement("link");if(A.rel=m?"stylesheet":fw,m||(A.as="script"),A.crossOrigin="",A.href=d,f&&A.setAttribute("nonce",f),document.head.appendChild(A),m)return new Promise((v,y)=>{A.addEventListener("load",v),A.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return a.then(u=>{for(const f of u||[])f.status==="rejected"&&o(f.reason);return t().catch(o)})};class LA{#e;constructor(t,n,i){typeof t=="number"?this.#e=new Uint8Array(t):t instanceof ArrayBuffer?this.#e=new Uint8Array(t,n,i):this.#e=new Uint8Array(Array.from(t,a=>a?1:0))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return this.#e.byteOffset}get byteLength(){return this.#e.byteLength}get buffer(){return this.#e.buffer}get length(){return this.#e.length}get(t){let n=this.#e[t];return typeof n=="number"?n!==0:n}set(t,n){this.#e[t]=n?1:0}fill(t){this.#e.fill(t?1:0)}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.get(t)}}class Vd{_data;chars;#e;constructor(t,n,i,a){if(this.chars=t,this.#e=new TextEncoder,typeof n=="number")this._data=new Uint8Array(n*t);else if(n instanceof ArrayBuffer)a&&(a=a*t),this._data=new Uint8Array(n,i,a);else{let o=Array.from(n);this._data=new Uint8Array(o.length*t);for(let l=0;l<o.length;l++)this.set(l,o[l])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(t){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*t,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(t,n){const i=new Uint8Array(this.buffer,this.byteOffset+this.chars*t,this.chars);i.fill(0),i.set(this.#e.encode(n))}fill(t){const n=this.#e.encode(t);for(let i=0;i<this.length;i++)this._data.set(n,i*this.chars)}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.get(t)}}class co{#e;chars;constructor(t,n,i,a){if(this.chars=t,typeof n=="number")this.#e=new Int32Array(n*t);else if(n instanceof ArrayBuffer)a&&(a*=t),this.#e=new Int32Array(n,i,a);else{const o=n,l=new co(t,1);this.#e=new Int32Array((function*(){for(let u of o)l.set(0,u),yield*l.#e})())}}get BYTES_PER_ELEMENT(){return this.#e.BYTES_PER_ELEMENT*this.chars}get byteLength(){return this.#e.byteLength}get byteOffset(){return this.#e.byteOffset}get buffer(){return this.#e.buffer}get length(){return this.#e.length/this.chars}get(t){const n=this.chars*t;let i="";for(let a=0;a<this.chars;a++)i+=String.fromCodePoint(this.#e[n+a]);return i.replace(/\u0000/g,"")}set(t,n){const i=this.chars*t,a=this.#e.subarray(i,i+this.chars);a.fill(0);for(let o=0;o<this.chars;o++)a[o]=n.codePointAt(o)??0}fill(t){this.set(0,t);let n=this.#e.subarray(0,this.chars);for(let i=1;i<this.length;i++)this.#e.set(n,i*this.chars)}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.get(t)}}function uo(e){const t=new TextDecoder().decode(e);return JSON.parse(t)}function Qg(e,t){const n=t/2,i=t-1;let a=0;for(let o=0;o<e.length;o+=t)for(let l=0;l<n;l+=1)a=e[o+l],e[o+l]=e[o+i-l],e[o+i-l]=a}function PA(e){if(e==="v2:object")return globalThis.Array;let t=e.match(/v2:([US])(\d+)/);if(t){let[,i,a]=t;return(i==="U"?co:Vd).bind(null,Number(a))}let n={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float16:globalThis.Float16Array,float32:Float32Array,float64:Float64Array,bool:LA}[e];return vt(n,`Unknown or unsupported data_type: ${e}`),n}function Fr(e,t){const n=e.length;typeof t=="string"&&(t=t==="C"?Array.from({length:n},(o,l)=>l):Array.from({length:n},(o,l)=>n-1-l)),vt(n===t.length,"Order length must match the number of dimensions.");let i=1,a=new Array(n);for(let o=t.length-1;o>=0;o--)a[t[o]]=i,i*=e[t[o]];return a}function dw({name:e,configuration:t}){if(e==="default"){const n=t?.separator??"/";return i=>["c",...i].join(n)}if(e==="v2"){const n=t?.separator??".";return i=>i.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${e}`)}function mw(e){if(e==="|O")return{data_type:"v2:object"};let t=e.match(/^([<|>])(.*)$/);vt(t,`Invalid dtype: ${e}`);let[,n,i]=t,a={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f2:"float16",f4:"float32",f8:"float64"}[i]??(i.startsWith("S")||i.startsWith("U")?`v2:${i}`:void 0);return vt(a,`Unsupported or unknown dtype: ${e}`),n==="|"?{data_type:a}:{data_type:a,endian:n==="<"?"little":"big"}}function gw(e,t={}){let n=[],i=mw(e.dtype);e.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in i&&i.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:a,...o}of e.filters??[])n.push({name:a,configuration:o});if(e.compressor){let{id:a,...o}=e.compressor;n.push({name:a,configuration:o})}return{zarr_format:3,node_type:"array",shape:e.shape,data_type:i.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:e.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:e.dimension_separator??"."}},codecs:n,fill_value:e.fill_value,attributes:t}}function pw(e,t={}){return{zarr_format:3,node_type:"group",attributes:t}}function Aw(e,t){if(t!=="number"&&t!=="bigint"&&t!=="boolean"&&t!=="object"&&t!=="string")return e===t;let n=e==="bool";if(t==="boolean")return n;let i=e.startsWith("v2:U")||e.startsWith("v2:S");if(t==="string")return i;let a=e==="int64"||e==="uint64";if(t==="bigint")return a;let o=e==="v2:object";return t==="object"?o:!i&&!a&&!n&&!o}function vw(e){return e?.name==="sharding_indexed"}function zA(e){return(e.data_type==="uint64"||e.data_type==="int64")&&e.fill_value!=null?BigInt(e.fill_value):e.fill_value}function kA(e,...t){if(!t.some(n=>e instanceof n))throw e}function vt(e,t=""){if(!e)throw new Error(t)}async function GA(e,{format:t,signal:n}){const i=e instanceof Response?e:new Response(e);vt(i.body,"Response does not contain body.");try{return await new Response(i.body.pipeThrough(new DecompressionStream(t),{signal:n})).arrayBuffer()}catch{throw n?.throwIfAborted(),new Error(`Failed to decode ${t}`)}}class Od{kind="array_to_array";constructor(t,n){vt(t.keepbits>=0,"keepbits must be zero or positive")}static fromConfig(t,n){return new Od(t,n)}encode(t){throw new Error("`BitroundCodec.encode` is not implemented. Please open an issue at https://github.com/manzt/zarrita.js/issues.")}decode(t){return t}}const Wg=xw();function xw(){const e=new Uint32Array([305419896]);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)[0]!==18}function Zg(e){return"BYTES_PER_ELEMENT"in e?e.BYTES_PER_ELEMENT:4}class Oc{kind="array_to_bytes";#e;#t;#n;#r;#i;constructor(t,n){this.#i=t?.endian,this.#t=PA(n.data_type),this.#r=n.shape,this.#e=Fr(n.shape,"C");const i=new this.#t(0);this.#n=i.BYTES_PER_ELEMENT}static fromConfig(t,n){return new Oc(t,n)}encode(t){let n=new Uint8Array(t.data.buffer);return Wg&&this.#i==="big"&&Qg(n,Zg(this.#t)),n}decode(t){return Wg&&this.#i==="big"&&Qg(t,Zg(this.#t)),{data:new this.#t(t.buffer,t.byteOffset,t.byteLength/this.#n),shape:this.#r,stride:this.#e}}}class Ld{kind="bytes_to_bytes";static fromConfig(){return new Ld}encode(t){throw new Error("Not implemented")}decode(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength-4)}}class Pd{kind="bytes_to_bytes";static fromConfig(t){return new Pd}encode(t){throw new Error("Gzip encoding is not enabled by default. Please register a custom codec with `numcodecs/gzip`.")}async decode(t){const n=await GA(t,{format:"gzip"});return new Uint8Array(n)}}function yw(e,t){return vt(!Number.isNaN(t),"JsonCodec allow_nan is false but NaN was encountered during encoding."),vt(t!==Number.POSITIVE_INFINITY,"JsonCodec allow_nan is false but Infinity was encountered during encoding."),vt(t!==Number.NEGATIVE_INFINITY,"JsonCodec allow_nan is false but -Infinity was encountered during encoding."),t}function ww(e,t){return t instanceof Object&&!Array.isArray(t)?Object.keys(t).sort().reduce((n,i)=>(n[i]=t[i],n),{}):t}class zd{configuration;kind="array_to_bytes";#e;#t;constructor(t={}){this.configuration=t;const{encoding:n="utf-8",skipkeys:i=!1,ensure_ascii:a=!0,check_circular:o=!0,allow_nan:l=!0,sort_keys:u=!0,indent:f,strict:h=!0}=t;let d=t.separators;d||(f?d=[", ",": "]:d=[",",":"]),this.#e={encoding:n,skipkeys:i,ensure_ascii:a,check_circular:o,allow_nan:l,indent:f,separators:d,sort_keys:u},this.#t={strict:h}}static fromConfig(t){return new zd(t)}encode(t){const{indent:n,encoding:i,ensure_ascii:a,check_circular:o,allow_nan:l,sort_keys:u}=this.#e;vt(i==="utf-8","JsonCodec does not yet support non-utf-8 encoding.");const f=[];vt(o,"JsonCodec does not yet support skipping the check for circular references during encoding."),l||f.push(yw),u&&f.push(ww);const h=Array.from(t.data);h.push("|O"),h.push(t.shape);let d;f.length&&(d=(p,A)=>{let v=A;for(let y of f)v=y(p,v);return v});let m=JSON.stringify(h,d,n);return a&&(m=m.replace(/[\u007F-\uFFFF]/g,p=>{const A=`0000${p.charCodeAt(0).toString(16)}`;return`\\u${A.substring(A.length-4)}`})),new TextEncoder().encode(m)}decode(t){const{strict:n}=this.#t;vt(n,"JsonCodec does not yet support non-strict decoding.");const i=uo(t),a=i.pop();i.pop(),vt(a,"0D not implemented for JsonCodec.");const o=Fr(a,"C");return{data:i,shape:a,stride:o}}}function Jg(e){return e instanceof LA||e instanceof Vd||e instanceof co?new Proxy(e,{get(n,i){return n.get(Number(i))},set(n,i,a){return n.set(Number(i),a),!0}}):e}function bw(e,t){let n;return e.data instanceof Vd||e.data instanceof co?n=new e.constructor(e.data.length,e.data.chars):n=new e.constructor(e.data.length),{data:n,shape:e.shape,stride:Fr(e.shape,t)}}function Cw(e,t){let n=bw(e,t),i=e.shape.length,a=e.data.length,o=Array(i).fill(0),l=Jg(e.data),u=Jg(n.data);for(let f=0;f<a;f++){let h=0;for(let d=0;d<i;d++)h+=o[d]*n.stride[d];u[h]=l[f],o[0]+=1;for(let d=0;d<i;d++)if(o[d]===e.shape[d]){if(d+1===i)break;o[d]=0,o[d+1]+=1}}return n}function Sw(e){let t=e.shape.length;return vt(t===e.stride.length,"Shape and stride must have the same length."),e.stride.map((n,i)=>({stride:n,index:i})).sort((n,i)=>i.stride-n.stride).map(n=>n.index)}function Mw(e,t){let n=Sw(e);return vt(n.length===t.length,"Orders must match"),n.every((i,a)=>i===t[a])}class kd{kind="array_to_array";#e;#t;constructor(t,n){let i=t.order??"C",a=n.shape.length,o=new Array(a),l=new Array(a);if(i==="C")for(let u=0;u<a;++u)o[u]=u,l[u]=u;else if(i==="F")for(let u=0;u<a;++u)o[u]=a-u-1,l[u]=a-u-1;else o=i,o.forEach((u,f)=>{vt(l[u]===void 0,`Invalid permutation: ${JSON.stringify(i)}`),l[u]=f});this.#e=o,this.#t=l}static fromConfig(t,n){return new kd(t,n)}encode(t){return Mw(t,this.#t)?t:Cw(t,this.#t)}decode(t){return{data:t.data,shape:t.shape,stride:Fr(t.shape,this.#e)}}}class Gd{kind="array_to_bytes";#e;#t;constructor(t){this.#e=t,this.#t=Fr(t,"C")}static fromConfig(t,n){return new Gd(n.shape)}encode(t){throw new Error("Method not implemented.")}decode(t){let n=new TextDecoder,i=new DataView(t.buffer),a=Array(i.getUint32(0,!0)),o=4;for(let l=0;l<a.length;l++){let u=i.getUint32(o,!0);o+=4,a[l]=n.decode(t.buffer.slice(o,o+u)),o+=u}return{data:a,shape:this.#e,stride:this.#t}}}class Yd{kind="bytes_to_bytes";static fromConfig(t){return new Yd}encode(t){throw new Error("Zlib encoding is not enabled by default. Please register a codec with `numcodecs/zlib`.")}async decode(t){const n=await GA(t,{format:"deflate"});return new Uint8Array(n)}}function Ew(){return new Map().set("blosc",()=>Sh(()=>import("./blosc-CrUiACa7.js"),__vite__mapDeps([0,1])).then(e=>e.default)).set("lz4",()=>Sh(()=>import("./lz4-B_Exjfmr.js"),__vite__mapDeps([2,1])).then(e=>e.default)).set("zstd",()=>Sh(()=>import("./zstd-u5eweWyS.js"),__vite__mapDeps([3,1])).then(e=>e.default)).set("gzip",()=>Pd).set("zlib",()=>Yd).set("transpose",()=>kd).set("bytes",()=>Oc).set("crc32c",()=>Ld).set("vlen-utf8",()=>Gd).set("json2",()=>zd).set("bitround",()=>Od)}const Dw=Ew();function id(e){let t;return{async encode(n){t||(t=await $g(e));for(const a of t.array_to_array)n=await a.encode(n);let i=await t.array_to_bytes.encode(n);for(const a of t.bytes_to_bytes)i=await a.encode(i);return i},async decode(n){t||(t=await $g(e));for(let a=t.bytes_to_bytes.length-1;a>=0;a--)n=await t.bytes_to_bytes[a].decode(n);let i=await t.array_to_bytes.decode(n);for(let a=t.array_to_array.length-1;a>=0;a--)i=await t.array_to_array[a].decode(i);return i}}}async function $g(e){let t=e.codecs.map(async o=>{let l=await Dw.get(o.name)?.();return vt(l,`Unknown codec: ${o.name}`),{Codec:l,meta:o}}),n=[],i,a=[];for await(let{Codec:o,meta:l}of t){let u=o.fromConfig(l.configuration,e);switch(u.kind){case"array_to_array":n.push(u);break;case"array_to_bytes":i=u;break;default:a.push(u)}}return i||(vt(Tw(e),`Cannot encode ${e.data_type} to bytes without a codec`),i=Oc.fromConfig({endian:"little"},e)),{array_to_array:n,array_to_bytes:i,bytes_to_bytes:a}}function Tw(e){return e.data_type!=="v2:object"}class fo extends Error{constructor(t,n={}){super(`Node not found: ${t}`,n),this.name="NodeNotFoundError"}}class Hd extends Error{constructor(t){super(`Missing key: ${t}`),this.name="KeyError"}}const ep=18446744073709551615n;function Rw(e,t,n,i){vt(e.store.getRange,"Store does not support range requests");let a=e.store.getRange.bind(e.store),o=t.map((f,h)=>f/i.chunk_shape[h]),l=id({data_type:"uint64",shape:[...o,2],codecs:i.index_codecs}),u={};return async f=>{let h=f.map((S,E)=>Math.floor(S/o[E])),d=e.resolve(n(h)).path,m;if(d in u)m=u[d];else{let S=4,E=16*o.reduce((R,D)=>R*D,1),M=await a(d,{suffixLength:E+S});m=u[d]=M?await l.decode(M):null}if(m===null)return;let{data:p,shape:A,stride:v}=m,y=f.map((S,E)=>S%A[E]).reduce((S,E,M)=>S+E*v[M],0),w=p[y],C=p[y+1];if(!(w===ep&&C===ep))return a(d,{offset:Number(w),length:Number(C)})}}class Nr{store;path;constructor(t,n="/"){this.store=t,this.path=n}resolve(t){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new Nr(this.store,decodeURIComponent(new URL(t,n).pathname))}}function Fw(e){return new Nr(e??new Map)}let Xd=class extends Nr{kind="group";#e;constructor(t,n,i){super(t,n),this.#e=i}get attrs(){return this.#e.attributes}};function tp(e){return e.find(n=>n.name==="transpose")?.configuration?.order??"C"}const Gs=Symbol("zarrita.context");function Bw(e){return e[Gs]}function Uw(e,t){let{configuration:n}=t.codecs.find(vw)??{},i={encode_chunk_key:dw(t.chunk_key_encoding),TypedArray:PA(t.data_type),fill_value:t.fill_value};if(n){let o=tp(n.codecs);return{...i,kind:"sharded",chunk_shape:n.chunk_shape,codec:id({data_type:t.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(l){return Fr(l,o)},get_chunk_bytes:Rw(e,t.chunk_grid.configuration.chunk_shape,i.encode_chunk_key,n)}}let a=tp(t.codecs);return{...i,kind:"regular",chunk_shape:t.chunk_grid.configuration.chunk_shape,codec:id({data_type:t.data_type,shape:t.chunk_grid.configuration.chunk_shape,codecs:t.codecs}),get_strides(o){return Fr(o,a)},async get_chunk_bytes(o,l){let u=i.encode_chunk_key(o),f=e.resolve(u).path;return e.store.get(f,l)}}}let bc=class extends Nr{kind="array";#e;[Gs];constructor(t,n,i){super(t,n),this.#e={...i,fill_value:zA(i)},this[Gs]=Uw(this,i)}get attrs(){return this.#e.attributes}get shape(){return this.#e.shape}get chunks(){return this[Gs].chunk_shape}get dtype(){return this.#e.data_type}async getChunk(t,n){let i=this[Gs],a=await i.get_chunk_bytes(t,n);if(!a){let o=i.chunk_shape.reduce((u,f)=>u*f,1),l=new i.TypedArray(o);return l.fill(i.fill_value),{data:l,shape:i.chunk_shape,stride:i.get_strides(i.chunk_shape)}}return i.codec.decode(a)}is(t){return Aw(this.dtype,t)}};function*Nw(e,t,n=1){t===void 0&&(t=e,e=0);for(let i=e;i<t;i+=n)yield i}function*Iw(...e){if(e.length===0)return;const t=e.map(i=>i[Symbol.iterator]()),n=t.map(i=>i.next());if(n.some(i=>i.done))throw new Error("Input contains an empty iterator.");for(let i=0;;){if(n[i].done){if(t[i]=e[i][Symbol.iterator](),n[i]=t[i].next(),++i>=t.length)return}else yield n.map(({value:a})=>a),i=0;n[i]=t[i].next()}}function Vw({start:e,stop:t,step:n},i){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const a=n<0,[o,l]=a?[-1,i-1]:[0,i];return e===null?e=a?l:o:e<0?(e+=i,e<o&&(e=o)):e>l&&(e=l),t===null?t=a?o:l:t<0?(t+=i,t<o&&(t=o)):t>l&&(t=l),[e,t,n]}function eo(e,t,n=null){return t===void 0&&(t=e,e=null),{start:e,stop:t,step:n}}function Ow(){const e=[];return{add:t=>e.push(t()),onIdle:()=>Promise.all(e)}}class jd extends Error{constructor(t){super(t),this.name="IndexError"}}function Lw(e,t){throw new jd(`too many indicies for array; expected ${t.length}, got ${e.length}`)}function Pw(e){throw new jd(`index out of bounds for dimension with length ${e}`)}function zw(){throw new jd("only slices with step >= 1 are supported")}function kw(e,t){e.length>t.length&&Lw(e,t)}function Gw(e,t){return e=Math.trunc(e),e<0&&(e=t+e),(e>=t||e<0)&&Pw(t),e}class Yw{dim_sel;dim_len;dim_chunk_len;nitems;constructor({dim_sel:t,dim_len:n,dim_chunk_len:i}){t=Gw(t,n),this.dim_sel=t,this.dim_len=n,this.dim_chunk_len=i,this.nitems=1}*[Symbol.iterator](){const t=Math.floor(this.dim_sel/this.dim_chunk_len),n=t*this.dim_chunk_len,i=this.dim_sel-n;yield{dim_chunk_ix:t,dim_chunk_sel:i}}}class np{start;stop;step;dim_len;dim_chunk_len;nitems;nchunks;constructor({dim_sel:t,dim_len:n,dim_chunk_len:i}){const[a,o,l]=Vw(t,n);this.start=a,this.stop=o,this.step=l,this.step<1&&zw(),this.dim_len=n,this.dim_chunk_len=i,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const t=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const i of Nw(t,n)){const a=i*this.dim_chunk_len,o=Math.min(this.dim_len,(i+1)*this.dim_chunk_len),l=o-a;let u=0,f=0;if(this.start<a){const A=(a-this.start)%this.step;A&&(f+=this.step-A),u=Math.ceil((a-this.start)/this.step)}else f=this.start-a;const h=this.stop>o?l:this.stop-a,d=[f,h,this.step],m=Math.ceil((h-f)/this.step),p=[u,u+m,1];yield{dim_chunk_ix:i,dim_chunk_sel:d,dim_out_sel:p}}}}function Hw(e,t){let n=[];return e===null?n=t.map(i=>eo(null)):Array.isArray(e)&&(n=e.map(i=>i??eo(null))),kw(n,t),n}class Xw{dim_indexers;shape;constructor({selection:t,shape:n,chunk_shape:i}){this.dim_indexers=Hw(t,n).map((a,o)=>new(typeof a=="number"?Yw:np)({dim_sel:a,dim_len:n[o],dim_chunk_len:i[o]})),this.shape=this.dim_indexers.filter(a=>a instanceof np).map(a=>a.nitems)}*[Symbol.iterator](){for(const t of Iw(...this.dim_indexers)){const n=t.map(a=>a.dim_chunk_ix),i=t.map(a=>"dim_out_sel"in a?{from:a.dim_chunk_sel,to:a.dim_out_sel}:{from:a.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:i}}}}function jw(e,t){return"get"in e?e.get(t):e[t]}async function qw(e,t,n,i){let a=Bw(e),o=new Xw({selection:t,shape:e.shape,chunk_shape:e.chunks}),l=i.prepare(new a.TypedArray(o.shape.reduce((f,h)=>f*h,1)),o.shape,a.get_strides(o.shape)),u=n.create_queue?.()??Ow();for(const{chunk_coords:f,mapping:h}of o)u.add(async()=>{let{data:d,shape:m,stride:p}=await e.getChunk(f,n.opts),A=i.prepare(d,m,p);i.set_from_chunk(l,A,h)});return await u.onIdle(),o.shape.length===0?jw(l.data,0):l}function qd(e,t=0,n){let i=n??e.length-t;return{length:i,subarray(a,o=i){return qd(e,t+a,o-a)},set(a,o=0){for(let l=0;l<a.length;l++)e[t+o+l]=a.get(l)},get(a){return e[t+a]}}}function Mh(e){return globalThis.Array.isArray(e.data)?{data:qd(e.data),stride:e.stride,bytes_per_element:1}:{data:new Uint8Array(e.data.buffer,e.data.byteOffset,e.data.byteLength),stride:e.stride,bytes_per_element:e.data.BYTES_PER_ELEMENT}}function _w(e){return"chars"in e?e.constructor.bind(null,e.chars):e.constructor}function Kw(e,t){if(globalThis.Array.isArray(e.data))return qd([t]);let n=_w(e.data),i=new n([t]);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}const Qw={prepare(e,t,n){return{data:e,shape:t,stride:n}},set_scalar(e,t,n){let i=Mh(e);rd(i,t,Kw(e,n),i.bytes_per_element)},set_from_chunk(e,t,n){let i=Mh(e);sc(i,Mh(t),i.bytes_per_element,n)}};async function ip(e,t=null,n={}){return qw(e,t,n,Qw)}function YA(e,t,n){return n<0&&t<e?Math.floor((e-t-1)/-n)+1:e<t?Math.floor((t-e-1)/n)+1:0}function rd(e,t,n,i){if(t.length===0){e.data.set(n,0);return}const[a,...o]=t,[l,...u]=e.stride;if(typeof a=="number"){const p=e.data.subarray(l*a*i);rd({data:p,stride:u},o,n,i);return}const[f,h,d]=a,m=YA(f,h,d);if(o.length===0){for(let p=0;p<m;p++)e.data.set(n,l*(f+d*p)*i);return}for(let p=0;p<m;p++){const A=e.data.subarray(l*(f+d*p)*i);rd({data:A,stride:u},o,n,i)}}function sc(e,t,n,i){const[a,...o]=i,[l,...u]=e.stride,[f,...h]=t.stride;if(a.from===null){if(o.length===0){e.data.set(t.data.subarray(0,n),a.to*n);return}sc({data:e.data.subarray(l*a.to*n),stride:u},t,n,o);return}if(a.to===null){if(o.length===0){let C=a.from*n;e.data.set(t.data.subarray(C,C+n),0);return}sc(e,{data:t.data.subarray(f*a.from*n),stride:h},n,o);return}const[d,m,p]=a.to,[A,v,y]=a.from,w=YA(d,m,p);if(o.length===0){if(p===1&&y===1&&l===1&&f===1){let C=A*n,S=w*n;e.data.set(t.data.subarray(C,C+S),d*n);return}for(let C=0;C<w;C++){let S=f*(A+y*C)*n;e.data.set(t.data.subarray(S,S+n),l*(d+p*C)*n)}return}for(let C=0;C<w;C++)sc({data:e.data.subarray(l*(d+C*p)*n),stride:u},{data:t.data.subarray(f*(A+C*y)*n),stride:h},n,o)}let Lc=Ww();function Ww(){let e=new WeakMap;function t(n){let i=e.get(n)??{v2:0,v3:0};return e.set(n,i),i}return{increment(n,i){t(n)[i]+=1},version_max(n){let i=t(n);return i.v3>i.v2?"v3":"v2"}}}async function Zw(e){let t=await e.store.get(e.resolve(".zattrs").path);return t?uo(t):{}}async function Jw(e,t={}){let n="store"in e?e:new Nr(e),i={};return(t.attrs??!0)&&(i=await Zw(n)),t.kind==="array"?rp(n,i):t.kind==="group"?ap(n,i):rp(n,i).catch(a=>(kA(a,fo),ap(n,i)))}async function rp(e,t){let{path:n}=e.resolve(".zarray"),i=await e.store.get(n);if(!i)throw new fo("v2 array",{cause:new Hd(n)});return Lc.increment(e.store,"v2"),new bc(e.store,e.path,gw(uo(i),t))}async function ap(e,t){let{path:n}=e.resolve(".zgroup"),i=await e.store.get(n);if(!i)throw new fo("v2 group",{cause:new Hd(n)});return Lc.increment(e.store,"v2"),new Xd(e.store,e.path,pw(uo(i),t))}async function $w(e){let{store:t,path:n}=e.resolve("zarr.json"),i=await e.store.get(n);if(!i)throw new fo("v3 array or group",{cause:new Hd(n)});let a=uo(i);return a.node_type==="array"&&(a.fill_value=zA(a)),a.node_type==="array"?new bc(t,e.path,a):new Xd(t,e.path,a)}async function eb(e,t={}){let n="store"in e?e:new Nr(e),i=await $w(n);if(Lc.increment(n.store,"v3"),t.kind===void 0||t.kind==="array"&&i instanceof bc||t.kind==="group"&&i instanceof Xd)return i;let a=i instanceof bc?"array":"group";throw new Error(`Expected node of kind ${t.kind}, found ${a}.`)}async function Zi(e,t={}){let n="store"in e?e.store:e,i=Lc.version_max(n),a=i==="v2"?Zi.v2:Zi.v3,o=i==="v2"?Zi.v3:Zi.v2;return a(e,t).catch(l=>(kA(l,fo),o(e,t)))}Zi.v2=Jw;Zi.v3=eb;var HA=Object.defineProperty,XA=e=>{throw TypeError(e)},tb=(e,t,n)=>t in e?HA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,It=(e,t)=>{for(var n in t)HA(e,n,{get:t[n],enumerable:!0})},L=(e,t,n)=>tb(e,typeof t!="symbol"?t+"":t,n),jA=(e,t,n)=>t.has(e)||XA("Cannot "+n),ve=(e,t,n)=>(jA(e,t,"read from private field"),n?n.call(e):t.get(e)),Ea=(e,t,n)=>t.has(e)?XA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Qi=(e,t,n,i)=>(jA(e,t,"write to private field"),t.set(e,n),n),nb={version:"0.66.0"},Le={TEXTURE0_BACK_VOL:33984,TEXTURE1_COLORMAPS:33985,TEXTURE2_OVERLAY_VOL:33986,TEXTURE3_FONT:33987,TEXTURE5_MATCAP:33989,TEXTURE6_GRADIENT:33990,TEXTURE7_DRAW:33991,TEXTURE8_PAQD:33992,TEXTURE9_ORIENT:33993,TEXTURE11_GC_BACK:33995,TEXTURE12_GC_STRENGTH0:33996,TEXTURE13_GC_STRENGTH1:33997,TEXTURE14_GC_LABEL0:33998,TEXTURE15_GC_LABEL1:33999},ib=new Float32Array([-1,-1,-1,.28,.28,.28,-1,-1,-1,.28,.28,.28,-1,1,-1,.28,.28,.28,1,-1,-1,.28,.28,.28,1,1,-1,.28,.28,.28,1,1,-1,.28,.28,.28,-1,-1,1,.8,.8,.8,-1,-1,1,.8,.8,.8,1,-1,1,.8,.8,.8,-1,1,1,.8,.8,.8,1,1,1,.8,.8,.8,1,1,1,.8,.8,.8,-1,1,-1,0,0,.74,-1,1,-1,0,0,.74,-1,1,1,0,0,.74,1,1,-1,0,0,.74,1,1,1,0,0,.74,1,1,1,0,0,.74,-1,-1,-1,.42,0,.42,-1,-1,-1,.42,0,.42,1,-1,-1,.42,0,.42,-1,-1,1,.42,0,.42,1,-1,1,.42,0,.42,1,-1,1,.42,0,.42,-1,-1,-1,.64,0,0,-1,-1,-1,.64,0,0,-1,-1,1,.64,0,0,-1,1,-1,.64,0,0,-1,1,1,.64,0,0,-1,1,1,.64,0,0,1,-1,-1,0,.5,0,1,-1,-1,0,.5,0,1,1,-1,0,.5,0,1,-1,1,0,.5,0,1,1,1,0,.5,0,1,1,1,0,.5,0,-.45,1,-.8,0,0,0,-.45,1,-.8,0,0,0,-.45,1,.8,0,0,0,-.25,1,-.8,0,0,0,-.25,1,.8,0,0,0,-.25,1,.8,0,0,0,-.25,1,.6,0,0,0,-.25,1,.6,0,0,0,-.25,1,.8,0,0,0,.45,1,.6,0,0,0,.25,1,.8,0,0,0,.25,1,.8,0,0,0,.25,1,.1,0,0,0,.25,1,.1,0,0,0,.25,1,.6,0,0,0,.45,1,.1,0,0,0,.45,1,.6,0,0,0,.45,1,.6,0,0,0,-.25,1,-.1,0,0,0,-.25,1,-.1,0,0,0,-.25,1,.1,0,0,0,.25,1,-.1,0,0,0,.45,1,.1,0,0,0,.45,1,.1,0,0,0,.45,-1,-.8,0,0,0,.45,-1,-.8,0,0,0,.05,-1,.8,0,0,0,.25,-1,-.8,0,0,0,-.15,-1,.8,0,0,0,-.15,-1,.8,0,0,0,-.25,-1,-.8,0,0,0,-.25,-1,-.8,0,0,0,.05,-1,.8,0,0,0,-.45,-1,-.8,0,0,0,-.15,-1,.8,0,0,0,-.15,-1,.8,0,0,0,.13,-1,-.3,0,0,0,.13,-1,-.3,0,0,0,.07,-1,-.1,0,0,0,-.33,-1,-.3,0,0,0,-.27,-1,-.1,0,0,0,-.27,-1,-.1,0,0,0,-.45,.6,1,0,0,0,-.45,.6,1,0,0,0,-.45,.4,1,0,0,0,-.25,.8,1,0,0,0,-.25,.4,1,0,0,0,-.25,.4,1,0,0,0,-.25,.8,1,0,0,0,-.25,.8,1,0,0,0,-.25,.6,1,0,0,0,.25,.8,1,0,0,0,.45,.6,1,0,0,0,.45,.6,1,0,0,0,.25,.8,1,0,0,0,.25,.8,1,0,0,0,.25,-.1,1,0,0,0,.45,.6,1,0,0,0,.45,.1,1,0,0,0,.45,.1,1,0,0,0,-.25,.1,1,0,0,0,-.25,.1,1,0,0,0,-.45,-.1,1,0,0,0,.25,.1,1,0,0,0,.25,-.1,1,0,0,0,.25,-.1,1,0,0,0,-.45,-.1,1,0,0,0,-.45,-.1,1,0,0,0,-.45,-.6,1,0,0,0,-.25,-.1,1,0,0,0,-.25,-.8,1,0,0,0,-.25,-.8,1,0,0,0,-.25,-.6,1,0,0,0,-.25,-.6,1,0,0,0,-.25,-.8,1,0,0,0,.45,-.6,1,0,0,0,.25,-.8,1,0,0,0,.25,-.8,1,0,0,0,.25,-.4,1,0,0,0,.25,-.4,1,0,0,0,.25,-.6,1,0,0,0,.45,-.4,1,0,0,0,.45,-.6,1,0,0,0,.45,-.6,1,0,0,0,-.1,-.8,-1,0,0,0,-.1,-.8,-1,0,0,0,-.1,.8,-1,0,0,0,.1,-.8,-1,0,0,0,.1,.8,-1,0,0,0,.1,.8,-1,0,0,0,-1,-.45,-.8,0,0,0,-1,-.45,-.8,0,0,0,-1,-.45,.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,.8,0,0,0,-1,-.25,.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,-.8,0,0,0,-1,-.25,-.6,0,0,0,-1,.45,-.8,0,0,0,-1,.45,-.6,0,0,0,-1,.45,-.6,0,0,0,1,.45,-.8,0,0,0,1,.45,-.8,0,0,0,1,.45,.8,0,0,0,1,.25,-.8,0,0,0,1,.25,.8,0,0,0,1,.25,.8,0,0,0,1,.25,.6,0,0,0,1,.25,.6,0,0,0,1,.25,.8,0,0,0,1,-.45,.6,0,0,0,1,-.25,.8,0,0,0,1,-.25,.8,0,0,0,1,-.25,.1,0,0,0,1,-.25,.1,0,0,0,1,-.25,.6,0,0,0,1,-.45,.1,0,0,0,1,-.45,.6,0,0,0,1,-.45,.6,0,0,0,1,.25,-.1,0,0,0,1,.25,-.1,0,0,0,1,.25,.1,0,0,0,1,-.25,-.1,0,0,0,1,-.45,.1,0,0,0,1,-.45,.1,0,0,0,1,-.25,-.8,0,0,0,1,-.25,-.8,0,0,0,1,-.05,-.1,0,0,0,1,-.45,-.8,0,0,0,1,-.25,-.1,0,0,0,1,-.25,-.1,0,0,0]),Ye=class{constructor(t,n,i,a,o=null,l=null){L(this,"sphereIdx",[]),L(this,"sphereVtx",[]),L(this,"renderShaders",[]),L(this,"isVisible",!0),L(this,"isPickable",!0),L(this,"vertexBuffer"),L(this,"indexCount"),L(this,"indexBuffer"),L(this,"vao"),L(this,"mode"),L(this,"glFlags",0),L(this,"id"),L(this,"colorId"),L(this,"modelMatrix",Ue()),L(this,"scale",[1,1,1]),L(this,"position",[0,0,0]),L(this,"rotation",[0,0,0]),L(this,"rotationRadians",0),L(this,"extentsMin",[]),L(this,"extentsMax",[]),L(this,"furthestVertexFromOrigin"),L(this,"originNegate"),L(this,"fieldOfViewDeObliqueMM"),L(this,"mm"),this.vertexBuffer=n,this.indexCount=a,this.indexBuffer=o,this.vao=l,this.mode=i,this.id=t,this.colorId=[(t>>0&255)/255,(t>>8&255)/255,(t>>16&255)/255,(t>>24&255)/255]}};L(Ye,"BLEND",1);L(Ye,"CULL_FACE",2);L(Ye,"CULL_FRONT",4);L(Ye,"CULL_BACK",8);L(Ye,"ENABLE_DEPTH_TEST",16);L(Ye,"generateCrosshairs",function(e,t,n,i,a,o,l=20,u=0){const f=Ye.generateCrosshairsGeometry(e,n,i,a,o,l,u);return new Ye(t,f.vertexBuffer,e.TRIANGLES,f.indexCount,f.indexBuffer,f.vao)});L(Ye,"generateCrosshairsGeometry",function(e,t,n,i,a,o=20,l=0){const u=[],f=[],h=a*l;if(h<=0){let A=ce(n[0],t[1],t[2]),v=ce(i[0],t[1],t[2]);Ye.makeCylinder(u,f,A,v,a,o),A=ce(t[0],n[1],t[2]),v=ce(t[0],i[1],t[2]),Ye.makeCylinder(u,f,A,v,a,o),A=ce(t[0],t[1],n[2]),v=ce(t[0],t[1],i[2]),Ye.makeCylinder(u,f,A,v,a,o)}else{let A=ce(n[0],t[1],t[2]),v=ce(t[0]-h,t[1],t[2]);Ye.makeCylinder(u,f,A,v,a,o,!1),A=ce(t[0]+h,t[1],t[2]),v=ce(i[0],t[1],t[2]),Ye.makeCylinder(u,f,A,v,a,o,!1),A=ce(t[0],n[1],t[2]),v=ce(t[0],t[1]-h,t[2]),Ye.makeCylinder(u,f,A,v,a,o,!1),A=ce(t[0],t[1]+h,t[2]),v=ce(t[0],i[1],t[2]),Ye.makeCylinder(u,f,A,v,a,o,!1),A=ce(t[0],t[1],n[2]),v=ce(t[0],t[1],t[2]-h),Ye.makeCylinder(u,f,A,v,a,o,!1),A=ce(t[0],t[1],t[2]+h),v=ce(t[0],t[1],i[2]),Ye.makeCylinder(u,f,A,v,a,o,!1)}const d=e.createBuffer();if(d===null)throw new Error("could not instantiate vertex buffer");e.bindBuffer(e.ARRAY_BUFFER,d),e.bufferData(e.ARRAY_BUFFER,new Float32Array(u),e.STATIC_DRAW);const m=e.createBuffer();if(m===null)throw new Error("could not instantiate index buffer");e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,m),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint32Array(f),e.STATIC_DRAW);const p=e.createVertexArray();return e.bindVertexArray(p),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,m),e.bindBuffer(e.ARRAY_BUFFER,d),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,3,e.FLOAT,!1,0,0),e.bindVertexArray(null),{vertexBuffer:d,indexBuffer:m,indexCount:f.length,vao:p}});L(Ye,"getFirstPerpVector",function(e){const t=ce(0,0,0);return e[0]===0?t[0]=1:e[1]===0?t[1]=1:e[2]===0?t[2]=1:(t[0]=e[2],t[1]=e[2],t[2]=-(e[0]+e[1]),bn(t,t)),t});L(Ye,"subdivide",function(e,t){let n=e.length/3,i=t.length/3;const a=i,o=je(),l=je();for(let u=0;u<a;u++){const f=t[u*3+0],h=t[u*3+1],d=t[u*3+2],m=ce(e[f*3+0],e[f*3+1],e[f*3+2]),p=ce(e[h*3+0],e[h*3+1],e[h*3+2]),A=ce(e[d*3+0],e[d*3+1],e[d*3+2]);Rr(o,m,p),bn(l,o),e.push(...l),Rr(o,p,A),bn(l,o),e.push(...l),Rr(o,m,A),bn(l,o),e.push(...l);let v=[n,n+1,n+2];t.push(...v),v=[f,n,n+2],t.push(...v),v=[n,h,n+1],t.push(...v),t[u*3+0]=n+2,t[u*3+1]=n+1,t[u*3+2]=d,i=i+3,n=n+3}});L(Ye,"weldVertices",function(e,t){const n=e.length/3;let i=0;const a=new Int32Array(n);for(let u=0;u<n-1;u++){if(a[u]!==0)continue;a[u]=i;let f=u*3;const h=e[f],d=e[f+1],m=e[f+2];for(let p=u+1;p<n;p++)f+=3,h===e[f]&&d===e[f+1]&&m===e[f+2]&&(a[p]=i);i++}if(i===n)return e;const o=t.length;for(let u=0;u<o;u++)t[u]=a[t[u]];const l=e.slice(0,i*3-1);for(let u=0;u<n-1;u++){const f=u*3,h=a[u]*3;l[h]=e[f],l[h+1]=e[f+1],l[h+2]=e[f+2]}return l});L(Ye,"makeSphere",function(e,t,n,i=[0,0,0]){let a=[0,0,1,.894,0,.447,.276,.851,.447,-.724,.526,.447,-.724,-.526,.447,.276,-.851,.447,.724,.526,-.447,-.276,.851,-.447,-.894,0,-.447,-.276,-.851,-.447,.724,-.526,-.447,0,0,-1];const o=[0,1,2,0,2,3,0,3,4,0,4,5,0,5,1,7,6,11,8,7,11,9,8,11,10,9,11,6,10,11,6,2,1,7,3,2,8,4,3,9,5,4,10,1,5,6,7,2,7,8,3,8,9,4,9,10,5,10,6,1];Ye.subdivide(a,o),Ye.subdivide(a,o),a=Ye.weldVertices(a,o);for(let h=0;h<a.length;h++)a[h]=a[h]*n;const l=a.length/3;let u=0;for(let h=0;h<l;h++)a[u]=a[u]+i[0],u++,a[u]=a[u]+i[1],u++,a[u]=a[u]+i[2],u++;const f=Math.floor(e.length/3);for(let h=0;h<o.length;h++)o[h]=o[h]+f;t.push(...o),e.push(...a)});L(Ye,"makeCylinder",function(e,t,n,i,a,o=20,l=!0){o<3&&(o=3);const u=je();Je(u,i,n),bn(u,u);const f=Ye.getFirstPerpVector(u),h=je();ic(h,u,f),bn(h,h);let d=2*o,m=2*o;l&&(m+=2*o,d+=2);const p=Math.floor(e.length/3),A=new Uint32Array(m*3),v=new Float32Array(d*3);function y(R,D){v[R*3+0]=D[0],v[R*3+1]=D[1],v[R*3+2]=D[2]}function w(R,D,T,F){A[R*3+0]=D+p,A[R*3+1]=T+p,A[R*3+2]=F+p}const C=2*o,S=C+1;l&&(y(C,n),y(S,i));const E=je(),M=je();for(let R=0;R<o;R++){const D=Math.cos(R/o*2*Math.PI),T=Math.sin(R/o*2*Math.PI);E[0]=a*(D*f[0]+T*h[0]),E[1]=a*(D*f[1]+T*h[1]),E[2]=a*(D*f[2]+T*h[2]),Rr(M,n,E),y(R,M),Rr(M,i,E),y(R+o,M);let F=0;R<o-1&&(F=R+1),w(R*2,R,F,R+o),w(R*2+1,F,F+o,R+o),l&&(w(o*2+R,R,C,F),w(o*2+R+o,S,R+o,F+o))}t.push(...A),e.push(...v)});L(Ye,"makeColoredCylinder",function(e,t,n,i,a,o,l=[192,0,0,255],u=20,f=!1){let h=e.length/3;Ye.makeCylinder(e,t,i,a,o,u,f),h=e.length/3-h;const d=[];for(let m=0;m<h*4-1;m+=4)d[m]=l[0],d[m+1]=l[1],d[m+2]=l[2],d[m+3]=l[3];n.push(...d)});L(Ye,"makeColoredSphere",function(e,t,n,i,a=[0,0,0],o=[0,0,192,255]){let l=e.length/3;Ye.makeSphere(e,t,i,a),l=e.length/3-l;const u=[];for(let f=0;f<l*4-1;f+=4)u[f]=o[0],u[f+1]=o[1],u[f+2]=o[2],u[f+3]=o[3];n.push(...u)});var Br=Ye,qA=class Fn{constructor({name:t="niivue",level:n="info"}={}){L(this,"level"),L(this,"name"),this.name=`${t}`,this.level=n}debug(...t){Fn.levels[this.level]>Fn.levels.debug||console.debug(`${this.name}-debug`,...t)}info(...t){Fn.levels[this.level]>Fn.levels.info||console.info(`${this.name}-info`,...t)}warn(...t){Fn.levels[this.level]>Fn.levels.warn||console.warn(`${this.name}-warn`,...t)}error(...t){Fn.levels[this.level]>Fn.levels.error||console.error(`${this.name}-error`,...t)}fatal(...t){Fn.levels[this.level]>Fn.levels.fatal||console.error(`${this.name}-fatal`,...t)}setLogLevel(t){this.level=t}setName(t){this.name=t}};L(qA,"levels",{debug:0,info:1,warn:2,error:3,fatal:4,silent:1/0});var rb=qA,G=new rb({name:"niivue",level:"info"}),oc={};It(oc,{$itksnap:()=>ab,$slicer3d:()=>sb,actc:()=>ob,afni_blues_inv:()=>y6,afni_reds_inv:()=>w6,batlow:()=>lb,bcgwhw:()=>ub,bcgwhw_dark:()=>cb,blue:()=>gb,blue2cyan:()=>db,blue2magenta:()=>hb,blue2red:()=>fb,bluegrn:()=>mb,bone:()=>pb,bronze:()=>Ab,cet_l17:()=>vb,cividis:()=>xb,cool:()=>yb,copper:()=>bb,copper2:()=>wb,ct_airways:()=>Cb,ct_artery:()=>Sb,ct_bones:()=>Mb,ct_brain:()=>Db,ct_brain_gray:()=>Eb,ct_cardiac:()=>Tb,ct_head:()=>Rb,ct_kidneys:()=>Fb,ct_liver:()=>Bb,ct_muscles:()=>Ub,ct_scalp:()=>Nb,ct_skull:()=>Ib,ct_soft:()=>Vb,ct_soft_tissue:()=>Ob,ct_surface:()=>Lb,ct_vessels:()=>Pb,ct_w_contrast:()=>zb,cubehelix:()=>kb,electric_blue:()=>Gb,freesurfer:()=>Yb,ge_color:()=>Hb,gold:()=>Xb,gray:()=>jb,green:()=>qb,green2cyan:()=>_b,green2orange:()=>Kb,hot:()=>Wb,hotiron:()=>Qb,hsv:()=>Zb,inferno:()=>Jb,jet:()=>$b,kry:()=>e6,linspecer:()=>t6,lipari:()=>n6,magma:()=>i6,mako:()=>r6,navia:()=>a6,nih:()=>s6,plasma:()=>o6,random:()=>l6,red:()=>c6,redyell:()=>u6,rocket:()=>f6,roi_i256:()=>b6,surface:()=>h6,thermal:()=>d6,turbo:()=>m6,violet:()=>g6,viridis:()=>p6,warm:()=>A6,winter:()=>v6,x_rain:()=>x6});var ab={R:[0,255,0,0,255,0,255,255,0,205,210,102,0,0,46,255,106,221,233,165,255,147,218,75,255,60,255,255,218,0,188,255,255,222,127,139,124,255,70,0,238,238,240,245,184,32,255,25,112,34,248,245,255,144,173,65,255,250,128,50,244,255,123,255,173,255,127,255,143,220,253,255,0,0,128,255,250,148,178,255,135,100,240,250,255,107,135,0,139,245,186,255,255,0,210,255,47,72,175,128,176,255,139,240,255,216,119,219,72,255,199,154,189,240,230,0,85,64,153,205,250,95,0,255,224,176,138,30,240,152,160],G:[0,0,255,0,255,255,0,239,0,133,180,205,0,139,139,228,90,160,150,42,250,112,112,0,182,179,235,228,165,128,143,105,218,184,255,69,252,255,130,100,130,232,255,222,134,178,20,25,128,139,248,255,160,238,255,105,99,240,0,205,164,255,104,165,216,192,255,140,188,20,245,250,206,255,0,250,128,0,34,127,206,149,230,235,245,142,206,0,0,245,85,228,222,191,105,248,79,61,238,128,224,240,0,255,215,191,136,112,209,0,21,205,183,248,230,250,107,224,50,92,250,158,128,69,255,196,43,144,128,251,82],B:[0,0,0,255,0,255,255,213,205,63,140,170,128,139,87,225,205,221,122,42,250,219,214,130,193,113,205,196,32,128,143,180,185,135,0,19,0,224,180,0,238,170,240,179,11,170,147,112,144,34,255,250,122,144,47,225,71,230,0,50,96,240,238,0,230,203,212,0,143,60,230,240,209,127,128,205,114,211,34,80,235,237,140,215,238,35,250,139,139,220,211,181,173,255,30,220,79,139,238,0,230,245,0,255,0,216,153,147,204,255,133,50,107,255,250,154,47,208,204,92,210,160,0,0,255,222,226,255,128,152,45],A:[0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130]},sb={labels:["background","tissue","bone","skin","connective tissue","blood","organ","mass","muscle","foreign object","waste","teeth","fat","gray matter","white matter","nerve","vein","artery","capillary","ligament","tendon","cartilage","meniscus","lymph node","lymphatic vessel","cerebro-spinal fluid","bile","urine","feces","gas","fluid","edema","bleeding","necrosis","clot","embolism","head","central nervous system","brain","gray matter of brain","telencephalon","cerebral cortex","right frontal lobe","left frontal lobe","right temporal lobe","left temporal lobe","right parietal lobe","left parietal lobe","right occipital lobe","left occipital lobe","right insular lobe","left insular lobe","right limbic lobe","left limbic lobe","right striatum","left striatum","right caudate nucleus","left caudate nucleus","right putamen","left putamen","right pallidum","left pallidum","right amygdaloid complex","left amygdaloid complex","diencephalon","thalamus","right thalamus","left thalamus","pineal gland","midbrain","substantia nigra","right substantia nigra","left substantia nigra","cerebral white matter","right superior longitudinal fasciculus","left superior longitudinal fasciculus","right inferior longitudinal fasciculus","left inferior longitudinal fasciculus","right arcuate fasciculus","left arcuate fasciculus","right uncinate fasciculus","left uncinate fasciculus","right cingulum bundle","left cingulum bundle","projection fibers","right corticospinal tract","left corticospinal tract","right optic radiation","left optic radiation","right medial lemniscus","left medial lemniscus","right superior cerebellar peduncle","left superior cerebellar peduncle","right middle cerebellar peduncle","left middle cerebellar peduncle","right inferior cerebellar peduncle","left inferior cerebellar peduncle","optic chiasm","right optic tract","left optic tract","right fornix","left fornix","commissural fibers","corpus callosum","posterior commissure","cerebellar white matter","CSF space","ventricles of brain","right lateral ventricle","left lateral ventricle","right third ventricle","left third ventricle","cerebral aqueduct","fourth ventricle","subarachnoid space","spinal cord","gray matter of spinal cord","white matter of spinal cord","endocrine system of brain","pituitary gland","adenohypophysis","neurohypophysis","meninges","dura mater","arachnoid","pia mater","muscles of head","salivary glands","lips","nose","tongue","soft palate","right inner ear","left inner ear","right external ear","left external ear","right middle ear","left middle ear","right eyeball","left eyeball","skull","right frontal bone","left frontal bone","right parietal bone","left parietal bone","right temporal bone","left temporal bone","right sphenoid bone","left sphenoid bone","right ethmoid bone","left ethmoid bone","occipital bone","maxilla","right zygomatic bone","right lacrimal bone","vomer bone","right palatine bone","left palatine bone","mandible","neck","muscles of neck","pharynx","larynx","thyroid gland","right parathyroid glands","left parathyroid glands","skeleton of neck","hyoid bone","cervical vertebral column","thorax","trachea","bronchi","right lung","left lung","superior lobe of right lung","superior lobe of left lung","middle lobe of right lung","inferior lobe of right lung","inferior lobe of left lung","pleura","heart","right atrium","left atrium","atrial septum","ventricular septum","right ventricle of heart","left ventricle of heart","mitral valve","tricuspid valve","aortic valve","pulmonary valve","aorta","pericardium","pericardial cavity","esophagus","thymus","mediastinum","skin of thoracic wall","muscles of thoracic wall","skeleton of thorax","thoracic vertebral column","ribs","sternum","right clavicle","left clavicle","abdominal cavity","abdomen","peritoneum","omentum","peritoneal cavity","retroperitoneal space","stomach","duodenum","small bowel","colon","anus","liver","biliary tree","gallbladder","pancreas","spleen","urinary system","right kidney","left kidney","right ureter","left ureter","urinary bladder","urethra","right adrenal gland","left adrenal gland","female internal genitalia","uterus","right fallopian tube","left fallopian tube","right ovary","left ovary","vagina","male internal genitalia","prostate","right seminal vesicle","left seminal vesicle","right deferent duct","left deferent duct","skin of abdominal wall","muscles of abdominal wall","skeleton of abdomen","lumbar vertebral column","female external genitalia","male external genitalia","skeleton of upper limb","muscles of upper limb","right upper limb","left upper limb","right shoulder","left shoulder","right arm"],R:[0,128,241,177,111,216,221,144,192,220,78,255,230,200,250,244,0,216,183,183,152,111,178,68,111,85,0,214,78,218,170,140,188,216,145,150,177,244,250,200,68,128,83,83,162,162,141,141,182,182,188,188,154,154,177,177,30,30,210,210,48,48,98,98,69,166,122,122,253,145,46,0,0,250,127,127,159,159,125,125,106,106,154,154,126,201,201,78,78,174,174,139,139,148,148,186,186,99,156,156,64,64,138,97,126,194,85,88,88,88,88,88,88,88,88,244,200,250,82,57,60,92,255,255,255,255,201,70,188,177,166,182,229,229,174,174,201,201,194,194,241,203,203,229,229,255,255,209,209,248,248,255,196,255,255,255,242,242,222,177,213,184,150,62,62,62,242,250,255,177,182,175,197,197,172,172,202,224,224,255,206,210,203,233,195,181,152,159,166,218,225,224,255,184,211,47,255,173,188,255,226,253,244,205,205,186,177,255,234,204,180,216,255,205,204,255,221,0,139,249,157,203,185,185,247,247,222,124,249,249,244,255,255,227,213,213,193,216,230,245,245,241,241,177,171,217,212,185,185,198,194,177,177,177,177,177],G:[0,174,214,122,184,101,130,238,104,245,63,250,220,200,250,214,151,101,156,214,189,184,212,172,197,188,145,230,63,255,250,224,65,191,60,98,122,214,250,200,131,174,146,146,115,115,93,93,166,166,135,135,150,150,140,140,111,111,157,157,129,129,153,153,110,113,101,101,135,92,101,108,108,250,150,150,116,116,102,102,174,174,146,146,126,160,160,152,152,140,140,126,126,120,120,135,135,106,171,171,123,123,95,113,161,195,188,106,106,106,106,106,106,106,106,214,200,250,174,157,143,162,244,244,244,244,121,163,91,122,84,105,147,147,122,122,112,112,142,142,213,179,179,204,204,243,243,185,185,223,223,230,172,255,250,237,217,217,198,122,124,105,208,162,162,162,206,210,255,122,228,216,165,165,138,138,164,186,186,245,110,115,108,138,100,85,55,63,70,123,130,97,244,122,171,150,244,121,95,239,202,232,217,179,179,124,122,255,234,142,119,132,253,167,168,224,130,145,150,180,108,136,102,102,182,182,154,186,186,186,170,181,190,153,141,141,123,146,158,172,172,172,172,124,85,198,188,135,135,175,98,122,122,122,122,122],B:[0,128,145,101,210,79,101,144,88,20,0,220,70,235,210,49,206,79,220,211,207,210,242,100,131,255,30,130,0,255,250,228,28,216,66,83,101,49,225,215,98,128,164,164,105,105,137,137,110,110,166,166,201,201,190,190,85,85,166,166,126,126,112,112,53,137,38,38,192,109,131,112,112,225,88,88,163,163,154,154,155,155,83,83,55,133,133,141,141,103,103,177,177,72,72,135,135,24,108,108,147,147,74,158,197,164,255,215,215,215,215,215,215,215,215,49,215,225,128,110,83,109,209,209,209,209,77,117,95,101,94,107,118,118,90,90,73,73,0,0,144,77,77,109,109,152,152,85,85,131,131,138,68,167,160,145,123,123,101,101,109,108,243,114,114,114,142,139,207,101,255,244,145,145,115,115,140,162,162,217,84,89,81,112,73,57,13,27,38,97,104,76,209,154,143,103,209,88,76,172,134,158,154,108,108,161,101,220,194,178,153,105,229,142,143,199,101,30,98,111,162,116,83,83,164,164,132,223,150,150,147,158,165,130,113,113,103,127,140,147,147,151,151,92,68,131,102,134,134,125,79,101,101,101,101,101],A:[0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},ob={R:[0,0,24,248,255],G:[0,0,177,254,0],B:[0,136,0,0,0],A:[0,32,64,78,128],I:[0,64,128,156,255]},lb={R:[1,10,15,17,21,27,36,49,65,82,99,118,140,161,183,203,222,238,248,253,253,253,252,250],G:[25,42,56,68,79,88,97,105,111,116,122,127,133,138,142,146,150,155,162,170,178,186,195,204],B:[89,92,95,96,98,98,96,91,83,74,64,55,46,43,49,62,79,100,126,151,175,199,223,250],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},cb={R:[0,248,242,235,229,222,212,202,193,183,173,145,117,78,39,0,0,0,0,0,0,64,128,191,255,255,255,255,255,238,221,204,214,224,235,245,255,249,242,236,229,223,217,210,204,197,191,184,176,169,161,154,146,139,132,124,117,109,102,0],G:[0,251,247,243,239,235,235,235,235,235,235,216,197,174,150,127,153,178,204,229,255,255,255,255,255,220,185,150,115,77,38,0,31,61,92,122,153,138,122,107,92,77,61,46,31,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B:[0,254,253,252,251,250,251,252,253,254,255,226,198,132,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,80,120,160,200,199,198,197,196,196,195,194,193,192,191,184,176,169,161,154,146,139,132,124,117,109,102,0],A:[256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256],I:[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,255]},ub={R:[255,248,242,235,229,222,212,202,193,183,173,145,117,78,39,0,0,0,0,0,0,64,128,191,255,255,255,255,255,238,221,204,214,224,235,245,255,249,242,236,229,223,217,210,204,197,191,184,176,169,161,154,146,139,132,124,117,109,102,0],G:[255,251,247,243,239,235,235,235,235,235,235,216,197,174,150,127,153,178,204,229,255,255,255,255,255,220,185,150,115,77,38,0,31,61,92,122,153,138,122,107,92,77,61,46,31,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B:[255,254,253,252,251,250,251,252,253,254,255,226,198,132,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40,80,120,160,200,199,198,197,196,196,195,194,193,192,191,184,176,169,161,154,146,139,132,124,117,109,102,0],A:[256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256,256],I:[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,255]},fb={R:[0,0,0,0,196,255],G:[0,32,128,128,128,32],B:[0,255,196,0,0,0],A:[0,128,64,64,64,128],I:[0,1,64,128,192,255]},hb={R:[0,255],G:[0,0],B:[255,255],A:[0,128],I:[0,255]},db={R:[0,0],G:[0,255],B:[255,255],A:[0,128],I:[0,255]},mb={R:[0,0,0,0],G:[0,1,128,255],B:[0,222,127,32],A:[0,0,64,128],I:[0,1,128,255]},gb={R:[0,0,0],G:[0,0,0],B:[0,128,255],A:[0,64,128],I:[0,128,255]},pb={R:[0,103,255],G:[0,126,255],B:[0,165,255],A:[0,76,128],I:[0,153,255]},Ab={R:[0,43,103,199,216,255],G:[0,0,37,155,213,255],B:[0,0,20,97,201,255],A:[0,44,48,54,56,56],I:[0,64,128,196,240,255]},vb={R:[0,9,24,33,40,46,52,57,62,66,70,74,78,81,85,88,91,94,98,101,103,106,109,112,114,117,119,121,124,126,128,130,133,135,137,139,141,143,145,147,149,151,153,155,157,159,161,163,164,166,168,169,171,172,174,175,177,178,180,181,183,184,186,187,189,190,191,193,194,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,222,223,224,224,225,226,226,227,228,228,229,229,230,231,231,232,233,233,234,234,235,235,236,236,236,237,237,237,238,238,238,239,239,239,240,240,240,241,241,241,242,242,242,243,243,243,243,243,243,243,243,244,244,244,244,244,244,244,244,244,244,244,245,245,245,245,245,245,245,245,245,245,245,245,245,245,245,245,244,244,244,244,244,244,244,244,244,244,244,244,244,244,244,243,243,243,243,243,243,243,243,243,243,243,243,242,242,242,242,242,242,242,242,241,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,242,243,243,244,244,245,246,246,247,247,248,249,249,250,250,251,251,252,252,253,253,254,254,254],G:[42,41,41,41,40,40,40,39,39,39,38,38,37,37,36,36,35,35,34,34,33,32,32,31,30,30,30,30,29,29,29,29,28,28,28,27,27,27,26,26,26,25,25,25,24,24,24,24,24,25,25,26,27,27,28,28,29,30,30,31,31,32,33,33,34,34,35,36,36,37,38,39,40,42,43,44,45,47,48,49,50,51,53,54,55,56,57,58,59,60,62,63,64,65,66,68,69,71,72,73,75,76,77,79,80,81,83,84,85,87,88,89,90,92,93,94,95,97,98,100,101,102,104,105,107,108,109,111,112,113,115,116,117,119,120,121,122,124,125,126,128,129,130,132,133,134,136,137,138,140,141,142,144,145,146,147,149,150,151,153,154,155,156,158,159,160,161,163,164,165,167,168,169,170,172,173,174,175,176,178,179,180,181,183,184,185,186,187,189,190,191,192,193,194,196,197,198,199,200,201,203,204,205,206,207,208,209,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,228,229,230,231,232,233,234,235,236,237,238,238,239,240,241,241,242,243,244,244,245,246,247,248,248,249,250,251,251,252,253,254,255],B:[167,167,166,166,166,165,165,165,164,164,164,163,163,162,162,162,161,161,161,160,160,160,159,159,158,158,157,157,156,155,155,154,154,153,153,152,151,151,150,150,149,149,148,147,147,146,146,145,144,144,143,143,142,141,141,140,139,139,138,137,137,136,135,135,134,133,133,132,131,131,130,130,129,128,128,127,127,126,125,125,124,124,123,123,122,121,121,120,119,119,118,118,117,116,116,116,115,115,114,114,113,113,113,112,112,111,111,110,110,109,109,109,108,108,107,107,106,106,106,106,106,105,105,105,105,105,105,105,104,104,104,104,104,103,103,103,103,103,102,102,102,103,103,103,103,104,104,104,104,104,105,105,105,105,106,106,106,106,106,107,107,107,107,108,108,109,110,111,111,112,113,113,114,115,115,116,117,117,118,119,120,120,121,122,122,123,124,125,126,128,129,130,131,132,134,135,136,137,138,140,141,142,143,144,146,147,148,149,150,152,153,155,157,158,160,162,163,165,167,168,170,172,173,175,177,178,180,182,183,185,187,188,190,193,196,199,201,204,207,210,212,215,218,221,224,226,229,232,235,238,240,243,246,249,252,255],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},xb={R:[0,86,166,255],G:[32,92,156,233],B:[76,108,117,69],A:[0,56,80,88],I:[0,64,192,255]},yb={R:[0,0,0],G:[127,196,254],B:[255,255,255],A:[0,64,128],I:[0,128,255]},wb={R:[0,61,122,183,244,255],G:[0,41,81,122,163,255],B:[0,25,51,76,102,255],A:[0,25,51,71,102,128],I:[0,51,102,153,204,255]},bb={R:[0,61,122,183,244,255],G:[0,41,81,122,163,203],B:[0,25,51,76,102,127],A:[0,25,51,71,102,128],I:[0,51,102,153,204,255]},Cb={min:-643,max:-235,R:[0,0,0],G:[154,154,154],B:[179,179,101],A:[0,32,0],I:[0,163,255]},Sb={min:114,max:800,R:[0,255,255,255],G:[0,0,129,255],B:[0,0,0,255],A:[0,64,88,228],I:[0,80,160,255]},Mb={min:180,max:600,R:[0,0,113,255],G:[0,0,109,250],B:[0,0,101,245],A:[0,0,100,160],I:[0,1,128,255]},Eb={min:-10,max:110,R:[0,127,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},Db={min:-10,max:110,R:[0,199,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},Tb={min:-80,max:1e3,R:[0,189,150,150,150,150,255],G:[0,169,54,54,54,54,240],B:[0,153,52,52,52,52,242],A:[0,32,64,0,0,64,64],I:[0,1,82,92,234,242,255]},Rb={min:-590,max:600,R:[0,241,241,248,248,178,178,232,255,255,255],G:[0,156,156,222,222,36,36,51,255,255,255],B:[0,130,130,169,169,24,24,37,255,255,255],A:[0,8,0,0,0,64,64,0,0,222,222],I:[0,2,3,64,122,142,172,182,252,253,255]},Fb={min:114,max:302,R:[0,255,255],G:[0,129,255],B:[0,0,255],A:[0,88,228],I:[0,103,255]},Bb={min:-23,max:246,R:[0,44,255,255,255],G:[0,128,90,255,255],B:[0,0,70,0,255],A:[0,0,82,184,228],I:[0,64,131,196,255]},Ub={min:-100,max:246,R:[0,128,159,255,255,255,255],G:[0,0,56,90,0,255,255],B:[0,0,41,70,0,0,255],A:[0,63,105,135,167,184,228],I:[0,100,128,155,180,209,255]},Nb={min:-590,max:600,R:[0,241,241,248,248,178,232,255,255],G:[0,156,156,222,222,36,51,255,255],B:[0,130,130,169,169,24,37,255,255],A:[0,63,105,135,167,184,228,228,228],I:[0,1,52,127,137,162,172,252,255]},Ib={min:140,max:1024,R:[0,2,113,255],G:[0,1,109,250],B:[0,1,101,245],A:[0,1,96,168],I:[0,1,128,255]},Vb={min:-923,max:679,R:[0,0,0,0,0,255,255,255],G:[154,154,154,154,0,0,254,255],B:[179,179,179,179,0,0,0,255],A:[0,3,8,0,0,10,15,20],I:[0,30,62,88,170,200,232,255]},Ob={min:-10,max:110,R:[0,199,255],G:[0,127,255],B:[0,127,255],A:[0,48,128],I:[0,124,255]},Lb={min:-600,max:100,R:[0,134,255],G:[0,109,250],B:[0,101,245],A:[0,60,148],I:[0,128,255]},Pb={min:114,max:246,R:[0,255,255],G:[0,128,255],B:[0,128,255],A:[0,64,96],I:[0,87,255]},zb={min:50,max:1e3,R:[98,210,169,128,255],G:[94,26,77,128,255],B:[45,21,74,128,255],A:[0,25,0,4,168],I:[0,41,87,154,255]},kb={R:[0,13,21,26,27,25,22,21,22,28,39,54,75,98,124,148,171,189,202,210,213,211,206,200,195,193,195,201,211,225,240,255],G:[0,5,11,20,31,44,58,72,86,99,109,116,120,122,122,122,121,121,124,129,137,147,161,175,190,205,218,229,238,245,251,255],B:[0,14,30,46,61,71,77,78,75,68,60,52,48,47,53,65,83,105,131,157,183,205,222,235,241,243,242,240,239,240,245,255],A:[0,4,8,12,17,21,25,29,33,37,41,45,50,54,58,62,66,70,74,78,83,87,91,95,99,103,107,111,116,120,124,128],I:[0,8,16,25,33,41,49,58,66,74,82,90,99,107,115,123,132,140,148,156,165,173,181,189,197,206,214,222,230,239,247,255]},Gb={R:[0,10,136,255],G:[0,39,220,255],B:[0,223,253,255],A:[0,48,64,70],I:[0,92,192,255]},Yb={R:[0,245,205,120,196,220,230,0,122,236,12,204,42,119,220,103,60,255,165,160,0,245,205,120,196,220,230,0,122,236,13,220,103,255,165,160,0,120,200,255,255,164,164,164,234,0,0,0,0,0],G:[0,245,62,18,58,248,148,118,186,13,48,182,204,159,216,255,60,165,42,32,200,245,62,18,58,248,148,118,186,13,48,216,255,165,42,32,200,190,70,148,148,108,108,108,169,0,0,0,0,0],B:[0,245,78,134,250,164,34,14,220,176,255,142,164,176,20,255,60,0,42,240,200,245,78,134,250,164,34,14,220,176,255,20,255,0,42,240,221,150,255,10,10,226,226,226,30,64,112,160,208,255],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,2,3,4,5,7,8,10,11,12,13,14,15,16,17,18,24,26,28,30,31,41,42,43,44,46,47,49,50,51,52,53,54,58,60,62,63,72,77,78,79,80,81,82,85,251,252,253,254,255]},Hb={R:[0,0,128,255,255],G:[0,128,0,128,255],B:[0,125,255,0,255],A:[0,32,64,96,128],I:[0,63,128,192,255]},Xb={R:[0,142,227,255],G:[0,85,170,255],B:[0,14,76,255],A:[0,42,84,128],I:[0,85,170,255]},jb={R:[0,255],G:[0,255],B:[0,255],A:[0,128],I:[0,255]},qb={R:[0,0,0],G:[0,128,255],B:[0,0,0],A:[0,64,128],I:[0,128,255]},_b={R:[0,0,0],G:[72,72,255],B:[0,255,255],A:[0,64,128],I:[0,88,255]},Kb={R:[0,255,255],G:[72,88,255],B:[0,0,0],A:[0,64,128],I:[0,88,255]},Qb={R:[0,255,255,255],G:[0,0,126,255],B:[0,0,0,255],A:[0,64,96,128],I:[0,128,191,255]},Wb={R:[3,255,255,255],G:[0,0,255,255],B:[0,0,0,255],A:[0,48,96,128],I:[0,95,191,255]},Zb={R:[255,255,0,0,0,255,255],G:[0,255,255,255,0,0,0],B:[0,0,0,255,255,255,0],A:[0,14,28,43,57,71,85],I:[0,43,85,128,170,213,255]},Jb={R:[0,120,237,240],G:[0,28,105,249],B:[4,109,37,33],A:[0,56,80,88],I:[0,64,192,255]},$b={R:[0,0,127,255,127],G:[0,127,255,127,0],B:[127,255,127,0,0],A:[0,32,64,96,128],I:[0,63,128,192,255]},e6={R:[0,255,255],G:[0,0,255],B:[0,0,0],A:[0,64,64],I:[0,86,255]},t6={R:[94,50,90,152,215,238,249,254,252,241,209,158],G:[79,131,186,214,240,244,237,210,157,100,57,1],B:[162,189,167,164,155,169,168,123,86,68,79,66],A:[0,12,23,35,47,58,70,81,93,105,116,128],I:[0,23,46,70,93,116,139,162,185,209,232,255]},n6={R:[3,7,13,25,45,67,84,98,110,124,138,154,173,191,210,225,233,233,231,229,230,235,243,253],G:[19,33,48,63,77,87,92,94,95,96,96,97,99,101,106,118,133,149,163,177,192,208,225,245],B:[38,58,79,99,114,122,122,120,117,113,110,105,101,97,94,96,103,112,122,134,149,169,192,218],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},i6={R:[0,148,183,223,247,252],G:[0,44,55,74,112,253],B:[4,128,121,104,92,191],A:[0,44,53,64,75,107],I:[0,107,128,154,179,255]},r6={R:[11,59,55,222],G:[4,45,165,245],B:[5,91,172,229],A:[0,23,70,107],I:[0,56,167,255]},a6={R:[3,5,6,8,12,19,28,36,42,48,54,61,68,76,86,96,110,129,154,181,205,224,239,252],G:[19,32,44,58,72,86,98,108,116,122,128,134,141,149,157,167,178,191,204,216,225,232,239,244],B:[39,60,82,104,123,137,144,145,142,138,134,130,126,121,116,110,105,104,112,131,155,178,198,217],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},s6={R:[0,85,0,0,0,0,0,0,85,255,255,255,172],G:[0,0,0,0,85,170,255,255,255,255,85,0,0],B:[0,170,85,255,255,170,170,0,85,0,0,0,0],A:[0,5,10,21,26,32,37,42,48,53,64,72,85],I:[0,15,31,63,79,95,111,127,143,159,191,217,255]},o6={R:[13,156,237,240],G:[8,23,121,249],B:[135,158,83,33],A:[0,56,80,88],I:[0,64,192,255]},l6={R:[208,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248,161,189,41,114,65,121,97,50,238,149,44,214,124,167,40,167,127,178,231,30,173,244,193,203,204,238,139,135,71,234,234,217,66,14,129,19,97,165,112,244,35,73,192,12,149,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248,161,189,41,114,65,121,97,50,238,149,44,214,124,167,40,167,127,178,231,30,173,244,193,203,204,238,139,135,71,234,234,217,66,14,129,19,97,165,112,244,35,73,192,12,149,71,33,192,32,195,208,173,233,202,25,210,145,89,87,245,246,38,3,25,57,167,245,86,227,208,81,64,90,199,140,48,212,180,70,120,9,192,245,177,65,157,9,193,100,181,125,145,62,8,108,36,140,237,242,248],G:[182,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21,42,22,241,61,99,115,199,166,114,190,204,60,233,66,115,230,125,103,203,125,13,176,94,131,39,198,167,124,67,175,254,1,15,198,62,237,159,31,218,58,244,47,61,67,94,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21,42,22,241,61,99,115,199,166,114,190,204,60,233,66,115,230,125,103,203,125,13,176,94,131,39,198,167,124,67,175,254,1,15,198,62,237,159,31,218,58,244,47,61,67,94,46,78,199,79,89,41,208,135,20,154,35,21,43,230,113,191,147,208,37,28,27,86,203,25,209,148,187,139,111,48,102,76,110,106,130,37,160,34,222,90,165,245,222,102,47,19,130,4,232,137,211,240,11,140,21],B:[191,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77,89,112,59,125,226,50,205,227,125,128,104,27,59,66,53,133,159,203,97,125,139,159,158,7,215,47,140,226,223,231,44,110,184,61,233,47,67,148,22,120,173,156,117,181,94,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77,89,112,59,125,226,50,205,227,125,128,104,27,59,66,53,133,159,203,97,125,139,159,158,7,215,47,140,226,223,231,44,110,184,61,233,47,67,148,22,120,173,156,117,181,94,154,43,10,207,204,164,231,136,58,239,30,147,230,101,111,150,35,128,57,252,79,173,120,25,126,81,85,8,7,122,237,190,152,246,182,130,219,67,76,167,178,235,250,28,61,186,250,199,67,58,50,86,182,108,77],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},c6={R:[0,128,255],G:[0,0,0],B:[0,0,0],A:[0,64,128],I:[0,128,255]},u6={R:[192,224,255],G:[1,128,255],B:[0,0,0],A:[0,64,128],I:[0,128,255]},f6={R:[3,112,144,188,236,246,255],G:[5,31,29,22,76,158,250],B:[26,87,91,86,62,117,235],A:[0,30,38,49,67,85,107],I:[0,73,92,118,160,205,255]},h6={R:[1,240,255],G:[1,128,255],B:[1,128,255],A:[0,76,128],I:[0,153,255]},d6={R:[0,5,18,34,53,72,90,107,126,144,161,178,194,209,222,233,242,248,251,251,249,244,241,252],G:[0,4,10,11,9,11,17,23,30,36,43,50,59,70,83,98,117,136,157,177,199,220,240,254],B:[3,24,50,76,96,106,109,110,108,104,97,89,79,67,55,42,26,12,6,22,47,79,121,164],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,11,22,33,44,55,66,77,88,99,110,121,133,144,155,166,177,188,199,210,221,232,243,255]},m6={R:[48,48,64,70,65,25,132,195,244,254,218,122],G:[18,18,64,107,150,226,255,241,199,158,57,4],B:[59,59,162,227,255,187,81,52,58,47,7,3],A:[0,22,26,30,34,43,52,57,63,67,77,86],I:[0,1,16,32,49,83,118,140,164,181,219,255]},g6={R:[0,128,255],G:[0,0,0],B:[0,128,255],A:[0,64,128],I:[0,128,255]},p6={R:[68,49,53,253],G:[1,104,183,231],B:[84,142,121,37],A:[0,56,80,88],I:[0,64,192,255]},A6={R:[255,255,255],G:[127,196,254],B:[0,0,0],A:[0,64,128],I:[0,128,255]},v6={R:[0,0,0],G:[0,128,255],B:[255,196,128],A:[0,64,128],I:[0,128,255]},x6={R:[3,64,0,0,255,255,255],G:[0,0,0,255,255,192,3],B:[0,32,48,56,64,96,128],A:[0,8,16,24,32,52,80],I:[0,32,64,96,160,192,255]},y6={min:0,max:0,R:[0,37],G:[242,0],B:[255,255],A:[0,64],I:[0,255]},w6={R:[255,255],G:[255,11],B:[0,0],A:[0,64],I:[0,255]},b6={min:0,max:0,R:[65,10,223,120,216,207,251,93,252,217,21,253,131,165,173,143,144,217,86,89,63,254,172,1,142,107,42,78,221,8,222,71,127,126,167,33,104,2,208,216,0,251,7,105,2,101,248,190,253,62,255,224,166,37,110,138,45,34,6,37,69,201,43,122,199,37,173,194,103,211,75,159,96,4,239,98,110,193,253,166,40,255,48,130,140,243,101,9,177,220,133,32,4,81,48,48,210,109,60,132,1,119,1,159,247,33,212,187,253,144,196,254,168,79,64,196,39,97,73,173,104,216,217,43,101,119,254,5,237,103,203,122,57,87,251,164,19,75,200,2,252,150,66,0,255,157,23,254,55,16,240,161,69,253,207,195,5,60,255,251,200,217,134,123,253,180,27,246,130,136,250,232,4,125,140,22,253,255,13,180,123,61,254,111,10,185,76,192,255,223,186,61,198,5,172,13,83,172,171,6,23,73,134,133,109,61,213,55,57,132,36,209,2,144,1,253,68,155,3,160,2,77,121,70,67,176,223,131,4,162,232,255,150,94,235,191,207,10,246,0,225,4,209,116,57,112,172,253,1,6,92,227,73,62,135,223],G:[162,50,112,245,4,124,176,243,56,125,183,139,182,68,189,4,225,10,20,223,7,46,31,193,225,250,219,41,2,100,83,181,34,150,72,223,168,248,80,253,7,117,214,2,248,10,3,59,179,160,90,244,146,4,207,4,125,255,96,100,1,208,130,51,116,181,236,53,244,5,165,28,181,86,96,42,254,1,134,194,214,92,41,204,137,86,207,3,143,3,100,239,164,94,65,251,131,244,173,57,143,107,217,53,210,0,148,250,45,198,81,40,61,218,252,88,171,0,248,24,248,4,41,100,187,46,208,145,43,168,121,46,175,250,125,107,233,112,207,231,174,215,53,9,43,153,52,124,128,65,210,147,255,147,63,200,148,254,0,179,241,42,239,2,230,8,82,135,87,16,3,87,86,151,254,8,255,86,53,19,7,192,171,201,253,247,197,103,251,126,0,149,54,183,61,126,79,113,10,103,184,75,11,195,222,136,149,131,8,99,240,177,252,255,198,16,7,68,178,66,191,150,73,26,211,109,78,209,240,254,1,166,247,131,2,0,167,127,133,10,43,99,235,3,214,142,176,82,132,38,10,249,255,215,44,81],B:[176,182,248,37,117,35,96,69,32,152,108,20,237,250,2,89,141,216,111,251,211,149,10,44,214,103,31,251,3,32,252,246,97,1,219,167,197,4,36,116,206,118,106,43,205,204,114,69,127,205,87,80,41,251,145,204,253,161,247,1,149,9,43,253,97,72,136,161,171,181,26,255,108,80,218,214,231,255,84,31,109,4,218,3,217,36,68,85,241,39,221,2,240,2,173,42,206,5,110,46,103,27,212,184,2,207,246,45,116,72,110,253,38,105,248,159,243,81,192,93,141,145,24,157,234,131,57,178,62,75,65,176,148,40,253,66,76,240,51,154,17,251,139,253,207,9,114,49,200,254,96,73,138,118,204,102,137,89,145,161,4,112,66,234,147,178,212,205,185,11,203,131,2,250,118,169,1,185,154,53,171,197,61,175,249,96,15,254,95,5,222,75,246,194,2,61,180,25,133,165,15,233,59,35,221,140,109,7,114,255,198,0,115,168,252,23,242,80,75,142,137,255,12,182,68,201,4,111,37,228,83,248,24,192,249,5,54,223,160,122,160,114,145,119,252,31,253,250,10,214,8,47,0,142,222,70],A:[0,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64],I:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},C6=class{constructor(){L(this,"gamma",1),L(this,"version",.1),L(this,"cluts",{});const t=Object.keys(oc).filter(n=>!n.startsWith("$")).sort(new Intl.Collator("en").compare);for(const n of t)this.cluts[n]=oc[n]}addColormap(e,t){this.cluts[e]=t}colormaps(){return Object.keys(this.cluts)}colorMaps(){return this.colormaps()}colormapFromKey(e){let t=this.cluts[e];return t!==void 0||(t=this.cluts[e.toLowerCase()],t!==void 0)?t:(e.length>0&&G.warn("No color map named "+e),{min:0,max:0,R:[0,255],G:[0,255],B:[0,255],A:[0,255],I:[0,255]})}colormap(e="",t=!1){const n=this.colormapFromKey(e);return this.makeLut(n.R,n.G,n.B,n.A,n.I,t)}makeLabelLut(e,t=255,n=1/0){if(e.R===void 0||e.G===void 0||e.B===void 0)throw new Error(`Invalid colormap table: ${e}`);const i=e.R.length,a=e.I??[...Array(i).keys()];let o=!1;for(let p=0;p<a.length;p++)a[p]>n&&(o=!0,a[p]=n);if(o&&G.warn("Some colormap indices clamped to match label range."),i!==e.G.length||i!==e.B.length||i!==a.length)throw new Error(`colormap does not make sense: ${e} Rs ${e.R.length} Gs ${e.G.length} Bs ${e.B.length} Is ${a.length}`);let l=new Uint8ClampedArray(i).fill(t);l[0]=0,e.A!==void 0&&(l=Uint8ClampedArray.from(e.A));const u=Math.min(...a),f=Math.max(...a),h=f-u+1,d=new Uint8ClampedArray(h*4).fill(0);for(let p=0;p<i;p++){let A=(a[p]-u)*4;d[A++]=e.R[p],d[A++]=e.G[p],d[A++]=e.B[p],d[A++]=l[p]}const m={lut:d,min:u,max:f};if(e.labels){const p=e.labels.length;if(p===h)m.labels=e.labels;else if(p===i){m.labels=Array(h).fill("?");for(let A=0;A<i;A++){const v=a[A];m.labels[v]=e.labels[A]}}}return m}async makeLabelLutFromUrl(e,t=255,n=1/0){const a=await(await fetch(e)).json();return this.makeLabelLut(a,t,n)}makeDrawLut(e){let t=typeof e=="object"?e:oc[e];t===void 0&&(G.warn("colormap undefined ",e),t=this.colormapFromKey(""));const n=this.makeLabelLut(t,255);if(n.labels===void 0&&(n.labels=[]),n.labels.length<256){const l=n.labels.length;for(let u=l;u<256;u++)n.labels.push(u.toString())}const i=new Uint8ClampedArray(256*4);let a=0;for(let l=0;l<256;l++)i[a++]=255,i[a++]=0,i[a++]=0,i[a++]=255;i[3]=0;const o=Math.min(n.lut.length,256*4);if(o>0)for(let l=0;l<o;l++)i[l]=n.lut[l];return{lut:i,labels:n.labels}}makeLut(e,t,n,i,a,o){const l=e.length,u=[...e],f=[...t],h=[...n];if(!a){a=new Array(l);for(let A=0;A<l;A++)a[A]=A/(l-1)*255}i||(i=new Array(l).fill(64),i[0]=0);let d=Uint8ClampedArray.from(i),m=Uint8ClampedArray.from(a);if(o)for(let A=0;A<l;A++)u[A]=e[l-1-A],f[A]=t[l-1-A],h[A]=n[l-1-A],d[A]=255-i[l-1-A],m[A]=255-a[l-1-A];const p=new Uint8ClampedArray(256*4);if(typeof m>"u"){m=new Uint8ClampedArray(l).fill(0);for(let A=0;A<l;A++)m[A]=Math.round(A*255/(l-1))}typeof d>"u"&&(d=new Uint8ClampedArray(l).fill(64),d[0]=0);for(let A=0;A<l-1;A++){const v=m[A];let y=m[A+1];A===0&&v!==0&&G.warn("colormap issue: indices expected to start with 0 not ",v),A===m.length-2&&y!==255&&(G.warn("padding colormap: indices expected end with 255 not ",y),y=255);const w=y-v;let C=v*4;for(let S=v;S<=y;S++){const E=(S-v)/w;p[C++]=u[A]+E*(u[A+1]-u[A]),p[C++]=f[A]+E*(f[A+1]-f[A]),p[C++]=h[A]+E*(h[A+1]-h[A]),p[C++]=d[A]+E*(d[A+1]-d[A])}}if(this.gamma===1)return p;for(let A=0;A<1020;A++)A%4!==3&&(p[A]=Math.pow(p[A]/255,1/this.gamma)*255);return p}},Xe=new C6,Mr=class{static getClusterBoundaryU8(e,t){const n=new Array(e.length).fill(!1),i=new Array(e.length).fill(!1);for(let l=0;l<e.length;l++)e[l]>0&&(i[l]=!0);const a=t.length/3;let o=0;for(let l=0;l<a;l++){const u=t[o],f=t[o+1],h=t[o+2];o+=3,!(i[u]===i[f]&&i[u]===i[h]&&i[f]===i[h])&&(n[u]=!0,n[f]=!0,n[h]=!0)}return n}static async gzip(e){const t=new CompressionStream("gzip"),n=t.writable.getWriter();n.write(e).catch(console.error);const i=n.close().catch(console.error),a=new Response(t.readable),o=new Uint8Array(await a.arrayBuffer());return await i,o}static createMZ3(e,t,n=!1,i=null,a=null,o=null){const p=t?t.length/3:0,A=e?e.length/3:0;if(!Number.isInteger(p)||p<0)throw new Error("indices length must be a multiple of 3");if(!Number.isInteger(A)||A<0)throw new Error("vertices length must be a multiple of 3");const v=t&&t.length>0,y=e&&e.length>0,w=i instanceof Uint8Array&&i.length===A*4;let C=null,S=0;if(o!=null){const k=typeof o=="string"?o:JSON.stringify(o);C=new TextEncoder().encode(k),S=C.byteLength}let E=!1,M=0;if(a!=null){if(!(a instanceof Float32Array))throw new Error("scalars must be a Float32Array or null/undefined");if(A===0)throw new Error("cannot have scalars without vertices (nvert === 0)");if(a.length>0&&a.length%A===0)E=!0,M=a.length/A;else throw new Error(`scalars.length (${a.length}) must be a positive integer multiple of nvert (${A})`)}let R=0;v&&(R|=1),y&&(R|=2),w&&(R|=4),E&&(R|=8),C&&(R|=64);const D=16,T=v?p*3*4:0,F=y?A*3*4:0,U=w?A*4:0,I=E?M*A*4:0,V=D+S+T+F+U+I,N=new ArrayBuffer(V),Y=new DataView(N);let P=0;Y.setUint16(P,23117,!0),P+=2,Y.setUint16(P,R,!0),P+=2,Y.setUint32(P,p,!0),P+=4,Y.setUint32(P,A,!0),P+=4,Y.setUint32(P,S,!0),P+=4;let Q=D;if(S>0&&C&&(new Uint8Array(N,Q,C.length).set(C),Q+=S),v&&(new Uint32Array(N,Q,t.length).set(t),Q+=T),y&&(new Float32Array(N,Q,e.length).set(e),Q+=F),w&&(new Uint8Array(N,Q,i.length).set(i),Q+=U),E&&(new Float32Array(N,Q,a.length).set(a),Q+=I),Q!==V)throw new Error(`mz3 internal size mismatch: offset ${Q} !== totalSize ${V}`);if(n)throw new Error("Call async createMZ3Async() for compression");return N}static async createMZ3Async(e,t,n=!1,i=null,a=null,o=null){const l=this.createMZ3(e,t,n,i,a,o);return n?await this.gzip(new Uint8Array(l)):l}static createOBJ(e,t){let n="";for(let o=0;o<e.length;o+=3)n+=`v ${e[o]} ${e[o+1]} ${e[o+2]}
`;for(let o=0;o<t.length;o+=3)n+=`f ${t[o]+1} ${t[o+1]+1} ${t[o+2]+1}
`;return new TextEncoder().encode(n).buffer}static createSTL(e,t){const n=t.length/3,i=84+n*50,a=new ArrayBuffer(i),o=new DataView(a);for(let u=0;u<80;u++)o.setUint8(u,0);o.setUint32(80,n,!0);let l=84;for(let u=0;u<t.length;u+=3){const f=t[u]*3,h=t[u+1]*3,d=t[u+2]*3;o.setFloat32(l,0,!0),o.setFloat32(l+4,0,!0),o.setFloat32(l+8,0,!0),l+=12,o.setFloat32(l,e[f],!0),o.setFloat32(l+4,e[f+1],!0),o.setFloat32(l+8,e[f+2],!0),l+=12,o.setFloat32(l,e[h],!0),o.setFloat32(l+4,e[h+1],!0),o.setFloat32(l+8,e[h+2],!0),l+=12,o.setFloat32(l,e[d],!0),o.setFloat32(l+4,e[d+1],!0),o.setFloat32(l+8,e[d+2],!0),l+=12,o.setUint16(l,0,!0),l+=2}return a}static downloadArrayBuffer(e,t){const n=new Blob([e],{type:"application/octet-stream"}),i=URL.createObjectURL(n),a=document.createElement("a");a.href=i,a.download=t,document.body.appendChild(a),a.style.display="none",a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(i)},0)}static async saveMesh(e,t,n=".mz3",i=!1){let a=new ArrayBuffer(0);return/\.obj$/i.test(n)?a=this.createOBJ(e,t):/\.stl$/i.test(n)?a=this.createSTL(e,t):(/\.mz3$/i.test(n)||(n+=".mz3"),a=await this.createMZ3Async(e,t,i)),n.length>4&&this.downloadArrayBuffer(a,n),a}static getClusterBoundary(e,t){const n=new Uint32Array(e.buffer),i=new Array(n.length).fill(!1),a=t.length/3;let o=0;for(let l=0;l<a;l++){const u=t[o],f=t[o+1],h=t[o+2];o+=3,!(n[u]===n[f]&&n[u]===n[h]&&n[f]===n[h])&&(i[u]=!0,i[f]=!0,i[h]=!0)}return i}static getExtents(e){if(!ArrayBuffer.isView(e)&&!Array.isArray(e)||e.length<3)return{mxDx:0,extentsMin:0,extentsMax:0};let t=0;const n=ce(e[0],e[1],e[2]),i=ce(e[0],e[1],e[2]);for(let l=0;l<e.length;l+=3){const u=ce(e[l],e[l+1],e[l+2]);t=Math.max(t,no(u)),Td(n,n,u),Rd(i,i,u)}const a=[n[0],n[1],n[2]],o=[i[0],i[1],i[2]];return{mxDx:t,extentsMin:a,extentsMax:o}}static generateNormals(e,t){const n=[];let i;const a=e.length;let o,l,u,f,h,d,m,p,A;const v=new Float32Array(a),y=t.length;for(i=0;i<y;i+=3){m=t[i]*3,p=t[i+1]*3,A=t[i+2]*3;const w=[e[m],e[m+1],e[m+2]],C=[e[p],e[p+1],e[p+2]],S=[e[A],e[A+1],e[A+2]];o=C[0]-w[0],l=C[1]-w[1],u=C[2]-w[2],f=S[0]-w[0],h=S[1]-w[1],d=S[2]-w[2],n[0]=h*u-d*l,n[1]=d*o-f*u,n[2]=f*l-h*o,v[m]+=n[0],v[m+1]+=n[1],v[m+2]+=n[2],v[p]+=n[0],v[p+1]+=n[1],v[p+2]+=n[2],v[A]+=n[0],v[A+1]+=n[1],v[A+2]+=n[2]}for(i=0;i<a;i+=3){n[0]=-1*v[i],n[1]=-1*v[i+1],n[2]=-1*v[i+2];let w=n[0]*n[0]+n[1]*n[1]+n[2]*n[2];w>0&&(w=1/Math.sqrt(w),n[0]*=w,n[1]*=w,n[2]*=w),v[i]=n[0],v[i+1]=n[1],v[i+2]=n[2]}return v}},be,qt,lc,ad,Ys,_A=class{constructor(e){Ea(this,be),Ea(this,qt,0),Ea(this,lc,[]),Ea(this,ad,[]),Ea(this,Ys),Qi(this,be,new DataView(e)),this.read()}async extract(e){const t=new Uint8Array(ve(this,be).buffer.slice(e.startsAt,e.startsAt+e.compressedSize));if(e.compressionMethod===0)return t;if(e.compressionMethod===8){const n=new DecompressionStream("deflate-raw"),i=n.writable.getWriter();i.write(t).catch(console.error);const a=i.close().catch(console.error),o=new Response(n.readable),l=new Uint8Array(await o.arrayBuffer());return await a,l}throw new Error(`Unsupported compression method: ${e.compressionMethod}`)}read(){for(;!ve(this,Ys)&&ve(this,qt)<ve(this,be).byteLength;){const e=ve(this,be).getUint32(ve(this,qt),!0);if(e===67324752){const t=this.readLocalFile(ve(this,qt));t.extract=this.extract.bind(this,t),ve(this,lc).push(t);const n=(t.generalPurpose&8)!==0;if(t.startsAt=ve(this,qt)+30+t.fileNameLength+t.extraLength,t.compressedSize===0&&n){let i=t.startsAt;for(;i+20<=ve(this,be).byteLength;){if(ve(this,be).getUint32(i,!0)===134695760&&ve(this,be).getUint16(i+16,!0)===19280){i+=4;break}i++}t.crc=ve(this,be).getUint32(i,!0),t.compressedSize=ve(this,be).getUint32(i+4,!0),t.uncompressedSize=ve(this,be).getUint32(i+8,!0),Qi(this,qt,i+12)}else Qi(this,qt,t.startsAt+t.compressedSize)}else if(e===33639248){const t=this.readCentralDirectory(ve(this,qt));ve(this,ad).push(t),Qi(this,qt,ve(this,qt)+(46+t.fileNameLength+t.extraLength+t.fileCommentLength))}else if(e===101010256){Qi(this,Ys,this.readEndCentralDirectory(ve(this,qt)));break}else if(e===101075792){Qi(this,Ys,this.readEndCentralDirectory64(ve(this,qt)));break}else{console.error(`Unexpected ZIP signature 0x${e.toString(16).padStart(8,"0")} at index ${ve(this,qt)}`);break}}}readLocalFile(e){let t=ve(this,be).getUint32(e+18,!0),n=ve(this,be).getUint32(e+22,!0);const i=ve(this,be).getUint16(e+26,!0),a=ve(this,be).getUint16(e+28,!0),o=e+30+i;if(this.readString(o,a),t===4294967295&&n===4294967295){let l=o,u=!1;for(;l<o+a-4;){const f=ve(this,be).getUint16(l,!0),h=ve(this,be).getUint16(l+2,!0);if(l+=4,f===1)if(h>=16){n=Number(ve(this,be).getBigUint64(l,!0)),l+=8,t=Number(ve(this,be).getBigUint64(l,!0)),u=!0;break}else throw new Error(`ZIP64 extra field found but is too small (expected at least 16 bytes, got ${h}).`);l+=h}if(!u)throw new Error("ZIP64 format missing extra field with signature 0x0001.")}return{signature:this.readString(e,4),version:ve(this,be).getUint16(e+4,!0),generalPurpose:ve(this,be).getUint16(e+6,!0),compressionMethod:ve(this,be).getUint16(e+8,!0),lastModifiedTime:ve(this,be).getUint16(e+10,!0),lastModifiedDate:ve(this,be).getUint16(e+12,!0),crc:ve(this,be).getUint32(e+14,!0),compressedSize:t,uncompressedSize:n,fileNameLength:i,extraLength:a,fileName:this.readString(e+30,i),extra:this.readString(e+30+i,a)}}readCentralDirectory(e){return{versionCreated:ve(this,be).getUint16(e+4,!0),versionNeeded:ve(this,be).getUint16(e+6,!0),fileNameLength:ve(this,be).getUint16(e+28,!0),extraLength:ve(this,be).getUint16(e+30,!0),fileCommentLength:ve(this,be).getUint16(e+32,!0),diskNumber:ve(this,be).getUint16(e+34,!0),internalAttributes:ve(this,be).getUint16(e+36,!0),externalAttributes:ve(this,be).getUint32(e+38,!0),offset:ve(this,be).getUint32(e+42,!0),comments:this.readString(e+46,ve(this,be).getUint16(e+32,!0))}}readEndCentralDirectory(e){const t=ve(this,be).getUint16(e+20,!0);return{numberOfDisks:ve(this,be).getUint16(e+4,!0),centralDirectoryStartDisk:ve(this,be).getUint16(e+6,!0),numberCentralDirectoryRecordsOnThisDisk:ve(this,be).getUint16(e+8,!0),numberCentralDirectoryRecords:ve(this,be).getUint16(e+10,!0),centralDirectorySize:ve(this,be).getUint32(e+12,!0),centralDirectoryOffset:ve(this,be).getUint32(e+16,!0),commentLength:t,comment:this.readString(e+22,t)}}readEndCentralDirectory64(e){const t=Number(ve(this,be).getBigUint64(e+0,!0));return{numberOfDisks:ve(this,be).getUint32(e+16,!0),centralDirectoryStartDisk:ve(this,be).getUint32(e+20,!0),numberCentralDirectoryRecordsOnThisDisk:Number(ve(this,be).getBigUint64(e+24,!0)),numberCentralDirectoryRecords:Number(ve(this,be).getBigUint64(e+32,!0)),centralDirectorySize:Number(ve(this,be).getBigUint64(e+40,!0)),centralDirectoryOffset:Number(ve(this,be).getBigUint64(e+48,!0)),commentLength:t,comment:""}}readString(e,t){return Array.from({length:t},(n,i)=>String.fromCharCode(ve(this,be).getUint8(e+i))).join("")}get entries(){return ve(this,lc)}};be=new WeakMap;qt=new WeakMap;lc=new WeakMap;ad=new WeakMap;Ys=new WeakMap;var Ce=class Da{static arrayBufferToBase64(t){const n=new Uint8Array(t);return Da.uint8tob64(n)}static async decompress(t){const n=t[0]===31&&t[1]===139&&t[2]===8?"gzip":t[0]===120&&(t[1]===1||t[1]===94||t[1]===156||t[1]===218)?"deflate":"deflate-raw",i=new DecompressionStream(n),a=i.writable.getWriter();a.write(t).catch(console.error);const o=a.close().catch(console.error),l=new Response(i.readable),u=new Uint8Array(await l.arrayBuffer());return await o,u}static async decompressToBuffer(t){const n=await Da.decompress(t);return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}static async readMatV4(t,n=!1){let i=t.byteLength;if(i<40)throw new Error("File too small to be MAT v4: bytes = "+t.byteLength);let a=new DataView(t),o=a.getUint16(0,!0),l=t;if(o===35615||o===8075){const v=await this.decompress(new Uint8Array(t));a=new DataView(v.buffer),o=a.getUint16(0,!0),l=v.buffer,i=l.byteLength}const u=new TextDecoder("utf-8"),f=new Uint8Array(l);let h=0;const d={};function m(v){return Math.floor(v/10)%10}function p(v,y,w){const C=new Uint8Array(f.subarray(y,w));return v===1?new Float32Array(C.buffer):v===2?new Int32Array(C.buffer):v===3?new Int16Array(C.buffer):v===4?new Uint16Array(C.buffer):v===5?new Uint8Array(C.buffer):new Float64Array(C.buffer)}function A(){const v=a.getUint32(h,!0),y=a.getUint32(h+4,!0),w=a.getUint32(h+8,!0),C=a.getUint32(h+12,!0),S=a.getUint32(h+16,!0);if(h+=20,C!==0)throw new Error("Matlab V4 reader does not support imaginary numbers");const E=y*w;if(E<1)throw new Error("mrows * ncols must be greater than one");const M=new Uint8Array(f.subarray(h,h+S));let R=u.decode(M).trim().replaceAll("\0","");n&&(R=R.replaceAll(".","_"));const D=m(v);let T=8;if(D>=1&&D<=2)T=4;else if(D>=3&&D<=4)T=2;else if(D===5)T=1;else if(D!==0)throw new Error("impossible Matlab v4 datatype");if(h+=S,v>50)throw new Error("Does not appear to be little-endian V4 Matlab file");const F=h+E*T;d[R]=p(D,h,F),h=F}for(;h+20<i;)A();return d}static b64toUint8(t){const n=atob(t),i=n.length,a=new Uint8Array(i);for(let o=0;o<i;o++)a[o]=n.charCodeAt(o);return a}static uint8tob64(t){let n="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=t.byteLength,o=a%3,l=a-o;let u,f,h,d,m;for(let p=0;p<l;p=p+3)m=t[p]<<16|t[p+1]<<8|t[p+2],u=(m&16515072)>>18,f=(m&258048)>>12,h=(m&4032)>>6,d=m&63,n+=i[u]+i[f]+i[h]+i[d];return o===1?(m=t[l],u=(m&252)>>2,f=(m&3)<<4,n+=i[u]+i[f]+"=="):o===2&&(m=t[l]<<8|t[l+1],u=(m&64512)>>10,f=(m&1008)>>4,h=(m&15)<<2,n+=i[u]+i[f]+i[h]+"="),n}static download(t,n,i){const a=document.createElement("a"),o=Array.isArray(t)?t:[t],l=new Blob(o,{type:i});a.href=URL.createObjectURL(l),a.download=n,a.click()}static readFileAsync(t){return new Promise((n,i)=>{const a=new FileReader;a.onload=()=>{n(a.result)},a.onerror=i,a.readAsArrayBuffer(t)})}static blobToBase64(t){return new Promise(n=>{const i=new FileReader;i.onloadend=()=>n(i.result),i.readAsDataURL(t)})}static async decompressBase64String(t){const n=atob(t),i=new ArrayBuffer(n.length),a=new Uint8Array(i);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return Da.decompressArrayBuffer(a)}static async compressToBase64String(t){const n=await Da.compressStringToArrayBuffer(t);return Da.uint8tob64(new Uint8Array(n))}static strToU8(t,n){if(n){const f=new Uint8Array(t.length);for(let h=0;h<t.length;++h)f[h]=t.charCodeAt(h);return f}const i=t.length,a=(f,h,d)=>((d==null||d>f.length)&&(d=f.length),new Uint8Array(f.subarray(h,d)));let o=new Uint8Array(t.length+(t.length>>1)),l=0;const u=f=>{o[l++]=f};for(let f=0;f<i;++f){if(l+5>o.length){const d=new Uint8Array(l+8+(i-f<<1));d.set(o),o=d}let h=t.charCodeAt(f);h<128||n?u(h):h<2048?(u(192|h>>6),u(128|h&63)):(h>55295&&h<57344,h=65536+(h&1047552)|t.charCodeAt(++f)&1023,u(240|h>>18),u(128|h>>12&63),u(128|h>>6&63),u(128|h&63))}return a(o,0,l)}static async compress(t,n="gzip"){const i=new CompressionStream(n),a=i.writable.getWriter();a.write(t).catch(console.error);const o=a.close().catch(console.error),u=await new Response(i.readable).arrayBuffer();return await o,u}static async compressStringToArrayBuffer(t){const n=this.strToU8(t);return await this.compress(n)}static isArrayBufferCompressed(t){if(t&&t.byteLength){const n=new Uint8Array(t);return(n[0]<<8|n[1])===8075}else return!1}static strFromU8(t,n){if(n){let i="";for(let a=0;a<t.length;a+=16384)i+=String.fromCharCode.apply(null,t.subarray(a,a+16384));return i}else{const i=(u,f,h)=>((f==null||f<0)&&(f=0),(h==null||h>u.length)&&(h=u.length),new Uint8Array(u.subarray(f,h))),a=u=>{for(let f="",h=0;;){let d=u[h++];const m=(d>127)+(d>223)+(d>239);if(h+m>u.length)return{s:f,r:i(u,h-1)};m?m===3?(d=((d&15)<<18|(u[h++]&63)<<12|(u[h++]&63)<<6|u[h++]&63)-65536,f+=String.fromCharCode(55296|d>>10,56320|d&1023)):m&1?f+=String.fromCharCode((d&31)<<6|u[h++]&63):f+=String.fromCharCode((d&15)<<12|(u[h++]&63)<<6|u[h++]&63):f+=String.fromCharCode(d)}},{s:o,r:l}=a(t);if(l.length)throw new Error("Unexpected trailing bytes in UTF-8 decoding");return o}}static async decompressArrayBuffer(t){const n=await this.decompress(new Uint8Array(t));return this.strFromU8(n)}static arraysAreEqual(t,n){return By(t,n)}static range(t,n,i){return Array.from({length:(n-t)/i+1},(a,o)=>t+o*i)}static sph2cartDeg(t,n){const i=-n*(Math.PI/180),a=(t-90)%360*(Math.PI/180),o=[Math.cos(i)*Math.cos(a),Math.cos(i)*Math.sin(a),Math.sin(i)],l=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);return l<=0||(o[0]/=l,o[1]/=l,o[2]/=l),o}static vox2mm(t,n){const i=lt(n);_t(i,i);const a=nt(t[0],t[1],t[2],1);return Ft(a,a,i),ce(a[0],a[1],a[2])}},Ls=G,rt=class gt{static readTRACT(t){const n=t.byteLength;if(n<20)throw new Error("File too small to be niml.tract: bytes = "+n);const i=new DataView(t),a=new Uint8Array(t);let o=0;function l(){for(;o<n&&a[o]!==60;)o++;const y=o;for(;o<n&&a[o]!==62;)o++;return o++,o-y<1?"":new TextDecoder().decode(t.slice(y,o-1)).trim()}let u=l();function f(y){const w=u.indexOf(y);if(w<0)return 0;const C=u.indexOf('"',w)+1,S=u.indexOf('"',C),E=u.slice(C,S);return parseInt(E)}const h=f("N_tracts=");(!u.startsWith("<network")||h<1)&&G.warn("This is not a valid niml.tract file "+u);let d=0;const m=[];m.push(d);const p=[],A=[];for(let y=0;y<h;y++){u=l();const w=f("ni_dimen="),C=f("Bundle_Tag="),S=u.includes("binary.lsbfirst");for(let E=0;E<w;E++){o+=4;const M=i.getUint32(o,S)/3;o+=4;for(let R=0;R<M;R++)p.push(i.getFloat32(o,S)),o+=4,p.push(-i.getFloat32(o,S)),o+=4,p.push(i.getFloat32(o,S)),o+=4;d+=M,m.push(d),A.push(C)}u=l()}const v=[];return v.push({id:"tract",vals:Float32Array.from(A)}),{pts:new Float32Array(p),offsetPt0:new Uint32Array(m),dps:v}}static async readTT(t){let n=new Uint32Array(0),i=new Float32Array(0);const a=await Ce.readMatV4(t);if(!("trans_to_mni"in a))throw new Error("TT format file must have 'trans_to_mni'");if(!("voxel_size"in a))throw new Error("TT format file must have 'voxel_size'");if(!("track"in a))throw new Error("TT format file must have 'track'");let o=Ue();const l=a.trans_to_mni;o=Cn(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15]),_t(o,o);function u(f){const h=new DataView(f.buffer),d=[];let m=0,p=0;for(;p<f.length;){d.push(p);const y=h.getUint32(p,!0);p=p+y+13,m+=y}n=new Uint32Array(d.length+1),i=new Float32Array(m);let A=0;for(let y=0;y<d.length;y++){n[y]=A/3;let w=d[y];const C=h.getUint32(w,!0)/3;let S=h.getInt32(w+4,!0),E=h.getInt32(w+8,!0),M=h.getInt32(w+12,!0);w+=16,i[A++]=S,i[A++]=E,i[A++]=M;for(let R=2;R<=C;R++)S=S+h.getInt8(w++),E=E+h.getInt8(w++),M=M+h.getInt8(w++),i[A++]=S,i[A++]=E,i[A++]=M}for(let y=0;y<A;y++)i[y]=i[y]/32;let v=0;for(let y=0;y<A/3;y++){const w=nt(i[v],i[v+1],i[v+2],1);Ft(w,w,o),i[v++]=w[0],i[v++]=w[1],i[v++]=w[2]}n[d.length]=A/3}return u(a.track),{pts:i,offsetPt0:n}}static assembleDpgFromMap(t,n){if(!Array.isArray(n)||n.length===0)throw new Error('assembleDpgFromMap: "groups" is empty or missing; cannot assemble dpg.');for(let f=0;f<n.length;f++){const h=String(n[f].id);if(!t[h])throw new Error(`assembleDpgFromMap: missing dpgMap entry for group "${h}".`);if(!Array.isArray(t[h]))throw new Error(`assembleDpgFromMap: dpgMap["${h}"] is not an array.`)}const i=String(n[0].id),a=t[i],o=[],l=new Set;for(const f of a){if(!f||typeof f.id!="string")throw new Error(`assembleDpgFromMap: invalid entry in group "${i}".`);if(l.has(f.id))throw new Error(`assembleDpgFromMap: duplicate tag "${f.id}" in group "${i}".`);l.add(f.id),o.push(f.id)}if(l.size===0)throw new Error(`assembleDpgFromMap: no tags found in group "${i}".`);for(let f=1;f<n.length;f++){const h=String(n[f].id),d=t[h],m=new Map;for(const p of d){if(!p||typeof p.id!="string")throw new Error(`assembleDpgFromMap: invalid entry in group "${h}".`);m.set(p.id,(m.get(p.id)||0)+1)}for(const[p,A]of m.entries())if(A>1)throw new Error(`assembleDpgFromMap: multiple entries for tag "${p}" in group "${h}".`);if(m.size!==l.size)throw new Error(`assembleDpgFromMap: tag coverage mismatch for group "${h}". Expected ${l.size} tags but found ${m.size}.`);for(const p of l)if(!m.has(p))throw new Error(`assembleDpgFromMap: group "${h}" missing tag "${p}".`)}const u=[];for(const f of o){const h=[];let d=0;for(let A=0;A<n.length;A++){const v=String(n[A].id),w=t[v].filter(S=>S.id===f);if(w.length===0)throw new Error(`assembleDpgFromMap: missing tag "${f}" for group "${v}".`);if(w.length>1)throw new Error(`assembleDpgFromMap: multiple entries for tag "${f}" in group "${v}".`);const C=w[0];if(C.vals instanceof Float32Array)h.push(C.vals),d+=C.vals.length;else try{const S=Float32Array.from(C.vals);h.push(S),d+=S.length}catch{throw new Error(`assembleDpgFromMap: invalid vals for tag "${f}" in group "${v}".`)}}const m=new Float32Array(d);let p=0;for(const A of h)m.set(A,p),p+=A.length;u.push({id:f,vals:m})}return u}static async readTRX(t){function n(y){const w=(y&31744)>>10,C=y&1023;return(y>>15?-1:1)*(w?w===31?C?NaN:1/0:Math.pow(2,w-15)*(1+C/1024):6103515625e-14*(C/1024))}let i=0,a=0,o=new Float32Array([]);const l=[],u={},f=[],h=[],d=[];let m=[],p=!1;const A=new _A(t);for(let y=0;y<A.entries.length;y++){const w=A.entries[y];if(w.uncompressedSize===0)continue;const C=w.fileName.split("/"),S=C.slice(-1)[0];if(S.startsWith("."))continue;const E=C.slice(-3)[0],M=C.slice(-2)[0],R=S.split(".")[0],D=await w.extract();if(S.includes("header.json")){const U=new TextDecoder().decode(D);m=JSON.parse(U);continue}let T=0,F=[];if(S.endsWith(".uint64")||S.endsWith(".int64")){T=D.length/8,F=new Uint32Array(T);const U=new Uint32Array(D.buffer);let I=0;for(let V=0;V<T;V++)F[V]=U[I],U[I+1]!==0&&(p=!0),I+=2}else if(S.endsWith(".uint32"))F=new Uint32Array(D.buffer);else if(S.endsWith(".uint16"))F=new Uint16Array(D.buffer);else if(S.endsWith(".uint8"))F=new Uint8Array(D.buffer);else if(S.endsWith(".int32"))F=new Int32Array(D.buffer);else if(S.endsWith(".int16"))F=new Int16Array(D.buffer);else if(S.endsWith(".int8"))F=new Int8Array(D.buffer);else if(S.endsWith(".float64"))F=new Float64Array(D.buffer);else if(S.endsWith(".float32"))F=new Float32Array(D.buffer);else if(S.endsWith(".float16")){T=D.length/2,F=new Float32Array(T);const U=new Uint16Array(D.buffer),I=new Float32Array(65536);for(let V=0;V<65536;V++)I[V]=n(V);for(let V=0;V<T;V++)F[V]=I[U[V]]}else continue;if(T=F.length,M.includes("groups")){f.push({id:R,vals:Float32Array.from(F.slice())});continue}if(E.includes("dpg")){const U=String(M);u[U]||(u[U]=[]),u[U].push({id:R,vals:Float32Array.from(F.slice())});continue}if(M.includes("dpv")){d.push({id:R,vals:Float32Array.from(F.slice())});continue}if(M.includes("dps")){h.push({id:R,vals:Float32Array.from(F.slice())});continue}if(S.startsWith("offsets.")){i=T;for(let U=0;U<T;U++)l[U]=F[U]}S.startsWith("positions.3.")&&(a=T,o=new Float32Array(F))}if(i===0||a===0)throw new Error("Failure reading TRX format (no offsets or points).");if(p)throw new Error("Too many vertices: JavaScript does not support 64 bit integers");let v=[];return f.length>0&&u&&Object.keys(u).length>0&&(v=this.assembleDpgFromMap(u,f)),l[i]=a/3,{pts:o,offsetPt0:new Uint32Array(l),dpg:v,dps:h,dpv:d,groups:f,header:m}}static readTXT(t,n=0){const a=new TextDecoder("utf-8").decode(t).split(/\r?\n|\r/).filter(l=>l.trim().length>0);n<=0&&(n=a.length);const o=new Float32Array(n);for(let l=0;l<n&&l<a.length;l++){const u=parseFloat(a[l].trim());o[l]=Number.isFinite(u)?u:0}return o}static readTSF(t,n=0){const i=new Float32Array(n),a=t.byteLength;if(a<20)throw new Error("File too small to be TSF: bytes = "+a);const o=new Uint8Array(t);let l=0;function u(){for(;l<a&&o[l]===10;)l++;const p=l;for(;l<a&&o[l]!==10;)l++;return l++,l-p<1?"":new TextDecoder().decode(t.slice(p,l-1))}let f=u();if(!f.includes("mrtrix track scalars"))throw new Error("Not a valid TSF file");let h=-1;for(;l<a&&!f.includes("END");)if(f=u(),f.toLowerCase().startsWith("file:")&&(h=parseInt(f.split(" ").pop())),f.toLowerCase().startsWith("datatype:")&&!f.endsWith("Float32LE"))throw new Error("Only supports TSF files with Float32LE");if(h<20)throw new Error("Not a valid TSF file (missing file offset)");l=h;const d=new DataView(t);let m=0;for(;l+4<=a&&m<n;){const p=d.getFloat32(l,!0);if(l+=4,isFinite(p))i[m++]=p;else if(!isNaN(p))break}return i}static readTCK(t){const n=t.byteLength;if(n<20)throw new Error("File too small to be TCK: bytes = "+n);const i=new Uint8Array(t);let a=0;function o(){for(;a<n&&i[a]===10;)a++;const v=a;for(;a<n&&i[a]!==10;)a++;return a++,a-v<1?"":new TextDecoder().decode(t.slice(v,a-1))}let l=o();if(!l.includes("mrtrix tracks"))throw new Error("Not a valid TCK file");let u=-1;for(;a<n&&!l.includes("END");)l=o(),l.toLowerCase().startsWith("file:")&&(u=parseInt(l.split(" ").pop()));if(u<20)throw new Error("Not a valid TCK file (missing file offset)");a=u;const f=new DataView(t);let h=0,d=new Uint32Array(n/16),m=0,p=0,A=new Float32Array(n/4);for(d[0]=0;a+12<n;){const v=f.getFloat32(a,!0);a+=4;const y=f.getFloat32(a,!0);a+=4;const w=f.getFloat32(a,!0);if(a+=4,isFinite(v))A[p++]=v,A[p++]=y,A[p++]=w,h++;else if(d[m++]=h,!isNaN(v))break}return A=A.slice(0,p),d=d.slice(0,m),{pts:A,offsetPt0:d}}static async readTRK(t){let n=new DataView(t),i=n.getUint32(0,!0);if(i!==1128354388){let V;if(i===4247762216)throw new Error("zstd TRK decompression is not supported");V=await Ce.decompress(new Uint8Array(t)),t=V.buffer,n=new DataView(t),i=n.getUint32(0,!0)}const a=n.getUint32(992,!0),o=n.getUint32(996,!0);if(a>2||o!==1e3||i!==1128354388)throw new Error("Not a valid TRK file");const l=n.getInt16(36,!0),u=[];for(let V=0;V<l;V++){const N=new Uint8Array(t.slice(38+V*20,58+V*20)),Y=new TextDecoder().decode(N).split("\0").shift();u.push({id:Y.trim(),vals:[]})}const f=n.getFloat32(12,!0),h=n.getFloat32(16,!0),d=n.getFloat32(20,!0),m=Cn(1/f,0,0,-.5,0,1/h,0,-.5,0,0,1/d,-.5,0,0,0,1),p=n.getInt16(238,!0),A=[];for(let V=0;V<p;V++){const N=new Uint8Array(t.slice(240+V*20,260+V*20)),Y=new TextDecoder().decode(N).split("\0").shift();A.push({id:Y.trim(),vals:[]})}const v=Ue();for(let V=0;V<16;V++)v[V]=n.getFloat32(440+V*4,!0);v[15]===0&&(G.warn("TRK vox_to_ras not set"),wA(v));const y=Ue();CA(y,m,v);let w=null,C=null;w=new Int32Array(t.slice(o)),C=new Float32Array(w.buffer);const S=w.length;if(S<1)throw new Error("Empty TRK file.");let E=0,M=0,R=new Uint32Array(w.length/4),D=0,T=new Float32Array(w.length),F=0;for(;E<S;){const V=w[E];E=E+1,R[D++]=M;for(let N=0;N<V;N++){const Y=C[E+0],P=C[E+1],Q=C[E+2];if(E+=3,T[F++]=Y*y[0]+P*y[1]+Q*y[2]+y[3],T[F++]=Y*y[4]+P*y[5]+Q*y[6]+y[7],T[F++]=Y*y[8]+P*y[9]+Q*y[10]+y[11],l>0)for(let k=0;k<l;k++)u[k].vals.push(C[E]),E++;M++}if(p>0)for(let N=0;N<p;N++)A[N].vals.push(C[E]),E++}const U=[];for(let V=0;V<A.length;V++)U.push({id:A[V].id,vals:Float32Array.from(A[V].vals)});const I=[];for(let V=0;V<u.length;V++)I.push({id:u[V].id,vals:Float32Array.from(u[V].vals)});return R[D++]=M,T=T.slice(0,F),R=R.slice(0,D),{pts:T,offsetPt0:R,dps:U,dpv:I}}static readTxtVTK(t){const a=new TextDecoder("utf-8").decode(t).split(`
`);if(a.length<7||!a[0].startsWith("# vtk DataFile"))throw new Error("Invalid VTK image");if(!a[2].startsWith("ASCII"))throw new Error("Not ASCII VTK mesh");let l=3;for(;a[l].length<1;)l++;if(!a[l].includes("POLYDATA"))throw new Error("Not ASCII VTK polydata");for(l++;a[l].length<1;)l++;if(!a[l].startsWith("POINTS"))throw new Error("Not VTK POINTS");let u=a[l].trim().split(/\s+/);const f=parseInt(u[1]),h=f*3,d=new Float32Array(f*3);let m=0;for(;m<f*3;){l++;const y=a[l].trim().trim().split(/\s+/);for(let w=0;w<y.length&&!(m>=h);w++)d[m]=parseFloat(y[w]),m++}const p=[];for(l++;a[l].length<1;)l++;if(a[l].startsWith("METADATA")){for(;a[l].length>1;)l++;l++}if(u=a[l].trim().split(/\s+/),l++,u[0].includes("LINES")){const v=parseInt(u[1]);if(v<1)throw new Error("Corrupted VTK ASCII");let y=a[l].trim();const w=[];let C=[];if(y.startsWith("OFFSETS")){l++;let S=0;for(;S<v;){y=a[l].trim(),l++;const E=y.trim().split(/\s+/);for(let M=0;M<E.length&&(w[S]=parseInt(E[M]),S++,!(S>=v));M++);}C=Array.from(d)}else{let S=function(){y=a[l].trim();const D=y.trim().split(/\s+/);M=[];for(let T=0;T<D.length;T++)M.push(parseInt(D[T]));R=0,l++},E=0;w[0]=0;let M=[],R=0;S();for(let D=0;D<v;D++){R>=M.length&&S();const T=M[R++];E+=T,w[D+1]=E;for(let F=0;F<T;F++){R>=M.length&&S();const U=M[R++]*3;C.push(d[U+0]),C.push(d[U+1]),C.push(d[U+2])}}}return{pts:Float32Array.from(C),offsetPt0:Uint32Array.from(w)}}else if(u[0].includes("TRIANGLE_STRIPS")){const v=parseInt(u[1]);for(let y=0;y<v;y++){const w=a[l].trim();l++;const C=w.trim().split(/\s+/),S=parseInt(C[0])-2;let E=1;for(let M=0;M<S;M++)M%2?(p.push(parseInt(C[E+2])),p.push(parseInt(C[E+1])),p.push(parseInt(C[E]))):(p.push(parseInt(C[E])),p.push(parseInt(C[E+1])),p.push(parseInt(C[E+2]))),E+=1}}else if(u[0].includes("POLYGONS")){const v=parseInt(u[1]);for(let y=0;y<v;y++){const w=a[l].trim();l++;const C=w.trim().split(/\s+/),S=parseInt(C[0])-2,E=parseInt(C[1]);let M=parseInt(C[2]);for(let R=0;R<S;R++){const D=parseInt(C[3+R]);p.push(E),p.push(M),p.push(D),M=D}}}else throw new Error("Unsupported ASCII VTK datatype "+u[0]);const A=new Uint32Array(p);return{positions:d,indices:A}}static async readLayer(t="",n,i,a=.5,o="warm",l="winter",u=!1,f=null,h=null,d=0){const m={...DC,colormapInvert:!1,colormapType:0,isTransparentBelowCalMin:!0,isAdditiveBlend:!1,colorbarVisible:!0,colormapLabel:null},p=/(?:\.([^.]+))?$/;let A=p.exec(t)[1];A=A.toUpperCase(),A==="GZ"&&(A=p.exec(t.slice(0,-3))[1],A=A.toUpperCase());const v=i.vertexCount/3;if(i.offsetPt0){const C=t.split("/");let S="Unknown";if(C.length>1&&C.pop()&&(S=S.split(".").slice(0,-1).join(".")),A==="TXT"){const T=i.offsetPt0.length-1,F=gt.readTXT(n,T);if(F.length!==T)throw new Error(`TXT file has ${F.length} items, expected one per streamline (${T}).`);i.dps||(i.dps=[]);const U=F.reduce((V,N)=>Math.min(V,N)),I=F.reduce((V,N)=>Math.max(V,N));return i.dps.push({id:S,vals:Float32Array.from(F.slice()),global_min:U,global_max:I,cal_min:U,cal_max:I}),m}if(A==="NII"){const T=await gt.readNII(n,i.pts,""),F=T.reduce((I,V)=>Math.min(I,V)),U=T.reduce((I,V)=>Math.max(I,V));return i.dpv.push({id:S,vals:Float32Array.from(T.slice()),global_min:F,global_max:U,cal_min:F,cal_max:U}),m}if(A!=="TSF")throw new Error("readLayer for streamlines only supports TSF and TXT files.");const E=i.pts.length/3,M=gt.readTSF(n,E);i.dpv||(i.dpv=[]);const R=M.reduce((T,F)=>Math.min(T,F)),D=M.reduce((T,F)=>Math.max(T,F));return i.dpv.push({id:S,vals:Float32Array.from(M.slice()),global_min:R,global_max:D,cal_min:R,cal_max:D}),m}if(v<3){G.error("n_vert < 3 in layer");return}if(A==="MZ3"){const C=await gt.readMZ3(n,v);m.values=C.scalars,"colormapLabel"in C&&(m.colormapLabel=C.colormapLabel)}else if(A==="ANNOT"){const C=gt.readANNOT(n,v,!0);C instanceof Uint32Array?m.values=C:(m.values=C.scalars,m.colormapLabel=C.colormapLabel)}else if(A==="CRV"||A==="CURV"||A==="THICKNESS"||A==="AREA")m.values=gt.readCURV(n,v),m.isTransparentBelowCalMin=!1;else if(A==="GII"){const C=await gt.readGII(n,v);m.values=C.scalars,m.colormapLabel=C.colormapLabel}else if(A==="MGH"||A==="MGZ"){const C=await gt.readMGH(n,v,!0);"scalars"in C?(m.values=C.scalars,m.colormapLabel=C.colormapLabel):m.values=C}else if(A==="NII")m.values=await gt.readNII(n,i.pts,i.anatomicalStructurePrimary);else if(A==="SMP")m.values=await gt.readSMP(n,v);else if(A==="STC")m.values=gt.readSTC(n,v);else if(gt.isCurv(n))m.values=gt.readCURV(n,v),m.isTransparentBelowCalMin=!1;else return G.warn("Unknown layer overlay format "+t),m;if(!m.values){G.error("no values in layer");return}m.nFrame4D=m.values.length/v,m.frame4D=0,m.outlineBorder=d;let y=m.values[0],w=m.values[0];for(let C=0;C<m.values.length;C++)y=Math.min(y,m.values[C]),w=Math.max(w,m.values[C]);return m.global_min=y,m.global_max=w,m.cal_min=f||0,f||(m.cal_min=y),m.cal_max=h||0,h||(m.cal_max=w),m.cal_minNeg=NaN,m.cal_maxNeg=NaN,m.opacity=a,m.colormap=o,m.colormapNegative=l,m.useNegativeCmap=u,m}static async readSMP(t,n){const i=t.byteLength;let a=new DataView(t),o=a.getUint16(0,!0);if(o>5){const m=await Ce.decompress(new Uint8Array(t));a=new DataView(m.buffer),o=a.getUint16(0,!0),t=m.buffer}o>5&&G.error("Unsupported or invalid BrainVoyager SMP version "+o);const l=a.getUint32(2,!0);l!==n&&G.error("SMP file has "+l+" vertices, background mesh has "+n);const u=a.getUint16(6,!0),f=new Float32Array(l*u);let h=9;function d(){const m=h;for(;h<i&&a.getUint8(h)!==0;)h++;return h++,new TextDecoder().decode(t.slice(m,h-1))}d();for(let m=0;m<u;m++){const p={};p.mapType=a.getUint32(h,!0),h+=4,o>=3&&p.mapType===3&&(p.nLags=a.getUint32(h,!0),h+=4,p.mnLag=a.getUint32(h,!0),h+=4,p.mxLag=a.getUint32(h,!0),h+=4,p.ccOverlay=a.getUint32(h,!0),h+=4),p.clusterSize=a.getUint32(h,!0),h+=4,p.clusterCheck=a.getUint8(h),h+=1,p.critThresh=a.getFloat32(h,!0),h+=4,p.maxThresh=a.getFloat32(h,!0),h+=4,o>=4&&(p.includeValuesGreaterThreshMax=a.getUint32(h,!0),h+=4),p.df1=a.getUint32(h,!0),h+=4,p.df2=a.getUint32(h,!0),h+=4,o>=5?(p.posNegFlag=a.getUint32(h,!0),h+=4):p.posNegFlag=3,p.cortexBonferroni=a.getUint32(h,!0),h+=4,p.posMinRGB=[0,0,0],p.posMaxRGB=[0,0,0],p.negMinRGB=[0,0,0],p.negMaxRGB=[0,0,0],o>=2&&(p.posMinRGB[0]=a.getUint8(h),h++,p.posMinRGB[1]=a.getUint8(h),h++,p.posMinRGB[2]=a.getUint8(h),h++,p.posMaxRGB[0]=a.getUint8(h),h++,p.posMaxRGB[1]=a.getUint8(h),h++,p.posMaxRGB[2]=a.getUint8(h),h++,o>=4&&(p.negMinRGB[0]=a.getUint8(h),h++,p.negMinRGB[1]=a.getUint8(h),h++,p.negMinRGB[2]=a.getUint8(h),h++,p.negMaxRGB[0]=a.getUint8(h),h++,p.negMaxRGB[1]=a.getUint8(h),h++,p.negMaxRGB[2]=a.getUint8(h),h++),p.enableSMPColor=a.getUint8(h),h++,o>=4&&(p.lut=d()),p.colorAlpha=a.getFloat32(h,!0),h+=4),p.name=d();const A=new Float32Array(t,h,l);f.set(A,m*l),h+=l*4}return f}static readSTC(t,n){const i=new DataView(t),a=i.getInt32(8,!1);if(a!==n)throw new Error("Overlay has "+a+" vertices, expected "+n);let o=12+a*4;const l=i.getUint32(o,!1);o+=4;const u=new Float32Array(l*a);for(let f=0;f<l*a;f++)u[f]=i.getFloat32(o,!1),o+=4;return u}static isCurv(t){const n=new DataView(t),i=n.getUint8(0),a=n.getUint8(1),o=n.getUint8(2);return i!==255||a!==255||o!==255?(Ls.debug("Unable to recognize file type: does not appear to be FreeSurfer format."),!1):!0}static readCURV(t,n){const i=new DataView(t),a=i.getUint8(0),o=i.getUint8(1),l=i.getUint8(2),u=i.getUint32(3,!1),f=i.getUint32(11,!1);if((a!==255||o!==255||l!==255)&&Ls.debug("Unable to recognize file type: does not appear to be FreeSurfer format."),n!==u)throw new Error("CURV file has different number of vertices ( "+u+")than mesh ("+n+")");if(t.byteLength<15+4*u*f)throw new Error("CURV file smaller than specified");const h=new Float32Array(f*u);let d=15;for(let v=0;v<f*u;v++)h[v]=i.getFloat32(d,!1),d+=4;let m=h[0],p=h[0];for(let v=0;v<h.length;v++)m=Math.min(m,h[v]),p=Math.max(p,h[v]);const A=1/(p-m);for(let v=0;v<h.length;v++)h[v]=1-(h[v]-m)*A;return h}static readANNOT(t,n,i=!1){const a=new DataView(t),o=a.getUint32(0,!1),l=this.decimateLayerVertices(o,n);if(n!==l)throw new Error("ANNOT file has different number of vertices than mesh");if(t.byteLength<4+8*o)throw new Error("ANNOT file smaller than specified");let u=0;const f=new Uint32Array(o);for(let M=0;M<o;M++){const R=a.getUint32(u+=4,!1);f[R]=a.getUint32(u+=4,!1)}if(!i)return f;let h=0;try{h=a.getInt32(u+=4,!1)}catch{return f}if(h!==1||a.getInt32(u+=4,!1)>0)return f;const p=a.getInt32(u+=4,!1),A=a.getInt32(u+=4,!1);u+=A;const v=a.getInt32(u+=4,!1);if(v<1)return f;const y={R:Array(p).fill(0),G:Array(p).fill(0),B:Array(p).fill(0),A:Array(p).fill(0),I:Array(p).fill(0),labels:Array(p).fill("")};for(let M=0;M<v;M++){const R=a.getInt32(u+=4,!1),D=a.getInt32(u+=4,!1);u+=4;let T="";for(let N=0;N<D;N++){const Y=a.getUint8(u++);if(Y===0)break;T+=String.fromCharCode(Y)}u-=4;const F=a.getInt32(u+=4,!1),U=a.getInt32(u+=4,!1),I=a.getInt32(u+=4,!1),V=a.getInt32(u+=4,!1);if(R<0||R>=p){G.warn("annot entry out of range");continue}y.R[R]=F,y.G[R]=U,y.B[R]=I,y.A[R]=V,y.I[R]=(V<<24)+(I<<16)+(U<<8)+F,y.labels[R]=T}let w=!0;for(let M=0;M<p;M++)y.A[M]>0&&(w=!1);if(w)for(let M=0;M<p;M++)y.A[M]=255;const C=new Float32Array(o);C.fill(-1);let S=0;for(let M=0;M<n;M++){const R=f[M];for(let D=0;D<p;D++)if(y.I[D]===R){C[M]=D;break}C[M]<0&&(S++,C[M]=0)}S>0&&G.error(`annot vertex colors do not match ${S} of ${o} vertices.`);for(let M=0;M<p;M++)y.I[M]=M;const E=Xe.makeLabelLut(y);return{scalars:C,colormapLabel:E}}static readNV(t){const n=t.byteLength,i=new Uint8Array(t);let a=0;function o(){for(;a<n&&i[a]===10;)a++;const p=a;for(;a<n&&i[a]!==10;)a++;return a++,a-p<1?"":new TextDecoder().decode(t.slice(p,a-1))}let l=0,u=0,f=0,h=0,d,m;for(;a<n;){const p=o();if(p.startsWith("#"))continue;const A=p.trim().split(/\s+/);if(l<1){l=parseInt(A[0]),d=new Float32Array(l*3);continue}if(f<l*3){d[f]=parseFloat(A[0]),d[f+1]=parseFloat(A[1]),d[f+2]=parseFloat(A[2]),f+=3;continue}if(u<1){u=parseInt(A[0]),m=new Uint32Array(u*3);continue}if(h>=u*3)break;m[h+2]=parseInt(A[0])-1,m[h+1]=parseInt(A[1])-1,m[h+0]=parseInt(A[2])-1,h+=3}return{positions:d,indices:m}}static readASC(t){const n=t.byteLength,i=new Uint8Array(t);let a=0;function o(){for(;a<n&&i[a]===10;)a++;const A=a;for(;a<n&&i[a]!==10;)a++;return a++,a-A<1?"":new TextDecoder().decode(t.slice(A,a-1))}let l=o();l.startsWith("#!ascii")||G.warn("Invalid ASC mesh"),l=o();let u=l.trim().split(/\s+/);const f=parseInt(u[0]),h=parseInt(u[1]),d=new Float32Array(f*3);let m=0;for(let A=0;A<f;A++)l=o(),u=l.trim().split(/\s+/),d[m]=parseFloat(u[0]),d[m+1]=parseFloat(u[1]),d[m+2]=parseFloat(u[2]),m+=3;const p=new Uint32Array(h*3);m=0;for(let A=0;A<h;A++)l=o(),u=l.trim().split(/\s+/),p[m]=parseInt(u[0]),p[m+1]=parseInt(u[1]),p[m+2]=parseInt(u[2]),m+=3;return{positions:d,indices:p}}static readVTK(t){const n=t.byteLength;if(n<20)throw new Error("File too small to be VTK: bytes = "+t.byteLength);const i=new Uint8Array(t);let a=0;function o(y=!0){if(y)for(;a<n&&i[a]===10;)a++;const w=a;for(;a<n&&i[a]!==10;)a++;return a++,a-w<1?"":new TextDecoder().decode(t.slice(w,a-1))}let l=o();if(!l.startsWith("# vtk DataFile"))throw new Error("Invalid VTK mesh");if(l=o(!1),l=o(),l.startsWith("ASCII"))return gt.readTxtVTK(t);if(!l.startsWith("BINARY"))throw new Error("Invalid VTK image, expected ASCII or BINARY "+l);if(l=o(),!l.includes("POLYDATA"))throw new Error("Only able to read VTK POLYDATA "+l);l=o(),(!l.includes("POINTS")||!l.includes("double")&&!l.includes("float"))&&G.warn("Only able to read VTK float or double POINTS"+l);const u=l.includes("double");let f=l.trim().split(/\s+/);const d=parseInt(f[1])*3,m=new Float32Array(d),p=new DataView(t);if(u)for(let y=0;y<d;y++)m[y]=p.getFloat64(a,!1),a+=8;else for(let y=0;y<d;y++)m[y]=p.getFloat32(a,!1),a+=4;l=o(),f=l.trim().split(/\s+/);const A=[];if(f[0].includes("LINES")){const y=parseInt(f[1]),w=a;if(l=o(),l.startsWith("OFFSETS")){let M=!1;l.includes("int64")&&(M=!0);const R=new Uint32Array(y);if(M){let T=!1;for(let F=0;F<y;F++){let U=p.getInt32(a,!1);U!==0&&(T=!0),a+=4,U=p.getInt32(a,!1),a+=4,R[F]=U}T&&G.warn("int32 overflow: JavaScript does not support int64")}else for(let T=0;T<y;T++){const F=p.getInt32(a,!1);a+=4,R[T]=F}return{pts:m,offsetPt0:R}}a=w;let C=0;const S=[],E=[];S.push(C);for(let M=0;M<y;M++){const R=p.getInt32(a,!1);a+=4,C+=R,S.push(C);for(let D=0;D<R;D++){const T=p.getInt32(a,!1)*3;a+=4,E.push(m[T+0]),E.push(m[T+1]),E.push(m[T+2])}}return{pts:Float32Array.from(E),offsetPt0:Uint32Array.from(S)}}else if(f[0].includes("TRIANGLE_STRIPS")){const y=parseInt(f[1]);for(let w=0;w<y;w++){const C=p.getInt32(a,!1)-2;a+=4;for(let S=0;S<C;S++)S%2?(A.push(p.getInt32(a+8,!1)),A.push(p.getInt32(a+4,!1)),A.push(p.getInt32(a,!1))):(A.push(p.getInt32(a,!1)),A.push(p.getInt32(a+4,!1)),A.push(p.getInt32(a+8,!1))),a+=4;a+=8}}else if(f[0].includes("POLYGONS")){const y=parseInt(f[1]),w=a,C=o();if(C.startsWith("OFFSETS")){let S=C.includes("int64");const E=new Uint32Array(y);let M=!1;for(let F=0;F<y;F++)S&&(p.getInt32(a,!1)!==0&&(M=!0),a+=4),E[F]=p.getInt32(a,!1),a+=4;if(!Number.isSafeInteger(y)||y>=2147483648||M)throw new Error("values exceed 2GB limit");const R=o();if(!R.startsWith("CONNECTIVITY"))throw new Error("Expected CONNECTIVITY after OFFSETS");S=R.includes("int64");const D=E[y-1],T=new Uint32Array(D);for(let F=0;F<D;F++)S&&(a+=4),T[F]=p.getInt32(a,!1),a+=4;for(let F=0;F<y;F++){const U=F===0?0:E[F-1],I=E[F];for(let V=1;V<I-U-1;V++)A.push(T[U]),A.push(T[U+V]),A.push(T[U+V+1])}}else{a=w;for(let S=0;S<y;S++){const E=p.getInt32(a,!1)-2;if(S===0&&E>65535)throw new Error("Invalid VTK binary polygons using little-endian data (MRtrix)");a+=4;const M=p.getInt32(a,!1);a+=4;let R=p.getInt32(a,!1);a+=4;for(let D=0;D<E;D++){const T=p.getInt32(a,!1);a+=4,A.push(M,R,T),R=T}}}}else throw new Error("Unsupported binary VTK datatype "+f[0]);const v=new Uint32Array(A);return{positions:m,indices:v}}static readWRL(t){const n=new TextDecoder("utf-8").decode(t),i=/coord\s+Coordinate\s*\{\s*point\s*\[([\s\S]*?)\]/,a=/coordIndex\s*\[([\s\S]*?)\]/,o=/color\s+Color\s*\{\s*color\s*\[([\s\S]*?)\]/,l=i.exec(n),u=a.exec(n),f=o.exec(n);if(!l||!u)throw new Error("Invalid WRL file: Could not find vertices or indices.");const h=new Float32Array(l[1].trim().split(/[\s,]+/).map(Number));let d=null;if(f){d=new Float32Array(f[1].trim().split(/[\s,]+/).map(Number));const p=h.length/3;d.length!==p*3&&(console.warn(`Unexpected color count: expected ${p*3}, got ${d.length}`),d=null)}const m=new Uint32Array(u[1].trim().split(/[\s,]+/).map(Number).filter(p=>p!==-1));return{positions:h,indices:m,colors:d}}static readDFS(t){const n=new DataView(t),i=n.getUint32(0,!0),a=n.getUint16(4,!0);(i!==1599292996||a!==17740)&&G.warn("Not a little-endian brainsuite DFS mesh");const o=n.getUint32(12,!0),l=n.getUint32(24,!0),u=n.getUint32(28,!0),f=n.getUint32(48,!0);let h=o;const d=new Uint32Array(t,h,l*3);h+=l*3*4;const m=new Float32Array(t,h,u*3);for(let A=0;A<u*3;A+=3){const v=m[A];m[A]=m[A+1],m[A+1]=v}let p;return f>=0&&(p=new Float32Array(t,f,u*3)),{positions:m,indices:d,colors:p}}static async readMZ3(t,n=0){if(t.byteLength<20)throw new Error("File too small to be mz3: bytes = "+t.byteLength);let i=new DataView(t),a=t,o=i.getUint16(0,!0);if(o===35615||o===8075){const U=await Ce.decompress(new Uint8Array(t));i=new DataView(U.buffer),o=i.getUint16(0,!0),a=U.buffer}const l=i.getUint16(2,!0),u=i.getUint32(4,!0);let f=i.getUint32(8,!0);const h=i.getUint32(12,!0);if(Ls.debug("MZ3 magic %d attr %d face %d vert %d skip %d",o,l,u,f,h),o!==23117)throw new Error("Invalid MZ3 file");const d=(l&1)!==0,m=(l&2)!==0,p=(l&4)!==0;let A=(l&8)!==0;const v=(l&16)!==0,y=(l&32)!==0,w=(l&64)!==0;if(Ls.debug(`isFace=${d} isVert=${m} isRGBA=${p} isSCALAR=${A} isDOUBLE=${v} isAOMAP=${y} isLOOKUP=${w}`),l>127)throw new Error("Unsupported future version of MZ3 file");let C=4;v&&(C=8);let S=0;if(n>0&&!d&&u<1&&!p&&(A=!0),A){const U=n||f,I=16+h+(d?u*12:0)+(m?U*12:0)+(p?U*4:0),V=Math.floor((a.byteLength-I)/C);f!==n&&V%n===0&&(f=n),S=Math.floor(V/f),S<1&&(G.warn("Corrupt MZ3: file reports NSCALAR but not enough bytes"),A=!1)}if(f<3&&n<3)throw new Error("Not a mesh MZ3 file (maybe scalar)");n>0&&n!==f&&G.warn("Layer has "+f+"vertices, but background mesh has "+n);let E=16+h;const M=new DataView(a);let R=null;if(d){R=new Uint32Array(u*3);for(let U=0;U<u*3;U++)R[U]=M.getUint32(E,!0),E+=4}let D=null;if(m){D=new Float32Array(f*3);for(let U=0;U<f*3;U++)D[U]=M.getFloat32(E,!0),E+=4}let T=null;if(p){T=new Float32Array(f*3);for(let U=0;U<f;U++){for(let I=0;I<3;I++)T[U*3+I]=M.getUint8(E++)/255;E++}}let F=new Float32Array;if(A&&S>0)if(v){const U=new Float64Array(S*f);for(let I=0;I<S*f;I++)U[I]=M.getFloat64(E,!0),E+=8;F=Float32Array.from(U)}else{F=new Float32Array(S*f);for(let U=0;U<S*f;U++)F[U]=M.getFloat32(E,!0),E+=4}if(n>0&&w&&A){const U=new TextDecoder("utf-8"),I=new Uint8Array(a,16,h),V=U.decode(I),N=JSON.parse(V),Y=Xe.makeLabelLut(N);return{scalars:F,colormapLabel:Y}}if(n>0&&p&&A){let U=F[0];for(let N=0;N<f;N++)U=Math.max(U,F[N]);const I={R:[],G:[],B:[],A:[],I:[],labels:[]};for(let N=0;N<=U;N++)for(let Y=0;Y<f;Y++)if(N===F[Y]){const P=Y*3;I.I.push(N),I.R.push(T[P]*255),I.G.push(T[P+1]*255),I.B.push(T[P+2]*255),I.A.push(255),I.labels.push(`${N}`);break}const V=Xe.makeLabelLut(I);return{scalars:F,colormapLabel:V}}return n>0?{scalars:F}:{positions:D,indices:R,scalars:F,colors:T}}static readPLY(t){const n=t.byteLength,i=new Uint8Array(t);let a=0;function o(){for(;a<n&&i[a]===10;)a++;const F=a;for(;a<n&&i[a]!==10;)a++;return a++,a-F<1?"":new TextDecoder().decode(t.slice(F,a-1))}let l=o();if(!l.startsWith("ply"))throw new Error("Not a valid PLY file");l=o();const u=l.includes("ascii");function f(F){if(F==="char"||F==="uchar"||F==="int8"||F==="uint8")return 1;if(F==="short"||F==="ushort"||F==="int16"||F==="uint16")return 2;if(F==="int"||F==="uint"||F==="int32"||F==="uint32"||F==="float"||F==="float32")return 4;if(F==="double")return 8;throw new Error("Unknown data type: "+F)}const h=l.includes("binary_little_endian");let d=0,m=!1,p=0,A=0,v=0,y=0,w=0,C=0,S=0;for(;a<n&&!l.startsWith("end_header");){if(l=o(),l.startsWith("comment"))continue;let F=l.split(/\s/);if(l.startsWith("element vertex"))for(d=parseInt(F[F.length-1]),l=o(),F=l.split(/\s/);l.startsWith("property");){const U=F[1];F[2]==="x"&&U.startsWith("double")?m=!0:F[2]==="x"&&!U.startsWith("float")&&G.error("Error: expect ply xyz to be float or double: "+l),p+=f(U),l=o(),F=l.split(/\s/)}if(l.startsWith("element face"))for(S=parseInt(F[F.length-1]),l=o(),F=l.split(/\s/);l.startsWith("property");){if(F[1]==="list")v=f(F[2]),y=f(F[3]),A+=v+3*y;else{const U=f(F[1]);A+=U,y===0&&(w+=U,C++)}l=o(),F=l.split(/\s/)}}if(u){S<1&&G.error(`Malformed ply format: faces ${S} `);const F=new Float32Array(d*3);let U=0;for(let N=0;N<d;N++){l=o();const Y=l.split(/\s/);F[U]=parseFloat(Y[0]),F[U+1]=parseFloat(Y[1]),F[U+2]=parseFloat(Y[2]),U+=3}let I=new Uint32Array(S*3),V=0;for(let N=0;N<S;N++){l=o();const Y=l.split(/\s/),P=parseInt(Y[C])-2;if(P<1)break;if(V+P*3>I.length){const j=new Uint32Array(I.length+I.length);j.set(I),I=j.slice()}const Q=parseInt(Y[C+1]);let k=parseInt(Y[C+2]);for(let j=0;j<P;j++){const H=parseInt(Y[C+3+j]);I[V+0]=Q,I[V+1]=k,I[V+2]=H,k=H,V+=3}}return I.length!==V&&(I=I.slice(0,V)),{positions:F,indices:I}}(p<12||v<1||y<1||S<1)&&G.warn(`Malformed ply format: stride ${p} count ${v} iBytes ${y} iStrideBytes ${A} iPadBytes ${w} faces ${S}`);const E=new DataView(t);let M;if(a%4===0&&p===12&&h)M=new Float32Array(t,a,d*3),a+=d*p;else{M=new Float32Array(d*3);let F=0;for(let U=0;U<d;U++)m?(M[F]=E.getFloat64(a,h),M[F+1]=E.getFloat64(a+8,h),M[F+2]=E.getFloat64(a+16,h)):(M[F]=E.getFloat32(a,h),M[F+1]=E.getFloat32(a+4,h),M[F+2]=E.getFloat32(a+8,h)),F+=3,a+=p}const R=new Uint32Array(S*3);let D=!0,T=0;if(v===1&&y===4&&A===13)for(let F=0;F<S;F++){const U=E.getUint8(a);a+=v,U!==3&&(D=!1),R[T]=E.getUint32(a,h),a+=4,R[T+1]=E.getUint32(a,h),a+=4,R[T+2]=E.getUint32(a,h),a+=4,T+=3}else{let F=a;for(let U=0;U<S;U++){a=F+w;let I=0;v===1?I=E.getUint8(a):v===2?I=E.getUint16(a,h):v===4&&(I=E.getUint32(a,h)),a+=v,I!==3&&(D=!1);for(let V=0;V<3;V++)y===1?R[T]=E.getUint8(a):y===2?R[T]=E.getUint16(a,h):y===4&&(R[T]=E.getUint32(a,h)),T++,a+=y;F+=A}}return D||G.warn("Only able to read PLY meshes limited to triangles."),{positions:M,indices:R}}static readICO(t){const a=new TextDecoder("utf-8").decode(t).split(`
`);let o=a[0].trim().split(/\s+/);o.length>1&&G.warn("This is not a valid FreeSurfer ICO/TRI mesh.");const l=parseInt(o[0]),u=new Float32Array(l*3);let f=1;for(let m=0;m<l;m++){const p=a[f].trim().split(/\s+/);f++;let A=parseInt(p[0])-1;const v=parseFloat(p[1]),y=parseFloat(p[2]),w=parseFloat(p[3]);if(A<0||A>=l){G.error("ICO vertices corrupted");break}A*=3,u[A]=v,u[A+1]=y,u[A+2]=w}o=a[f].trim().split(/\s+/),f++;const h=parseInt(o[0]),d=new Uint32Array(h*3);for(let m=0;m<h;m++){const p=a[f].trim().split(/\s+/);f++;let A=parseInt(p[0])-1;const v=parseInt(p[1])-1,y=parseInt(p[2])-1,w=parseInt(p[3])-1;if(A<0||A>=h){G.error("ICO indices corrupted");break}A*=3,d[A]=v,d[A+1]=y,d[A+2]=w}for(let m=0;m<d.length;m+=3){const p=d[m];d[m]=d[m+1],d[m+1]=p}return{positions:u,indices:d}}static readGEO(t,n=!1){const o=new TextDecoder("utf-8").decode(t).split(`
`),l=o[0].trim().split(/\s+/),u=parseInt(l[0]);let f=parseInt(l[1]),h=parseInt(l[2]);const d=parseInt(l[3]);(u>1||d!==h*3)&&G.warn("Multi-part BYU/GEO header or not a triangular mesh.");const m=[];f*=3;let p=0,A=2;for(;p<f;){const S=o[A].trim().split(/\s+/);A++;for(let E=0;E<S.length&&(m.push(parseFloat(S[E])),p++,!(p>=f));E++);}const v=[];h*=3;let y=0;for(;y<h;){const S=o[A].trim().split(/\s+/);A++;for(let E=0;E<S.length&&(v.push(Math.abs(parseInt(S[E]))-1),y++,!(y>=h));E++);}if(n)for(let S=0;S<v.length;S+=3){const E=v[S];v[S]=v[S+1],v[S+1]=E}const w=new Float32Array(m),C=new Uint32Array(v);return{positions:w,indices:C}}static readOFF(t){const a=new TextDecoder("utf-8").decode(t).split(`
`),o=[],l=[];let u=0;a[u].includes("OFF")?u++:G.warn("File does not start with OFF");let f=a[u].trim().split(/\s+/);const h=parseInt(f[0]),d=parseInt(f[1]);u++;for(let A=0;A<h;A++)f=a[u].trim().split(/\s+/),o.push(parseFloat(f[0])),o.push(parseFloat(f[1])),o.push(parseFloat(f[2])),u++;for(let A=0;A<d;A++)f=a[u].trim().split(/\s+/),parseInt(f[0])!==3&&G.warn("Only able to read OFF files with triangular meshes"),l.push(parseInt(f[1])),l.push(parseInt(f[2])),l.push(parseInt(f[3])),u++;const m=new Float32Array(o),p=new Uint32Array(l);return{positions:m,indices:p}}static readOBJMNI(t){const a=new TextDecoder("utf-8").decode(t).trim().split(/\s*,\s*|\s+/);(a.length<1||a[0]!=="P")&&G.warn("This is not a valid MNI OBJ mesh.");let o=6;const l=parseInt(a[o++]),u=l*3,f=new Float32Array(u);for(let v=0;v<u;v++)f[v]=parseFloat(a[o++]);o+=u;const h=parseInt(a[o++]),d=parseInt(a[o++]);(h<1||d<0||d>2)&&G.warn("This is not a valid MNI OBJ mesh.");let m=1;d===1?m=h:d===1&&(m=l),o+=m*4,o+=h;const p=h*3,A=new Uint32Array(p);for(let v=0;v<p;v++)A[v]=parseInt(a[o++]);return{positions:f,indices:A}}static async readOBJ(t){const n=new Uint8Array(t,0,2);n[0]===31&&n[1]===139&&(t=await Ce.decompressToBuffer(new Uint8Array(t)));const a=new TextDecoder("utf-8").decode(t);if(a[0]==="P")return this.readOBJMNI(t);const o=a.split(`
`),l=o.length,u=[],f=[];for(let A=0;A<l;A++){const v=o[A];if(v[0]==="v"&&v[1]===" "){const y=v.trim().split(/\s+/);u.push(parseFloat(y[1])),u.push(parseFloat(y[2])),u.push(parseFloat(y[3]))}if(v[0]==="f"){const y=v.trim().split(/\s+/),w=y.length-3;if(w<1)break;let C=y[1].split("/");const S=parseInt(C[0])-1;C=y[2].split("/");let E=parseInt(C[0])-1;for(let M=0;M<w;M++){C=y[3+M].split("/");const R=parseInt(C[0])-1;f.push(S),f.push(E),f.push(R),E=R}}}const h=new Float32Array(u),d=new Uint32Array(f);let m=d[0],p=d[0];for(let A=1;A<d.length;A++)d[A]<m&&(m=d[A]),d[A]>p&&(p=d[A]);if(p-m+1>h.length/3)throw new Error("Not a valid OBJ file");for(let A=0;A<d.length;A++)d[A]-=m;return{positions:h,indices:d}}static readFreeSurfer(t){const n=new Uint8Array(t);if(n[0]===35&&n[1]===33&&n[2]===97)return gt.readASC(t);const i=new DataView(t),a=i.getUint32(0,!1),o=i.getUint32(4,!1);(a!==4294966883||o!==1919246708)&&Ls.debug("Unable to recognize file type: does not appear to be FreeSurfer format.");let l=0;for(;i.getUint8(l)!==10;)l++;l+=2;let u=i.getUint32(l,!1);l+=4;let f=i.getUint32(l,!1);l+=4,u*=3;const h=new Float32Array(u);for(let A=0;A<u;A++)h[A]=i.getFloat32(l,!1),l+=4;f*=3;const d=new Uint32Array(f);for(let A=0;A<f;A++)d[A]=i.getUint32(l,!1),l+=4;const m=i.getUint32(l,!1);l+=4;let p=m===20;if(!p){const A=i.getUint32(l,!1);l+=4;const v=i.getUint32(l,!1);l+=4,p=m===2&&A===0&&v===20}if(!p)G.warn("Unknown FreeSurfer Mesh extension code.");else{const v=new TextDecoder().decode(t.slice(l)).trim().split(`
`);for(let y=0;y<v.length;y++){if(!v[y].startsWith("cras"))continue;const C=v[y].split("=")[1].trim().split(" ").map(Number),S=Math.floor(h.length/3);let E=0;for(let M=0;M<S;M++)h[E]+=C[0],E++,h[E]+=C[1],E++,h[E]+=C[2],E++}}return{positions:h,indices:d}}static async readSRF(t){const n=new Uint8Array(t);if(n[0]===35&&n[1]===33&&n[2]===97)return gt.readASC(t);n[0]===31&&n[1]===139&&(t=(await Ce.decompress(new Uint8Array(t))).buffer);const i=new DataView(t),a=i.getFloat32(0,!0),o=i.getUint32(8,!0),l=i.getUint32(12,!0),u=i.getFloat32(16,!0),f=i.getFloat32(20,!0),h=i.getFloat32(24,!0),d=new Float32Array(o*3);let m=28,p=1;for(let D=0;D<o;D++)d[p]=-i.getFloat32(m,!0)+u,p+=3,m+=4;p=2;for(let D=0;D<o;D++)d[p]=-i.getFloat32(m,!0)+f,p+=3,m+=4;p=0;for(let D=0;D<o;D++)d[p]=-i.getFloat32(m,!0)+h,p+=3,m+=4;m=28+24*o;const A=i.getFloat32(m,!0),v=i.getFloat32(m+4,!0),y=i.getFloat32(m+8,!0),w=i.getFloat32(m+16,!0),C=i.getFloat32(m+20,!0),S=i.getFloat32(m+24,!0);m+=32;const E=new Float32Array(o*3),M=new Uint32Array(t,m,o);p=0;for(let D=0;D<o;D++){const T=M[D];T>1056964608&&(E[p+0]=(T>>16&255)/255,E[p+1]=(T>>8&255)/255,E[p+2]=(T&255)/255),T===0&&(E[p+0]=A,E[p+1]=v,E[p+2]=y),T===1&&(E[p+0]=w,E[p+1]=C,E[p+2]=S),p+=3}m+=o*4;for(let D=0;D<o;D++){const T=i.getUint32(m,!0);m+=4+4*T}const R=new Uint32Array(l*3);for(let D=0;D<l*3;D++)R[D]=i.getInt32(m,!0),m+=4;return a!==4&&G.warn("Not valid SRF"),{positions:d,indices:R,colors:E}}static readTxtSTL(t){const a=new TextDecoder("utf-8").decode(t).split(`
`);if(!a[0].startsWith("solid"))throw new Error("Not a valid STL file");const o=[];for(let h=1;h<a.length;h++){if(!a[h].includes("vertex"))continue;const d=a[h].trim().split(/\s+/);for(let m=1;m<d.length;m++)o.push(parseFloat(d[m]))}const l=Math.floor(o.length/3);if(l*3!==o.length)throw new Error("Unable to parse ASCII STL file.");const u=new Float32Array(o),f=new Uint32Array(l);for(let h=0;h<l;h++)f[h]=h;return{positions:u,indices:f}}static readSTL(t){if(t.byteLength<134)throw new Error("File too small to be STL: bytes = "+t.byteLength);const n=new DataView(t);if(n.getUint32(0,!0)===1768714099)return gt.readTxtSTL(t);const a=n.getUint32(80,!0),o=3*a;if(t.byteLength<84+a*50)throw new Error("STL file too small to store triangles = "+a);const l=new Uint32Array(o),u=new Float32Array(o*3);let f=96,h=0;for(let d=0;d<a;d++){for(let m=0;m<9;m++)u[h]=n.getFloat32(f,!0),h+=1,f+=4;f+=14}for(let d=0;d<o;d++)l[d]=d;return{positions:u,indices:l}}static decimateLayerVertices(t,n){if(t%n===0)return t;const i=12,a=Math.round(Math.log((t-2)/(i-2))/Math.log(4)),o=Math.round(Math.log((n-2)/(i-2))/Math.log(4)),l=Math.pow(4,a)*(i-2)+2,u=Math.pow(4,o)*(i-2)+2;return l!==t||u!==n?t:n}static async readNII2(t,n=0,i=""){let a=new Float32Array;const o=t.byteLength;let l=!0;const u=new DataView(t);let f=u.getUint16(0,l);if(f===469893120&&(l=!1,f=u.getUint16(0,l)),f!==540)throw new Error("Not a valid NIfTI-2 dataset");const h=Number(u.getBigInt64(168,l)),d=u.getFloat64(176,l),m=u.getFloat64(184,l);(d!==1||m!==0)&&G.warn("ignoring scale slope and intercept");const p=u.getUint32(504,l),A=u.getUint16(12,l);if(A!==2&&A!==4&&A!==8&&A!==16)throw new Error("Unsupported NIfTI datatype "+A);let v=1;const y=[1,1,1,1,1,1,1,1];for(let w=1;w<8;w++)y[w]=Math.max(Number(u.getBigInt64(16+w*8,l)),1),v*=y[w];if(p>=3e3&&p<=3099&&h>580){let w=function(){for(;U<o&&F[U]===10;)U++;const k=U;for(;U<o&&F[U]!==10;)U++;return U++,U-k<1?"":new TextDecoder().decode(t.slice(k,U-1)).trim()},C=function(){let k=w();if(!k.startsWith("<")||k.endsWith(">"))return k;for(;U<o&&!k.endsWith(">");)k+=w();return k},S=function(k,j=!1){const H=I.indexOf(k);if(H<0)return 1;const Z=I.indexOf('"',H)+1,J=I.indexOf('"',Z),X=I.slice(Z,J);return j?X:parseInt(X)},E=0,M=0,R=0,D="",T=new Uint32Array;const F=new Uint8Array(t);let U=552,I;const V=y[5],N=new Float32Array(n*V);for(;U<o&&(I=C(),!I.includes("</CIFTI>"));)if(I.includes("<BrainModel")){const k=S("SurfaceNumberOfVertices="),j=S("BrainStructure=",!0).toUpperCase();if(k%n!==0)continue;let H=!1;if(i.includes("CORTEX")&&j.includes("CORTEX")&&(H=!0),!H||(H=!1,i.includes("LEFT")&&j.includes("LEFT")&&(H=!0),i.includes("RIGHT")&&j.includes("RIGHT")&&(H=!0),!H))continue;if(R=k,E=S("IndexOffset="),M=S("IndexCount="),D=j,I.includes("<VertexIndices>")||(I=C()),!I.startsWith("<VertexIndices>")||!I.endsWith("</VertexIndices>"))return G.warn("Unable to find CIfTI <VertexIndices>"),N;I=I.slice(15,-16);const Z=I.trim().split(/\s+/);Z.length<M&&G.error("Error parsing VertexIndices"),T=new Uint32Array(M);for(let J=0;J<M;J++)T[J]=parseInt(Z[J])}if(R===0||T.length===0)return G.warn("Unable to find CIfTI structure that matches the mesh."),N;if(A!==16)return G.warn("Only able to read float32 CIfTI (only known datatype)."),N;const Y=new Float32Array(M*V),P=h+V*E*4;for(let k=0;k<M*V;k++)Y[k]=u.getFloat32(P+k*4,l);let Q=0;for(let k=0;k<M;k++)for(let j=0;j<V;j++)N[T[k]+j*n]=Y[Q],Q++;return G.debug("CIfTI diagnostics",R,D,E,M,E,i),N}if(v=this.decimateLayerVertices(v,n),v%n!==0)throw new Error("Vertices in layer ("+v+") is not a multiple of number of vertices ("+n+")");if(l)A===16?a=new Float32Array(t,h,v):A===8?a=new Int32Array(t,h,v):A===4&&(a=new Int16Array(t,h,v));else if(A===16){a=new Float32Array(v);for(let w=0;w<v;w++)a[w]=u.getFloat32(h+w*4,l)}else if(A===8){a=new Int32Array(v);for(let w=0;w<v;w++)a[w]=u.getInt32(h+w*4,l)}else if(A===4){a=new Int16Array(v);for(let w=0;w<v;w++)a[w]=u.getInt16(h+w*2,l)}return A===2&&(a=new Uint8Array(t,h,v)),a}static async readNII(t,n,i=""){const a=n.length/3;let o=new Float32Array,l=!0,u=new DataView(t),f=u.getUint16(0,l);if(f===540||f===469893120)return gt.readNII2(t,a,i);if(f===23553&&(l=!1,f=u.getUint16(0,l)),f!==348){const D=await Ce.decompress(new Uint8Array(t));if(u=new DataView(D.buffer),t=D.buffer,f=u.getUint16(0,l),f===540||f===469893120)return gt.readNII2(t,a,i);f===23553&&(l=!1,f=u.getUint16(0,l))}f!==348&&G.error("Not a valid NIfTI image.");const h=u.getFloat32(108,l),d=u.getFloat32(112,l),m=u.getFloat32(116,l),p=u.getUint16(252,l),A=u.getUint16(254,l),v=u.getUint16(70,l);if(v!==2&&v!==4&&v!==8&&v!==16)throw new Error("Unsupported NIfTI datatype "+v);const y=Ue();for(let D=0;D<12;D++)y[D]=u.getFloat32(280+D*4,l);let w=1;const C=new Array(8);for(let D=0;D<8;D++)C[D]=u.getUint16(40+D*2,l),!(D<1)&&(w*=C[D]||1);let S=!1,E=this.decimateLayerVertices(w,a);if(E%a!==0)if(C[0]>=3&&C[1]>1&&C[2]>1&&C[3]>1)S=!0,E=C[1]*C[2]*C[3];else throw new Error("Voxels in layer ("+w+") is not a multiple of number of vertices ("+a+")");if(w=E,l)v===16?o=new Float32Array(t,h,w):v===8?o=new Int32Array(t,h,w):v===4&&(o=new Int16Array(t,h,w));else if(v===16){o=new Float32Array(w);for(let D=0;D<w;D++)o[D]=u.getFloat32(h+D*4,l)}else if(v===8){o=new Int32Array(w);for(let D=0;D<w;D++)o[D]=u.getInt32(h+D*4,l)}else if(v===4){o=new Int16Array(w);for(let D=0;D<w;D++)o[D]=u.getInt16(h+D*2,l)}if(v===2&&(o=new Uint8Array(t,h,w)),Number.isFinite(d)&&Number.isFinite(m)&&d!==0&&(d!==1||m!==0)){const D=new Float32Array(w);for(let T=0;T<w;T++)D[T]=o[T]*d+m;o=D}let M=o[0],R=M;for(let D=0;D<w;D++)isNaN(o[D])&&(o[D]=0),M=Math.min(M,o[D]),R=Math.max(R,o[D]);if(G.debug(`Layer Range ${M}..${R} slope ${d} inter ${m}`),S){let D=function(j,H){const Z=[0,0,0];return Z[0]=H[0]*j[0]+H[1]*j[1]+H[2]*j[2]+H[3],Z[1]=H[4]*j[0]+H[5]*j[1]+H[6]*j[2]+H[7],Z[2]=H[8]*j[0]+H[9]*j[1]+H[10]*j[2]+H[11],Z};const T=new Float32Array(a);G.warn("Sampling voxel intensities at mesh vertices (assumes precise alignment)."),(p>A||A<=0)&&G.warn(`Requires valid sform (sform_code = ${A})`);const F=Ue();Kt(F,y);const U=C[1],I=C[2],V=C[3],N=U*I;let Y=0,P=0,Q=0;for(;P<a;){const j=[n[Y],n[Y+1],n[Y+2]],H=D(j,F);Y+=3,P+=1;const Z=Math.floor(H[0]),J=Math.floor(H[1]),X=Math.floor(H[2]),K=Math.ceil(H[0]),te=Math.ceil(H[1]),ae=Math.ceil(H[2]);if(Z<0||K>=U||J<0||te>=I||X<0||ae>=V)continue;const fe=Z+J*U+X*N,de=new Float32Array(8);de[0]=o[fe],de[1]=o[fe+1],de[2]=o[fe+U],de[3]=o[fe+U+1],de[4]=o[fe+N],de[5]=o[fe+N+1],de[6]=o[fe+N+U],de[7]=o[fe+N+U+1];let he=de[0],Pe=he;for(let Re=1;Re<8;Re++)he=Math.max(he,de[Re]),Pe=Math.min(Pe,de[Re]);Math.abs(Pe)>he&&(he=Pe),T[P-1]=he,Q++}const k=Q/a;k<.1&&G.warn(`${Q} of ${a} vertices in range (${(k*100).toFixed(1)}%)`),o=T}return o}static async readMGH(t,n=0,i=!1){let a=new DataView(t),o=t;if(a.getUint8(0)===31&&a.getUint8(1)===139){const T=await Ce.decompress(new Uint8Array(t));o=new ArrayBuffer(T.byteLength),new Uint8Array(o).set(new Uint8Array(T)),a=new DataView(T.buffer)}const l=a.getInt32(0,!1),u=Math.max(1,a.getInt32(4,!1)),f=Math.max(1,a.getInt32(8,!1)),h=Math.max(1,a.getInt32(12,!1)),d=Math.max(1,a.getInt32(16,!1)),m=a.getInt32(20,!1);let p=284;const A=!1;(l!==1||m<0||m>4)&&G.warn("Not a valid MGH file");let v=u*f*h*d,y=[];if(v=this.decimateLayerVertices(v,n),v%n!==0)return G.warn("Vertices in layer ("+v+") is not a multiple of number of vertices ("+n+")"),y;if(m===3){y=new Float32Array(v);for(let T=0;T<v;T++)y[T]=a.getFloat32(p+T*4,A)}else if(m===1){y=new Int32Array(v);for(let T=0;T<v;T++)y[T]=a.getInt32(p+T*4,A)}else if(m===4){y=new Int16Array(v);for(let T=0;T<v;T++)y[T]=a.getInt16(p+T*2,A)}else m===0&&(y=new Uint8Array(t,p,v));if(!i)return y;let w=4;m===4&&(w=2),m===0&&(w=1),p+=w*v,p+=16;const C=1,S=2,E=20,M=30,R=o.byteLength;let D;for(;p<R-8;){const T=a.getInt32(p+=4,A);let F=0;switch(T){case M:F=a.getInt32(p+=4,A)-1;break;case E:case S:F=0;break;case C:F=0;{let U=a.getInt32(p+=4,A);if(U>0)return G.warn("unsupported CTABreadFromBinaryV1"),y;if(U=-U,U!==2)return G.warn("CTABreadFromBinary: unknown version"),y;const I=a.getInt32(p+=4,A);if(I<0)return G.warn("CTABreadFromBinaryV2: nentries was ",I),y;const V=a.getInt32(p+=4,A);p+=V;const N=a.getInt32(p+=4,A);if(N<0)return y;const Y={R:[],G:[],B:[],A:[],I:[],labels:[]};for(let P=0;P<N;P++){const Q=a.getInt32(p+=4,A),k=a.getInt32(p+=4,A);let j=p+4,H="";for(let te=0;te<k;te++){const ae=a.getUint8(j++);if(ae===0)break;H+=String.fromCharCode(ae)}p+=k;const Z=a.getInt32(p+=4,A),J=a.getInt32(p+=4,A),X=a.getInt32(p+=4,A),K=255-a.getInt32(p+=4,A);Y.I.push(Q),Y.R.push(Z),Y.G.push(J),Y.B.push(X),Y.A.push(K),Y.labels.push(H)}D=Xe.makeLabelLut(Y)}break;default:F=a.getInt32(p+=8,A)}p+=F}return{scalars:y,colormapLabel:D}}static readX3D(t){const n=t.byteLength;if(n<20)throw new Error("File too small to be X3D: bytes = "+n);const i=new Uint8Array(t);let a=0;function o(){for(;a<n&&i[a]!==60;)a++;const E=a;for(;a<n&&i[a]!==62;)a++;const M=a;return new TextDecoder().decode(t.slice(E,M+1)).trim()}let l=o();function u(E){const M=l.indexOf(E+"=");if(M<0)return"";const R=l[M+E.length+1],D=l.indexOf(R,M)+1,T=l.indexOf(R,D);return l.slice(D,T)}function f(E){const M=l.indexOf(E+"=");if(M<0)return 1;const R=l[M+E.length+1],D=l.indexOf(R,M)+1,T=l.indexOf(R,D);let F=l.slice(D,T).trim();F=F.replace(/,\s*$/,"");const U=F.trim().split(/\s*,\s*|\s+/);if(U.length<2)return parseFloat(F);let I=new Array(U.length),V=0;for(let N=0;N<U.length;N++){const Y=parseFloat(U[N]);isFinite(Y)&&(I[V]=Y,V++)}return I=I.slice(0,V),I}l.includes("xml version")||G.warn("Not a X3D image");let h=[],d=[],m=[],p=[],A=[0,0,0,0],v=[0,0,0,0],y=[255,255,255,255],w=[255,255,255,255];const C={};function S(){if(!l.endsWith("/>"))if(l.startsWith("<Appearance>"))for(;a<n&&!l.endsWith("</Appearance>");)l+=o();else for(;a<n&&!l.endsWith("/>");)l+=o();const E=u("USE");if(E.length>1){E in C?y=C[E]:G.warn("Unable to find DEF for "+E);return}const M=f("diffuseColor");if(M.length<3)return;y[0]=Math.round(M[0]*255),y[1]=Math.round(M[1]*255),y[2]=Math.round(M[2]*255);const R=u("DEF");R.length<1||(C[R]=y)}for(;a<n;)if(l=o(),y=w.slice(),l.startsWith("<Transform")&&(A=f("translation"),v=f("rotation")),l.startsWith("<Appearance")&&(S(),w=y.slice()),l.startsWith("<Shape")){let E=1,M=1,R=[],D=[];for(;a<n&&(l=o(),l.startsWith("<Appearance")&&S(),!l.startsWith("</Shape"));){if(l.startsWith("<Sphere")&&(E=f("radius"),M=-1),l.startsWith("<Cylinder")&&(E=f("radius"),M=f("height")),l.startsWith("<IndexedFaceSet")&&(M=-2,R=f("coordIndex")),l.startsWith("<IndexedTriangleSet")&&(M=-7,R=f("index")),l.startsWith("<IndexedTriangleStripSet")&&(M=-3,R=f("index")),l.startsWith("<Coordinate")){D=f("point");const T=D.length%3;T!==0&&(D=D.slice(0,-T))}l.startsWith("<Color")&&(p=f("color")),l.startsWith("<Box")&&(M=-4,G.warn("Unsupported x3d shape: Box")),l.startsWith("<Cone")&&(M=-5,G.warn("Unsupported x3d shape: Cone")),l.startsWith("<ElevationGrid")&&(M=-6,G.warn("Unsupported x3d shape: ElevationGrid"))}if(!(M<-3&&M!==-7))if(M<-1){if(R.length<1||D.length<3||D.length===void 0){G.warn("Indexed mesh must specify indices and points");break}const T=Math.floor(h.length/3);let F=2;if(M===-7)d=[...d,...R];else if(M===-2){let V=0;for(;F<R.length;)R[F]>=0?(d.push(R[V]+T),d.push(R[F-1]+T),d.push(R[F-0]+T),F+=1):(F+=3,V=F-2)}else for(;F<R.length;)R[F]>=0?(d.push(R[F-2]+T),d.push(R[F-1]+T),d.push(R[F-0]+T),F+=1):F+=3;h=[...h,...D];const U=Math.floor(D.length/3),I=Array(U).fill(y).flat();if(p.length===U*3){let V=0,N=0;for(let Y=0;Y<U;Y++){for(let P=0;P<3;P++)I[N]=Math.round(p[V]*255),V++,N++;N++}}m=[...m,...I]}else if(M<0)Br.makeColoredSphere(h,d,m,E,A,y);else{const T=Ue();py(T,v[3],[v[0],v[1],v[2]]);const F=nt(0,-M*.5,0,1),U=nt(0,+M*.5,0,1);Ft(F,F,T),Ft(U,U,T),Gg(F,F,A),Gg(U,U,A);const I=ce(F[0],F[1],F[2]),V=ce(U[0],U[1],U[2]);Br.makeColoredCylinder(h,d,m,I,V,E,y)}}return{positions:Float32Array.from(h),indices:Uint32Array.from(d),rgba255:Uint8Array.from(m)}}static async readGII(t,n=0){let i=t.byteLength;if(i<20)throw new Error("File too small to be GII: bytes = "+i);let a=new TextDecoder("ascii").decode(t);if(a[0].charCodeAt(0)===31){const N=await Ce.decompress(new Uint8Array(t));t=N.buffer,a=new TextDecoder("ascii").decode(N.buffer)}let o=0;function l(){let N=!0,Y=o;for(;N;){for(;o<i&&a[o]!=="<";)o++;for(Y=o;o<i&&a[o]!==">";)o++;if(N=a[o-1]==="/",Y+1<i&&a[Y+1]==="/"&&(o+=1,N=!0),o>=i)break}const P=new TextDecoder().decode(t.slice(Y+1,o)).trim(),Q=P.split(" ")[0].trim(),k=o;let j=o,H=o;if(a[Y+1]!=="?"&&a[Y+1]!=="!"){const Z="</"+Q+">";j=a.indexOf(Z,k),H=j+Z.length-1}return{name:P,startPos:Y,contentStartPos:k,contentEndPos:j,endPos:H}}let u=l();if(!u.name.startsWith("?xml"))throw new Error("readGII: Invalid XML file");for(;!u.name.startsWith("GIFTI")&&u.endPos<i;)u=l();if(!u.name.startsWith("GIFTI")||u.contentStartPos===u.contentEndPos)throw new Error("readGII: XML file does not include GIFTI tag");i=u.contentEndPos;let f=new Float32Array,h=new Uint32Array,d=new Float32Array,m="",p=!1,A=!1,v=!1,y=!1,w=[1,1,1];const C=[0,0,0];let S=0,E=!1,M=!1,R=0,D=!1;u.endPos=u.contentStartPos;let T="";function F(N,Y=!1){const P=T.indexOf(N);if(P<0)return 1;const Q=T.indexOf('"',P)+1,k=T.indexOf('"',Q),j=T.slice(Q,k);return Y?parseFloat(j):parseInt(j)}function U(N){const Y=T.indexOf(N);if(Y<0)return"";const P=Y+N.length,Q=T.indexOf("]",P);return T.slice(P,Q)}const I={R:[],G:[],B:[],A:[],I:[],labels:[]};for(;u.endPos<i&&u.name.length>1;){if(u=l(),u.name.startsWith("Label Key")&&(T=u.name,I.I.push(F("Key=")),I.R.push(Math.round(255*F("Red=",!0))),I.G.push(Math.round(255*F("Green=",!0))),I.B.push(Math.round(255*F("Blue=",!0))),I.A.push(Math.round(255*F("Alpha",!0))),T=new TextDecoder().decode(t.slice(u.contentStartPos+1,u.contentEndPos)).trim(),I.labels.push(U("<![CDATA["))),u.name.trim()==="Data"){if(v)continue;T=new TextDecoder().decode(t.slice(u.contentStartPos+1,u.contentEndPos)).trim();let N;if(M){const Y=w[0]*w[1]*w[2],P=T.split(/\s+/);if(Y!==P.length)throw new Error("Unable to parse ASCII GIfTI");if(S===2&&(S=8),S===32&&(S=16),S===8){N=new Int32Array(Y);for(let Q=0;Q<Y;Q++)N[Q]=parseInt(P[Q])}if(S===16){N=new Float32Array(Y);for(let Q=0;Q<Y;Q++)N[Q]=parseFloat(P[Q])}}else if(typeof Buffer>"u"){let Y=function(P){const Q=atob(P),k=Q.length,j=new Uint8Array(k);for(let H=0;H<k;H++)j[H]=Q.charCodeAt(H);return j};if(E){const P=Y(T.slice());N=await Ce.decompress(new Uint8Array(P))}else N=Y(T.slice())}else if(E){const Y=Buffer.from(T.slice(),"base64");N=await Ce.decompress(new Uint8Array(Y))}else N=Buffer.from(T.slice(),"base64");if(A){if(S!==16&&G.warn("expect positions as FLOAT32"),f=new Float32Array(N.buffer),y){const Y=f.slice(),P=Y.length/3;let Q=0;for(let k=0;k<P;k++)for(let j=0;j<3;j++)f[Q]=Y[j*P+k],Q++}}else if(p){if(S!==8&&G.warn("expect indices as INT32"),h=new Uint32Array(N.buffer),y){const Y=h.slice(),P=Y.length/3;let Q=0;for(let k=0;k<P;k++)for(let j=0;j<3;j++)h[Q]=Y[j*P+k],Q++}}else{let Y=function(Q,k){const j=Q.length,H=new Float32Array(j+k.length);return H.set(Q),H.set(k,j),H};R=w[0]*w[1]*w[2],n!==0&&R%n!==0&&G.warn("Number of vertices in scalar overlay ("+R+") does not match mesh ("+n+")");let P;if(S===2){const Q=new Uint8Array(N.buffer);P=Float32Array.from(Q)}else if(S===8){const Q=new Int32Array(N.buffer);P=Float32Array.from(Q)}else if(S===16)P=new Float32Array(N.buffer);else if(S===32){const Q=new Float64Array(N.buffer);P=Float32Array.from(Q)}else throw new Error(`Invalid dataType: ${S}`);d=Y(d,P)}continue}if(u.name.trim()==="DataSpace"&&(T=new TextDecoder().decode(t.slice(u.contentStartPos+1,u.contentEndPos)).trim(),T.includes("NIFTI_XFORM_SCANNER_ANAT")&&(D=!0)),u.name.trim()==="MD"&&(T=new TextDecoder().decode(t.slice(u.contentStartPos+1,u.contentEndPos)).trim(),T.includes("AnatomicalStructurePrimary")&&T.includes("CDATA[")&&(m=U("<Value><![CDATA[").toUpperCase()),T.includes("VolGeom")&&T.includes("CDATA["))){let N=-1;if(T.includes("VolGeomC_R")&&(N=0),T.includes("VolGeomC_A")&&(N=1),T.includes("VolGeomC_S")&&(N=2),N<0)continue;C[N]=parseFloat(U("<Value><![CDATA["))}u.name.startsWith("DataArray")&&(T=u.name,w=[1,1,1],E=T.includes('Encoding="GZipBase64Binary"'),M=T.includes('Encoding="ASCII"'),p=T.includes('Intent="NIFTI_INTENT_TRIANGLE"'),A=T.includes('Intent="NIFTI_INTENT_POINTSET"'),v=T.includes('Intent="NIFTI_INTENT_VECTOR"'),y=T.includes('ArrayIndexingOrder="ColumnMajorOrder"'),T.includes('DataType="NIFTI_TYPE_UINT8"')&&(S=2),T.includes('DataType="NIFTI_TYPE_INT32"')&&(S=8),T.includes('DataType="NIFTI_TYPE_FLOAT32"')&&(S=16),T.includes('DataType="NIFTI_TYPE_FLOAT64"')&&(S=32),w[0]=F("Dim0="),w[1]=F("Dim1="),w[2]=F("Dim2="))}let V;if(I.I.length>1&&(I.A.some(Y=>Y>0)||I.A.fill(255),V=Xe.makeLabelLut(I)),n>0)return{scalars:d,colormapLabel:V,anatomicalStructurePrimary:m};if(f.length>2&&!D&&(C[0]!==0||C[1]!==0||C[2]!==0)){R=Math.floor(f.length/3);let N=0;for(let Y=0;Y<R;Y++)f[N]+=C[0],N++,f[N]+=C[1],N++,f[N]+=C[2],N++}return{positions:f,indices:h,scalars:d,colormapLabel:V,anatomicalStructurePrimary:m}}},_d=class{constructor(e,t,n,i,a){L(this,"text"),L(this,"style"),L(this,"points"),L(this,"anchor"),L(this,"onClick"),this.text=e,this.style=t,this.points=n,this.anchor=i||0,this.onClick=a}},sd=()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256},KA=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.NII=1]="NII",e[e.DCM=2]="DCM",e[e.DCM_MANIFEST=3]="DCM_MANIFEST",e[e.MIH=4]="MIH",e[e.MIF=5]="MIF",e[e.NHDR=6]="NHDR",e[e.NRRD=7]="NRRD",e[e.MHD=8]="MHD",e[e.MHA=9]="MHA",e[e.MGH=10]="MGH",e[e.MGZ=11]="MGZ",e[e.V=12]="V",e[e.V16=13]="V16",e[e.VMR=14]="VMR",e[e.HEAD=15]="HEAD",e[e.DCM_FOLDER=16]="DCM_FOLDER",e[e.SRC=17]="SRC",e[e.FIB=18]="FIB",e[e.BMP=19]="BMP",e[e.ZARR=20]="ZARR",e[e.NPY=21]="NPY",e[e.NPZ=22]="NPZ",e[e.HDR=23]="HDR",e))(KA||{}),Me=Object.freeze({...KA,parse:e=>{let t=0;switch(e.toUpperCase()){case"":case"DCM":t=2;break;case"TXT":t=3;break;case"FZ":case"GQI":case"QSDR":case"FIB":t=18;break;case"HDR":case"NII":t=1;break;case"MIH":t=4;break;case"MIF":t=5;break;case"NHDR":t=6;break;case"NRRD":t=7;break;case"MHD":t=8;break;case"MHA":t=9;break;case"MGH":t=10;break;case"MGZ":t=11;break;case"NPY":t=21;break;case"NPZ":t=22;break;case"SRC":t=17;break;case"V":t=12;break;case"V16":t=13;break;case"VMR":t=14;break;case"HEAD":t=15;break;case"PNG":case"BMP":case"GIF":case"JPG":case"JPEG":t=19;break;case"ZARR":t=20;break}return t}}),cc=(e,t="",n="",i="gray",a=1,o=NaN,l=NaN,u=!0,f=.02,h=!1,d=!1,m="",p=0,A=Me.UNKNOWN,v=NaN,y=NaN,w=!0,C=!1,S=null)=>({url:e,urlImageData:t,name:n,colormap:i,colorMap:i,opacity:a,cal_min:o,cal_max:l,trustCalMinMax:u,percentileFrac:f,ignoreZeroVoxels:h,useQFormNotSForm:d,colormapNegative:m,imageType:A,cal_minNeg:v,cal_maxNeg:y,colorbarVisible:w,frame4D:p,alphaThreshold:C,colormapLabel:S});function sp(e,t=80){e=e.replace(/[`$]/g,"");const n=[],i=Math.min(t,e.length);for(let a=0;a<i;a++){const o=e.charCodeAt(a);n.push(o&255)}return n}function Cc(e,t=!1,n=!1){let o=!0;n&&(o=e.littleEndian);const l=new Uint8Array(348),u=new DataView(l.buffer);u.setInt32(0,348,o),u.setUint8(38,114),u.setUint8(39,e.dim_info);for(let h=0;h<8;h++)u.setUint16(40+2*h,e.dims[h],o);u.setFloat32(56,e.intent_p1,o),u.setFloat32(60,e.intent_p2,o),u.setFloat32(64,e.intent_p3,o),u.setInt16(68,e.intent_code,o),t?(u.setInt16(70,2,o),u.setInt16(72,8,o)):(u.setInt16(70,e.datatypeCode,o),u.setInt16(72,e.numBitsPerVoxel,o)),u.setInt16(74,e.slice_start,o);for(let h=0;h<8;h++)u.setFloat32(76+4*h,e.pixDims[h],o);t?(u.setFloat32(108,352,o),u.setFloat32(112,1,o),u.setFloat32(116,0,o)):(u.setFloat32(108,e.vox_offset,o),u.setFloat32(112,e.scl_slope,o),u.setFloat32(116,e.scl_inter,o)),u.setInt16(120,e.slice_end,o),u.setUint8(122,e.slice_code),e.xyzt_units===0?u.setUint8(123,10):u.setUint8(123,e.xyzt_units),t?(u.setFloat32(124,0,o),u.setFloat32(128,0,o)):(u.setFloat32(124,e.cal_max,o),u.setFloat32(128,e.cal_min,o)),u.setFloat32(132,e.slice_duration,o),u.setFloat32(136,e.toffset,o),l.set(sp(e.description),148),l.set(sp(e.aux_file),228),u.setInt16(252,e.qform_code,o),e.sform_code<1||e.sform_code<1?u.setInt16(254,1,o):u.setInt16(254,e.sform_code,o),u.setFloat32(256,e.quatern_b,o),u.setFloat32(260,e.quatern_c,o),u.setFloat32(264,e.quatern_d,o),u.setFloat32(268,e.qoffset_x,o),u.setFloat32(272,e.qoffset_y,o),u.setFloat32(276,e.qoffset_z,o);const f=e.affine.flat();for(let h=0;h<12;h++)u.setFloat32(280+4*h,f[h],o);return u.setInt32(344,3222382,!0),l}function S6(e,t=!0){const n=Math.round(e.length/3),i=ce(0,0,0),a=je(),o=je();let l=0,u=1;t&&(u=2);for(let m=0;m<u;m++){l=0;for(let A=0;A<n;A++){const v=ce(e[A*3],e[A*3+1],e[A*3+2]);A===0&&(Pg(a,v),Pg(o,v)),Td(a,a,v),Rd(o,o,v),Je(v,v,i);const y=no(v);l=Math.max(l,y)}if(m+1>=u)break;let p=!0;for(let A=0;A<3;++A)a[A]>i[A]&&(p=!1),o[A]<i[A]&&(p=!1);if(p)break;Cy(i,a,o,.5),G.debug("origin moved inside volume: ",i)}const f=[a[0],a[1],a[2]],h=[o[0],o[1],o[2]];return{min:f,max:h,furthestVertexFromOrigin:l,origin:i}}function QA(e){const t=[!1,!1,!1,!1],n=[!1,!1,!1,!1];for(let i=0;i<4;i++)for(let a=0;a<4;a++)if(isNaN(e[i][a]))return!1;for(let i=0;i<3;i++)for(let a=0;a<3;a++)e[i][a]!==0&&(t[i]=!0,n[a]=!0);for(let i=0;i<3;i++)if(!t[i]||!n[i])return!1;return!0}async function Kd(e){const t=e.getReader(),{done:n,value:i}=await t.read();if(n)return t.releaseLock(),new ReadableStream({start(l){l.close()}});if(!i||i.length<2)return t.releaseLock(),new ReadableStream({start(l){i&&l.enqueue(i),l.close()}});const a=i[0]===31&&i[1]===139,o=new ReadableStream({async start(l){try{for(l.enqueue(i);;){const{done:u,value:f}=await t.read();if(u){l.close(),t.releaseLock();break}l.enqueue(f)}}catch(u){l.error(u),t.releaseLock()}}});return a?o.pipeThrough(new DecompressionStream("gzip")):o}function WA(e=[256,256,256],t=[1,1,1],n=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],i=2){const a=new me;a.littleEndian=!0,a.dims=[3,1,1,1,0,0,0,0],a.dims[0]=Math.max(3,e.length);for(let l=0;l<e.length;l++)a.dims[l+1]=e[l];a.pixDims=[1,1,1,1,1,0,0,0];for(let l=0;l<e.length;l++)a.pixDims[l+1]=t[l];if(n.length===16){let l=0;for(let u=0;u<4;u++)for(let f=0;f<4;f++)a.affine[u][f]=n[l],l++}let o=8;return i===256||i===2?o=8:i===512||i===4?o=16:i===16||i===768||i===8||i===2304?o=32:i===64?o=64:G.warn("Unsupported NIfTI datatypeCode for header creation: "+i),a.datatypeCode=i,a.numBitsPerVoxel=o,a.scl_inter=0,a.scl_slope=1,a.sform_code=2,a.magic="n+1",a.vox_offset=352,a}function M6(e=[256,256,256],t=[1,1,1],n=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],i=2,a=new Uint8Array){const o=WA(e,t,n,i),l=Cc(o,!1);o.vox_offset=Math.max(352,l.length);const u=Cc(o,!1);if(a.length<1)return u;const f=Math.max(0,o.vox_offset-u.length),h=new Uint8Array(f),d=new Uint8Array(a.buffer,a.byteOffset,a.byteLength),m=o.vox_offset+d.length,p=new Uint8Array(m);return p.set(u,0),p.set(h,u.length),p.set(d,o.vox_offset),p}function ZA(e,t=null){if(!e.hdr)throw new Error("NVImage header is not defined for toUint8Array");if(!e.img&&t===null)throw new Error("NVImage image data is not defined for toUint8Array");const n=t!==null,i=JSON.parse(JSON.stringify(e.hdr)),a=e.extensions&&e.extensions.length>0,o=new Uint8Array(4);o[0]=a?1:0;let l=new Uint8Array(0);if(a){const w=[];let C=0;for(const E of e.extensions){const M=new Uint8Array(E.edata),R=new Uint8Array(8+M.length),D=new DataView(R.buffer);D.setInt32(0,E.esize,!0),D.setInt32(4,E.ecode,!0),R.set(M,8),w.push(R),C+=R.length}l=new Uint8Array(C);let S=0;for(const E of w)l.set(E,S),S+=E.length}const u=348;i.vox_offset=Math.max(352,u+o.length+l.length),n&&(i.datatypeCode=2,i.numBitsPerVoxel=8,i.scl_slope=1,i.scl_inter=0);const f=Cc(i,n);let h;if(n){const w=t,C=e.permRAS;if(C&&(C[0]!==1||C[1]!==2||C[2]!==3)){G.debug("Reorienting drawing bytes back to native space for saving...");const S=e.hdr.dims,E=S[1]*S[2]*S[3],M=e.dimsRAS?e.dimsRAS[1]*e.dimsRAS[2]*e.dimsRAS[3]:E;if(w.length!==M)console.warn(`Drawing length (${w.length}) does not match expected RAS voxel count (${M}). Cannot reorient drawing reliably.`),h=w;else if(!e.img2RASstep||!e.img2RASstart||!e.dimsRAS)console.warn("Missing RAS transformation info (img2RASstep, img2RASstart, dimsRAS). Cannot reorient drawing reliably."),h=w;else{const R=e.img2RASstep,D=e.img2RASstart,T=e.dimsRAS,F=new Uint8Array(E);F.fill(0);const U=w;let I=0;for(let V=0;V<T[3];V++){const N=D[2]+V*R[2];for(let Y=0;Y<T[2];Y++){const P=D[1]+Y*R[1];for(let Q=0;Q<T[1];Q++){const j=D[0]+Q*R[0]+P+N;j>=0&&j<E?F[j]=U[I]:I<U.length&&console.warn(`Calculated native index ${j} is out of bounds [0..${E-1}] during drawing reorientation.`),I++}}}h=F}}else h=w}else{if(!e.img)throw new Error("NVImage image data is null when trying to save non-drawing.");h=new Uint8Array(e.img.buffer,e.img.byteOffset,e.img.byteLength)}const d=f.length+o.length+l.length,m=Math.max(0,i.vox_offset-d),p=new Uint8Array(m),A=i.vox_offset+h.length,v=new Uint8Array(A);let y=0;return v.set(f,y),y+=f.length,v.set(o,y),y+=o.length,v.set(l,y),y+=l.length,v.set(p,y),y+=p.length,v.set(h,i.vox_offset),v}async function JA(e,t,n=null){const i=ZA(e,n);if(t.toLowerCase().endsWith(".gz"))try{const o=await Ce.compress(i,"gzip");return new Uint8Array(o)}catch(o){return G.error("Compression failed:",o),G.warn("Returning uncompressed data due to compression error."),i}else return i}async function E6(e,t="",n=null){const i=await JA(e,t,n);if(!t)return G.debug("saveToDisk: empty file name, returning data as Uint8Array rather than triggering download"),i;try{const a=new Blob([i.buffer],{type:"application/octet-stream"}),o=URL.createObjectURL(a),l=document.createElement("a");l.setAttribute("href",o),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),setTimeout(()=>URL.revokeObjectURL(o),100)}catch(a){G.error("Failed to trigger download:",a)}return i}function $A(e,t,n,i,a=0,o=!1){if(!e.hdr)throw new Error("getValue: NVImage header is not defined.");if(!o&&!e.img)throw new Error("getValue: NVImage image data is not defined.");if(o&&!e.imaginary)return G.warn("getValue: Attempted to read imaginary data, but none exists."),[0];const l=e.hdr.dims[1],u=e.hdr.dims[2],f=e.hdr.dims[3],h=e.permRAS.slice();if(h[0]!==1||h[1]!==2||h[2]!==3){const S=nt(t,n,i,1);Ft(S,S,e.toRASvox),t=S[0],n=S[1],i=S[2]}t=Math.max(0,Math.min(Math.round(t),l-1)),n=Math.max(0,Math.min(Math.round(n),u-1)),i=Math.max(0,Math.min(Math.round(i),f-1)),a=Math.max(0,a);let d=t+n*l+i*l*u;if(e.hdr.datatypeCode===2304)return e.img?(d*=4,d+3>=e.img.length?(G.warn(`getValue: Calculated index ${d} out of bounds for RGBA data.`),[0]):[e.img[d],e.img[d+1],e.img[d+2],e.img[d+3]]):[0];if(e.hdr.datatypeCode===128)return e.img?(d*=3,d+2>=e.img.length?(G.warn(`getValue: Calculated index ${d} out of bounds for RGB data.`),[0]):[e.img[d],e.img[d+1],e.img[d+2]]):[0];const m=l*u*f,p=a*m,A=d+p,v=o?e.imaginary:e.img;if(A<0||A>=v.length)return[0];const y=v[A],w=isNaN(e.hdr.scl_slope)||e.hdr.scl_slope===0?1:e.hdr.scl_slope,C=isNaN(e.hdr.scl_inter)?0:e.hdr.scl_inter;return[w*y+C]}function D6(e,t,n,i,a=0,o=!1){const l=$A(e,t,n,i,a,o);return l.length<3?l[0]:l[0]*.2126+l[1]*.7152+l[2]*.0722}function T6(e,t=[-1,0,0],n=[0,0,0],i="same"){const a=[new Uint8Array,[0,0,0]];if(!e.hdr||!e.img||!e.dimsRAS||!e.img2RASstep||!e.img2RASstart)return G.error("getVolumeData: Missing required NVImage properties (hdr, img, dimsRAS, img2RASstep/start)."),a;if(t=t.slice(0,3),n=n.slice(0,3),Math.min(...t)<0||Math.min(...n)<0)return G.warn("getVolumeData: Invalid start or end coordinates provided."),a;const o=e.dimsRAS.slice(1,4);for(let w=0;w<3;w++)if(t[w]=Math.max(0,Math.min(Math.round(t[w]),o[w]-1)),n[w]=Math.max(0,Math.min(Math.round(n[w]),o[w]-1)),n[w]<t[w]){const C=n[w];n[w]=t[w],t[w]=C}const l=[n[0]-t[0]+1,n[1]-t[1]+1,n[2]-t[2]+1],u=l[0]*l[1]*l[2];if(u<=0)return G.warn("getVolumeData: Calculated slab size is zero or negative."),a;let f=e.img.constructor;i==="uint8"?f=Uint8Array:i==="int16"?f=Int16Array:i==="uint16"?f=Uint16Array:i==="float32"||i==="scaled"||i==="normalized"||i==="windowed"?f=Float32Array:i==="float64"?f=Float64Array:i!=="same"&&G.warn(`getVolumeData: Unsupported dataType '${i}'. Using 'same'.`);let h;try{h=new f(u)}catch(w){return G.error(`getVolumeData: Failed to create output array for dataType '${i}'.`,w),a}const d=e.img2RASstep,m=e.img2RASstart,p=e.img;let A=0;for(let w=t[2];w<=n[2];w++){const C=m[2]+w*d[2];for(let S=t[1];S<=n[1];S++){const E=m[1]+S*d[1];for(let M=t[0];M<=n[0];M++){const D=m[0]+M*d[0]+E+C;let T=0;D>=0&&D<p.length&&(T=p[D]),h[A++]=T}}}const v=isNaN(e.hdr.scl_slope)||e.hdr.scl_slope===0?1:e.hdr.scl_slope,y=isNaN(e.hdr.scl_inter)?0:e.hdr.scl_inter;if(i==="scaled"||i==="normalized"||i==="windowed"){h instanceof Float32Array||(G.warn(`getVolumeData: Converting output to Float32 for scaling type '${i}'.`),h=Float32Array.from(h));for(let w=0;w<h.length;w++)h[w]=h[w]*v+y}if(i==="normalized"||i==="windowed"){let w=e.cal_min,C=e.cal_max;i==="normalized"&&(w=e.global_min,C=e.global_max);const S=C-w,E=S===0?0:1/S;for(let M=0;M<h.length;M++)h[M]=(h[M]-w)*E,h[M]=Math.max(0,Math.min(h[M],1))}return[h,l]}function R6(e,t=[-1,0,0],n=[0,0,0],i=new Uint8Array){if(!e.hdr||!e.img||!e.dimsRAS||!e.img2RASstep||!e.img2RASstart){G.error("setVolumeData: Missing required NVImage properties (hdr, img, dimsRAS, img2RASstep/start).");return}if(i.length<1){G.warn("setVolumeData: Input slabData is empty.");return}if(t=t.slice(0,3),n=n.slice(0,3),Math.min(...t)<0||Math.min(...n)<0){G.warn("setVolumeData: Invalid start or end coordinates provided.");return}const a=e.dimsRAS.slice(1,4);for(let m=0;m<3;m++)if(t[m]=Math.max(0,Math.min(Math.round(t[m]),a[m]-1)),n[m]=Math.max(0,Math.min(Math.round(n[m]),a[m]-1)),n[m]<t[m]){const p=n[m];n[m]=t[m],t[m]=p}const o=[n[0]-t[0]+1,n[1]-t[1]+1,n[2]-t[2]+1],l=o[0]*o[1]*o[2];if(l<=0){G.warn("setVolumeData: Calculated slab size is zero or negative.");return}if(i.length<l){G.error(`setVolumeData: Input slabData length (${i.length}) is less than the calculated slab size (${l}).`);return}const u=e.img2RASstep,f=e.img2RASstart,h=e.img;let d=0;for(let m=t[2];m<=n[2];m++){const p=f[2]+m*u[2];for(let A=t[1];A<=n[1];A++){const v=f[1]+A*u[1];for(let y=t[0];y<=n[0];y++){const C=f[0]+y*u[0]+v+p;C>=0&&C<h.length&&(h[C]=i[d]),d++}}}}var od={};It(od,{readHEAD:()=>U6});function kl(e,t){const n=lt(t);_t(n,n);const i=nt(e[0],e[1],e[2],1);return Ft(i,i,n),ce(i[0],i[1],i[2])}function F6(e){if(!e.hdr)throw new Error("hdr not defined");const t=e.hdr.affine,n=Cn(t[0][0],t[0][1],t[0][2],t[0][3],t[1][0],t[1][1],t[1][2],t[1][3],t[2][0],t[2][1],t[2][2],t[2][3],t[3][0],t[3][1],t[3][2],t[3][3]),i=kl([0,0,0],n),a=kl([1,0,0],n);Je(a,a,i);const o=kl([0,1,0],n);Je(o,o,i);const l=kl([0,0,1],n);Je(l,l,i),e.hdr.pixDims[1]=$i(a),e.hdr.pixDims[2]=$i(o),e.hdr.pixDims[3]=$i(l)}function B6(e,t,n,i){const a=e.hdr;if(a===null)throw new Error("HDR is not set");a.sform_code=2;const o="xxyyzzg";let l=-1,u=-1,f=-1;const h=["x","y","z"];h[0]=o[i[0]],h[1]=o[i[1]],h[2]=o[i[2]];const d=t.slice(0,3),m=n.slice(0,3);for(let p=0;p<3;p++)h[p]==="x"?l=p:h[p]==="y"?u=p:f=p;l<0||u<0||f<0||l===u||l===f||u===f||(a.pixDims[1]=Math.abs(d[0]),a.pixDims[2]=Math.abs(d[1]),a.pixDims[3]=Math.abs(d[2]),a.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],a.affine[0][l]=-d[l],a.affine[1][u]=-d[u],a.affine[2][f]=d[f],a.affine[0][3]=-m[l],a.affine[1][3]=-m[u],a.affine[2][3]=m[f])}async function U6(e,t,n){e.hdr=new me;const i=e.hdr;i.dims[0]=3,i.pixDims=[1,1,1,1,1,0,0,0];let a=[0,0,0],o=[0,0,0],l=[1,1,1];const f=new TextDecoder().decode(t).split(/\r?\n/),h=(t.byteLength+8)%16,d=t.byteLength+(16-h);G.debug(t.byteLength,"len",d);const m=new ArrayBuffer(d);new Uint8Array(m).set(new Uint8Array(t));const p=new VA(d+8,42,m,!0);i.addExtension(p),i.extensionCode=42,i.extensionFlag[0]=1,i.extensionSize=d+8;const A=f.length;let v=0,y=!1;for(;v<A;){let C=f[v];if(v++,!C.startsWith("type"))continue;const S=C.includes("integer-attribute"),E=C.includes("float-attribute");if(C=f[v],v++,!C.startsWith("name"))continue;let M=C.split("= ");const R=M[1];C=f[v],v++,M=C.split("= ");let D=parseInt(M[1]);if(!(D<1)){if(C=f[v],v++,M=C.trim().split(/\s+/),E||S){for(;M.length<D;){C=f[v],v++;const T=C.trim().split(/\s+/);M.push(...T)}for(let T=0;T<D;T++)M[T]=parseFloat(M[T])}switch(R){case"BYTEORDER_STRING":M[0].includes("LSB_FIRST")?i.littleEndian=!0:M[0].includes("MSB_FIRST")&&(i.littleEndian=!1);break;case"BRICK_TYPES":{i.dims[4]=D;const T=parseInt(M[0]);T===0?(i.numBitsPerVoxel=8,i.datatypeCode=2):T===1?(i.numBitsPerVoxel=16,i.datatypeCode=4):T===3?(i.numBitsPerVoxel=32,i.datatypeCode=16):G.warn("Unknown BRICK_TYPES ",T)}break;case"IJK_TO_DICOM_REAL":if(D<12)break;y=!0,i.sform_code=2,i.affine=[[-M[0],-M[1],-M[2],-M[3]],[-M[4],-M[5],-M[6],-M[7]],[M[8],M[9],M[10],M[11]],[0,0,0,1]];break;case"DATASET_DIMENSIONS":D=Math.max(D,3);for(let T=0;T<D;T++)i.dims[T+1]=M[T];break;case"ORIENT_SPECIFIC":a=M;break;case"ORIGIN":o=M;break;case"DELTA":l=M;break;case"TAXIS_FLOATS":i.pixDims[4]=M[0];break;default:G.warn("Unknown:",R)}}}y?F6(e):B6(e,l,o,a);const w=i.numBitsPerVoxel/8*i.dims[1]*i.dims[2]*i.dims[3]*i.dims[4];if(!n)throw new Error("pairedImgData not set");return n.byteLength<w?await Ce.decompressToBuffer(new Uint8Array(n)):n.slice(0)}var Hs={};It(Hs,{readV16:()=>N6,readVMR:()=>I6});function N6(e,t){e.hdr=new me;const n=e.hdr;n.dims=[3,1,1,1,0,0,0,0],n.pixDims=[1,1,1,1,1,0,0,0];const i=new DataView(t);return n.dims[1]=i.getUint16(0,!0),n.dims[2]=i.getUint16(2,!0),n.dims[3]=i.getUint16(4,!0),2*n.dims[1]*n.dims[2]*n.dims[3]+6!==t.byteLength&&G.warn("This does not look like a valid BrainVoyager V16 file"),n.numBitsPerVoxel=16,n.datatypeCode=512,G.warn("Warning: V16 files have no spatial transforms"),n.affine=[[0,0,-n.pixDims[1],(n.dims[1]-2)*.5*n.pixDims[1]],[-n.pixDims[2],0,0,(n.dims[2]-2)*.5*n.pixDims[2]],[0,-n.pixDims[3],0,(n.dims[3]-2)*.5*n.pixDims[3]],[0,0,0,1]],n.littleEndian=!0,t.slice(6)}function I6(e,t){e.hdr=new me;const n=e.hdr;n.dims=[3,1,1,1,0,0,0,0],n.pixDims=[1,1,1,1,1,0,0,0];const i=new DataView(t),a=i.getUint16(0,!0);a!==4&&G.warn("Not a valid version 4 VMR image"),n.dims[1]=i.getUint16(2,!0),n.dims[2]=i.getUint16(4,!0),n.dims[3]=i.getUint16(6,!0);const o=n.dims[1]*n.dims[2]*n.dims[3];if(a>=4){let l=8+o;const u=i.getUint32(l+88,!0);if(l=l+92,u>0){const f=t.byteLength;for(let h=0;h<u;h++){for(;l<f&&i.getUint8(l)!==0;)l++;for(l++,l+=4;l<f&&i.getUint8(l)!==0;)l++;l++;const d=i.getUint32(l,!0);l+=4;for(let m=0;m<d;m++)l+=4}}n.pixDims[1]=i.getFloat32(l+2,!0),n.pixDims[2]=i.getFloat32(l+6,!0),n.pixDims[3]=i.getFloat32(l+10,!0)}return G.warn("Warning: VMR spatial transform not implemented"),n.affine=[[0,0,-n.pixDims[1],(n.dims[1]-2)*.5*n.pixDims[1]],[-n.pixDims[2],0,0,(n.dims[2]-2)*.5*n.pixDims[2]],[0,-n.pixDims[3],0,(n.dims[3]-2)*.5*n.pixDims[3]],[0,0,0,1]],G.debug(n),n.numBitsPerVoxel=8,n.datatypeCode=2,t.slice(8,8+o)}var Xs={};It(Xs,{readFIB:()=>V6,readSRC:()=>O6});async function V6(e,t){e.hdr=new me;const n=e.hdr;n.littleEndian=!1,n.dims=[3,1,1,1,0,0,0,0],n.pixDims=[1,1,1,1,1,0,0,0];const i=await Ce.readMatV4(t,!0);if(!("dimension"in i)||!("dti_fa"in i))throw new Error("Not a valid DSIstudio FIB file");const a="index0"in i&&"index1"in i&&"index2"in i&&"odf_vertices"in i;n.numBitsPerVoxel=32,n.datatypeCode=16,n.dims[1]=i.dimension[0],n.dims[2]=i.dimension[1],n.dims[3]=i.dimension[2],n.dims[4]=1,n.pixDims[1]=i.voxel_size[0],n.pixDims[2]=i.voxel_size[1],n.pixDims[3]=i.voxel_size[2],n.sform_code=1;const o=(n.dims[1]-1)*.5*n.pixDims[1],l=(n.dims[2]-1)*.5*n.pixDims[2],u=(n.dims[3]-1)*.5*n.pixDims[3];n.affine=[[n.pixDims[1],0,0,-o],[0,-n.pixDims[2],0,l],[0,0,n.pixDims[2],-u],[0,0,0,1]],n.littleEndian=!0;const f=n.dims[1]*n.dims[2]*n.dims[3],h=f*Math.ceil(n.numBitsPerVoxel/8),d=h*n.dims[4],m=new Uint8Array(new ArrayBuffer(f*4*3));if(a){const y=n.dims[1]*n.dims[2]*n.dims[3],w=new Float32Array(y),C=new Float32Array(y),S=new Float32Array(y),E=i.index0,M=i.odf_vertices;for(let R=0;R<y;R++){const D=E[R]*3;w[R]=M[D+0],C[R]=M[D+1],S[R]=-M[D+2]}m.set(new Uint8Array(w.buffer,w.byteOffset,w.byteLength),0*h),m.set(new Uint8Array(C.buffer,C.byteOffset,C.byteLength),1*h),m.set(new Uint8Array(S.buffer,S.byteOffset,S.byteLength),2*h)}"report"in i&&(n.description=new TextDecoder().decode(i.report.subarray(0,Math.min(79,i.report.byteLength))));const p=new Uint8Array(new ArrayBuffer(d)),A=Float32Array.from(i.dti_fa);if("mask"in i){let y=1;"dti_fa_slope"in i&&(y=i.dti_fa_slope[0]);let w=1;"dti_fa_inter"in i&&(w=i.dti_fa_inter[0]);const C=n.dims[1]*n.dims[2]*n.dims[3],S=i.mask,E=new Float32Array(C);let M=0;for(let R=0;R<C;R++)S[R]!==0&&(E[R]=A[M]*y+w,M++);return[E.buffer,new Float32Array(m.buffer)]}const v=new Uint8Array(A.buffer,A.byteOffset,A.byteLength);return p.set(v,0),[p.buffer,new Float32Array(m.buffer)]}async function O6(e,t){e.hdr=new me;const n=e.hdr;n.littleEndian=!1,n.dims=[3,1,1,1,0,0,0,0],n.pixDims=[1,1,1,1,1,0,0,0];const i=await Ce.readMatV4(t);if(!("dimension"in i)||!("image0"in i))throw new Error("Not a valid DSIstudio SRC file");let a=0,o=0;for(const[A,v]of Object.entries(i))if(A.startsWith("image")){if(a===0?o=v.length:o!==v.length&&(o=-1),v.constructor!==Uint16Array)throw new Error("DSIstudio SRC files always use Uint16 datatype");a++}if(o<1||a<1)throw new Error("SRC file not valid DSI Studio data. The image(s) should have the same length");n.numBitsPerVoxel=16,n.datatypeCode=512,n.dims[1]=i.dimension[0],n.dims[2]=i.dimension[1],n.dims[3]=i.dimension[2],n.dims[4]=a,n.dims[4]>1&&(n.dims[0]=4),n.pixDims[1]=i.voxel_size[0],n.pixDims[2]=i.voxel_size[1],n.pixDims[3]=i.voxel_size[2],n.sform_code=1;const l=(n.dims[1]-1)*.5*n.pixDims[1],u=(n.dims[2]-1)*.5*n.pixDims[2],f=(n.dims[3]-1)*.5*n.pixDims[3];n.affine=[[n.pixDims[1],0,0,-l],[0,-n.pixDims[2],0,u],[0,0,n.pixDims[2],-f],[0,0,0,1]],n.littleEndian=!0;const h=n.dims[1]*n.dims[2]*n.dims[3]*(n.numBitsPerVoxel/8),d=h*n.dims[4],m=new Uint8Array(new ArrayBuffer(d));let p=0;for(let A=0;A<a;A++){const v=i[`image${A}`],y=new Uint8Array(v.buffer,v.byteOffset,v.byteLength);m.set(y,p),p+=h}return"report"in i&&(n.description=new TextDecoder().decode(i.report.subarray(0,Math.min(79,i.report.byteLength)))),m.buffer}var ld={};It(ld,{readECAT:()=>L6});function L6(e,t){e.hdr=new me;const n=e.hdr;n.dims=[3,1,1,1,0,0,0,0],n.pixDims=[1,1,1,1,1,0,0,0];const i=new DataView(t),a=i.getInt32(0,!1),o=i.getInt16(50,!1);if(a!==1296127058||o<1||o>14)throw new Error("Not a valid ECAT file");let l=512,u=0;const f=[];let h=new Float32Array;for(;;){const d=i.getInt32(l,!1),m=i.getInt32(l+12,!1);if(d+m!==31)break;let p=l+20,A=0,v=0;for(;A<31&&(v=i.getInt32(p,!1),p+=16,v!==0);){A++;let y=v*512;const w=y-512,C=i.getUint16(w,!1);n.dims[1]=i.getUint16(w+4,!1),n.dims[2]=i.getUint16(w+6,!1),n.dims[3]=i.getUint16(w+8,!1);const S=i.getFloat32(w+26,!1);n.pixDims[1]=i.getFloat32(w+34,!1)*10,n.pixDims[2]=i.getFloat32(w+38,!1)*10,n.pixDims[3]=i.getFloat32(w+42,!1)*10,n.pixDims[4]=i.getUint32(w+46,!1)/1e3,f.push(n.pixDims[4]);const E=n.dims[1]*n.dims[2]*n.dims[3],M=new Float32Array(E);if(C===1)for(let D=0;D<E;D++)M[D]=i.getUint8(y)*S,y++;else if(C===6)for(let D=0;D<E;D++)M[D]=i.getUint16(y,!1)*S,y+=2;else if(C===7)for(let D=0;D<E;D++)M[D]=i.getUint32(y,!1)*S,y+=4;else G.warn("Unknown ECAT data type "+C);const R=h.slice(0);h=new Float32Array(R.length+M.length),h.set(R),h.set(M,R.length),u++}if(v===0)break;l+=512}if(n.dims[4]=u,n.pixDims[4]=f[0],u>1){n.dims[0]=4;let d=!1;for(let m=0;m<u;m++)f[m]!==f[0]&&(d=!0);d&&G.warn("Frame durations vary")}return n.sform_code=1,n.affine=[[-n.pixDims[1],0,0,(n.dims[1]-2)*.5*n.pixDims[1]],[0,-n.pixDims[2],0,(n.dims[2]-2)*.5*n.pixDims[2]],[0,0,-n.pixDims[3],(n.dims[3]-2)*.5*n.pixDims[3]],[0,0,0,1]],n.numBitsPerVoxel=32,n.datatypeCode=16,h.buffer}var uc={};It(uc,{imageDataFromArrayBuffer:()=>ev,readBMP:()=>P6});async function ev(e){return new Promise((t,n)=>{const i=new Blob([e]),a=URL.createObjectURL(i),o=new Image;o.crossOrigin="Anonymous",o.src=a,o.onload=()=>{URL.revokeObjectURL(a);const l=document.createElement("canvas");l.width=o.width,l.height=o.height;const u=l.getContext("2d");if(!u){n(new Error("Failed to get 2D context"));return}u.drawImage(o,0,0),t(u.getImageData(0,0,o.width,o.height))},o.onerror=l=>{URL.revokeObjectURL(a),n(l)}})}async function P6(e,t){const n=await ev(t),{width:i,height:a,data:o}=n;e.hdr=new me;const l=e.hdr;l.dims=[3,i,a,1,0,0,0,0],l.pixDims=[1,1,1,1,1,0,0,0],l.affine=[[l.pixDims[1],0,0,-(l.dims[1]-2)*.5*l.pixDims[1]],[0,-l.pixDims[2],0,(l.dims[2]-2)*.5*l.pixDims[2]],[0,0,-l.pixDims[3],(l.dims[3]-2)*.5*l.pixDims[3]],[0,0,0,1]],l.numBitsPerVoxel=8,l.datatypeCode=2304;let u=!0;for(let f=0;f<o.length;f+=4)if(o[f]!==o[f+1]||o[f]!==o[f+2]){u=!1;break}if(u){l.datatypeCode=2;const f=new Uint8Array(i*a);for(let h=0,d=0;h<o.length;h+=4,d++)f[d]=o[h];return f.buffer}return o.buffer}var cd={};It(cd,{readMHA:()=>z6});async function z6(e,t,n){const i=t.byteLength;if(i<20)throw new Error("File too small to be VTK: bytes = "+t.byteLength);const a=new Uint8Array(t);let o=0;function l(y){return y===10||y===13}function u(){for(;o<i&&l(a[o]);)o++;const y=o;for(;o<i&&!l(a[o]);)o++;return o-y<2?"":new TextDecoder().decode(t.slice(y,o))}let f=u();e.hdr=new me;const h=e.hdr;h.pixDims=[1,1,1,1,1,0,0,0],h.dims=[1,1,1,1,1,1,1,1],h.littleEndian=!0;let d=!1,m=!1;const p=Wi(NaN,0,0,0,1,0,0,0,1),A=ce(0,0,0);for(;f!=="";){let y=f.split(" ");if(y.length>2&&(y=y.slice(2)),f.startsWith("BinaryDataByteOrderMSB")&&y[0].includes("False")&&(h.littleEndian=!0),f.startsWith("BinaryDataByteOrderMSB")&&y[0].includes("True")&&(h.littleEndian=!1),f.startsWith("CompressedData")&&y[0].includes("True")&&(d=!0),f.startsWith("TransformMatrix"))for(let w=0;w<9;w++)p[w]=parseFloat(y[w]);if(f.startsWith("Offset"))for(let w=0;w<Math.min(y.length,3);w++)A[w]=parseFloat(y[w]);if(f.startsWith("ElementSpacing"))for(let w=0;w<y.length;w++)h.pixDims[w+1]=parseFloat(y[w]);if(f.startsWith("DimSize")){h.dims[0]=y.length;for(let w=0;w<y.length;w++)h.dims[w+1]=parseInt(y[w])}if(f.startsWith("ElementType"))switch(y[0]){case"MET_UCHAR":h.numBitsPerVoxel=8,h.datatypeCode=2;break;case"MET_CHAR":h.numBitsPerVoxel=8,h.datatypeCode=256;break;case"MET_SHORT":h.numBitsPerVoxel=16,h.datatypeCode=4;break;case"MET_USHORT":h.numBitsPerVoxel=16,h.datatypeCode=512;break;case"MET_INT":h.numBitsPerVoxel=32,h.datatypeCode=8;break;case"MET_UINT":h.numBitsPerVoxel=32,h.datatypeCode=768;break;case"MET_FLOAT":h.numBitsPerVoxel=32,h.datatypeCode=16;break;case"MET_DOUBLE":h.numBitsPerVoxel=64,h.datatypeCode=64;break;default:throw new Error("Unsupported MHA data type: "+y[0])}if(f.startsWith("ObjectType")&&!y[0].includes("Image")&&G.warn("Only able to read ObjectType = Image, not "+f),f.startsWith("ElementDataFile")){y[0]!=="LOCAL"&&(m=!0);break}f=u()}const v=Wi(h.pixDims[1],0,0,0,h.pixDims[2],0,0,0,h.pixDims[3]);for(yA(p,p,v),h.affine=[[-p[0],-p[3],-p[6],-A[0]],[-p[1],-p[4],-p[7],-A[1]],[p[2],p[5],p[8],A[2]],[0,0,0,1]];a[o]===10;)o++;return h.vox_offset=o,m&&n?d?await Ce.decompressToBuffer(new Uint8Array(n.slice(0))):n.slice(0):d?await Ce.decompressToBuffer(new Uint8Array(t.slice(h.vox_offset))):t.slice(h.vox_offset)}var tv={};It(tv,{isFreeSurferLabelImage:()=>iv,optimizeFreeSurferLabels:()=>nv,readMgh:()=>k6});function op(e,t,n,i=1){const a=t+n;let o=t;const l=[];for(;o+12<=a;){const u=e.getInt32(o,!1),f=e.getInt32(o+8,!1);if(o+=12,f<=0||o+f>a)break;if(u!==i){o+=f;continue}let h=f,d=o;if(i===1){if(o+4>a)break;h=e.getInt32(o,!1),d+=4}if(h>1&&d+h<=a){const m=new Uint8Array(e.buffer,d,h),p=new TextDecoder("utf-8").decode(m.slice(0,-1));l.push(p)}o+=f}return l.join(`

`)}function nv(e,t){if(e.intent_code=1002,e.datatypeCode!==16&&e.datatypeCode!==8)return t;let n=new Float32Array(t);if(e.datatypeCode===8&&(n=new Int32Array(t)),sd()){const l=new Uint32Array(t);for(let u=0;u<l.length;u++){const f=l[u];l[u]=(f&255)<<24|(f&65280)<<8|(f&16711680)>>>8|(f&4278190080)>>>24}}e.littleEndian=sd();let i=!0,a=1/0,o=-1/0;for(let l=0;l<n.length;l++){const u=n[l];Number.isFinite(u)&&(Number.isInteger(u)||(i=!1),u<a&&(a=u),u>o&&(o=u))}if(!i||a<0||o>2147483647)return G.warn(`FreeSurfer Labels must be integers in INT32 range. range ${a}..${o}`),t;if(o>32767){e.datatypeCode=8;const l=new Int32Array(n.length);for(let u=0;u<n.length;u++)l[u]=Math.trunc(n[u]);return l.buffer}else if(o>255){e.datatypeCode=4,e.numBitsPerVoxel=16;const l=new Int16Array(n.length);for(let u=0;u<n.length;u++)l[u]=Math.trunc(n[u]);return l.buffer}else{e.datatypeCode=2,e.numBitsPerVoxel=8;const l=new Uint8Array(n.length);for(let u=0;u<n.length;u++)l[u]=Math.trunc(n[u]);return l.buffer}}function iv(e,t,n){const i=e.byteLength-t.vox_offset;if(i<n)return G.error(`MGH image data size mismatch: expected ${n}, found ${i}`),!1;if(i===n)return!1;const a=t.vox_offset+n+20,o=e.byteLength-a;return o<=12?!1:op(new DataView(e),a,o).toLowerCase().endsWith("lut.txt")?!0:op(new DataView(e),a,o,3).includes("mri_label2vol")}async function k6(e,t){e.hdr||(G.debug("readMgh called before nvImage.hdr was initialized. Creating default."),e.hdr=new me);const n=e.hdr;n.littleEndian=!1;let i=t,a=new DataView(i);if(i.byteLength>=2&&a.getUint8(0)===31&&a.getUint8(1)===139)try{i=await Ce.decompressToBuffer(new Uint8Array(t)),a=new DataView(i)}catch(j){return G.error("Failed to decompress MGZ file.",j),null}if(i.byteLength<284)return G.error("File too small to be a valid MGH/MGZ header."),null;const o=a.getInt32(0,!1),l=a.getInt32(4,!1),u=a.getInt32(8,!1),f=a.getInt32(12,!1),h=a.getInt32(16,!1),d=a.getInt32(20,!1),m=a.getFloat32(30,!1),p=a.getFloat32(34,!1),A=a.getFloat32(38,!1),v=a.getFloat32(42,!1),y=a.getFloat32(46,!1),w=a.getFloat32(50,!1),C=a.getFloat32(54,!1),S=a.getFloat32(58,!1),E=a.getFloat32(62,!1),M=a.getFloat32(66,!1),R=a.getFloat32(70,!1),D=a.getFloat32(74,!1),T=a.getFloat32(78,!1),F=a.getFloat32(82,!1),U=a.getFloat32(86,!1);if(o!==1&&G.warn(`Unexpected MGH version: ${o}.`),l<=0||u<=0||f<=0)return G.error(`Invalid MGH dimensions: ${l}x${u}x${f}`),null;switch(d){case 0:n.numBitsPerVoxel=8,n.datatypeCode=2;break;case 4:n.numBitsPerVoxel=16,n.datatypeCode=4;break;case 1:n.numBitsPerVoxel=32,n.datatypeCode=8;break;case 3:n.numBitsPerVoxel=32,n.datatypeCode=16;break;default:return G.error(`Unsupported MGH data type: ${d}`),null}n.dims[1]=l,n.dims[2]=u,n.dims[3]=f,n.dims[4]=Math.max(1,h),n.dims[0]=n.dims[4]>1?4:3,n.pixDims[0]=1,n.pixDims[1]=Math.abs(m),n.pixDims[2]=Math.abs(p),n.pixDims[3]=Math.abs(A),n.pixDims[4]=0,n.sform_code=1,n.qform_code=0,n.sform_code=1;const I=Cn(v*n.pixDims[1],C*n.pixDims[2],M*n.pixDims[3],0,y*n.pixDims[1],S*n.pixDims[2],R*n.pixDims[3],0,w*n.pixDims[1],E*n.pixDims[2],D*n.pixDims[3],0,0,0,0,1),V=[n.dims[1]/2,n.dims[2]/2,n.dims[3]/2,1],N=[0,0,0,0];for(let j=0;j<3;j++){N[j]=0;for(let H=0;H<3;H++)N[j]=N[j]+I[H+j*4]*V[H]}n.affine=[[I[0],I[1],I[2],T-N[0]],[I[4],I[5],I[6],F-N[1]],[I[8],I[9],I[10],U-N[2]],[0,0,0,1]],n.vox_offset=284,n.magic="n+1";const Y=n.numBitsPerVoxel/8,Q=l*u*f*n.dims[4]*Y,k=i.slice(n.vox_offset,n.vox_offset+Q);return iv(i,n,Q)?nv(n,k):k}var ud={};It(ud,{readMIF:()=>G6});async function G6(e,t,n){e.hdr=new me;const i=e.hdr;i.pixDims=[1,1,1,1,1,0,0,0],i.dims=[1,1,1,1,1,1,1,1];let a=t.byteLength;if(a<20)throw new Error("File too small to be MIF: bytes = "+a);let o=new Uint8Array(t);o[0]===31&&o[1]===139&&(G.debug("MIF with GZ decompression"),t=await Ce.decompressToBuffer(new Uint8Array(t)),a=t.byteLength,o=new Uint8Array(t));let l=0;function u(){for(;l<a&&o[l]===10;)l++;const N=l;for(;l<a&&o[l]!==10;)l++;return l++,l-N<1?"":new TextDecoder().decode(t.slice(N,l-1))}let f=u();if(!f.startsWith("mrtrix image"))throw new Error("Not a valid MIF file");const h=[];let d=!1,m=0,p=0,A=!1;for(f=u();l<a&&!f.startsWith("END");){let N=f.split(":");if(f=u(),N.length<2)break;const Y=N[0];N=N[1].split(",");for(let P=0;P<N.length;P++)N[P]=N[P].trim();switch(Y){case"dim":i.dims[0]=N.length;for(let P=0;P<N.length;P++)i.dims[P+1]=parseInt(N[P]);break;case"vox":for(let P=0;P<N.length;P++)i.pixDims[P+1]=parseFloat(N[P]),isNaN(i.pixDims[P+1])&&(i.pixDims[P+1]=0);break;case"layout":for(let P=0;P<N.length;P++)h.push(parseInt(N[P]));break;case"datatype":{const P=N[0];P.startsWith("Bit")?(d=!0,i.datatypeCode=2):P.startsWith("Int8")?i.datatypeCode=256:P.startsWith("UInt8")?i.datatypeCode=2:P.startsWith("Int16")?i.datatypeCode=4:P.startsWith("UInt16")?i.datatypeCode=512:P.startsWith("Int32")?i.datatypeCode=8:P.startsWith("UInt32")?i.datatypeCode=768:P.startsWith("Float32")?i.datatypeCode=16:P.startsWith("Float64")?i.datatypeCode=64:G.warn("Unsupported datatype "+P),P.includes("8")?i.numBitsPerVoxel=8:P.includes("16")?i.numBitsPerVoxel=16:P.includes("32")?i.numBitsPerVoxel=32:P.includes("64")&&(i.numBitsPerVoxel=64),i.littleEndian=!0,P.endsWith("LE")&&(i.littleEndian=!0),P.endsWith("BE")&&(i.littleEndian=!1)}break;case"transform":if(m>2||N.length!==4)break;i.affine[m][0]=parseFloat(N[0]),i.affine[m][1]=parseFloat(N[1]),i.affine[m][2]=parseFloat(N[2]),i.affine[m][3]=parseFloat(N[3]),m++;break;case"comments":i.description=N[0].substring(0,Math.min(79,N[0].length));break;case"RepetitionTime":p=parseFloat(N[0]);break;case"file":A=!N[0].startsWith(". "),A||(N=N[0].split(" "),i.vox_offset=parseInt(N[1]));break}}const v=i.dims[0];v>5&&G.warn("reader only designed for a maximum of 5 dimensions (XYZTD)");let y=1;for(let N=0;N<v;N++)y*=Math.max(i.dims[N+1],1);for(let N=0;N<3;N++)for(let Y=0;Y<3;Y++)i.affine[N][Y]*=i.pixDims[Y+1];G.debug("mif affine:"+i.affine[0]),p>0&&(i.pixDims[4]=p),A&&!n&&G.warn("MIH header provided without paired image data");let w;if(n&&A)w=n.slice(0);else if(d){i.numBitsPerVoxel=8;const N=new Uint8Array(y),Y=t.slice(i.vox_offset,i.vox_offset+Math.ceil(y/8)),P=new Uint8Array(Y);let Q=0;for(let k=0;k<y;k++){const j=k%8;N[k]=P[Q]>>7-j&1,j===7&&Q++}w=N.buffer}else w=t.slice(i.vox_offset,i.vox_offset+y*(i.numBitsPerVoxel/8));h.length!==i.dims[0]&&G.warn("dims does not match layout");let C=1;const S=[1,1,1,1,1],E=[!1,!1,!1,!1,!1];for(let N=0;N<h.length;N++)for(let Y=0;Y<h.length;Y++)Math.abs(h[Y])===N&&(S[Y]=C,(h[Y]<0||Object.is(h[Y],-0))&&(E[Y]=!0),C*=i.dims[Y+1]);let M=Ce.range(0,i.dims[1]-1,1);E[0]&&(M=Ce.range(i.dims[1]-1,0,-1));for(let N=0;N<i.dims[1];N++)M[N]*=S[0];let R=Ce.range(0,i.dims[2]-1,1);E[1]&&(R=Ce.range(i.dims[2]-1,0,-1));for(let N=0;N<i.dims[2];N++)R[N]*=S[1];let D=Ce.range(0,i.dims[3]-1,1);E[2]&&(D=Ce.range(i.dims[3]-1,0,-1));for(let N=0;N<i.dims[3];N++)D[N]*=S[2];let T=Ce.range(0,i.dims[4]-1,1);E[3]&&(T=Ce.range(i.dims[4]-1,0,-1));for(let N=0;N<i.dims[4];N++)T[N]*=S[3];let F=Ce.range(0,i.dims[5]-1,1);E[4]&&(F=Ce.range(i.dims[5]-1,0,-1));for(let N=0;N<i.dims[5];N++)F[N]*=S[4];let U=0,I,V;switch(i.datatypeCode){case 256:I=new Int8Array(w),V=new Int8Array(y);break;case 2:I=new Uint8Array(w),V=new Uint8Array(y);break;case 4:I=new Int16Array(w),V=new Int16Array(y);break;case 512:I=new Uint16Array(w),V=new Uint16Array(y);break;case 8:I=new Int32Array(w),V=new Int32Array(y);break;case 768:I=new Uint32Array(w),V=new Uint32Array(y);break;case 16:I=new Float32Array(w),V=new Float32Array(y);break;case 64:I=new Float64Array(w),V=new Float64Array(y);break;default:throw new Error("unknown datatypeCode")}for(let N=0;N<i.dims[5];N++)for(let Y=0;Y<i.dims[4];Y++)for(let P=0;P<i.dims[3];P++)for(let Q=0;Q<i.dims[2];Q++)for(let k=0;k<i.dims[1];k++)V[U]=I[M[k]+R[Q]+D[P]+T[Y]+F[N]],U++;return V.buffer}var rv={};It(rv,{readNifti:()=>Y6});async function Y6(e,t,n){let i=t,a=null;try{if(Id(i)&&(G.debug(`Decompressing NIfTI file: ${e.name}`),i=await aw(i),G.debug(`Decompression complete for: ${e.name}`)),!i||i.byteLength===0)throw new Error("Buffer became invalid after decompression attempt.");if(e.hdr=await lo(i,n!=null),ow(e.hdr)&&(e.extensions=e.hdr.extensions),e.hdr===null)throw new Error(`Failed to read NIfTI header: ${e.name}`);if(e.hdr.cal_min===0&&e.hdr.cal_max===255&&e.hdr.datatypeCode!==2&&(G.debug(`Resetting suspicious cal_min/max (0/255) for non-uint8 NIfTI: ${e.name}`),e.hdr.cal_min=0,e.hdr.cal_max=0),a=n?jg(e.hdr,n):jg(e.hdr,i),a===null)throw new Error(`nifti-reader-js readImage returned null for ${e.name}`);return a}catch(o){return G.error(`Error processing NIfTI file ${e.name}:`,o),e.hdr=null,null}}var av={};It(av,{readNrrd:()=>H6});async function H6(e,t,n=null){e.hdr||(G.warn("readNrrd called before nvImage.hdr was initialized. Creating default."),e.hdr=new me);const i=e.hdr;i.pixDims=[1,1,1,1,1,0,0,0];const a=t.byteLength;let o=null;const l=new Uint8Array(t);for(let D=1;D<a;D++)if(l[D-1]===10&&l[D]===10){const T=t.slice(0,D-1);o=new TextDecoder().decode(T),i.vox_offset=D+1;break}if(o===null)return G.error("readNrrd: could not extract txt"),null;const u=o.split(`
`);if(!u[0].startsWith("NRRD"))return G.error("Invalid NRRD image (magic signature missing)"),null;const f=u.length;let h=!1,d=!1,m=!1;const p=Wi(NaN,0,0,0,1,0,0,0,1),A=ce(0,0,0);let v=ed();for(let D=1;D<f;D++){let T=u[D];if((T.length===0||T[0]==="#")&&(T.startsWith("#")||T.trim().length===0))continue;T=T.toLowerCase();const F=T.split(":");if(F.length<2)continue;const U=F[0].trim();let I=F[1].trim();switch(I=I.replaceAll(")"," "),I=I.replaceAll("("," "),I=I.trim(),U){case"data file":m=!0;break;case"encoding":if(I.includes("raw"))h=!1;else if(I.includes("gz"))h=!0;else return G.error("Unsupported NRRD encoding"),null;break;case"type":switch(I){case"uchar":case"unsigned char":case"uint8":case"uint8_t":i.numBitsPerVoxel=8,i.datatypeCode=2;break;case"signed char":case"int8":case"int8_t":i.numBitsPerVoxel=8,i.datatypeCode=256;break;case"short":case"short int":case"signed short":case"signed short int":case"int16":case"int16_t":i.numBitsPerVoxel=16,i.datatypeCode=4;break;case"ushort":case"unsigned short":case"unsigned short int":case"uint16":case"uint16_t":i.numBitsPerVoxel=16,i.datatypeCode=512;break;case"int":case"signed int":case"int32":case"int32_t":i.numBitsPerVoxel=32,i.datatypeCode=8;break;case"uint":case"unsigned int":case"uint32":case"uint32_t":i.numBitsPerVoxel=32,i.datatypeCode=768;break;case"float":i.numBitsPerVoxel=32,i.datatypeCode=16;break;case"double":i.numBitsPerVoxel=64,i.datatypeCode=64;break;default:return G.error("Unsupported NRRD data type: "+I),null}break;case"spacings":{const V=I.split(/[ ,]+/);for(let N=0;N<V.length;N++)i.pixDims[N+1]=parseFloat(V[N])}break;case"sizes":{const V=I.split(/[ ,]+/);i.dims[0]=V.length;for(let N=0;N<V.length;N++)i.dims[N+1]=parseInt(V[N])}break;case"endian":I.includes("little")?i.littleEndian=!0:I.includes("big")&&(i.littleEndian=!1);break;case"space directions":{const V=I.split(/[ ,]+/);if(V.length===9)for(let N=0;N<9;N++)p[N]=parseFloat(V[N])}break;case"space origin":{const V=I.split(/[ ,]+/);V.length===3&&(A[0]=parseFloat(V[0]),A[1]=parseFloat(V[1]),A[2]=parseFloat(V[2]))}break;case"space units":I.includes("microns")&&(d=!0);break;case"space":I.includes("right-anterior-superior")||I.includes("ras")?v=Wi(1,0,0,0,1,0,0,0,1):I.includes("left-anterior-superior")||I.includes("las")?v=Wi(-1,0,0,0,1,0,0,0,1):I.includes("left-posterior-superior")||I.includes("lps")?v=Wi(-1,0,0,0,-1,0,0,0,1):G.warn("Unsupported NRRD space value:",I);break;default:G.warn("Unknown:",U);break}}if(!isNaN(p[0])){i.sform_code=2,d&&(vy(p,p,.001),A[0]*=.001,A[1]*=.001,A[2]*=.001),v[0]<0&&(A[0]=-A[0]),v[4]<0&&(A[1]=-A[1]),v[8]<0&&(A[2]=-A[2]),yA(p,v,p);const D=Cn(p[0],p[3],p[6],A[0],p[1],p[4],p[7],A[1],p[2],p[5],p[8],A[2],0,0,0,1);if(!e.vox2mm)return null;const T=e.vox2mm([0,0,0],D),F=e.vox2mm([1,0,0],D);Je(F,F,T);const U=e.vox2mm([0,1,0],D);Je(U,U,T);const I=e.vox2mm([0,0,1],D);Je(I,I,T),i.pixDims[0]=1,i.pixDims[1]=$i(F),i.pixDims[2]=$i(U),i.pixDims[3]=$i(I),i.affine=[[D[0],D[1],D[2],D[3]],[D[4],D[5],D[6],D[7]],[D[8],D[9],D[10],D[11]],[0,0,0,1]]}let y=null;const w=m?n:t,C=m?0:i.vox_offset;if(m&&!w)return G.warn("Missing data: NRRD header describes detached data file but only one URL provided"),null;if(!w||C>=w.byteLength)return G.error(`NRRD data offset (${C}) invalid for buffer length (${w?.byteLength??0})`),null;let S=w.slice(C);if(h)try{G.debug("Decompressing NRRD data..."),S=await Ce.decompressToBuffer(new Uint8Array(S)),G.debug("Decompression complete.")}catch(D){return G.error("Failed to decompress NRRD data.",D),null}const E=i.numBitsPerVoxel/8,R=i.dims.slice(1,i.dims[0]+1).reduce((D,T)=>D*Math.max(1,T),1)*E;return S.byteLength<R?(G.error(`NRRD image data size mismatch: expected ${R}, found ${S.byteLength}`),null):(S.byteLength>R&&(G.warn(`NRRD has extra ${S.byteLength-R} bytes after expected image data. Truncating.`),S=S.slice(0,R)),y=S,i.datatypeCode?i.numBitsPerVoxel?y:(G.error("NRRD parsing failed to set numBitsPerVoxel."),null):(G.error("NRRD parsing failed to set datatypeCode."),null))}var js={};It(js,{readNPY:()=>sv,readNPZ:()=>j6});function lp(e){return{"|b1":1,"<i1":1,"<u1":1,"<i2":2,"<u2":2,"<i4":4,"<u4":4,"<f4":4,"<f8":8}[e]??1}function X6(e){return{"|b1":2,"<i1":256,"<u1":2,"<i2":4,"<u2":512,"<i4":8,"<u4":768,"<f4":16,"<f8":64}[e]??16}async function sv(e,t){const n=new DataView(t),i=[n.getUint8(0),n.getUint8(1),n.getUint8(2),n.getUint8(3),n.getUint8(4),n.getUint8(5)],a=[147,78,85,77,80,89];if(!i.every((S,E)=>S===a[E]))throw new Error("Not a valid NPY file: Magic number mismatch");const o=n.getUint16(8,!0),l=new TextDecoder("utf-8").decode(t.slice(10,10+o)),u=l.match(/'shape': \((.*?)\)/);if(!u)throw new Error("Invalid NPY header: Shape not found");const f=u[1].split(",").map(S=>S.trim()).filter(S=>S!=="").map(Number),h=l.match(/'descr': '([^']+)'/);if(!h)throw new Error("Invalid NPY header: Data type not found");const d=h[1],m=f.reduce((S,E)=>S*E,1),p=10+o,A=t.slice(p,p+m*lp(d)),v=f.length>0?f[f.length-1]:1,y=f.length>1?f[f.length-2]:1,w=f.length>2?f[f.length-3]:1;e.hdr=new me;const C=e.hdr;return C.dims=[3,v,y,w,0,0,0,0],C.pixDims=[1,1,1,1,1,0,0,0],C.affine=[[C.pixDims[1],0,0,-(C.dims[1]-2)*.5*C.pixDims[1]],[0,-C.pixDims[2],0,(C.dims[2]-2)*.5*C.pixDims[2]],[0,0,-C.pixDims[3],(C.dims[3]-2)*.5*C.pixDims[3]],[0,0,0,1]],C.numBitsPerVoxel=lp(d)*8,C.datatypeCode=X6(d),A}async function j6(e,t){const n=new _A(t);for(let i=0;i<n.entries.length;i++){const a=n.entries[i];if(a.fileName.toLowerCase().endsWith(".npy")){const o=await a.extract();return await sv(e,o.buffer)}}}var fd={};It(fd,{readZARR:()=>_6});function q6(e,t,n,i){const a=t*n,o=new Uint8Array(a*i*3),l=new Array(i);for(let h=0;h<i;h++)l[h]=a*3*h;let u=0,f=0;for(let h=0;h<a;h++){for(let d=0;d<i;d++)o[l[d]+f]=e[u++],o[l[d]+f+1]=e[u++],o[l[d]+f+2]=e[u++];f+=3}return o}async function _6(e,t,n){let{width:i,height:a,depth:o=1,data:l}=n??{},u=i*a*o*3,f=u===l.length;if(f||(u=i*a*o,o===3&&(f=!0,o=1)),u!==l.length)throw new Error(`Expected RGB ${i}${a}${o}3 =  ${u}, but ZARR length ${l.length}`);e.hdr=new me;const h=e.hdr;if(h.dims=[3,i,a,o,1,1,1,1],h.pixDims=[1,1,1,1,0,0,0,0],h.affine=[[h.pixDims[1],0,0,-(h.dims[1]-2)*.5*h.pixDims[1]],[0,-h.pixDims[2],0,(h.dims[2]-2)*.5*h.pixDims[2]],[0,0,-h.pixDims[3],(h.dims[3]-2)*.5*h.pixDims[3]],[0,0,0,1]],!f){if(h.numBitsPerVoxel=8,h.datatypeCode=2,l instanceof Uint8Array){const A=new ArrayBuffer(l.length);return new Uint8Array(A).set(l),A}return l}h.numBitsPerVoxel=24,h.datatypeCode=128;const d=q6(l,h.dims[1],h.dims[2],h.dims[3]),m=new ArrayBuffer(d.length);return new Uint8Array(m).set(d),m}function di(e,t,n){const i=lt(n);_t(i,i);const a=nt(t[0],t[1],t[2],1);return Ft(a,a,i),ce(a[0],a[1],a[2])}function ov(e,t,n=!1){if(!e.matRAS)throw new Error("matRAS undefined");const i=lt(e.matRAS),a=lt(i);_t(a,i),Kt(a,a);const o=nt(t[0],t[1],t[2],1);Ft(o,o,a);const l=ce(o[0],o[1],o[2]);return n?l:new Float32Array([Math.round(l[0]),Math.round(l[1]),Math.round(l[2])])}function K6(e,t){return ce((t[0]+.5)/e.dimsRAS[1],(t[1]+.5)/e.dimsRAS[2],(t[2]+.5)/e.dimsRAS[3])}function Q6(e,t){return ce(Math.round(t[0]*e.dims[1]-.5),Math.round(t[1]*e.dims[2]-.5),Math.round(t[2]*e.dims[3]-.5))}function W6(e,t,n=!1){const i=nt(t[0],t[1],t[2],1);return n?Ft(i,i,e.frac2mm):Ft(i,i,e.frac2mmOrtho),i}function Z6(e,t,n=!1){const i=nt(t[0],t[1],t[2],1),a=e.dimsRAS,o=ce(0,0,0);if(typeof a>"u")return o;if(!n){const u=lt(e.frac2mmOrtho);return Kt(u,u),Ft(i,i,u),o[0]=i[0],o[1]=i[1],o[2]=i[2],o}if(a[1]<1||a[2]<1||a[3]<1)return o;const l=lt(e.matRAS);return Kt(l,l),_t(l,l),Ft(i,i,l),o[0]=(i[0]+.5)/a[1],o[1]=(i[1]+.5)/a[2],o[2]=(i[2]+.5)/a[3],o}function hd(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((n,i)=>n===t[i])}function lv(e){const t=lt(e);_t(t,e);const n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),i=Math.max(Math.max(Math.abs(t[0]),Math.abs(t[1])),Math.abs(t[2]))/n,a=Math.sqrt(t[4]*t[4]+t[5]*t[5]+t[6]*t[6]),o=Math.max(Math.max(Math.abs(t[4]),Math.abs(t[5])),Math.abs(t[6]))/a,l=Math.sqrt(t[8]*t[8]+t[9]*t[9]+t[10]*t[10]),u=Math.max(Math.max(Math.abs(t[8]),Math.abs(t[9])),Math.abs(t[10]))/l,f=Math.min(Math.min(i,o),u);let h=Math.abs(Math.acos(f)*180/3.141592653);return h>.01?G.warn("Warning voxels not aligned with world space: "+h+` degrees from plumb.
`):h=0,h}function dd(e){if(!e.matRAS)throw new Error("matRAS not defined");if(e.pixDimsRAS===void 0)throw new Error("pixDimsRAS not defined");if(!e.dimsRAS)throw new Error("dimsRAS not defined");e.oblique_angle=lv(e.matRAS);const t=di(e,[0,0,0],e.matRAS),n=di(e,[1/e.pixDimsRAS[1],0,0],e.matRAS),i=di(e,[0,1/e.pixDimsRAS[2],0],e.matRAS),a=di(e,[0,0,1/e.pixDimsRAS[3]],e.matRAS);Je(n,n,t),Je(i,i,t),Je(a,a,t);const o=Cn(n[0],n[1],n[2],0,i[0],i[1],i[2],0,a[0],a[1],a[2],0,0,0,0,1);e.obliqueRAS=lt(o);const l=Math.abs(90-xh(n,i)*(180/Math.PI)),u=Math.abs(90-xh(n,a)*(180/Math.PI)),f=Math.abs(90-xh(i,a)*(180/Math.PI));e.maxShearDeg=Math.max(Math.max(l,u),f),e.maxShearDeg>.1&&G.warn("Warning: voxels are rhomboidal, maximum shear is %f degrees.",e.maxShearDeg);const h=nt(e.dimsRAS[1],e.dimsRAS[2],e.dimsRAS[3],1),d=lt(e.matRAS);_t(d,d);const m=nt(-.5,-.5,-.5,0);Ba(d,d,ce(m[0],m[1],m[2])),d[0]*=h[0],d[1]*=h[0],d[2]*=h[0],d[4]*=h[1],d[5]*=h[1],d[6]*=h[1],d[8]*=h[2],d[9]*=h[2],d[10]*=h[2],e.frac2mm=lt(d);const p=e.pixDimsRAS[1],A=e.pixDimsRAS[2],v=e.pixDimsRAS[3],y=lt(d);y[0]=p*h[0],y[1]=0,y[2]=0,y[4]=0,y[5]=A*h[1],y[6]=0,y[8]=0,y[9]=0,y[10]=v*h[2];const w=ov(e,[0,0,0],!0);y[12]=(-w[0]-.5)*p,y[13]=(-w[1]-.5)*A,y[14]=(-w[2]-.5)*v,e.frac2mmOrtho=lt(y),e.extentsMinOrtho=[y[12],y[13],y[14]],e.extentsMaxOrtho=[y[0]+y[12],y[5]+y[13],y[10]+y[14]],e.mm2ortho=Ue(),Kt(e.mm2ortho,o)}function J6(e){if(!e.hdr)throw new Error("hdr not set");const t=e.hdr.affine,n=e.hdr,i=Wi(Math.abs(t[0][0]),Math.abs(t[0][1]),Math.abs(t[0][2]),Math.abs(t[1][0]),Math.abs(t[1][1]),Math.abs(t[1][2]),Math.abs(t[2][0]),Math.abs(t[2][1]),Math.abs(t[2][2])),a=[1,1,1];i[3]>i[0]&&(a[0]=2),i[6]>i[0]&&i[6]>i[3]&&(a[0]=3),a[1]=1,a[0]===1?i[4]>i[7]?a[1]=2:a[1]=3:a[0]===2?i[1]>i[7]?a[1]=1:a[1]=3:i[1]>i[4]?a[1]=1:a[1]=2,a[2]=6-a[1]-a[0];let o=[1,2,3];o[a[0]-1]=1,o[a[1]-1]=2,o[a[2]-1]=3;let l=Cn(t[0][0],t[0][1],t[0][2],t[0][3],t[1][0],t[1][1],t[1][2],t[1][3],t[2][0],t[2][1],t[2][2],t[2][3],0,0,0,1);e.mm000=di(e,[-.5,-.5,-.5],l),e.mm100=di(e,[n.dims[1]-.5,-.5,-.5],l),e.mm010=di(e,[-.5,n.dims[2]-.5,-.5],l),e.mm001=di(e,[-.5,-.5,n.dims[3]-.5],l);const u=Ue();gy(u,l);for(let w=0;w<3;w++)for(let C=0;C<3;C++)u[w*4+C]=l[w*4+o[C]-1];const f=[0,0,0];u[0]<0&&(f[0]=1),u[5]<0&&(f[1]=1),u[10]<0&&(f[2]=1),e.dimsRAS=[n.dims[0],n.dims[o[0]],n.dims[o[1]],n.dims[o[2]]],e.pixDimsRAS=[n.pixDims[0],n.pixDims[o[0]],n.pixDims[o[1]],n.pixDims[o[2]]],e.permRAS=o.slice();for(let w=0;w<3;w++)f[w]===1&&(e.permRAS[w]=-e.permRAS[w]);if(hd(o,[1,2,3])&&hd(f,[0,0,0])){e.toRAS=Ue(),e.matRAS=lt(l),dd(e),e.img2RASstep=[1,e.dimsRAS[1],e.dimsRAS[1]*e.dimsRAS[2]],e.img2RASstart=[0,0,0];return}wA(l),l[0]=1-f[0]*2,l[5]=1-f[1]*2,l[10]=1-f[2]*2,l[3]=(n.dims[o[0]]-1)*f[0],l[7]=(n.dims[o[1]]-1)*f[1],l[11]=(n.dims[o[2]]-1)*f[2];const h=Ue();Kt(h,l),Tr(h,h,u),e.matRAS=lt(h),l=Cn(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),l[o[0]-1+0]=-f[0]*2+1,l[o[1]-1+4]=-f[1]*2+1,l[o[2]-1+8]=-f[2]*2+1,l[3]=f[0],l[7]=f[1],l[11]=f[2],e.toRAS=lt(l),l[3]=0,l[7]=0,l[11]=0,l[12]=0,(e.permRAS[0]===-1||e.permRAS[1]===-1||e.permRAS[2]===-1)&&(l[12]=n.dims[1]-1),l[13]=0,(e.permRAS[0]===-2||e.permRAS[1]===-2||e.permRAS[2]===-2)&&(l[13]=n.dims[2]-1),l[14]=0,(e.permRAS[0]===-3||e.permRAS[1]===-3||e.permRAS[2]===-3)&&(l[14]=n.dims[3]-1),e.toRASvox=lt(l),G.debug(e.hdr.dims),G.debug(e.dimsRAS);const d=e.hdr;o=e.permRAS;const m=[Math.abs(o[0]),Math.abs(o[1]),Math.abs(o[2])],p=[d.dims[m[0]],d.dims[m[1]],d.dims[m[2]]],A=[1,d.dims[1],d.dims[1]*d.dims[2]],v=[A[m[0]-1],A[m[1]-1],A[m[2]-1]],y=[0,0,0];for(let w=0;w<3;w++)o[w]<0&&(y[w]=v[w]*(p[w]-1),v[w]=-v[w]);e.img2RASstep=v,e.img2RASstart=y,dd(e)}async function $6(e,t=1){if(!e.permRAS)throw new Error("permRAS undefined");if(!e.hdr)throw new Error("hdr undefined");const n=Cc({...e.hdr,vox_offset:352},!1),i=await lo(n.buffer,!0);t===1?(i.dims[0]=3,i.dims[4]=1):t>1&&(i.dims[0]=4,i.dims[4]=t);const a=e.permRAS.slice();if(a[0]===1&&a[1]===2&&a[2]===3)return i;i.qform_code=0;for(let l=1;l<4;l++)i.dims[l]=e.dimsRAS[l];for(let l=0;l<e.pixDimsRAS.length;l++)i.pixDims[l]=e.pixDimsRAS[l];let o=0;for(let l=0;l<4;l++)for(let u=0;u<4;u++)i.affine[l][u]=e.matRAS[o],o++;return i}function eC(e,t=0){if(!e.permRAS)throw new Error("permRAS undefined");if(!e.img)throw new Error("img undefined");if(!e.hdr)throw new Error("hdr undefined");const n=e.permRAS.slice();if(n[0]===1&&n[1]===2&&n[2]===3)return e.img;const i=e.hdr,a=i.dims[1]*i.dims[2]*i.dims[3];let o=t*a;(o+a>e.img.length||o<0)&&(o=0,G.warn(`img2RAS nVolume (${t}) out of bounds (${t}+1)${a} > ${e.img.length}`));const l=e.img.slice(0,a),u=[Math.abs(n[0]),Math.abs(n[1]),Math.abs(n[2])],f=[i.dims[u[0]],i.dims[u[1]],i.dims[u[2]]],h=[1,i.dims[1],i.dims[1]*i.dims[2]],d=[h[u[0]-1],h[u[1]-1],h[u[2]-1]],m=[0,0,0];for(let A=0;A<3;A++)n[A]<0&&(m[A]=d[A]*(f[A]-1),d[A]=-d[A]);let p=0;for(let A=0;A<f[2];A++){const v=m[2]+A*d[2];for(let y=0;y<f[1];y++){const w=m[1]+y*d[1];for(let C=0;C<f[0];C++){const S=m[0]+C*d[0];l[p]=e.img[S+w+v+o],p++}}}return l}function cv(e,t){t.length!==e.nVox3D*3&&G.warn("float32V1asRGBA() expects "+e.nVox3D*3+"voxels, got ",+t.length);const n=t.slice();e.hdr.datatypeCode=2304,e.nFrame4D=1;for(let f=4;f<7;f++)e.hdr.dims[f]=1;e.hdr.dims[0]=3;const i=new Uint8Array(e.nVox3D*4);let a=1;for(let f=0;f<e.nVox3D*3;f++)isNaN(n[f])||(a=Math.max(a,Math.abs(n[f])));const o=255/a,l=e.nVox3D*2;let u=0;for(let f=0;f<e.nVox3D;f++){const h=n[f],d=n[f+e.nVox3D],m=n[f+l];i[u]=Math.abs(h*o),i[u+1]=Math.abs(d*o),i[u+2]=Math.abs(m*o);const p=+(h>0)*1,A=+(d>0)*2,v=+(m>0)*4;let y=248+p+A+v;Math.abs(h)+Math.abs(d)+Math.abs(m)<.1&&(y=0),i[u+3]=y,u+=4}return i}function tC(e,t=!1,n=!1,i=!1){let a=e.v1;if(!a&&e.nFrame4D===3&&e.img.constructor===Float32Array&&(a=e.img.slice()),!a)return G.warn("Image does not have V1 data"),!1;if(t)for(let o=0;o<e.nVox3D;o++)a[o]=-a[o];if(n)for(let o=e.nVox3D;o<2*e.nVox3D;o++)a[o]=-a[o];if(i)for(let o=2*e.nVox3D;o<3*e.nVox3D;o++)a[o]=-a[o];return e.img=cv(e,a),!0}function qs(e,t){if(!e.hdr)throw new Error("hdr undefined");return e.hdr.scl_slope===0&&(e.hdr.scl_slope=1),t*e.hdr.scl_slope+e.hdr.scl_inter}function nC(e,t){if(!e.hdr)throw new Error("hdr undefined");return e.hdr.scl_slope===0&&(e.hdr.scl_slope=1),(t-e.hdr.scl_inter)/e.hdr.scl_slope}function Qd(e,t=Number.POSITIVE_INFINITY,n=!0){if(!e.hdr)throw new Error("hdr undefined");if(!e.img)throw new Error("img undefined");let i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=0,l=0,u=e.hdr.dims[1]*e.hdr.dims[2]*e.hdr.dims[3];const f=Math.floor(e.img.length/u);t>=f&&(t=e.frame4D),t=Math.min(t,f-1);const h=t*u;let d=[];if(n){const Y=[Math.floor(.25*e.hdr.dims[1]),Math.floor(.25*e.hdr.dims[2]),Math.floor(.25*e.hdr.dims[3])],P=[e.hdr.dims[1]-2*Y[0],e.hdr.dims[2]-2*Y[1],e.hdr.dims[3]-2*Y[2]],Q=[P[0]+Y[0],P[1]+Y[1],P[2]+Y[2]];u=P[0]*P[1]*P[2],d=new e.img.constructor(u);let k=-1,j=0;for(let H=0;H<e.hdr.dims[3];H++)for(let Z=0;Z<e.hdr.dims[2];Z++)for(let J=0;J<e.hdr.dims[1];J++)k++,!(J<Y[0]||Z<Y[1]||H<Y[2])&&(J>=Q[0]||Z>=Q[1]||H>=Q[2]||(d[j]=e.img[k+h],j++))}else{d=new e.img.constructor(u);for(let N=0;N<u;N++)d[N]=e.img[N+h]}const m=d.constructor!==Float64Array&&d.constructor!==Float32Array&&e.ignoreZeroVoxels;if(m)for(let N=0;N<u;N++)i=Math.min(d[N],i),a=Math.max(d[N],a),d[N]===0&&o++;else for(let N=0;N<u;N++){if(isNaN(d[N])){l++;continue}d[N]===0&&(o++,e.ignoreZeroVoxels)||(i=Math.min(d[N],i),a=Math.max(d[N],a))}e.ignoreZeroVoxels&&i===a&&o>0&&(i=0);const p=qs(e,i),A=qs(e,a),v=Xe.colormapFromKey(e._colormap);let y=0,w=0;if(v.min!==void 0&&(y=v.min),v.max!==void 0&&(w=v.max),y===w&&e.trustCalMinMax&&isFinite(e.hdr.cal_min)&&isFinite(e.hdr.cal_max)&&e.hdr.cal_max>e.hdr.cal_min)return e.cal_min=e.hdr.cal_min,e.cal_max=e.hdr.cal_max,e.robust_min=e.cal_min,e.robust_max=e.cal_max,e.global_min=p,e.global_max=A,[e.hdr.cal_min,e.hdr.cal_max,e.hdr.cal_min,e.hdr.cal_max];if(y!==w)return e.cal_min=y,e.cal_max=w,e.robust_min=e.cal_min,e.robust_max=e.cal_max,[y,w,y,w];const C=100*o/(u-0);let S=!1;C>60&&!e.ignoreZeroVoxels&&(G.warn(`${Math.round(C)}% of voxels are zero: ignoring zeros for cal_max`),S=!0,e.ignoreZeroVoxels=!0),e.ignoreZeroVoxels||(o=0),o+=l;const E=Math.round((u-0-o)*e.percentileFrac);if(E<1||i===a)return n?Qd(e,t,!1):(G.debug("no variability in image intensity?"),e.cal_min=p,e.cal_max=A,e.robust_min=e.cal_min,e.robust_max=e.cal_max,e.global_min=p,e.global_max=A,[p,A,p,A]);const M=1001,R=(M-1)/(a-i),D=new Array(M);for(let N=0;N<M;N++)D[N]=0;if(m)for(let N=0;N<u;N++)D[Math.round((d[N]-i)*R)]++;else if(e.ignoreZeroVoxels)for(let N=0;N<u;N++)d[N]!==0&&(isNaN(d[N])||D[Math.round((d[N]-i)*R)]++);else for(let N=0;N<u;N++)isNaN(d[N])||D[Math.round((d[N]-i)*R)]++;let T=0,F=0;for(;T<E;)T+=D[F],F++;F--,T=0;let U=M;for(;T<E;)U--,T+=D[U];if(F===U){let N=-1;for(;N!==0;)F>0&&(F--,D[F]>0&&(N=0)),N!==0&&U<M-1&&(U++,D[U]>0&&(N=0)),F===0&&U===M-1&&(N=0)}let I=qs(e,F/R+i),V=qs(e,U/R+i);return e.hdr.cal_min<e.hdr.cal_max&&e.hdr.cal_min>=p&&e.hdr.cal_max<=A&&(I=e.hdr.cal_min,V=e.hdr.cal_max),S&&(I=Math.min(I,0)),e.cal_min=I,e.cal_max=V,e.hdr.intent_code===1002&&(e.cal_min=p,e.cal_max=A),e.robust_min=e.cal_min,e.robust_max=e.cal_max,e.global_min=p,e.global_max=A,[I,V,p,A]}function Eh(e,t){e._colormap=t,Qd(e),e.onColormapChange&&e.onColormapChange(e)}function iC(e,t){e.colormapLabel=Xe.makeLabelLut(t)}async function rC(e,t){e.colormapLabel=await Xe.makeLabelLutFromUrl(t)}function cp(e){return e._colormap}function aC(e){return e._opacity}function sC(e,t){e._opacity=t,e.onOpacityChange&&e.onOpacityChange(e)}async function oC(e,t={}){if(e==="")throw Error("url must not be empty");let i=/^(?:[a-z+]+:)?\/\//i.test(e)?e:new URL(e,window.location.href);/(?:.([^.]+))?$/.exec(i.pathname)||(i=new URL("niivue-manifest.txt",e));let l=await fetch(i,{headers:t});if(!l.ok)throw Error(l.statusText);const f=(await l.text()).split(`
`),d=/(.*\/).*/.exec(i)[0],m=[];for(const p of f){const A=new URL(p,d);if(l=await fetch(A,{headers:t}),!l.ok)throw Error(l.statusText);const v=await l.arrayBuffer();m.push({name:p,data:v})}return m}async function fc(e,t){const n=e.getReader(),i=new Wy,a=[];let o=0,l=!1,u,f;const h=new Promise((m,p)=>{u=m,f=p});function d(){const m=new Uint8Array(o);let p=0;for(const A of a)m.set(A,p),p+=A.length;u(m)}return i.ondata=m=>{a.push(m),o+=m.length,o>=t&&(l=!0,n.cancel().catch(()=>{}),d())},(async()=>{try{for(;!l;){const{done:m,value:p}=await n.read();if(m){l=!0,i.push(new Uint8Array,!0);return}i.push(p,!1)}}catch(m){f(m)}})().catch(()=>{}),h}function lC(e){const n=new URL(e).searchParams.get("response-content-disposition");if(n){const i=n.match(/filename\*?=(?:UTF-8'')?"?([^";]+)"?/);if(i)return decodeURIComponent(i[1])}return e.split("/").pop().split("?")[0]}async function uv(e="",t={},n=NaN){if(isNaN(n))return null;const i=await fetch(e,{headers:t,cache:"force-cache"});let a=352,o=await fc(i.body,a);const l=new DataView(o.buffer,o.byteOffset,o.byteLength),u=l.getUint16(0,!0),f=u===348;if(!f&&!(u===23553)||(o.length>111&&(a=l.getFloat32(108,f)),a>o.length&&(o=await fc(i.body,a)),!(o[0]===92&&o[1]===1||o[1]===92&&o[0]===1)))return null;const m=await lo(o.buffer);if(!m)throw new Error("Could not read NIfTI header");const p=m.numBitsPerVoxel/8,A=[1,2,3].reduce((E,M)=>E*(m.dims[M]>1?m.dims[M]:1),1),v=[4,5,6].reduce((E,M)=>E*(m.dims[M]>1?m.dims[M]:1),1),y=Math.max(Math.min(n,v),1),w=m.vox_offset+y*A*p;if(y===v)return null;const C=await fetch(e,{headers:t,cache:"force-cache"});return(await fc(C.body,w)).buffer.slice(0,w)}async function cC(e="",t={},n=NaN){if(isNaN(n))return null;const a=(await fetch(e,{headers:t,cache:"force-cache"})).body.getReader(),{value:o,done:l}=await a.read();let u=o;if(l||!u||u.length<2)throw new Error("Not enough data to determine compression");const f=new DataView(u.buffer,u.byteOffset,u.byteLength),h=f.getUint16(0,!0);if(h===35615)return await a.cancel(),uv(e,t,n);const m=h===348;if(!m&&!(h===23553))return await a.cancel(),null;let A=352;for(u.length>111&&(A=f.getFloat32(108,m));u.length<A;){let T=function(I,V){const N=new Uint8Array(I.length+V.length);return N.set(I,0),N.set(V,I.length),N};const{value:F,done:U}=await a.read();if(U||!F)break;u=T(u,F)}const v=await lo(u.buffer);if(!v)throw new Error("Could not read NIfTI header");const y=v.numBitsPerVoxel/8,w=[1,2,3].reduce((T,F)=>T*(v.dims[F]>1?v.dims[F]:1),1),C=[4,5,6].reduce((T,F)=>T*(v.dims[F]>1?v.dims[F]:1),1),S=Math.max(Math.min(n,C),1),E=v.vox_offset+S*w*y,M=new Uint8Array(E),R=Math.min(u.length,E);M.set(u.subarray(0,R),0);let D=R;for(;D<E;){const{value:T,done:F}=await a.read();if(F||!T)return await a.cancel(),null;const U=Math.min(T.length,E-D);M.set(T.subarray(0,U),D),D+=U}return await a.cancel(),M.buffer}async function uC(e,t=NaN){let n=e.stream();if(!isNaN(t)){let d=0;const m=new TransformStream({transform(p,A){if(d>=t){A.terminate();return}const v=t-d;p.length>v?(A.enqueue(p.slice(0,v)),A.terminate()):A.enqueue(p),d+=p.length}});n=n.pipeThrough(m)}const i=await Kd(n),a=[],o=i.getReader();for(;;){const{done:d,value:m}=await o.read();if(d)break;a.push(m)}const l=a.reduce((d,m)=>d+m.length,0),u=new ArrayBuffer(l),f=new Uint8Array(u);let h=0;for(const d of a)f.set(d,h),h+=d.length;return u}function fC(e){const t=window.atob(e),n=t.length,i=new Uint8Array(n);for(let a=0;a<n;a++)i[a]=t.charCodeAt(a);return i.buffer}function Dh(e){const t=e.match(/\.([^.]+)(?:\.gz|\.bz2|\.xz)?$/);return t?t[1]:""}function hC(e){if(!e.hdr)throw new Error("hdr undefined");const t=e.id,n=e.hdr.datatypeCode,i=e.hdr.dims,a=i[1],o=i[2],l=i[3],u=Math.max(1,i[4]),f=e.hdr.pixDims,h=f[1],d=f[2],m=f[3],p=f[4],A=Math.floor(e.hdr.numBitsPerVoxel/8);return{id:t,datatypeCode:n,nx:a,ny:o,nz:l,nt:u,dx:h,dy:d,dz:m,dt:p,bpv:A}}function dC(e){return cc("","",e.name,e._colormap,e.opacity,e.hdr.cal_min,e.hdr.cal_max,e.trustCalMinMax,e.percentileFrac,e.ignoreZeroVoxels,e.useQFormNotSForm,e.colormapNegative,e.frame4D,e.imageType,e.colormapType)}function mC(e,t){e.hdr.cal_min=t.cal_min,e.hdr.cal_max=t.cal_max,Object.assign(e,t)}function gC(e,t){if(!(t.datatypeCode===128||t.datatypeCode===2304||t.littleEndian===sd()||t.numBitsPerVoxel<=8)){if(t.numBitsPerVoxel===16){const n=new Uint16Array(e);for(let i=0;i<n.length;i++){const a=n[i];n[i]=((a&255)<<8|a>>8&255)<<16>>16}}else if(t.numBitsPerVoxel===32){const n=new Uint32Array(e);for(let i=0;i<n.length;i++){const a=n[i];n[i]=(a&255)<<24|(a&65280)<<8|a>>8&65280|a>>24&255}}else if(t.numBitsPerVoxel===64){const n=t.numBitsPerVoxel/8,i=new Uint8Array(e);for(let a=0;a<i.length;a+=n){let o=n-1;for(let l=0;l<o;l++){const u=i[a+l];i[a+l]=i[a+o],i[a+o]=u,o--}}}}}function pC(e,t){switch(t.datatypeCode){case 2:return{img:new Uint8Array(e)};case 4:return{img:new Int16Array(e)};case 16:return{img:new Float32Array(e)};case 64:return{img:new Float64Array(e)};case 128:return{img:new Uint8Array(e)};case 512:return{img:new Uint16Array(e)};case 2304:return{img:new Uint8Array(e)};case 256:{const n=new Int8Array(e),i=n.length,a=new Int16Array(i);for(let o=0;o<i;o++)a[o]=n[o];return{img:a,updatedDatatypeCode:4,updatedNumBitsPerVoxel:16}}case 1:{const n=t.dims[1]*t.dims[2]*Math.max(1,t.dims[3])*Math.max(1,t.dims[4]),i=new Uint8Array(e),a=new Uint8Array(n),o=new Uint8Array(8);for(let u=0;u<8;u++)o[u]=Math.pow(2,u);let l=-1;for(let u=0;u<n;u++){const f=u%8;f===0&&l++,(i[l]&o[f])!==0&&(a[u]=1)}return{img:a,updatedDatatypeCode:2,updatedNumBitsPerVoxel:8}}case 768:{const n=new Uint32Array(e),i=n.length,a=new Float64Array(i);for(let o=0;o<i-1;o++)a[o]=n[o];return{img:a,updatedDatatypeCode:64}}case 8:{const n=new Int32Array(e),i=n.length,a=new Float64Array(i);for(let o=0;o<i-1;o++)a[o]=n[o];return{img:a,updatedDatatypeCode:64}}case 1024:{const n=new BigInt64Array(e),i=n.length,a=new Float64Array(i);for(let o=0;o<i-1;o++)a[o]=Number(n[o]);return{img:a,updatedDatatypeCode:64}}case 32:{const n=new Float32Array(e),i=Math.floor(n.length/2),a=new Float32Array(i),o=new Float32Array(i);let l=0;for(let u=0;u<i-1;u++)o[u]=n[l],a[u]=n[l+1],l+=2;return{img:o,imaginary:a,updatedDatatypeCode:16}}default:throw new Error("datatype "+t.datatypeCode+" not supported")}}function AC(e){(e.pixDims[1]===0||e.pixDims[2]===0||e.pixDims[3]===0)&&G.error("pixDims not plausible",e)}function vC(e){(isNaN(e.scl_slope)||e.scl_slope===0)&&(e.scl_slope=1),isNaN(e.scl_inter)&&(e.scl_inter=0)}function xC(e,t){const n=QA(e.affine);if(!t&&n&&e.qform_code<=e.sform_code)return;G.debug("spatial transform based on QForm");const i=e.quatern_b,a=e.quatern_c,o=e.quatern_d,l=Math.sqrt(1-(Math.pow(i,2)+Math.pow(a,2)+Math.pow(o,2))),u=e.pixDims[0]===0?1:e.pixDims[0],f=[[l*l+i*i-a*a-o*o,2*i*a-2*l*o,2*i*o+2*l*a],[2*i*a+2*l*o,l*l+a*a-i*i-o*o,2*a*o-2*l*i],[2*i*o-2*l*a,2*a*o+2*l*i,l*l+o*o-a*a-i*i]],h=e.affine;for(let d=0;d<3;d+=1)for(let m=0;m<3;m+=1)h[d][m]=f[d][m]*e.pixDims[m+1],m===2&&(h[d][m]*=u);h[0][3]=e.qoffset_x,h[1][3]=e.qoffset_y,h[2][3]=e.qoffset_z,e.affine=h}function yC(e){if(QA(e.affine))return;G.debug("Defective NIfTI: spatial transform does not make sense");let t=e.pixDims[1],n=e.pixDims[2],i=e.pixDims[3];(isNaN(t)||t===0)&&(t=1),(isNaN(n)||n===0)&&(n=1),(isNaN(i)||i===0)&&(i=1),e.pixDims[1]=t,e.pixDims[2]=n,e.pixDims[3]=i;const a=[[t,0,0,0],[0,n,0,0],[0,0,i,0],[0,0,0,1]];e.affine=a}function wC(e,t){AC(e),vC(e),xC(e,t),yC(e)}async function bC(e){const t=new URL(e).searchParams,n=t.get("z"),i=t.get("y"),a=t.get("x"),o=n?eo(parseInt(n),parseInt(n)+1):null,l=i?eo(parseInt(i),parseInt(i)+1):null,u=a?eo(parseInt(a),parseInt(a)+1):null,f=e.split("?")[0],h=new uw(f),d=Fw(h);let m;try{m=await Zi(d.resolve(e),{kind:"array"})}catch{m=await Zi(d,{kind:"array"})}let p;if(m.shape.length===4){const M=m.shape[2],R=m.shape[1],D=m.shape[0];o&&o[0]>=M&&(o[0]=M-1),l&&l[0]>=R&&(l[0]=R-1),u&&u[0]>=D&&(u[0]=D-1),p=await ip(m,[u,l,o,null])}else p=await ip(m,[u,l,o]);const A=p.data,[v,y,w,C]=p.shape;return{dataBuffer:A,zarrData:{data:A,width:y,height:v,depth:w,channels:C}}}async function CC(e,t={}){const n=await fetch(e,{headers:t});if(!n.ok)throw Error(n.statusText);if(!n.body)throw new Error("No readable stream available");const i=await Kd(n.body),a=[],o=i.getReader();for(;;){const{done:d,value:m}=await o.read();if(d)break;a.push(m)}const l=a.reduce((d,m)=>d+m.length,0),u=new ArrayBuffer(l),f=new Uint8Array(u);let h=0;for(const d of a)f.set(d,h),h+=d.length;return u}function SC(e,t,n){return n!==""?n:t.toUpperCase()==="HEAD"?e.substring(0,e.lastIndexOf("HEAD"))+"BRIK":t.toUpperCase()==="HDR"?e.substring(0,e.lastIndexOf("HDR"))+"IMG":null}async function MC(e,t={}){try{let n=await fetch(e,{headers:t});if(n.status===404&&(e.includes("BRIK")||e.includes("IMG"))&&(n=await fetch(`${e}.gz`,{headers:t})),!n.ok||!n.body)return null;const i=await Kd(n.body),a=[],o=i.getReader();for(;;){const{done:d,value:m}=await o.read();if(d)break;a.push(m)}const l=a.reduce((d,m)=>d+m.length,0),u=new ArrayBuffer(l),f=new Uint8Array(u);let h=0;for(const d of a)f.set(d,h),h+=d.length;return u}catch(n){return console.error("Error loading paired image data:",n),null}}var jt=class hc{constructor(t=null,n="",i="gray",a=1,o=null,l=NaN,u=NaN,f=!0,h=.02,d=!1,m=!1,p="",A=0,v=Me.UNKNOWN,y=NaN,w=NaN,C=!0,S=null,E=0){L(this,"name"),L(this,"id"),L(this,"url"),L(this,"headers"),L(this,"_colormap"),L(this,"_opacity"),L(this,"percentileFrac"),L(this,"ignoreZeroVoxels"),L(this,"trustCalMinMax"),L(this,"colormapNegative"),L(this,"colormapLabel"),L(this,"colormapInvert"),L(this,"nFrame4D"),L(this,"frame4D"),L(this,"nTotalFrame4D"),L(this,"cal_minNeg"),L(this,"cal_maxNeg"),L(this,"colorbarVisible",!0),L(this,"modulationImage",null),L(this,"modulateAlpha",0),L(this,"series",[]),L(this,"nVox3D"),L(this,"oblique_angle"),L(this,"maxShearDeg"),L(this,"useQFormNotSForm"),L(this,"colormapType"),L(this,"pixDims"),L(this,"matRAS"),L(this,"pixDimsRAS"),L(this,"obliqueRAS"),L(this,"dimsRAS"),L(this,"permRAS"),L(this,"img2RASstep"),L(this,"img2RASstart"),L(this,"toRAS"),L(this,"toRASvox"),L(this,"frac2mm"),L(this,"frac2mmOrtho"),L(this,"extentsMinOrtho"),L(this,"extentsMaxOrtho"),L(this,"mm2ortho"),L(this,"hdr",null),L(this,"extensions"),L(this,"imageType"),L(this,"img"),L(this,"imaginary"),L(this,"v1"),L(this,"fileObject"),L(this,"dims"),L(this,"onColormapChange",()=>{}),L(this,"onOpacityChange",()=>{}),L(this,"mm000"),L(this,"mm100"),L(this,"mm010"),L(this,"mm001"),L(this,"cal_min"),L(this,"cal_max"),L(this,"robust_min"),L(this,"robust_max"),L(this,"global_min"),L(this,"global_max"),L(this,"urlImgData"),L(this,"isManifest"),L(this,"limitFrames4D"),this.init(t,n,i,a,o,l,u,f,h,d,m,p,A,v,y,w,C,S,E)}init(t=null,n="",i="",a=1,o=null,l=NaN,u=NaN,f=!0,h=.02,d=!1,m=!1,p="",A=0,v=Me.UNKNOWN,y=NaN,w=NaN,C=!0,S=null,E=0,M=null){const R=i==="";if(R&&(i="gray"),this.name=n,this.imageType=v,this.id=td(),this._colormap=i,this._opacity=a>1?1:a,this.percentileFrac=h,this.ignoreZeroVoxels=d,this.trustCalMinMax=f,this.colormapNegative=p,this.colormapLabel=S,this.frame4D=A,this.cal_minNeg=y,this.cal_maxNeg=w,this.colorbarVisible=C,this.colormapType=E,this.useQFormNotSForm=m,!t)return;if(R&&this.hdr&&this.hdr.intent_code===1002&&(i="random",this._colormap=i),this.hdr&&typeof this.hdr.magic=="number"&&(this.hdr.magic="n+1"),this.nFrame4D=1,this.hdr)for(let U=4;U<7;U++)this.hdr.dims[U]>1&&(this.nFrame4D*=this.hdr.dims[U]);if(this.frame4D=Math.min(this.frame4D,this.nFrame4D-1),this.nTotalFrame4D=this.nFrame4D,!this.hdr||!M)return;this.nVox3D=this.hdr.dims[1]*this.hdr.dims[2]*this.hdr.dims[3];const D=this.nVox3D*(this.hdr.numBitsPerVoxel/8),T=M.byteLength/D;T!==this.nFrame4D&&(T>0&&T*D===M.byteLength?G.debug("Loading the first "+T+" of "+this.nFrame4D+" volumes"):G.warn("This header does not match voxel data",this.hdr,M.byteLength),this.nFrame4D=T),(this.hdr.intent_code===1007||this.hdr.intent_code===2003)&&this.nFrame4D===3&&this.hdr.datatypeCode===16&&(M=this.float32V1asRGBA(new Float32Array(M)).buffer),wC(this.hdr,m),gC(M,this.hdr);const F=pC(M,this.hdr);this.img=F.img,F.imaginary&&(this.imaginary=F.imaginary),F.updatedDatatypeCode!==void 0&&(this.hdr.datatypeCode=F.updatedDatatypeCode),F.updatedNumBitsPerVoxel!==void 0&&(this.hdr.numBitsPerVoxel=F.updatedNumBitsPerVoxel),this.calculateRAS(),isNaN(l)||(this.hdr.cal_min=l),isNaN(u)||(this.hdr.cal_max=u),this.calMinMax()}static async new(t=null,n="",i="",a=1,o=null,l=NaN,u=NaN,f=!0,h=.02,d=!1,m=!1,p="",A=0,v=Me.UNKNOWN,y=NaN,w=NaN,C=!0,S=null,E=0,M){const R=new hc,D=/(?:\.([^.]+))?$/;let T=D.exec(n)[1]||"";T=T.toUpperCase(),T==="GZ"&&(T=D.exec(n.slice(0,-3))[1],T=T.toUpperCase());let F=null;if(v===Me.UNKNOWN&&(v=Me.parse(T)),t instanceof ArrayBuffer&&t.byteLength>=2&&v===Me.DCM){const U=new Uint8Array(t);(U[0]===92&&U[1]===1||U[1]===92&&U[0]===1)&&(v=Me.NII)}switch(R.imageType=v,v){case Me.DCM_FOLDER:case Me.DCM_MANIFEST:case Me.DCM:return;case Me.FIB:[F,R.v1]=await Xs.readFIB(R,t);break;case Me.MIH:case Me.MIF:F=await ud.readMIF(R,t,o);break;case Me.NHDR:case Me.NRRD:if(F=await av.readNrrd(R,t),F===null)throw new Error(`Failed to parse NHDR/NRRD file ${n}`);break;case Me.MHD:case Me.MHA:F=await cd.readMHA(R,t,o);break;case Me.MGH:case Me.MGZ:if(F=await tv.readMgh(R,t),F===null)throw new Error(`Failed to parse MGH/MGZ file ${n}`);break;case Me.SRC:F=await Xs.readSRC(R,t);break;case Me.V:F=ld.readECAT(R,t);break;case Me.V16:F=Hs.readV16(R,t);break;case Me.VMR:F=Hs.readVMR(R,t);break;case Me.HEAD:F=await od.readHEAD(R,t,o);break;case Me.BMP:F=await uc.readBMP(R,t);break;case Me.NPY:F=await js.readNPY(R,t);break;case Me.NPZ:F=await js.readNPZ(R,t);break;case Me.ZARR:F=await fd.readZARR(R,t,M);break;case Me.NII:if(F=await rv.readNifti(R,t,o),F===null)throw new Error(`Failed to parse NIfTI file ${n}.`);break;default:throw new Error("Image type not supported")}return R.init(t,n,i,a,o,l,u,f,h,d,m,p,A,v,y,w,C,S,E,F),R}computeObliqueAngle(t){return lv(t)}float32V1asRGBA(t){return cv(this,t)}loadImgV1(t=!1,n=!1,i=!1){return tC(this,t,n,i)}calculateOblique(){dd(this)}readECAT(t){return ld.readECAT(this,t)}readV16(t){return Hs.readV16(this,t)}async readNPY(t){return js.readNPY(this,t)}async readNPZ(t){return js.readNPZ(this,t)}async imageDataFromArrayBuffer(t){return uc.imageDataFromArrayBuffer(t)}async readBMP(t){return uc.readBMP(this,t)}async readZARR(t,n){return fd.readZARR(this,t,n)}readVMR(t){return Hs.readVMR(this,t)}async readFIB(t){return Xs.readFIB(this,t)}async readSRC(t){return Xs.readSRC(this,t)}async readHEAD(t,n){return od.readHEAD(this,t,n)}async readMHA(t,n){return cd.readMHA(this,t,n)}async readMIF(t,n){return ud.readMIF(this,t,n)}calculateRAS(){J6(this)}async hdr2RAS(t=1){return $6(this,t)}img2RAS(t=0){return eC(this,t)}vox2mm(t,n){return di(this,t,n)}mm2vox(t,n=!1){return ov(this,t,n)}arrayEquals(t,n){return hd(t,n)}setColormap(t){Eh(this,t)}setColormapLabel(t){iC(this,t)}async setColormapLabelFromUrl(t){return rC(this,t)}get colormap(){return cp(this)}get colorMap(){return cp(this)}set colormap(t){Eh(this,t)}set colorMap(t){Eh(this,t)}get opacity(){return aC(this)}set opacity(t){sC(this,t)}calMinMax(t=Number.POSITIVE_INFINITY,n=!0){return Qd(this,t,n)}intensityRaw2Scaled(t){return qs(this,t)}intensityScaled2Raw(t){return nC(this,t)}async saveToUint8Array(t,n=null){return JA(this,t,n)}async saveToDisk(t="",n=null){return E6(this,t,n)}static async fetchDicomData(t,n={}){return oC(t,n)}static async readFirstDecompressedBytes(t,n){return fc(t,n)}static extractFilenameFromUrl(t){return lC(t)}static async loadInitialVolumesGz(t="",n={},i=NaN){return uv(t,n,i)}static async loadInitialVolumes(t="",n={},i=NaN){return cC(t,n,i)}static async loadFromUrl({url:t="",urlImgData:n="",headers:i={},name:a="",colormap:o="",opacity:l=1,cal_min:u=NaN,cal_max:f=NaN,trustCalMinMax:h=!0,percentileFrac:d=.02,ignoreZeroVoxels:m=!1,useQFormNotSForm:p=!1,colormapNegative:A="",frame4D:v=0,isManifest:y=!1,limitFrames4D:w=NaN,imageType:C=Me.UNKNOWN,colorbarVisible:S=!0,buffer:E=new ArrayBuffer(0)}={}){if(t==="")throw Error("url must not be empty");let M=null,R=null,D=null;if(t instanceof Uint8Array&&(t=t.slice().buffer),E.byteLength>0&&(t=E),t instanceof ArrayBuffer)if(R=t,a!=="")t=a;else{const V=new Uint8Array(R);t=V[0]===31&&V[1]===139?"array.nii.gz":"array.nii"}let T="";if(a===""?T=Dh(t):T=Dh(a),C===Me.UNKNOWN&&(C=Me.parse(T)),C===Me.UNKNOWN&&typeof t=="string"){const V=await fetch(t,{});if(V.redirected){const N=this.extractFilenameFromUrl(V.url);N&&N.length>0&&a===""&&(a=N,T=Dh(a),C=Me.parse(T))}}if(C===Me.ZARR){const V=await bC(t);R=V.dataBuffer,D=V.zarrData}const F=C===Me.DCM||Me.NII;!R&&F&&(R=await this.loadInitialVolumes(t,i,w)),R||(y?(R=await hc.fetchDicomData(t,i),C=Me.DCM_MANIFEST):R=await CC(t,i));const U=SC(t,T.toUpperCase(),n);let I=null;if(U&&(I=await MC(U,i)),!R)throw new Error("Unable to load buffer properly from volume");if(!a){let V;try{V=new URL(t).pathname.split("/")}catch{V=t.split("/")}a=V.slice(-1)[0],a.indexOf("?")>-1&&(a=a.slice(0,a.indexOf("?")))}return M=await this.new(R,a,o,l,I,u,f,h,d,m,p,A,v,C,NaN,NaN,!0,null,0,D),M.url=t,M.colorbarVisible=S,M}static async readFileAsync(t,n=NaN){return uC(t,n)}static async loadFromFile({file:t,name:n="",colormap:i="",opacity:a=1,urlImgData:o=null,cal_min:l=NaN,cal_max:u=NaN,trustCalMinMax:f=!0,percentileFrac:h=.02,ignoreZeroVoxels:d=!1,useQFormNotSForm:m=!1,colormapNegative:p="",frame4D:A=0,limitFrames4D:v=NaN,imageType:y=Me.UNKNOWN}){let w=null,C=[];try{if(Array.isArray(t))C=await Promise.all(t.map(E=>this.readFileAsync(E)));else{if(isNaN(v))C=await this.readFileAsync(t);else{const E=await this.readFileAsync(t,512),M=new Uint8Array(E);if(!(M[0]===92&&M[1]===1||M[1]===92&&M[0]===1))C=await this.readFileAsync(t);else{const D=await lo(E);if(!D)throw new Error("could not read nifti header");const T=D.numBitsPerVoxel/8,F=[1,2,3].reduce((N,Y)=>N*(D.dims[Y]>1?D.dims[Y]:1),1),U=[4,5,6].reduce((N,Y)=>N*(D.dims[Y]>1?D.dims[Y]:1),1),I=Math.max(Math.min(v,U),1),V=D.vox_offset+I*F*T;C=await this.readFileAsync(t,V)}}n=t.name}let S=null;o&&(S=await this.readFileAsync(o)),w=await this.new(C,n,i,a,S,l,u,f,h,d,m,p,A,y,NaN,NaN,!0,null,0,null),w.fileObject=t}catch(S){throw G.error(S),new Error("could not build NVImage")}if(w===null)throw new Error("could not build NVImage");return w}static createNiftiArray(t=[256,256,256],n=[1,1,1],i=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],a=2,o=new Uint8Array){return M6(t,n,i,a,o)}static createNiftiHeader(t=[256,256,256],n=[1,1,1],i=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],a=2){return WA(t,n,i,a)}getVolumeData(t=[-1,0,0],n=[0,0,0],i="same"){return T6(this,t,n,i)}setVolumeData(t=[-1,0,0],n=[0,0,0],i=new Uint8Array){R6(this,t,n,i)}static async loadFromBase64({base64:t,name:n="",colormap:i="",opacity:a=1,cal_min:o=NaN,cal_max:l=NaN,trustCalMinMax:u=!0,percentileFrac:f=.02,ignoreZeroVoxels:h=!1,useQFormNotSForm:d=!1,colormapNegative:m="",frame4D:p=0,imageType:A=Me.UNKNOWN,cal_minNeg:v=NaN,cal_maxNeg:y=NaN,colorbarVisible:w=!0,colormapLabel:C=null}){let S=null;try{const E=fC(t);S=await this.new(E,n,i,a,null,o,l,u,f,h,d,m,p,A,v,y,w,C,0,null)}catch(E){G.debug(E)}if(S===null)throw new Error("could not load NVImage");return S}clone(){const t=new hc;return t.id=td(),t.hdr=Object.assign({},this.hdr),t.img=this.img.slice(),t.calculateRAS(),t.calMinMax(),t}zeroImage(){this.img.fill(0)}getImageMetadata(){return hC(this)}static zerosLike(t,n="same"){const i=t.clone();return i.zeroImage(),n==="uint8"&&(i.img=Uint8Array.from(i.img),i.hdr.datatypeCode=2,i.hdr.numBitsPerVoxel=8),n==="float32"&&(i.img=Float32Array.from(i.img),i.hdr.datatypeCode=16,i.hdr.numBitsPerVoxel=32),i}getValue(t,n,i,a=0,o=!1){return D6(this,t,n,i,a,o)}getValues(t,n,i,a=0,o=!1){return $A(this,t,n,i,a,o)}applyOptionsUpdate(t){mC(this,t)}getImageOptions(){return dC(this)}toUint8Array(t=null){return ZA(this,t)}convertVox2Frac(t){return K6(this,t)}convertFrac2Vox(t){return Q6(this,t)}convertFrac2MM(t,n=!1){return W6(this,t,n)}convertMM2Frac(t,n=!1){return Z6(this,t,n)}},kn=(e=>(e[e.AXIAL=0]="AXIAL",e[e.CORONAL=1]="CORONAL",e[e.SAGITTAL=2]="SAGITTAL",e[e.MULTIPLANAR=3]="MULTIPLANAR",e[e.RENDER=4]="RENDER",e))(kn||{}),_s=(e=>(e[e.NEVER=0]="NEVER",e[e.ALWAYS=1]="ALWAYS",e[e.AUTO=2]="AUTO",e))(_s||{}),Dr=(e=>(e[e.none=0]="none",e[e.contrast=1]="contrast",e[e.measurement=2]="measurement",e[e.pan=3]="pan",e[e.slicer3D=4]="slicer3D",e[e.callbackOnly=5]="callbackOnly",e[e.roiSelection=6]="roiSelection",e[e.angle=7]="angle",e[e.crosshair=8]="crosshair",e[e.windowing=9]="windowing",e))(Dr||{}),Bn={textHeight:-1,fontSizeScaling:.4,fontMinPx:13,colorbarHeight:.05,colorbarWidth:-1,showColorbarBorder:!0,crosshairWidth:1,crosshairWidthUnit:"voxels",crosshairGap:0,rulerWidth:4,show3Dcrosshair:!1,backColor:[0,0,0,1],crosshairColor:[1,0,0,1],fontColor:[.5,.5,.5,1],selectionBoxColor:[1,1,1,.5],clipPlaneColor:[.7,0,.7,.5],isClipPlanesCutaway:!1,paqdUniforms:[.3,.5,.5,1],rulerColor:[1,0,0,.8],colorbarMargin:.05,trustCalMinMax:!0,clipPlaneHotKey:"KeyC",cycleClipPlaneHotKey:"KeyP",viewModeHotKey:"KeyV",doubleTouchTimeout:500,longTouchTimeout:1e3,keyDebounceTime:50,isNearestInterpolation:!1,isResizeCanvas:!0,atlasOutline:0,atlasActiveIndex:0,isRuler:!1,isColorbar:!1,isOrientCube:!1,tileMargin:0,multiplanarPadPixels:0,multiplanarForceRender:!1,multiplanarEqualSize:!1,multiplanarShowRender:2,isRadiologicalConvention:!1,meshThicknessOn2D:1/0,dragMode:1,dragModePrimary:8,mouseEventConfig:void 0,touchEventConfig:void 0,yoke3Dto2DZoom:!1,isDepthPickMesh:!1,isCornerOrientationText:!1,isOrientationTextVisible:!0,showAllOrientationMarkers:!1,heroImageFraction:0,heroSliceType:4,sagittalNoseLeft:!1,isSliceMM:!1,isV1SliceShader:!1,forceDevicePixelRatio:0,logLevel:"info",loadingText:"loading ...",isForceMouseClickToVoxelCenters:!1,dragAndDropEnabled:!0,drawingEnabled:!1,penValue:1,penType:0,floodFillNeighbors:6,isFilledPen:!1,thumbnail:"",maxDrawUndoBitmaps:8,sliceType:3,meshXRay:0,isAntiAlias:null,limitFrames4D:NaN,isAdditiveBlend:!1,showLegend:!0,legendBackgroundColor:[.3,.3,.3,.5],legendTextColor:[1,1,1,1],multiplanarLayout:0,renderOverlayBlend:1,sliceMosaicString:"",centerMosaic:!1,penSize:1,interactive:!0,clickToSegment:!1,clickToSegmentRadius:3,clickToSegmentBright:!0,clickToSegmentAutoIntensity:!1,clickToSegmentIntensityMax:NaN,clickToSegmentIntensityMin:NaN,clickToSegmentPercent:0,clickToSegmentMaxDistanceMM:Number.POSITIVE_INFINITY,clickToSegmentIs2D:!1,selectionBoxLineThickness:4,selectionBoxIsOutline:!1,scrollRequiresFocus:!1,showMeasureUnits:!0,measureTextJustify:"center",measureTextColor:[1,0,0,1],measureLineColor:[1,0,0,1],measureTextHeight:.06,isAlphaClipDark:!1,gradientOrder:1,gradientOpacity:0,renderSilhouette:0,gradientAmount:0,invertScrollDirection:!1,is2DSliceShader:!1,bounds:null,showBoundsBorder:!1,boundsBorderColor:[1,1,1,1]},Ks={gamma:1,azimuth:110,elevation:10,crosshairPos:ce(.5,.5,.5),clipPlanes:[[0,0,0,0]],clipPlaneDepthAziElevs:[[2,0,0]],volScaleMultiplier:1,pan2Dxyzmm:nt(0,0,0,1)};function EC(e,t){const n={};for(const i in e){const a=e[i],o=t[i],l=Array.isArray(a)&&Array.isArray(o);(l&&a.some((u,f)=>u!==o[f])||!l&&a!==o)&&(n[i]=a)}return n}var Th=class _i{constructor(){L(this,"data",{title:"Untitled document",imageOptionsArray:[],meshOptionsArray:[],opts:{...Bn},previewImageDataURL:"",labels:[],encodedImageBlobs:[],encodedDrawingBlob:""}),L(this,"scene"),L(this,"volumes",[]),L(this,"meshDataObjects"),L(this,"meshes",[]),L(this,"drawBitmap",null),L(this,"imageOptionsMap",new Map),L(this,"meshOptionsMap",new Map),L(this,"completedMeasurements",[]),L(this,"completedAngles",[]),L(this,"_optsProxy",null),L(this,"_optsChangeCallback",null),this.scene={onAzimuthElevationChange:()=>{},onZoom3DChange:()=>{},sceneData:{...Ks,pan2Dxyzmm:nt(0,0,0,1),crosshairPos:ce(.5,.5,.5)},get renderAzimuth(){return this.sceneData.azimuth},set renderAzimuth(t){this.sceneData.azimuth=t,this.onAzimuthElevationChange&&this.onAzimuthElevationChange(this.sceneData.azimuth,this.sceneData.elevation)},get renderElevation(){return this.sceneData.elevation},set renderElevation(t){this.sceneData.elevation=t,this.onAzimuthElevationChange&&this.onAzimuthElevationChange(this.sceneData.azimuth,this.sceneData.elevation)},get volScaleMultiplier(){return this.sceneData.volScaleMultiplier},set volScaleMultiplier(t){this.sceneData.volScaleMultiplier=t,this.onZoom3DChange(t)},get crosshairPos(){return this.sceneData.crosshairPos},set crosshairPos(t){this.sceneData.crosshairPos=t},get clipPlane(){return this.sceneData.clipPlanes[0]??[]},set clipPlane(t){this.sceneData.clipPlanes[0]=t},get clipPlanes(){return this.sceneData.clipPlanes},set clipPlanes(t){this.sceneData.clipPlanes=t},get clipPlaneDepthAziElevs(){return this.sceneData.clipPlaneDepthAziElevs},set clipPlaneDepthAziElevs(t){this.sceneData.clipPlaneDepthAziElevs=t},get pan2Dxyzmm(){return this.sceneData.pan2Dxyzmm},set pan2Dxyzmm(t){this.sceneData.pan2Dxyzmm=t},get gamma(){return this.sceneData.gamma},set gamma(t){this.sceneData.gamma=t}}}get title(){return this.data.title}get previewImageDataURL(){return this.data.previewImageDataURL}set previewImageDataURL(t){this.data.previewImageDataURL=t}set title(t){this.data.title=t}get imageOptionsArray(){return this.data.imageOptionsArray}get encodedImageBlobs(){return this.data.encodedImageBlobs}get encodedDrawingBlob(){return this.data.encodedDrawingBlob}get opts(){return this._optsProxy||this._createOptsProxy(),this._optsProxy}set opts(t){this.data.opts={...t},this._optsProxy=null}get labels(){return this.data.labels}set labels(t){this.data.labels=t}get customData(){return this.data.customData}set customData(t){this.data.customData=t}hasImage(t){return this.volumes.find(n=>n.id===t.id)!==void 0}hasImageFromUrl(t){return this.data.imageOptionsArray.find(n=>n.url===t)!==void 0}addImageOptions(t,n){if(!this.hasImage(t)&&!n.name)if(n.url){const a=/^(?:[a-z+]+:)?\/\//i.test(n.url)?new URL(n.url):new URL(n.url,window.location.href);n.name=a.pathname.split("/").pop(),n.name.toLowerCase().endsWith(".gz")&&(n.name=n.name.slice(0,-3)),n.name.toLowerCase().endsWith(".nii")||(n.name+=".nii")}else n.name="untitled.nii";n.imageType=Me.NII,this.data.imageOptionsArray.push(n),this.imageOptionsMap.set(t.id,this.data.imageOptionsArray.length-1)}removeImage(t){if(this.imageOptionsMap.has(t.id)){const n=this.imageOptionsMap.get(t.id);this.data.imageOptionsArray.length>n&&this.data.imageOptionsArray.splice(n,1),this.imageOptionsMap.delete(t.id)}this.volumes=this.volumes.filter(n=>n.id!==t.id)}async fetchLinkedData(){if(this.data.encodedImageBlobs=[],!!this.imageOptionsArray?.length){for(const t of this.imageOptionsArray)if(t.url)try{const n=await fetch(t.url);if(!n.ok){console.warn("Failed to fetch image:",t.url);continue}const i=await n.arrayBuffer(),a=new Uint8Array(i),o=Ce.uint8tob64(a);this.data.encodedImageBlobs.push(o),console.info("fetch linked data fetched from ",t.url)}catch(n){console.warn(`Failed to fetch/encode image from ${t.url}:`,n)}}}getImageOptions(t){return this.imageOptionsMap.has(t.id)?this.data.imageOptionsArray[this.imageOptionsMap.get(t.id)]:null}json(t=!0,n=!0){const i={encodedImageBlobs:[],previewImageDataURL:this.data.previewImageDataURL,imageOptionsMap:new Map},a=[];i.sceneData={...this.scene.sceneData},delete i.sceneData.clipPlane,delete i.sceneData.clipPlaneDepthAziElev,delete i.sceneData.clipThick,delete i.sceneData.clipVolumeLow,delete i.sceneData.clipVolumeHigh,i.opts=EC(this.opts,Bn),this.opts.meshThicknessOn2D===1/0&&(i.opts.meshThicknessOn2D="infinity"),this.opts.meshThicknessOn2D===1/0&&(i.opts.meshThicknessOn2D="infinity"),i.labels=[...this.data.labels];for(const l of i.labels)delete l.onClick;if(i.customData=this.customData,i.completedMeasurements=[...this.completedMeasurements],i.completedAngles=[...this.completedAngles],this.volumes.length)for(let l=0;l<this.volumes.length;l++){const u=this.volumes[l];let f=this.getImageOptions(u);if(f===null?(G.warn("no options found for image, using options from the volume directly"),f={name:u?.name??"",colormap:u?._colormap??"gray",opacity:u?._opacity??1,pairedImgData:null,cal_min:u?.cal_min??NaN,cal_max:u?.cal_max??NaN,trustCalMinMax:u?.trustCalMinMax??!0,percentileFrac:u?.percentileFrac??.02,ignoreZeroVoxels:u?.ignoreZeroVoxels??!1,useQFormNotSForm:u?.useQFormNotSForm??!1,colormapNegative:u?.colormapNegative??"",colormapLabel:u?.colormapLabel??null,imageType:u?.imageType??Me.NII,frame4D:u?.frame4D??0,limitFrames4D:u?.limitFrames4D??NaN,url:u?.url??"",urlImageData:u?.urlImgData??"",alphaThreshold:!1,cal_minNeg:u?.cal_minNeg??NaN,cal_maxNeg:u?.cal_maxNeg??NaN,colorbarVisible:u?.colorbarVisible??!0}):"imageType"in f||(f.imageType=Me.NII),f.colormap=u.colormap,f.colormapLabel=u.colormapLabel,f.opacity=u.opacity,f.cal_max=u.cal_max??NaN,f.cal_min=u.cal_min??NaN,a.push(f),t){const h=Ce.uint8tob64(u.toUint8Array());i.encodedImageBlobs.push(h)}i.imageOptionsMap.set(u.id,l)}i.imageOptionsArray=[...a];const o=[];i.connectomes=[];for(const l of this.meshes){if(l.type==="connectome"){i.connectomes.push(JSON.stringify(l.json()));continue}const u={pts:l.pts,tris:l.tris,name:l.name,rgba255:Uint8Array.from(l.rgba255),opacity:l.opacity,connectome:l.connectome,dpg:l.dpg,dps:l.dps,dpv:l.dpv,meshShaderIndex:l.meshShaderIndex,layers:l.layers.map(f=>({values:f.values,nFrame4D:f.nFrame4D,frame4D:0,outlineBorder:f.outlineBorder,global_min:f.global_min,global_max:f.global_max,cal_min:f.cal_min,cal_max:f.cal_max,opacity:f.opacity,colormap:f.colormap,colormapNegative:f.colormapNegative,colormapLabel:f.colormapLabel,useNegativeCmap:f.useNegativeCmap})),hasConnectome:l.hasConnectome,edgeColormap:l.edgeColormap,edgeColormapNegative:l.edgeColormapNegative,edgeMax:l.edgeMax,edgeMin:l.edgeMin,edges:l.edges&&Array.isArray(l.edges)?[...l.edges]:[],extentsMax:l.extentsMax,extentsMin:l.extentsMin,furthestVertexFromOrigin:l.furthestVertexFromOrigin,nodeColormap:l.nodeColormap,nodeColormapNegative:l.nodeColormapNegative,nodeMaxColor:l.nodeMaxColor,nodeMinColor:l.nodeMinColor,nodeScale:l.nodeScale,legendLineThickness:l.legendLineThickness,offsetPt0:l.offsetPt0,nodes:l.nodes};l.offsetPt0&&l.offsetPt0.length>0&&(u.offsetPt0=l.offsetPt0,u.fiberGroupColormap=l.fiberGroupColormap,u.fiberColor=l.fiberColor,u.fiberDither=l.fiberDither,u.fiberRadius=l.fiberRadius,u.colormap=l.colormap),o.push(u)}return i.meshesString=JSON.stringify(Ly(o)),n&&this.drawBitmap&&(i.encodedDrawingBlob=Ce.uint8tob64(this.drawBitmap)),i}async download(t,n,i={embedImages:!0}){const a=this.json(i.embedImages),o=JSON.stringify(a),l=n?"application/gzip":"application/json",u=n?await Ce.compressStringToArrayBuffer(o):o;Ce.download(u,t,l)}static deserializeMeshDataObjects(t){if(!t.data.meshesString||t.data.meshesString==="[]"){t.meshDataObjects=[];return}if(t.data.meshesString){t.meshDataObjects=Ny(JSON.parse(t.data.meshesString));for(const n of t.meshDataObjects)for(const i of n.layers)"colorMap"in i&&(i.colormap=i.colorMap,delete i.colorMap),"colorMapNegative"in i&&(i.colormapNegative=i.colorMapNegative,delete i.colorMapNegative)}}static async loadFromUrl(t){const i=await(await fetch(t)).arrayBuffer();let a;if(Ce.isArrayBufferCompressed(i)){const o=await Ce.decompressArrayBuffer(i);a=JSON.parse(o)}else{const o=new TextDecoder;a=JSON.parse(o.decode(i))}return _i.loadFromJSON(a)}static async loadFromFile(t){const n=await Ce.readFileAsync(t);let i;const a=new _i;return Ce.isArrayBufferCompressed(n)?i=await Ce.decompressArrayBuffer(n):i=new TextDecoder().decode(n),a.data=JSON.parse(i),a.data.opts.meshThicknessOn2D==="infinity"&&(a.data.opts.meshThicknessOn2D=1/0),a.scene.sceneData={...Ks,...a.data.sceneData},_i.deserializeMeshDataObjects(a),a}static loadFromJSON(t){const n=new _i;Object.assign(n.data,{...t,imageOptionsArray:t.imageOptionsArray??[],encodedImageBlobs:t.encodedImageBlobs??[],labels:t.labels??[],meshOptionsArray:t.meshOptionsArray??[],connectomes:t.connectomes??[],encodedDrawingBlob:t.encodedDrawingBlob??"",previewImageDataURL:t.previewImageDataURL??"",customData:t.customData??"",title:t.title??"untitled"}),n.data.opts={...Bn,...t.opts||{}},n.data.opts.meshThicknessOn2D==="infinity"&&(n.data.opts.meshThicknessOn2D=1/0),n.scene.sceneData={...Ks,...t.sceneData||{}};const i=t.sceneData||{};return i.clipPlane&&!i.clipPlanes&&(n.scene.sceneData.clipPlanes=[i.clipPlane]),i.clipPlaneDepthAziElev&&!i.clipPlaneDepthAziElevs&&(n.scene.sceneData.clipPlaneDepthAziElevs=[i.clipPlaneDepthAziElev]),t.completedMeasurements&&(n.completedMeasurements=t.completedMeasurements.map(a=>({...a,startMM:wn(a.startMM),endMM:wn(a.endMM)}))),t.completedAngles&&(n.completedAngles=t.completedAngles.map(a=>({...a,firstLineMM:{start:wn(a.firstLineMM.start),end:wn(a.firstLineMM.end)},secondLineMM:{start:wn(a.secondLineMM.start),end:wn(a.secondLineMM.end)}}))),n.data.meshesString&&_i.deserializeMeshDataObjects(n),n}static oldloadFromJSON(t){const n=new _i;return n.data=t,n.data.opts.meshThicknessOn2D==="infinity"&&(n.data.opts.meshThicknessOn2D=1/0),n.scene.sceneData={...Ks,...t.sceneData},_i.deserializeMeshDataObjects(n),n}setOptsChangeCallback(t){this._optsChangeCallback=t,this._optsProxy=null}removeOptsChangeCallback(){this._optsChangeCallback=null,this._optsProxy=null}_createOptsProxy(){const t=this.data.opts;this._optsProxy=new Proxy(t,{set:(n,i,a)=>{const o=n[i];return o!==a&&(n[i]=a,this._optsChangeCallback&&typeof i=="string"&&i in Bn&&this._optsChangeCallback(i,a,o)),!0},get:(n,i)=>n[i]})}},DC={colormap:"gray",opacity:0,nFrame4D:0,frame4D:0,outlineBorder:0,cal_min:0,cal_max:0,cal_minNeg:0,cal_maxNeg:0,colormapType:0,values:new Array,useNegativeCmap:!1,showLegend:!0},Ta=class zn{constructor(t,n,i="",a=new Uint8Array([255,255,255,255]),o=1,l=!0,u,f=null,h=null,d=null,m=null,p=null,A=!0,v=""){L(this,"id"),L(this,"name"),L(this,"anatomicalStructurePrimary"),L(this,"colorbarVisible"),L(this,"furthestVertexFromOrigin"),L(this,"extentsMin"),L(this,"extentsMax"),L(this,"opacity"),L(this,"visible"),L(this,"meshShaderIndex",0),L(this,"offsetPt0",null),L(this,"colormapInvert",!1),L(this,"fiberGroupColormap",null),L(this,"indexBuffer"),L(this,"vertexBuffer"),L(this,"vao"),L(this,"vaoFiber"),L(this,"pts"),L(this,"tris"),L(this,"layers"),L(this,"type","mesh"),L(this,"data_type"),L(this,"rgba255"),L(this,"fiberLength"),L(this,"fiberLengths"),L(this,"fiberDensity"),L(this,"fiberDither",.1),L(this,"fiberColor","Global"),L(this,"fiberDecimationStride",1),L(this,"fiberSides",5),L(this,"fiberRadius",0),L(this,"fiberOcclusion",0),L(this,"f32PerVertex",5),L(this,"dpsThreshold",NaN),L(this,"fiberMask"),L(this,"colormap"),L(this,"dpg"),L(this,"dps"),L(this,"dpv"),L(this,"groups"),L(this,"hasConnectome",!1),L(this,"connectome"),L(this,"indexCount"),L(this,"vertexCount",1),L(this,"nodeScale",4),L(this,"edgeScale",1),L(this,"legendLineThickness",0),L(this,"showLegend",!0),L(this,"nodeColormap","warm"),L(this,"edgeColormap","warm"),L(this,"nodeColormapNegative"),L(this,"edgeColormapNegative"),L(this,"nodeMinColor"),L(this,"nodeMaxColor"),L(this,"edgeMin"),L(this,"edgeMax"),L(this,"nodes"),L(this,"edges"),L(this,"points"),this.anatomicalStructurePrimary=v,this.name=i,this.colorbarVisible=A,this.id=td();const y=Mr.getExtents(t);if(this.furthestVertexFromOrigin=y.mxDx,this.extentsMin=y.extentsMin,this.extentsMax=y.extentsMax,this.opacity=o>1?1:o,this.visible=l,this.meshShaderIndex=0,this.indexBuffer=u.createBuffer(),this.vertexBuffer=u.createBuffer(),this.vao=u.createVertexArray(),u.bindVertexArray(this.vao),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,this.indexBuffer),u.bindBuffer(u.ARRAY_BUFFER,this.vertexBuffer),u.enableVertexAttribArray(0),u.enableVertexAttribArray(1),this.f32PerVertex!==7?(u.vertexAttribPointer(0,3,u.FLOAT,!1,20,0),u.vertexAttribPointer(1,4,u.BYTE,!0,20,12),u.enableVertexAttribArray(2),u.vertexAttribPointer(2,4,u.UNSIGNED_BYTE,!0,20,16)):(u.vertexAttribPointer(0,3,u.FLOAT,!1,28,0),u.vertexAttribPointer(1,3,u.FLOAT,!1,28,12),u.enableVertexAttribArray(2),u.vertexAttribPointer(2,4,u.UNSIGNED_BYTE,!0,28,24)),u.bindVertexArray(null),this.vaoFiber=u.createVertexArray(),this.offsetPt0=null,this.hasConnectome=!1,this.colormapInvert=!1,this.fiberGroupColormap=null,this.pts=t,this.layers=[],this.type="mesh",this.tris=n,a[3]<1){this.rgba255=a,this.fiberLength=2,this.fiberDither=.1,this.fiberColor="Global",this.fiberDecimationStride=1,this.fiberMask=[],this.colormap=f,this.dpg=h,this.dps=d,this.dpv=m,this.groups=p,h&&this.initValuesArray(h),d&&this.initValuesArray(d),m&&this.initValuesArray(m),p&&this.initValuesArray(p),this.offsetPt0=new Uint32Array(n),this.tris=new Uint32Array(0),this.updateFibers(u),u.bindVertexArray(this.vaoFiber),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,this.indexBuffer),u.bindBuffer(u.ARRAY_BUFFER,this.vertexBuffer),u.enableVertexAttribArray(0),u.vertexAttribPointer(0,3,u.FLOAT,!1,16,0),u.enableVertexAttribArray(1),u.vertexAttribPointer(1,4,u.UNSIGNED_BYTE,!0,16,12),u.bindVertexArray(null);return}if(f){this.connectome=f,this.hasConnectome=!0;const C=Object.keys(f);for(let S=0,E=C.length;S<E;S++)this[C[S]]=f[C[S]]}this.rgba255=a,this.updateMesh(u)}initValuesArray(t){for(let n=0;n<t.length;n++){const i=t[n].vals.reduce((o,l)=>Math.min(o,l)),a=t[n].vals.reduce((o,l)=>Math.max(o,l));t[n].global_min=i,t[n].global_max=a,t[n].cal_min=i,t[n].cal_max=a}return t}linesToCylinders(t,n,i){function a(U){return ce(U[0],U[1],U[2])}const o=Math.pow(2,32)-1,l=i.length;let u=0,f=0;for(let U=0;U<l;U++){if(i[U]===o){f++;continue}u++}const h=this.fiberSides,d=h*u,m=this.f32PerVertex;if(m!==5)throw Error("fiberSides > 1 requires f32PerVertex == 5");const p=new Float32Array(d*m),A=new Uint8Array(p.buffer);let v=0,y=mi(),w=mi(),C=mi();const S=je();let E=je(),M=0;const R=this.fiberRadius;for(let U=0;U<l;U++){const I=i[U]===o;if(I&&M<1)continue;let V=i[U]*4;if(M++,M<=1){y=nt(n[V+0],n[V+1],n[V+2],n[V+3]),w=hi(y),U+1<l&&i[U+1]!==o&&(V=i[U+1]*4,C=nt(n[V+0],n[V+1],n[V+2],n[V+3]),Je(S,a(y),a(C)),bn(S,S),E=Br.getFirstPerpVector(S));continue}I?C=hi(w):C=nt(n[V+0],n[V+1],n[V+2],n[V+3]),Je(S,a(y),a(C)),bn(S,S);const N=je();ic(N,E,S);const Y=je();ic(Y,S,N),E=wn(E);const P=je();ic(P,S,Y),bn(P,P);const Q=je();for(let k=0;k<h;k++){const j=Math.cos(k/h*2*Math.PI),H=Math.sin(k/h*2*Math.PI);Q[0]=R*(j*Y[0]+H*P[0]),Q[1]=R*(j*Y[1]+H*P[1]),Q[2]=R*(j*Y[2]+H*P[2]),Rr(Q,a(w),Q);const Z=v*m;p[Z+0]=Q[0],p[Z+1]=Q[1],p[Z+2]=Q[2];const J=je();Je(J,Q,a(w)),bn(J,J);const X=(Z+3)*4;A[X+0]=J[0]*127,A[X+1]=J[1]*127,A[X+2]=J[2]*127,p[Z+4]=w[3],v++}y=hi(w),w=hi(C),I&&(M=0)}const D=(u-f)*h*2*3,T=new Uint32Array(D);let F=0;v=0;for(let U=1;U<l;U++){if(i[U]===o){v+=h;continue}if(i[U-1]===o)continue;let I=v,V=v+h;const N=V,Y=V+h;for(let P=0;P<h;P++)T[F++]=I,T[F++]=V++,V===Y&&(V=Y-h),T[F++]=V,T[F++]=I++,I===N&&(I=N-h),T[F++]=V,T[F++]=I;v+=h}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(T),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,A,t.STATIC_DRAW),this.indexCount=D}createFiberDensityMap(){if(this.fiberDensity)return;const t=this.pts,n=t.length/3;let i=0;for(let S=0;S<3;S++){const E=this.extentsMax[S]-this.extentsMin[S];i=Math.max(i,E)}if(this.fiberDensity=new Float32Array(n),i===0)return;const a=64,l=i/(a-1)/2,u=(a-1)/i;let f=new Float32Array(a*a*a);const h=[this.extentsMin[0]-l,this.extentsMin[1]-l,this.extentsMin[2]-l],d=[0,0,0],m=-1,p=a*a;let A=0;for(let S=0;S<n;S++){d[0]=Math.round((t[A++]-h[0])*u),d[1]=Math.round((t[A++]-h[1])*u),d[2]=Math.round((t[A++]-h[2])*u);const E=d[0]+d[1]*a+d[2]*p;E!==m&&f[E]++}function v(S,E){let M=S.slice(),R=-1;const D=E-1;for(let F=0;F<E;F++)for(let U=0;U<E;U++)for(let I=0;I<E;I++)R++,!(I<1||I>=D)&&(S[R]=M[R-1]+M[R]+M[R]+M[R+1]);R=-1,M=S.slice();for(let F=0;F<E;F++)for(let U=0;U<E;U++)for(let I=0;I<E;I++)R++,!(U<1||U>=D)&&(S[R]=M[R-E]+M[R]+M[R]+M[R+E]);const T=E*E;R=-1,M=S.slice();for(let F=0;F<E;F++)for(let U=0;U<E;U++)for(let I=0;I<E;I++)R++,!(F<1||F>=D)&&(S[R]=M[R-T]+M[R]+M[R]+M[T]);return S}f=v(f,a),f=v(f,a);let y=0,w=1/0;const C=a*a*a;for(let S=0;S<C;S++)f[S]<=0||(y=Math.max(y,f[S]),w=Math.min(w,f[S]));if(!(y<=1||y<=w)){A=0;for(let S=0;S<C;S++)f[S]=Math.max(0,f[S]-w);y-=w;for(let S=0;S<n;S++){d[0]=Math.round((t[A++]-h[0])*u),d[1]=Math.round((t[A++]-h[1])*u),d[2]=Math.round((t[A++]-h[2])*u);const E=d[0]+d[1]*a+d[2]*p;this.fiberDensity[S]=f[E]/y}}}updateFibers(t){if(!this.offsetPt0||!this.fiberLength)return;const n=this.pts,i=this.offsetPt0,a=i.length-1,o=n.length/3;if(!this.fiberLengths){this.fiberLengths=new Uint32Array(a);for(let D=0;D<a;D++){const T=i[D]*3,F=(i[D+1]-1)*3;let U=0;for(let I=T;I<F;I+=3){const V=ce(n[I+0]-n[I+3],n[I+1]-n[I+4],n[I+2]-n[I+5]);U+=no(V)}this.fiberLengths[D]=U}}const l=new Float32Array(o*4),u=new Uint32Array(l.buffer);let f=0,h=0;for(let D=0;D<o;D++)l[h+0]=n[f+0],l[h+1]=n[f+1],l[h+2]=n[f+2],f+=3,h+=4;const d=this.fiberDither,m=d*.5;function p(D,T,F){const I=255*(d*Math.random()-m);return D=Math.max(Math.min(D+I,255),0),T=Math.max(Math.min(T+I,255),0),F=Math.max(Math.min(F+I,255),0),D+(T<<8)+(F<<16)}function A(D,T,F,U,I,V,N){const Y=ce(Math.abs(D-U),Math.abs(T-I),Math.abs(F-V));bn(Y,Y);const P=N-m;for(let Q=0;Q<3;Q++)Y[Q]=255*Math.max(Math.min(Math.abs(Y[Q])+P,1),0);return Y[0]+(Y[1]<<8)+(Y[2]<<16)}const v=this.fiberColor.toLowerCase();let y=null,w=null;if(v.startsWith("dps")&&this.dps&&this.dps.length>0){const D=parseInt(v.substring(3));D<this.dps.length&&this.dps[D].vals.length===a&&(y=this.dps[D].vals)}if(v.startsWith("dpv")&&this.dpv&&this.dpv.length>0){const D=parseInt(v.substring(3));D<this.dpv.length&&this.dpv[D].vals.length===o&&(w=this.dpv[D])}const C=new Int16Array(a);if(this.groups&&this.fiberGroupColormap!==null||v.startsWith("dpg")&&this.dpg.length>0){const D=new Uint8ClampedArray(this.groups.length*4),T=new Array(this.groups.length).fill(!1);if(this.fiberGroupColormap){const F=this.fiberGroupColormap;F.A===void 0&&(F.A=Array.from(new Uint8ClampedArray(F.I.length).fill(255)));for(let U=0;U<F.I.length;U++){let I=F.I[U];I<0||I>=this.groups.length||F.A[U]<1||(T[I]=!0,I*=4,D[I]=F.R[U],D[I+1]=F.G[U],D[I+2]=F.B[U],D[I+3]=255)}}else if(v.startsWith("dpg")&&this.dpg.length>0){const F=parseInt(v.substring(3)),U=F<this.dpg.length?this.dpg[F]:this.dpg[0],I=Xe.colormap(this.colormap,this.colormapInvert),V=U.cal_min,N=U.cal_max,Y=this.groups.length;for(let P=0;P<Y;P++){const Q=U.vals[P];if(Q<V)continue;let k=Math.round(255*Math.min(Math.max((Q-V)/(N-V),0),1));T[P]=!0;const j=P*4;k*=4,D[j]=I[k+0],D[j+1]=I[k+1],D[j+2]=I[k+2],D[j+3]=255}}C.fill(-1);for(let F=0;F<this.groups.length;F++)if(T[F])for(let U=0;U<this.groups[F].vals.length;U++)C[this.groups[F].vals[U]]=F;for(let F=0;F<a;F++){if(C[F]<0)continue;const U=C[F]%256*4,I=p(D[U],D[U+1],D[U+2]),V=i[F],N=i[F+1]-1,Y=V*4+3,P=N*4+3;for(let Q=Y;Q<=P;Q+=4)u[Q]=I}}else if(w){const D=Xe.colormap(this.colormap,this.colormapInvert),T=w.cal_min,F=w.cal_max;let U=3;for(let I=0;I<o;I++){let V=Math.min(Math.max((w.vals[I]-T)/(F-T),0),1);V=Math.round(Math.max(Math.min(255,V*255)))*4;const N=D[V]+(D[V+1]<<8)+(D[V+2]<<16);u[U]=N,U+=4}}else if(y){const D=Xe.colormap(this.colormap,this.colormapInvert);let T=y[0],F=y[0];for(let U=0;U<a;U++)T=Math.min(T,y[U]),F=Math.max(F,y[U]);F===T&&(T-=1);for(let U=0;U<a;U++){let I=(y[U]-T)/(F-T);I=Math.round(Math.max(Math.min(255,I*255)))*4;const V=D[I]+(D[I+1]<<8)+(D[I+2]<<16),N=i[U],Y=i[U+1]-1,P=N*4+3,Q=Y*4+3;for(let k=P;k<=Q;k+=4)u[k]=V}}else if(v.includes("fixed"))if(d===0){const D=this.rgba255[0]+(this.rgba255[1]<<8)+(this.rgba255[2]<<16);let T=3;for(let F=0;F<o;F++)u[T]=D,T+=4}else for(let D=0;D<a;D++){const T=p(this.rgba255[0],this.rgba255[1],this.rgba255[2]),F=i[D],U=i[D+1]-1,I=F*4+3,V=U*4+3;for(let N=I;N<=V;N+=4)u[N]=T}else if(v.includes("local"))for(let D=0;D<a;D++){const T=i[D],F=i[D+1]-1;let U=T*3;const I=F*3,V=d*Math.random();let N=A(n[U],n[U+1],n[U+2],n[U+4],n[U+5],n[U+6],V),Y=T*4+3;for(;U<I;)u[Y]=N,Y+=4,U+=3,N=A(n[U-3],n[U-2],n[U-1],n[U+3],n[U+4],n[U+5],V);u[Y]=u[Y-4]}else for(let D=0;D<a;D++){const T=i[D],F=i[D+1]-1,U=T*3,I=F*3,V=A(n[U],n[U+1],n[U+2],n[I],n[I+1],n[I+2],d*Math.random()),N=T*4+3,Y=F*4+3;for(let P=N;P<=Y;P+=4)u[P]=V}if(this.fiberOcclusion>0){let D=function(T,F){const U=F*(T&255),I=F*(T>>8&255),V=F*(T>>16&255);return U+(I<<8)+(V<<16)};this.createFiberDensityMap();for(let T=0;T<a;T++){const F=i[T],U=i[T+1]-1,I=F*4+3,V=U*4+3;let N=F;const Y=Math.min(this.fiberOcclusion,.99);for(let P=I;P<=V;P+=4){let Q=this.fiberDensity[N++];if(Q<=0)continue;Q=Q/((1/Y-2)*(1-Q)+1);const k=1-Math.min(Q,.9);let j=u[P];j=D(j,k),u[P]=j}}}if(Number.isFinite(this.dpsThreshold)&&this.dps&&(y||this.dps[0].vals.length===a&&(y=this.dps[0].vals),y))for(let D=0;D<a;D++)y[D]<this.dpsThreshold&&(C[D]=-1);const S=this.fiberLength,E=Math.pow(2,32)-1,M=[];let R=-1;for(let D=0;D<a;D++)if(!(C[D]<0)&&!(this.fiberLengths[D]<S)&&(R++,R%this.fiberDecimationStride===0)){for(let T=i[D];T<i[D+1];T++)M.push(T);M.push(E)}this.fiberSides>2&&this.fiberRadius>0?this.linesToCylinders(t,l,M):(this.indexCount=M.length,t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,Uint32Array.from(u),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(M),t.STATIC_DRAW))}indexNearestXYZmm(t,n,i){const a=this.pts,o=this.pts.length/3;let l=0,u=1/0,f=0;for(let h=0;h<o;h++){const d=Math.pow(a[l]-t,2)+Math.pow(a[l+1]-n,2)+Math.pow(a[l+2]-i,2);d<u&&(u=d,f=h),l+=3}return u=Math.sqrt(u),[f,u]}unloadMesh(t){if(t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindVertexArray(null),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteVertexArray(this.vao),t.deleteVertexArray(this.vaoFiber),this.offsetPt0=null,this.tris=null,this.pts=null,this.layers&&this.layers.length>0)for(let n=0;n<this.layers.length;n++)this.layers[n].values=null;if(this.dpg&&this.dpg.length>0)for(let n=0;n<this.dpg.length;n++)this.dpg[n].vals=null;if(this.dps&&this.dps.length>0)for(let n=0;n<this.dps.length;n++)this.dps[n].vals=null}scalars2RGBA(t,n,i,a=!1){const o=i.length;if(4*o<t.length)return G.error(`colormap2RGBA incorrectly specified ${o}*4 != ${t.length}`),t;const l=Math.round(n.opacity*255);let u=n.cal_min,f=n.cal_max,h=Xe.colormap(n.colormap,this.colormapInvert),d=1;if(a){if(!n.useNegativeCmap)return t;d=-1,h=Xe.colormap(n.colormapNegative,n.colormapInvert),u=n.cal_min,f=n.cal_max,isFinite(n.cal_minNeg)&&isFinite(n.cal_minNeg)&&(u=-n.cal_minNeg,f=-n.cal_maxNeg)}let m=u;n.isTransparentBelowCalMin||(m=Number.NEGATIVE_INFINITY);const p=n.colormapType===2;n.colormapType!==0&&(u=Math.min(u,0));const A=255/(f-u);for(let v=0;v<o;v++){let y=i[v]*d;if(isNaN(y))continue;let w=l;if(y<m)if(y>0&&p)w=Math.round(n.opacity*255*Math.pow(y/m,2));else continue;if(y=(y-u)*A,y<0&&n.isTransparentBelowCalMin)continue;y=Math.min(255,Math.max(0,Math.round(y)))*4;const C=v*4;t[C+0]=h[y+0],t[C+1]=h[y+1],t[C+2]=h[y+2],t[C+3]=w}return t}blendColormap(t,n,i,a,o,l,u=!1){const f=this.pts.length/3,h=Math.min(i.opacity,1);function d(E,M,R){return E*(1-R)+M*R}function m(E,M){return Math.min(E+M,255)}const p=u?-1:1,A=Math.min(Math.max(i.frame4D,0),i.nFrame4D-1),v=f*A;let y=a;i.isTransparentBelowCalMin||(y=Number.NEGATIVE_INFINITY),i.colormapType!==0&&(a=Math.min(a,0));const w=255/(o-a);let C=new Array(f).fill(!1);if(i.outlineBorder!==0){const E=new Uint8Array(f).fill(0);for(let M=0;M<f;M++)p*i.values[M+v]>=y&&(E[M]=1);C=Mr.getClusterBoundaryU8(E,this.tris);for(let M=0;M<f;M++)p*i.values[M+v]<y&&(C[M]=!1)}const S=new Float32Array(256).fill(h);if(y>a&&i.colormapType===2){let E=Math.round((y-a)*w);E=Math.max(E,1);for(let M=1;M<E;M++)S[M]=h*Math.pow(M/E,2);S[0]=0,y=a+Number.EPSILON}for(let E=0;E<f;E++){const M=p*i.values[E+v];if(M<y)continue;let R=Math.round((M-a)*w);if(R<0&&i.isTransparentBelowCalMin)continue;R=Math.max(0,R),R=Math.min(255,R);let D=S[R];R*=4;let T=E*28+24;if(this.f32PerVertex!==7&&(T=E*20+16),i.isAdditiveBlend){const F=E*4;n[F+0]=m(n[F+0],l[R+0]),n[F+1]=m(n[F+1],l[R+1]),n[F+2]=m(n[F+2],l[R+2]),n[F+3]=m(n[F+3],255)}else{if(C[E]&&(D=i.outlineBorder,i.outlineBorder<0)){t[T+0]=0,t[T+1]=0,t[T+2]=0;continue}t[T+0]=d(t[T+0],l[R+0],D),t[T+1]=d(t[T+1],l[R+1],D),t[T+2]=d(t[T+2],l[R+2],D)}}}updateMesh(t){if(this.offsetPt0){this.updateFibers(t);return}if(this.hasConnectome)return;if(!this.pts||!this.tris||!this.rgba255){G.warn("underspecified mesh");return}function n(h,d,m){return h*(1-m)+d*m}const i=this.generatePosNormClr(this.pts,this.tris,this.rgba255),a=this.pts.length/3,o=new Uint8Array(i.buffer);let l=0;const u=new Uint8Array(a*4);let f=this.tris;if(this.layers&&this.layers.length>0)for(let h=0;h<this.layers.length;h++){const d=this.layers[h],m=d.opacity;if(m<=0||d.cal_min>d.cal_max)continue;if(d.outlineBorder===void 0&&(d.outlineBorder=0),d.isAdditiveBlend===void 0&&(d.isAdditiveBlend=!1),d.colormapLabel&&d.colormapLabel.R&&!d.colormapLabel.lut&&(d.colormapLabel=Xe.makeLabelLut(d.colormapLabel,255,d.global_max)),d.colormapLabel&&d.colormapLabel.lut){const A=d.colormapLabel;let v=0;d.colormapLabel.min&&(v=d.colormapLabel.min);let y=A.lut;const w=Math.floor(y.length/4);if(d.atlasValues&&w>0&&w===d.atlasValues.length&&d.colormap){const D=d.atlasValues;let T=!1,F=!0;for(let U=0;U<w;U++)isNaN(D[U])?T=!0:F=!1;if(F){G.debug("invisible mesh: all atlasValues are NaN.");return}if(T){G.debug("some vertices have NaN atlasValues (mesh will be decimated).");const U=new Array(a).fill(!1);for(let P=0;P<a;P++){const Q=Math.round(d.values[P])-v;isNaN(D[Q])&&(U[P]=!0)}const I=new Array(f.length).fill(!1);for(let P=0;P<f.length;P++)U[f[P]]&&(I[P]=!0);const V=this.tris;let N=0;for(let P=0;P<V.length;P+=3)!I[P]&&!I[P+1]&&!I[P+2]&&N++;N===0&&G.debug("invisible mesh: all triangles of a vertex with a NaN atlasValue."),f=new Uint32Array(N*3);let Y=0;for(let P=0;P<V.length;P+=3)!I[P]&&!I[P+1]&&!I[P+2]&&(f[Y++]=V[P],f[Y++]=V[P+1],f[Y++]=V[P+2])}y.fill(0),y=this.scalars2RGBA(y,d,D),d.useNegativeCmap&&(y=this.scalars2RGBA(y,d,D,!0))}else d.atlasValues&&G.warn(`Expected ${w} atlasValues but got ${d.atlasValues.length} for mesh layer`);if(d.showLegend&&w===d.colormapLabel.labels.length){d.labels=[];for(let D=0;D<w;D++){const T=Array.from(y.slice(D*4,D*4+4)).map(N=>N/255),F=d.colormapLabel.labels[D],U=[0,0,0];let I=0;for(let N=0;N<a;N++)if(d.values[N]===D){const Y=N*3;U[0]+=this.pts[Y],U[1]+=this.pts[Y+1],U[2]+=this.pts[Y+2],I++}if(I>0&&(U[0]/=I,U[1]/=I,U[2]/=I),T[3]===0||!F||F.startsWith("_"))continue;T[3]=1;const V=new _d(F,{textColor:T,bulletScale:1,bulletColor:T,lineWidth:0,lineColor:T,textScale:1,textAlignment:"left",lineTerminator:"none"},U);d.labels.push(V),G.debug("label for mesh layer:",V)}}else delete d.labels;const C=Math.min(Math.max(d.frame4D,0),d.nFrame4D-1),S=a*C,E=new Uint8Array(a*4);let M=0;for(let D=0;D<a;D++){const T=d.values[D+S]-v,F=4*Math.min(Math.max(T,0),w-1);E[M+0]=y[F+0],E[M+1]=y[F+1],E[M+2]=y[F+2],E[M+3]=Math.round(y[F+3]/255*d.opacity*255),M+=4}let R=new Array(a).fill(!1);d.outlineBorder!==0&&(R=Mr.getClusterBoundary(E,this.tris)),M=0;for(let D=0;D<a;D++){let T=D*28+24;this.f32PerVertex!==7&&(T=D*20+16);let F=E[M+3]/255;if(R[D]&&(F=d.outlineBorder,d.outlineBorder<0)){o[T+0]=0,o[T+1]=0,o[T+2]=0,M+=4;continue}o[T+0]=n(o[T+0],E[M+0],F),o[T+1]=n(o[T+1],E[M+1],F),o[T+2]=n(o[T+2],E[M+2],F),M+=4}continue}if(d.values instanceof Uint8Array){const A=new Uint8Array(d.values.buffer);let v=new Array(a).fill(!0);d.outlineBorder!==0&&(v=Mr.getClusterBoundary(A,this.tris));let y=0;for(let w=0;w<d.values.length;w++){let C=w*28+24;this.f32PerVertex!==7&&(C=w*20+16);let S=m;if(v[w]&&(S=d.outlineBorder,d.outlineBorder<0)){o[C+0]=0,o[C+1]=0,o[C+2]=0,y+=4;continue}o[C+0]=n(o[C+0],A[y+0],S),o[C+1]=n(o[C+1],A[y+1],S),o[C+2]=n(o[C+2],A[y+2],S),y+=4}continue}d.useNegativeCmap&&(d.cal_min=Math.max(Number.EPSILON,d.cal_min),d.cal_max=Math.max(d.cal_min+1e-6,d.cal_max)),d.isTransparentBelowCalMin===void 0&&(d.isTransparentBelowCalMin=!0);const p=Xe.colormap(d.colormap,d.colormapInvert);if(d.isAdditiveBlend&&l++,this.blendColormap(o,u,d,d.cal_min,d.cal_max,p),d.useNegativeCmap){const A=Xe.colormap(d.colormapNegative,d.colormapInvert);let v=d.cal_min,y=d.cal_max;isFinite(d.cal_minNeg)&&isFinite(d.cal_minNeg)&&(v=-d.cal_minNeg,y=-d.cal_maxNeg),this.blendColormap(o,u,d,v,y,A,!0)}}if(l>0)for(let h=0;h<a;h++){let d=function(v,y){return Math.min(v*y*.00392156862745098,255)},m=h*28+24;this.f32PerVertex!==7&&(m=h*20+16);const p=h*4,A=Math.min(l,u[p+3]/255);A<=0||(o[m+0]=d(o[m+0],u[p+0]),o[m+1]=d(o[m+1],u[p+1]),o[m+2]=d(o[m+2],u[p+2]),o[m+0]=n(o[m+0],u[p+0],A),o[m+1]=n(o[m+1],u[p+1],A),o[m+2]=n(o[m+2],u[p+2],A))}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(f),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW),this.indexCount=f.length,this.vertexCount=this.pts.length}reverseFaces(t){if(this.offsetPt0||this.hasConnectome)return;const n=this.tris||[];for(let i=0;i<n.length;i+=3){const a=n[i];n[i]=n[i+1],n[i+1]=a}this.updateMesh(t)}hierarchicalOrder(){const i=this.tris.length/3,a=Math.log(i/20)/Math.log(4);if(i!==Math.pow(4,a)*20)return NaN;if(this.pts.length/3!==Math.pow(4,a)*10+2)return NaN;for(let l=0;l<15;l+=3)if(this.tris[l]!==0)return NaN;for(let l=15;l<24;l+=3)if(this.tris[l]!==3)return NaN;for(let l=24;l<30;l+=3)if(this.tris[l]!==4)return NaN;return a}decimateFaces(t,n){let i=this.tris;const a=12,o=20;for(let l=t-1;l>=n;l--){const u=Math.pow(4,l+1)*(a-2)+2,f=Math.pow(4,l)*(a-2)+2,h=i.length/3,d=Math.pow(4,l)*o;G.info(`order ${l+1} -> ${l} vertices ${u} -> ${f} faces ${h} -> ${d}`);const m=Array.from({length:u},(A,v)=>v+1);for(let A=0;A<h;A++){const v=i[3*A],y=i[3*A+1],w=i[3*A+2];m[v-1]=Math.min(m[v-1],y,w)}const p=new Uint32Array(d*3);for(let A=0;A<d;A++)p[3*A]=m[i[3*A]-1],p[3*A+1]=m[i[3*A+1]-1],p[3*A+2]=m[i[3*A+2]-1];i=p}this.tris=new Uint32Array(i)}decimateHierarchicalMesh(t,n=4){const i=this.hierarchicalOrder();if(isNaN(i))return G.warn("Unable to decimate mesh: it does not have a hierarchical structure"),!1;if(n>=i)return G.warn(`Unable to decimate mesh: input order (${i}) must be larger than downsampled order (${n})`),!1;const a=this.pts.length/3,l=Math.pow(4,n)*(12-2)+2;if(this.pts=new Float32Array(this.pts.slice(0,l*3)),this.decimateFaces(i,n),this.layers&&this.layers.length>0)for(let u=0;u<this.layers.length;u++){const f=this.layers[u];f.values instanceof Float32Array||f.values.length!==a?f.values=new Float32Array(f.values.slice(0,l)):G.warn("decimation logic needs to be updated")}return this.updateMesh(t),!0}async setLayerProperty(t,n,i,a){const o=this.layers[t];if(!o||!(n in o)){G.warn("mesh does not have property ",n," for layer ",o);return}if(n==="colormapLabel")if(typeof i=="object")o[n]=Xe.makeLabelLut(i,255,o.global_max);else if(typeof i=="string"){const l=await Xe.makeLabelLutFromUrl(i);o[n]=l,this.updateMesh(a);return}else G.error("colormapLabel requires a string or object");else o[n]=i;this.updateMesh(a)}setProperty(t,n,i){if(!(t in this)){console.warn("Mesh does not have property:",t,this);return}this[t]=n,this.updateMesh(i)}generatePosNormClr(t,n,i){(t.length<3||i.length<4)&&(G.error("Catastrophic failure generatePosNormClr()"),G.debug("this",this),G.debug("pts",t),G.debug("rgba",i));const a=Mr.generateNormals(t,n),o=t.length/3,l=o===i.length/4,u=this.f32PerVertex,f=new Float32Array(o*u),h=new Uint8Array(f.buffer);let d=0,m=0,p=0,A=(u-1)*4;for(let v=0;v<o;v++)f[p+0]=t[d+0],f[p+1]=t[d+1],f[p+2]=t[d+2],u!==7?(h[A-4]=a[d+0]*127,h[A-3]=a[d+1]*127,h[A-2]=a[d+2]*127):(f[p+3]=a[d+0],f[p+4]=a[d+1],f[p+5]=a[d+2]),h[A]=i[m+0],h[A+1]=i[m+1],h[A+2]=i[m+2],h[A+3]=i[m+3],l&&(m+=4),d+=3,p+=u,A+=u*4;return f}static async readMesh(t,n,i,a=1,o=new Uint8Array([255,255,255,255]),l=!0){let u=new Uint32Array([]),f=new Float32Array([]),h="",d;const m=/(?:\.([^.]+))?$/;let p=m.exec(n)[1];if(p=p.toUpperCase(),p==="GZ"&&(p=m.exec(n.slice(0,-3))[1],p=p.toUpperCase()),p==="JCON"&&G.error("you should never see this message: load using nvconnectome not nvmesh"),p==="JSON"&&G.error("you should never see this message: load using nvconnectome not nvmesh"),o[3]=Math.max(1,o[3]),p==="TCK"||p==="TRK"||p==="TT"||p==="TRX"||p==="TRACT"){if(p==="TCK"?d=rt.readTCK(t):p==="TRACT"?d=rt.readTRACT(t):p==="TT"?d=await rt.readTT(t):p==="TRX"?d=await rt.readTRX(t):d=await rt.readTRK(t),typeof d>"u"){const w=new Float32Array([0,0,0,0,0,0]),C=new Uint32Array([0]);d={pts:w,offsetPt0:C},G.error("Creating empty tracts")}return o[3]=0,new zn(d.pts,d.offsetPt0,n,o,a,l,i,"inferno",d.dpg||null,d.dps||null,d.dpv||null,d.groups)}if(p==="GII")d=await rt.readGII(t);else if(p==="MZ3")d=await rt.readMZ3(t),"positions"in d||G.warn("MZ3 does not have positions (statistical overlay?)");else if(p==="ASC")d=rt.readASC(t);else if(p==="DFS")d=rt.readDFS(t);else if(p==="BYU"||p==="G")d=rt.readGEO(t);else if(p==="GEO")d=rt.readGEO(t,!0);else if(p==="ICO"||p==="TRI")d=rt.readICO(t);else if(p==="OFF")d=rt.readOFF(t);else if(p==="NV")d=rt.readNV(t);else if(p==="OBJ")d=await rt.readOBJ(t);else if(p==="PLY")d=rt.readPLY(t);else if(p==="WRL")d=rt.readWRL(t);else if(p==="X3D")d=rt.readX3D(t);else if(p==="FIB"||p==="VTK"){if(d=rt.readVTK(t),"offsetPt0"in d)return o[3]=0,new zn(d.pts,d.offsetPt0,n,o,a,l,i,"inferno")}else p==="SRF"?d=await rt.readSRF(t):p==="STL"?d=rt.readSTL(t):d=rt.readFreeSurfer(t);if(d.anatomicalStructurePrimary&&(h=d.anatomicalStructurePrimary),d instanceof Float32Array)throw new Error("fatal: unknown mesh type loaded");if(!("positions"in d))throw new Error("positions not loaded");if(!d.indices)throw new Error("indices not loaded");if(f=d.positions,u=d.indices,"rgba255"in d&&d.rgba255.length>0&&(o=d.rgba255),"colors"in d&&d.colors&&d.colors.length===f.length){const w=f.length/3;o=new Uint8Array(w*4);let C=0,S=0;for(let E=0;E<w;E++)o[S++]=d.colors[C]*255,o[S++]=d.colors[C+1]*255,o[S++]=d.colors[C+2]*255,o[S++]=255,C+=3}const A=f.length/3;if(u.length/3<1||A<3)throw new Error("Mesh should have at least one triangle and three vertices");o[3]=Math.max(1,o[3]);const y=new zn(f,u,n,o,a,l,i,null,null,null,null,null,!0,h);if("scalars"in d&&d.scalars.length>0){const w=await rt.readLayer(n,t,y,a,"gray");typeof w>"u"?G.warn("readLayer() failed to convert scalars"):(y.layers.push(w),y.updateMesh(i))}return y}static async loadLayer(t,n){let i=new Uint8Array().buffer;function a(v){const y=window.atob(v),w=y.length,C=new Uint8Array(w);for(let S=0;S<w;S++)C[S]=y.charCodeAt(S);return C.buffer}if(t.base64!==void 0)i=a(t.base64);else{if(!t.url)throw new Error("layer: missing url");const v=await fetch(t.url,{headers:t.headers});if(!v.ok)throw Error(v.statusText);i=await v.arrayBuffer()}let o,l=[];if(t.name&&t.name!=="")o=t.name;else{if(!t.url)throw new Error("layer: missing url");try{l=new URL(t.url).pathname.split("/")}catch{l=t.url.split("/")}finally{o=l.slice(-1)[0]}}o.indexOf("?")>-1&&(o=o.slice(0,o.indexOf("?")));let u=.5;"opacity"in t&&(u=t.opacity);let f="warm";"colormap"in t&&(f=t.colormap);let h="winter";"colormapNegative"in t&&(h=t.colormapNegative);let d=!1;"useNegativeCmap"in t&&(d=t.useNegativeCmap);let m=null;"cal_min"in t&&(m=t.cal_min);let p=null;"cal_max"in t&&(p=t.cal_max);const A=await rt.readLayer(o,i,n,u,f,h,d,m,p);A&&n.layers.push(A)}static async loadFromUrl({url:t="",headers:n={},gl:i,name:a="",opacity:o=1,rgba255:l=[255,255,255,255],visible:u=!0,layers:f=[],buffer:h=new ArrayBuffer(0),meshShaderIndex:d=0}={}){let m=t.split("/");if(a===""){try{m=new URL(t).pathname.split("/")}catch{m=t.split("/")}a=m.slice(-1)[0],a.indexOf("?")>-1&&(a=a.slice(0,a.indexOf("?")))}if(t==="")throw Error("url must not be empty");if(!i)throw Error("gl context is null");let p;if(h.byteLength>0)p=h;else{const v=await fetch(t,{headers:n});if(!v.ok)throw Error(v.statusText);p=await v.arrayBuffer()}const A=await this.readMesh(p,a,i,o,new Uint8Array(l),u);if(d!==void 0&&(A.meshShaderIndex=d),!f||f.length<1)return A;for(let v=0;v<f.length;v++)await zn.loadLayer(f[v],A);return A.updateMesh(i),A}static async readFileAsync(t){return new Promise((n,i)=>{const a=new FileReader;a.onload=()=>{n(a.result)},a.onerror=i,a.readAsArrayBuffer(t)})}static async loadFromFile({file:t,gl:n,name:i="",opacity:a=1,rgba255:o=[255,255,255,255],visible:l=!0,layers:u=[]}={}){if(!t)throw new Error("file must be set");if(!n)throw new Error("rendering context must be set");const f=await zn.readFileAsync(t),h=await zn.readMesh(f,i,n,a,new Uint8Array(o),l);if(!u||u.length<1)return h;for(let d=0;d<u.length;d++)await zn.loadLayer(u[d],h);return h.updateMesh(n),h}async loadFromBase64({base64:t,gl:n,name:i="",opacity:a=1,rgba255:o=[255,255,255,255],visible:l=!0,layers:u=[]}={}){if(!t)throw new Error("base64 must bet set");if(!n)throw new Error("rendering context must be set");function f(m){const p=window.atob(m),A=p.length,v=new Uint8Array(A);for(let y=0;y<A;y++)v[y]=p.charCodeAt(y);return v.buffer}const h=f(t),d=await zn.readMesh(h,i,n,a,new Uint8Array(o),l);if(!u||u.length<1)return d;for(let m=0;m<u.length;m++)await zn.loadLayer(u[m],d);return d.updateMesh(n),d}},TC="data:image/jpeg;base64,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ZwAAAAAAAAALY3JvcFJlY3RUb3Bsb25nAAAAAAA4QklNA+0AAAAAABAASAAAAAEAAQBIAAAAAQABOEJJTQQmAAAAAAAOAAAAAAAAAAAAAD+AAAA4QklNBA0AAAAAAAQAAAAeOEJJTQQZAAAAAAAEAAAAHjhCSU0D8wAAAAAACQAAAAAAAAAAAQA4QklNJxAAAAAAAAoAAQAAAAAAAAABOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0EAAAAAAAAAgAAOEJJTQQCAAAAAAACAAA4QklNBDAAAAAAAAEBADhCSU0ELQAAAAAABgABAAAAMjhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBB4AAAAAAAQAAAAAOEJJTQQaAAAAAAM9AAAABgAAAAAAAAAAAAACAAAAAgAAAAAEAG0AYwA2ADEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAABudWxsAAAAAgAAAAZib3VuZHNPYmpjAAAAAQAAAAAAAFJjdDEAAAAEAAAAAFRvcCBsb25nAAAAAAAAAABMZWZ0bG9uZwAAAAAAAAAAQnRvbWxvbmcAAAIAAAAAAFJnaHRsb25nAAACAAAAAAZzbGljZXNWbExzAAAAAU9iamMAAAABAAAAAAAFc2xpY2UAAAASAAAAB3NsaWNlSURsb25nAAAAAAAAAAdncm91cElEbG9uZwAAAAAAAAAGb3JpZ2luZW51bQAAAAxFU2xpY2VPcmlnaW4AAAANYXV0b0dlbmVyYXRlZAAAAABUeXBlZW51bQAAAApFU2xpY2VUeXBlAAAAAEltZyAAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAA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bnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDctMTJUMjA6MDc6NDcrMDE6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA3LTEzVDE3OjU0OjI3KzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA3LTEzVDE3OjU0OjI3KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL2pwZWciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3MmVhYjVmZS02NDZkLWVhNDMtODQyNC0xNWQzZTgwOWExNDQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0OGNjMGI3YS1iYTJkLWZmNDAtYmNkNC1jNGQzMzIyZjBiNzQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYzFjM2NhNS1hYTg4LWI5NGMtOGE4MS05YmU4MjA3ZGZiODciPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6YThjMGNhZTYtODNjYy1hYzQ4LWI2YzAtN2FiODNlOWJkMGM3PC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YWMxYzNjYTUtYWE4OC1iOTRjLThhODEtOWJlODIwN2RmYjg3IiBzdEV2dDp3aGVuPSIyMDE4LTA3LTEyVDIwOjA3OjQ3KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjYmI3MzZlZC0zOTRhLTM2NDgtYThiOC02Mzk1MmY0NDcxMjIiIHN0RXZ0OndoZW49IjIwMTgtMDctMTNUMTY6MTM6NTgrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ2YjNkYTI3LWI4YjEtYmU0Yi1hYTQ4LTExZGM5NmZkNTIyZiIgc3RFdnQ6d2hlbj0iMjAxOC0wNy0xM1QxNzo1NDoyNyswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3MmVhYjVmZS02NDZkLWVhNDMtODQyNC0xNWQzZTgwOWExNDQiIHN0RXZ0OndoZW49IjIwMTgtMDctMTNUMTc6NTQ6MjcrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ2YjNkYTI3LWI4YjEtYmU0Yi1hYTQ4LTExZGM5NmZkNTIyZiIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjg3NjM1NDk5LWZiMTItYWU0MC04NWEzLThkMWFiN2NkZGVhOSIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmFjMWMzY2E1LWFhODgtYjk0Yy04YTgxLTliZTgyMDdkZmI4NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+IMWElDQ19QUk9GSUxFAAEBAAAMSExpbm8CEAAAbW50clJHQiBYWVogB84AAgAJAAYAMQAAYWNzcE1TRlQAAAAASUVDIHNSR0IAAAAAAAAAAAAAAAEAAPbWAAEAAAAA0y1IUCAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARY3BydAAAAVAAAAAzZGVzYwAAAYQAAABsd3RwdAAAAfAAAAAUYmtwdAAAAgQAAAAUclhZWgAAAhgAAAAUZ1hZWgAAAiwAAAAUYlhZWgAAAkAAAAAUZG1uZAAAAlQAAABwZG1kZAAAAsQAAACIdnVlZAAAA0wAAACGdmlldwAAA9QAAAAkbHVtaQAAA/gAAAAUbWVhcwAABAwAAAAkdGVjaAAABDAAAAAMclRSQwAABDwAAAgMZ1RSQwAABDwAAAgMYlRSQwAABDwAAAgMdGV4dAAAAABDb3B5cmlnaHQgKGMpIDE5OTggSGV3bGV0dC1Q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",up="data:image/png;base64,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",fp={atlas:{type:"msdf",distanceRange:2,size:59.65625,width:512,height:256,yOrigin:"bottom"},metrics:{emSize:1,lineHeight:1.171875,ascender:.927734375,descender:-.244140625,underlineY:-.09765625,underlineThickness:.048828125},glyphs:[{unicode:32,advance:.24755859375},{unicode:33,advance:.25732421875,planeBounds:{left:.056159633438645884,bottom:-.02437761405677056,right:.20702396031135412,top:.7299440203067705},atlasBounds:{left:488.5,bottom:145.5,right:497.5,top:190.5}},{unicode:34,advance:.31982421875,planeBounds:{left:.049409125974004715,bottom:.48691155587022,right:.2840869677759953,top:.77187750662978},atlasBounds:{left:486.5,bottom:213.5,right:500.5,top:230.5}},{unicode:35,advance:.61572265625,planeBounds:{left:.037219103997511785,bottom:-.02169206718177056,right:.6239137085024882,top:.7326295671817705},atlasBounds:{left:66.5,bottom:51.5,right:101.5,top:96.5}},{unicode:36,advance:.5615234375,planeBounds:{left:.02956531458715296,bottom:-.12381369908983761,right:.5324464041628472,top:.8484230740898377},atlasBounds:{left:109.5,bottom:197.5,right:139.5,top:255.5}},{unicode:37,advance:.732421875,planeBounds:{left:.026481776289942378,bottom:-.030073418674698794,right:.7137525987100576,top:.7410109186746989},atlasBounds:{left:88.5,bottom:144.5,right:129.5,top:190.5}},{unicode:38,advance:.62158203125,planeBounds:{left:.03225572125458355,bottom:-.030073418674698794,right:.6357130287454166,top:.7410109186746989},atlasBounds:{left:130.5,bottom:144.5,right:166.5,top:190.5}},{unicode:39,advance:.17431640625,planeBounds:{left:.028244602049502358,bottom:.49895501673814824,right:.14558352295049765,top:.7671582645118518},atlasBounds:{left:498.5,bottom:62.5,right:505.5,top:78.5}},{unicode:40,advance:.341796875,planeBounds:{left:.042983329377291775,bottom:-.250029542422407,right:.34471198312270823,top:.8227834486724072},atlasBounds:{left:.5,bottom:191.5,right:18.5,top:255.5}},{unicode:41,advance:.34765625,planeBounds:{left:-.003159248747708225,bottom:-.250029542422407,right:.29856940499770823,top:.8227834486724072},atlasBounds:{left:19.5,bottom:191.5,right:37.5,top:255.5}},{unicode:42,advance:.4306640625,planeBounds:{left:-.011208599684062338,bottom:.27785390031593765,right:.44138438093406235,top:.7304468809340623},atlasBounds:{left:449.5,bottom:23.5,right:476.5,top:50.5}},{unicode:43,advance:.56689453125,planeBounds:{left:.01353503347629649,bottom:.053493525733368255,right:.5499415290237036,top:.6066627242666317},atlasBounds:{left:361.5,bottom:17.5,right:393.5,top:50.5}},{unicode:44,advance:.1962890625,planeBounds:{left:-.009919475797210583,bottom:-.15981695975478,right:.1744702570472106,top:.12514899100478},atlasBounds:{left:498.5,bottom:79.5,right:509.5,top:96.5}},{unicode:45,advance:.27587890625,planeBounds:{left:-.00527594412977999,bottom:.24333249267450235,right:.27969000662978,top:.36067141357549765},atlasBounds:{left:52.5,bottom:7.5,right:69.5,top:14.5}},{unicode:46,advance:.26318359375,planeBounds:{left:.051032680313645884,bottom:-.027092319686354116,right:.20189700718635412,top:.12377200718635412},atlasBounds:{left:501.5,bottom:221.5,right:510.5,top:230.5}},{unicode:47,advance:.412109375,planeBounds:{left:-.013733006073205867,bottom:-.08573505127848349,right:.4053345685732059,top:.7356373950284835},atlasBounds:{left:252.5,bottom:206.5,right:277.5,top:255.5}},{unicode:48,advance:.5615234375,planeBounds:{left:.037458384830081196,bottom:-.030073418674698794,right:.5235767714199189,top:.7410109186746989},atlasBounds:{left:167.5,bottom:144.5,right:196.5,top:190.5}},{unicode:49,advance:.5615234375,planeBounds:{left:.06023674350936354,bottom:-.01998308280677056,right:.37872810024063647,top:.7343385515567705},atlasBounds:{left:488.5,bottom:97.5,right:507.5,top:142.5}},{unicode:50,advance:.5615234375,planeBounds:{left:.025334353719224725,bottom:-.01680925468177056,right:.5449781462807752,top:.7375123796817705},atlasBounds:{left:278.5,bottom:51.5,right:309.5,top:96.5}},{unicode:51,advance:.5615234375,planeBounds:{left:.028181041080081196,bottom:-.030073418674698794,right:.5142994276699189,top:.7410109186746989},atlasBounds:{left:197.5,bottom:144.5,right:226.5,top:190.5}},{unicode:52,advance:.5615234375,planeBounds:{left:.005886103858368255,bottom:-.02169206718177056,right:.5590553023916317,top:.7326295671817705},atlasBounds:{left:310.5,bottom:51.5,right:343.5,top:96.5}},{unicode:53,advance:.5615234375,planeBounds:{left:.055524791080081196,bottom:-.02657487968177056,right:.5416431776699189,top:.7277467546817705},atlasBounds:{left:344.5,bottom:51.5,right:373.5,top:96.5}},{unicode:54,advance:.5615234375,planeBounds:{left:.046003306705081196,bottom:-.034712090549698794,right:.5321216932949189,top:.7363722467996989},atlasBounds:{left:227.5,bottom:144.5,right:256.5,top:190.5}},{unicode:55,advance:.5615234375,planeBounds:{left:.018010134969224725,bottom:-.02169206718177056,right:.5376539275307752,top:.7326295671817705},atlasBounds:{left:374.5,bottom:51.5,right:405.5,top:96.5}},{unicode:56,advance:.5615234375,planeBounds:{left:.037702525455081196,bottom:-.030073418674698794,right:.5238209120449189,top:.7410109186746989},atlasBounds:{left:257.5,bottom:144.5,right:286.5,top:190.5}},{unicode:57,advance:.5615234375,planeBounds:{left:.029401744205081196,bottom:-.025434746799698794,right:.5155201307949189,top:.7456495905496989},atlasBounds:{left:287.5,bottom:144.5,right:316.5,top:190.5}},{unicode:58,advance:.2421875,planeBounds:{left:.046394008438645884,bottom:-.029431286627488215,right:.19725833531135412,top:.5572633178774882},atlasBounds:{left:439.5,bottom:61.5,right:448.5,top:96.5}},{unicode:59,advance:.21142578125,planeBounds:{left:.001066852327789419,bottom:-.16459733294591408,right:.1854565851722106,top:.556198895445914},atlasBounds:{left:406.5,bottom:53.5,right:417.5,top:96.5}},{unicode:60,advance:.50830078125,planeBounds:{left:.016948142433865897,bottom:.0726146348300812,right:.4527784200661341,top:.5587330214199189},atlasBounds:{left:394.5,bottom:21.5,right:420.5,top:50.5}},{unicode:61,advance:.548828125,planeBounds:{left:.051535540940937666,bottom:.17620354038436353,right:.5041285215590624,top:.49469489711563647},atlasBounds:{left:477.5,bottom:31.5,right:504.5,top:50.5}},{unicode:62,advance:.5224609375,planeBounds:{left:.047629290940937666,bottom:.0731029160800812,right:.5002222715590624,top:.5592213026699189},atlasBounds:{left:421.5,bottom:21.5,right:448.5,top:50.5}},{unicode:63,advance:.47216796875,planeBounds:{left:.016704001808865897,bottom:-.027876153049698794,right:.4525342794411341,top:.7432081842996989},atlasBounds:{left:317.5,bottom:144.5,right:343.5,top:190.5}},{unicode:64,advance:.89794921875,planeBounds:{left:.034064457306783605,bottom:-.23896750384690937,right:.8721996065996072,top:.7165065663469093},atlasBounds:{left:155.5,bottom:198.5,right:205.5,top:255.5}},{unicode:65,advance:.65234375,planeBounds:{left:-.008838044092129387,bottom:-.02169206718177056,right:.6616700753421295,top:.7326295671817705},atlasBounds:{left:237.5,bottom:51.5,right:277.5,top:96.5}},{unicode:66,advance:.62255859375,planeBounds:{left:.06464099434422473,bottom:-.02169206718177056,right:.5842847869057752,top:.7326295671817705},atlasBounds:{left:205.5,bottom:51.5,right:236.5,top:96.5}},{unicode:67,advance:.65087890625,planeBounds:{left:.038439807122511785,bottom:-.030073418674698794,right:.6251344116274882,top:.7410109186746989},atlasBounds:{left:344.5,bottom:144.5,right:379.5,top:190.5}},{unicode:68,advance:.65576171875,planeBounds:{left:.06301501010836826,bottom:-.02169206718177056,right:.6161842086416317,top:.7326295671817705},atlasBounds:{left:162.5,bottom:51.5,right:195.5,top:96.5}},{unicode:69,advance:.568359375,planeBounds:{left:.0652904160800812,bottom:-.02169206718177056,right:.5514088026699189,top:.7326295671817705},atlasBounds:{left:132.5,bottom:51.5,right:161.5,top:96.5}},{unicode:70,advance:.552734375,planeBounds:{left:.059675181705081196,bottom:-.02169206718177056,right:.5457935682949189,top:.7326295671817705},atlasBounds:{left:102.5,bottom:51.5,right:131.5,top:96.5}},{unicode:71,advance:.68115234375,planeBounds:{left:.040148791497511785,bottom:-.030073418674698794,right:.6268433960024882,top:.7410109186746989},atlasBounds:{left:380.5,bottom:144.5,right:415.5,top:190.5}},{unicode:72,advance:.712890625,planeBounds:{left:.062365588372511785,bottom:-.02169206718177056,right:.6490601928774882,top:.7326295671817705},atlasBounds:{left:30.5,bottom:51.5,right:65.5,top:96.5}},{unicode:73,advance:.27197265625,planeBounds:{left:.06917965680657412,bottom:-.02169206718177056,right:.20328128069342588,top:.7326295671817705},atlasBounds:{left:196.5,bottom:51.5,right:204.5,top:96.5}},{unicode:74,advance:.5517578125,planeBounds:{left:.007184947330081194,bottom:-.02657487968177056,right:.4933033339199188,top:.7277467546817705},atlasBounds:{left:.5,bottom:51.5,right:29.5,top:96.5}},{unicode:75,advance:.626953125,planeBounds:{left:.061633166497511785,bottom:-.02169206718177056,right:.6483277710024882,top:.7326295671817705},atlasBounds:{left:452.5,bottom:97.5,right:487.5,top:142.5}},{unicode:76,advance:.5380859375,planeBounds:{left:.06341786132300943,bottom:-.02169206718177056,right:.5327735449269906,top:.7326295671817705},atlasBounds:{left:423.5,bottom:97.5,right:451.5,top:142.5}},{unicode:77,advance:.873046875,planeBounds:{left:.05911847969322944,bottom:-.02169206718177056,right:.8134401140567705,top:.7326295671817705},atlasBounds:{left:377.5,bottom:97.5,right:422.5,top:142.5}},{unicode:78,advance:.712890625,planeBounds:{left:.062365588372511785,bottom:-.02169206718177056,right:.6490601928774882,top:.7326295671817705},atlasBounds:{left:341.5,bottom:97.5,right:376.5,top:142.5}},{unicode:79,advance:.6875,planeBounds:{left:.033395854136655315,bottom:-.030073418674698794,right:.6536158646133446,top:.7410109186746989},atlasBounds:{left:416.5,bottom:144.5,right:453.5,top:190.5}},{unicode:80,advance:.630859375,planeBounds:{left:.061550166358368255,bottom:-.02169206718177056,right:.6147193648916317,top:.7326295671817705},atlasBounds:{left:273.5,bottom:97.5,right:306.5,top:142.5}},{unicode:81,advance:.6875,planeBounds:{left:.030466166636655315,bottom:-.14391866037519643,right:.6506861771133446,top:.7445045978751964},atlasBounds:{left:214.5,bottom:202.5,right:251.5,top:255.5}},{unicode:82,advance:.61572265625,planeBounds:{left:.06350329135836826,bottom:-.02169206718177056,right:.6166724898916317,top:.7326295671817705},atlasBounds:{left:186.5,bottom:97.5,right:219.5,top:142.5}},{unicode:83,advance:.59326171875,planeBounds:{left:.020778681983368255,bottom:-.030073418674698794,right:.5739478805166317,top:.7410109186746989},atlasBounds:{left:454.5,bottom:144.5,right:487.5,top:190.5}},{unicode:84,advance:.5966796875,planeBounds:{left:.005480822747511787,bottom:-.02169206718177056,right:.5921754272524882,top:.7326295671817705},atlasBounds:{left:112.5,bottom:97.5,right:147.5,top:142.5}},{unicode:85,advance:.6484375,planeBounds:{left:.049098994483368255,bottom:-.02657487968177056,right:.6022681930166317,top:.7277467546817705},atlasBounds:{left:78.5,bottom:97.5,right:111.5,top:142.5}},{unicode:86,advance:.63623046875,planeBounds:{left:-.008269192599201152,bottom:-.02169206718177056,right:.6454762238492011,top:.7326295671817705},atlasBounds:{left:38.5,bottom:97.5,right:77.5,top:142.5}},{unicode:87,advance:.88720703125,planeBounds:{left:.011923628617731797,bottom:-.02169206718177056,right:.8835841838822683,top:.7326295671817705},atlasBounds:{left:220.5,bottom:97.5,right:272.5,top:142.5}},{unicode:88,advance:.626953125,planeBounds:{left:.004098979136655316,bottom:-.02169206718177056,right:.6243189896133446,top:.7326295671817705},atlasBounds:{left:.5,bottom:97.5,right:37.5,top:142.5}},{unicode:89,advance:.6005859375,planeBounds:{left:-.010793598988344685,bottom:-.02169206718177056,right:.6094264114883446,top:.7326295671817705},atlasBounds:{left:148.5,bottom:97.5,right:185.5,top:142.5}},{unicode:90,advance:.5986328125,planeBounds:{left:.024196650733368255,bottom:-.02169206718177056,right:.5773658492666317,top:.7326295671817705},atlasBounds:{left:307.5,bottom:97.5,right:340.5,top:142.5}},{unicode:91,advance:.26513671875,planeBounds:{left:.05437250871693295,bottom:-.17280296457569408,right:.27228764753306706,top:.8329592145756942},atlasBounds:{left:59.5,bottom:195.5,right:72.5,top:255.5}},{unicode:92,advance:.41015625,planeBounds:{left:.0014037126767941326,bottom:-.08573505127848349,right:.4204712873232059,top:.7356373950284835},atlasBounds:{left:278.5,bottom:206.5,right:303.5,top:255.5}},{unicode:93,advance:.26513671875,planeBounds:{left:-.020659233400995285,bottom:-.17280296457569408,right:.2140186084009953,top:.8329592145756942},atlasBounds:{left:94.5,bottom:195.5,right:108.5,top:255.5}},{unicode:94,advance:.41796875,planeBounds:{left:.006855376669722368,bottom:.33229482979472236,right:.40916024833027764,top:.7345997014552776},atlasBounds:{left:486.5,bottom:231.5,right:510.5,top:255.5}},{unicode:95,advance:.451171875,planeBounds:{left:-.017473255794918804,bottom:-.09553469482549765,right:.4686451307949188,top:.021804226075497646},atlasBounds:{left:70.5,bottom:7.5,right:99.5,top:14.5}},{unicode:96,advance:.30908203125,planeBounds:{left:.00391839948107648,bottom:.5860277898277895,right:.2553589442689235,top:.7704175226722105},atlasBounds:{left:36.5,bottom:3.5,right:51.5,top:14.5}},{unicode:97,advance:.5439453125,planeBounds:{left:.028181041080081196,bottom:-.029187146002488215,right:.5142994276699189,top:.5575074585024882},atlasBounds:{left:30.5,bottom:15.5,right:59.5,top:50.5}},{unicode:98,advance:.56103515625,planeBounds:{left:.048932994205081196,bottom:-.032187684160555265,right:.5350513807949189,top:.7724220591605554},atlasBounds:{left:304.5,bottom:207.5,right:333.5,top:255.5}},{unicode:99,advance:.5234375,planeBounds:{left:.024518931705081196,bottom:-.029187146002488215,right:.5106373182949189,top:.5575074585024882},atlasBounds:{left:.5,bottom:15.5,right:29.5,top:50.5}},{unicode:100,advance:.56396484375,planeBounds:{left:.026227916080081196,bottom:-.032187684160555265,right:.5123463026699189,top:.7724220591605554},atlasBounds:{left:334.5,bottom:207.5,right:363.5,top:255.5}},{unicode:101,advance:.52978515625,planeBounds:{left:.026472056705081196,bottom:-.029187146002488215,right:.5125904432949189,top:.5575074585024882},atlasBounds:{left:468.5,bottom:61.5,right:497.5,top:96.5}},{unicode:102,advance:.34716796875,planeBounds:{left:.004575110905578838,bottom:-.022177918535555265,right:.3733545765944212,top:.7824318247855554},atlasBounds:{left:364.5,bottom:207.5,right:386.5,top:255.5}},{unicode:103,advance:.56103515625,planeBounds:{left:.026960337955081196,bottom:-.22888445766762702,right:.5130787245449189,top:.558962582667627},atlasBounds:{left:28.5,bottom:143.5,right:57.5,top:190.5}},{unicode:104,advance:.55078125,planeBounds:{left:.049826556565937666,bottom:-.01892352016762703,right:.5024195371840624,top:.768923520167627},atlasBounds:{left:.5,bottom:143.5,right:27.5,top:190.5}},{unicode:105,advance:.24267578125,planeBounds:{left:.046882289688645884,bottom:-.01680925468177056,right:.19774661656135412,top:.7375123796817705},atlasBounds:{left:498.5,bottom:145.5,right:507.5,top:190.5}},{unicode:106,advance:.23876953125,planeBounds:{left:-.048979545900995285,bottom:-.2324562772148376,right:.1856982959009953,top:.7397804959648377},atlasBounds:{left:140.5,bottom:197.5,right:154.5,top:255.5}},{unicode:107,advance:.5068359375,planeBounds:{left:.044294322330081196,bottom:-.01892352016762703,right:.5304127089199189,top:.768923520167627},atlasBounds:{left:58.5,bottom:143.5,right:87.5,top:190.5}},{unicode:108,advance:.24267578125,planeBounds:{left:.05428707868157412,bottom:-.01892352016762703,right:.18838870256842588,top:.768923520167627},atlasBounds:{left:477.5,bottom:208.5,right:485.5,top:255.5}},{unicode:109,advance:.87646484375,planeBounds:{left:.04430890170737297,bottom:-.024304333502488215,right:.832155942042627,top:.5623902710024882},atlasBounds:{left:116.5,bottom:15.5,right:163.5,top:50.5}},{unicode:110,advance:.5517578125,planeBounds:{left:.049826556565937666,bottom:-.024304333502488215,right:.5024195371840624,top:.5623902710024882},atlasBounds:{left:60.5,bottom:15.5,right:87.5,top:50.5}},{unicode:111,advance:.5703125,planeBounds:{left:.025090213094224725,bottom:-.029187146002488215,right:.5447340056557752,top:.5575074585024882},atlasBounds:{left:193.5,bottom:15.5,right:224.5,top:50.5}},{unicode:112,advance:.56103515625,planeBounds:{left:.048444712955081196,bottom:-.22644305141762702,right:.5345630995449189,top:.561403988917627},atlasBounds:{left:447.5,bottom:208.5,right:476.5,top:255.5}},{unicode:113,advance:.568359375,planeBounds:{left:.025983775455081196,bottom:-.22644305141762702,right:.5121021620449189,top:.561403988917627},atlasBounds:{left:417.5,bottom:208.5,right:446.5,top:255.5}},{unicode:114,advance:.33837890625,planeBounds:{left:.045180595002291775,bottom:-.024304333502488215,right:.34690924874770823,top:.5623902710024882},atlasBounds:{left:449.5,bottom:61.5,right:467.5,top:96.5}},{unicode:115,advance:.515625,planeBounds:{left:.021669814448009427,bottom:-.029187146002488215,right:.4910254980519906,top:.5575074585024882},atlasBounds:{left:164.5,bottom:15.5,right:192.5,top:50.5}},{unicode:116,advance:.32666015625,planeBounds:{left:-.019433670483564695,bottom:-.02877457520298586,right:.3158203892335647,top:.675258950202986},atlasBounds:{left:418.5,bottom:54.5,right:438.5,top:96.5}},{unicode:117,advance:.55126953125,planeBounds:{left:.048117572190937666,bottom:-.034069958502488215,right:.5007105528090624,top:.5526246460024882},atlasBounds:{left:88.5,bottom:15.5,right:115.5,top:50.5}},{unicode:118,advance:.484375,planeBounds:{left:-.002092396419918806,bottom:-.02080579450955998,right:.4840259901699188,top:.5491261070095601},atlasBounds:{left:331.5,bottom:16.5,right:360.5,top:50.5}},{unicode:119,advance:.75146484375,planeBounds:{left:-.002649098431770561,bottom:-.02080579450955998,right:.7516725359317705,top:.5491261070095601},atlasBounds:{left:225.5,bottom:16.5,right:270.5,top:50.5}},{unicode:120,advance:.49560546875,planeBounds:{left:-.0046143729128470395,bottom:-.02080579450955998,right:.4982667166628471,top:.5491261070095601},atlasBounds:{left:300.5,bottom:16.5,right:330.5,top:50.5}},{unicode:121,advance:.47314453125,planeBounds:{left:-.007219349544918806,bottom:-.23645281704262702,right:.4788990370449188,top:.551394223292627},atlasBounds:{left:387.5,bottom:208.5,right:416.5,top:255.5}},{unicode:122,advance:.49560546875,planeBounds:{left:.018007705073009427,bottom:-.02080579450955998,right:.4873633886769906,top:.5491261070095601},atlasBounds:{left:271.5,bottom:16.5,right:299.5,top:50.5}},{unicode:123,advance:.33837890625,planeBounds:{left:.011572188891435306,bottom:-.20234398020069408,right:.3468262486085647,top:.8034181989506942},atlasBounds:{left:73.5,bottom:195.5,right:93.5,top:255.5}},{unicode:124,advance:.24365234375,planeBounds:{left:.06315671142450235,bottom:-.15466084787519643,right:.18049563232549765,top:.7337624103751964},atlasBounds:{left:206.5,bottom:202.5,right:213.5,top:255.5}},{unicode:125,advance:.33837890625,planeBounds:{left:-.010156326733564695,bottom:-.20234398020069408,right:.3250977329835647,top:.8034181989506942},atlasBounds:{left:38.5,bottom:195.5,right:58.5,top:255.5}},{unicode:126,advance:.68017578125,planeBounds:{left:.046984728997511785,bottom:.1766063915990047,right:.6336793335024882,top:.4112842334009953},atlasBounds:{left:.5,bottom:.5,right:35.5,top:14.5}}],kerning:[]},RC=33987,FC=33988,BC=33989;function UC(e,t){const n=e.getContext("webgl2",{alpha:!0,antialias:t});if(!n)throw new Error("Unable to initialize WebGL2. Your browser may not support it.");return{gl:n,max2D:n.getParameter(n.MAX_TEXTURE_SIZE),max3D:n.getParameter(n.MAX_3D_TEXTURE_SIZE)}}function NC(e,t,n,i,a=!1){if(t&&e.deleteTexture(t),t=e.createTexture(),e.activeTexture(n),e.bindTexture(e.TEXTURE_3D,t),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texStorage3D(e.TEXTURE_3D,1,e.R8,i[1],i[2],i[3]),a){const o=new Uint8Array(i[1]*i[2]*i[3]);e.texSubImage3D(e.TEXTURE_3D,0,0,0,0,i[1],i[2],i[3],e.RED,e.UNSIGNED_BYTE,o)}return t}function IC(e,t,n,i,a){t&&e.deleteTexture(t),t=e.createTexture(),e.activeTexture(n),e.bindTexture(e.TEXTURE_3D,t),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texStorage3D(e.TEXTURE_3D,1,e.R16I,i[1],i[2],i[3]);const o=i[1]*i[2]*i[3];return a.length!==o&&(a=new Int16Array(o)),e.texSubImage3D(e.TEXTURE_3D,0,0,0,0,i[1],i[2],i[3],e.RED_INTEGER,e.SHORT,a),t}function VC(e,t,n,i,a=null,o=!0){if(t&&e.deleteTexture(t),t=e.createTexture(),e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texStorage2D(e.TEXTURE_2D,1,e.RGBA8,i[1],i[2]),a){let l=a;const u=i[1],f=i[2];if(o){l=new Uint8Array(a.length);const h=u*4;for(let d=0;d<f;d++){const m=d*h,p=(f-1-d)*h;l.set(a.subarray(m,m+h),p)}}e.texSubImage2D(e.TEXTURE_2D,0,0,0,u,f,e.RGBA,e.UNSIGNED_BYTE,l)}return t}function OC(e,t,n,i,a=!1){if(t&&e.deleteTexture(t),t=e.createTexture(),e.activeTexture(n),e.bindTexture(e.TEXTURE_3D,t),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texStorage3D(e.TEXTURE_3D,1,e.RGBA8,i[1],i[2],i[3]),a){const o=new Uint8Array(i[1]*i[2]*i[3]*4);e.texSubImage3D(e.TEXTURE_3D,0,0,0,0,i[1],i[2],i[3],e.RGBA,e.UNSIGNED_BYTE,o)}return t}function LC(e,t,n,i,a=!1){if(t&&e.deleteTexture(t),t=e.createTexture(),e.activeTexture(n),e.bindTexture(e.TEXTURE_3D,t),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_3D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_ALIGNMENT,2),e.pixelStorei(e.PACK_ALIGNMENT,2),e.texStorage3D(e.TEXTURE_3D,1,e.RGBA16UI,i[1],i[2],i[3]),a){const o=new Uint16Array(i[1]*i[2]*i[3]*4);e.texSubImage3D(e.TEXTURE_3D,0,0,0,0,i[1],i[2],i[3],e.RGBA_INTEGER,e.UNSIGNED_SHORT,o)}return t}function fv(e,t){new URL(t,window.location.href).origin!==window.location.origin&&(e.crossOrigin="")}async function PC(e,t,n,i,a,o,l,u,f,h){return new Promise((d,m)=>{const p=new Image;p.onload=()=>{if(!a)return;let A;if(n===4){l!==null&&e.deleteTexture(l),A=e.createTexture();const v=p.width/p.height;e.activeTexture(FC),a.use(e),e.uniform1i(a.uniforms.bmpTexture,4),f&&f(v)}else if(n===5)u!==null&&e.deleteTexture(u),A=e.createTexture(),e.activeTexture(BC);else{if(!i){m(new Error("Font shader required for texture unit 3"));return}o!==null&&e.deleteTexture(o),A=e.createTexture(),i.use(e),e.activeTexture(RC),e.uniform1i(i.uniforms.fontTexture,3)}e.bindTexture(e.TEXTURE_2D,A),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,p),d(A),n!==4&&h&&h()},p.onerror=m,fv(p,t),p.src=t})}var hp=(e,t)=>{const n=Math.floor(Math.log(e)/Math.log(10)),i=e/Math.pow(10,n);let a;return t?i<1.5?a=1:i<3?a=2:i<7?a=5:a=10:i<=1?a=1:i<=2?a=2:i<=5?a=5:a=10,a*Math.pow(10,n)};function zC(e){return new Promise((t,n)=>{let i;e instanceof File?i=Promise.resolve(e):i=new Promise((a,o)=>{e.file(a,o)}),i.then(a=>{const o=new FileReader;o.onload=()=>{typeof o.result=="string"?t(o.result):n(new Error("Expected a string from FileReader.result"))},o.onerror=()=>{n(o.error??new Error("Unknown FileReader error"))},o.readAsDataURL(a)}).catch(a=>n(a))})}function kC(e){const t=e.hdr.dims,n=e.permRAS,i=t[1]*t[2]*t[3],a=new Int16Array(i),o=[0,0,0];for(let A=0;A<3;A++)for(let v=0;v<3;v++)Math.abs(n[A])-1===v&&(o[v]=A*Math.sign(n[A]));let l=1;const u=[1,1,1],f=[!1,!1,!1];for(let A=0;A<o.length;A++)for(let v=0;v<o.length;v++)Math.abs(o[v])===A&&(u[v]=l,(o[v]<0||Object.is(o[v],-0))&&(f[v]=!0),l*=t[v+1]);let h=Ce.range(0,t[1]-1,1);f[0]&&(h=Ce.range(t[1]-1,0,-1));for(let A=0;A<t[1];A++)h[A]*=u[0];let d=Ce.range(0,t[2]-1,1);f[1]&&(d=Ce.range(t[2]-1,0,-1));for(let A=0;A<t[2];A++)d[A]*=u[1];let m=Ce.range(0,t[3]-1,1);f[2]&&(m=Ce.range(t[3]-1,0,-1));for(let A=0;A<t[3];A++)m[A]*=u[2];let p=0;for(let A=0;A<t[3];A++)for(let v=0;v<t[2];v++)for(let y=0;y<t[1];y++)a[h[y]+d[v]+m[A]]=e.img[p],p++;return a}function GC(e){const t=[5960464477539063e-23,152587890625e-16,.00390625,1];return(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3])/255}function dp(e,t){return e.scl_slope===0&&(e.scl_slope=1),t*e.scl_slope+e.scl_inter}function Ps(e,t,n=4){const i=hp(t-e,!1),a=hp(i/(n-1),!0),o=Math.floor(e/a)*a,l=Math.ceil(t/a)*a;return[a,o,l,o===e&&l===t]}function mp(e,t){let n=Ps(e,t,3);return n[3]||(n=Ps(e,t,5)),n[3]||(n=Ps(e,t,4)),n[3]||(n=Ps(e,t,3)),n[3]||(n=Ps(e,t,5)),[n[0],n[1],n[2]]}function Ji(e){return e*(Math.PI/180)}function Rh(e,t,n,i){let a=-e,o=-t;return isFinite(n)&&isFinite(i)&&(a=n,o=i),a>o&&([a,o]=[o,a]),[a,o]}function at(e,t=[0,1,2]){const n=je();return n[0]=e[t[0]],n[1]=e[t[1]],n[2]=e[t[2]],n}function YC(e){const t=nt(1,0,0,0),n=mi();return Ft(n,t,e),n[0]}function HC(e,t,n,i){const a=nt(e,t,n,1),o=lt(i);Kt(o,o),a[0]=a[0]*2-1,a[1]=a[1]*2-1,a[2]=a[2]*2-1;const l=mi();return Ft(l,a,o),l[3]===0||(l[0]/=l[3],l[1]/=l[3],l[2]/=l[3]),l}function Wd(e,t=!0){const{volumes:n,meshes:i,volumeObject3D:a}=e;let o=ce(0,0,0),l=ce(0,0,0);if(n.length>0){if(!a)throw new Error("volumeObject3D undefined");o=ce(a.extentsMin[0],a.extentsMin[1],a.extentsMin[2]),l=ce(a.extentsMax[0],a.extentsMax[1],a.extentsMax[2]),t||(o=ce(n[0].extentsMinOrtho[0],n[0].extentsMinOrtho[1],n[0].extentsMinOrtho[2]),l=ce(n[0].extentsMaxOrtho[0],n[0].extentsMaxOrtho[1],n[0].extentsMaxOrtho[2]))}if(i.length>0){if(n.length<1){const f=i[0].extentsMin,h=i[0].extentsMax;o=ce(f[0],f[1],f[2]),l=ce(h[0],h[1],h[2])}for(let f=0;f<i.length;f++){const h=i[f].extentsMin,d=i[f].extentsMax,m=ce(h[0],h[1],h[2]);Td(o,o,m);const p=ce(d[0],d[1],d[2]);Rd(l,l,p)}}const u=je();return Je(u,l,o),[o,l,u]}function hv(e,t){const{volumes:n,meshes:i,volumeObject3D:a,volIdx:o=0,isSliceMM:l=!1}=t;if(n.length<1){const u=ce(.1,.5,.5),[f,h,d]=Wd({volumes:n,meshes:i,volumeObject3D:a},l);return u[0]=(e[0]-f[0])/d[0],u[1]=(e[1]-f[1])/d[1],u[2]=(e[2]-f[2])/d[2],isFinite(u[0])||(u[0]=.5),isFinite(u[1])||(u[1]=.5),isFinite(u[2])||(u[2]=.5),u}return n[o].convertMM2Frac(e,l)}function Pc(e,t){const{volumes:n,meshes:i,volumeObject3D:a,volIdx:o=0,isSliceMM:l=!1}=t,u=nt(e[0],e[1],e[2],1);if(n.length>0)return n[o].convertFrac2MM(e,l);{const[f,h]=Wd({volumes:n,meshes:i,volumeObject3D:a},l),d=(m,p,A)=>m*(1-A)+p*A;u[0]=d(f[0],h[0],e[0]),u[1]=d(f[1],h[1],e[1]),u[2]=d(f[2],h[2],e[2])}return u}function XC(e,t,n=0){return t[n].convertVox2Frac(e)}function jC(e,t,n=0){return t.length<=n?ce(0,0,0):t[n].convertFrac2Vox(e)}function qC(e,t){return Ce.vox2mm(e,t)}function _C(e,t){return t===1?at(e,[0,2,1]):t===2?at(e,[1,2,0]):e}function Zd(e,t,n,i,a){const{volumes:o,meshes:l,volumeObject3D:u,isSliceMM:f=!1,restrict0to1:h=!0}=a,d=ce(-1,-1,-1),m=n[i],p=m.axCorSag;if(p>2)return d;const A=m.leftTopWidthHeight.slice();let v=!1;A[2]<0&&(v=!0,A[0]+=A[2],A[2]=-A[2]);let y=(e-A[0])/A[2];v&&(y=1-y);const w=1-(t-A[1])/A[3];if(y<0||y>1||w<0||w>1||m.AxyzMxy.length<4)return d;let C=ce(0,0,0);C[0]=m.leftTopMM[0]+y*m.fovMM[0],C[1]=m.leftTopMM[1]+w*m.fovMM[1];const S=m.AxyzMxy;C[2]=S[2]+S[4]*(C[1]-S[1])-S[3]*(C[0]-S[0]),p===1&&(C=at(C,[0,2,1])),p===2&&(C=at(C,[2,0,1]));const E=hv(C,{volumes:o,meshes:l,volumeObject3D:u,isSliceMM:f});return h&&(E[0]<0||E[0]>1||E[1]<0||E[1]>1||E[2]<0||E[2]>1)?d:E}function KC(e,t,n,i){const{volumes:a,meshes:o,volumeObject3D:l,isSliceMM:u=!1,forceSlice:f=-1}=i;for(let h=0;h<n.length;h++){let d=h;f>=0&&(d=f);const m=n[d];if(m.axCorSag>2)continue;const A=m.leftTopWidthHeight;if(e<A[0]||t<A[1]||e>A[0]+A[2]||t>A[1]+A[3])continue;const v=Zd(e,t,n,d,{volumes:a,meshes:o,volumeObject3D:l,isSliceMM:u,restrict0to1:!1});if(v[0]<0)continue;const y=Pc(v,{volumes:a,meshes:o,volumeObject3D:l,isSliceMM:u});return nt(y[0],y[1],y[2],d)}return nt(NaN,NaN,NaN,NaN)}function QC(e,t,n){const{volumes:i,meshes:a,volumeObject3D:o,isSliceMM:l=!1}=n;for(let u=0;u<t.length;u++){const f=Zd(e[0],e[1],t,u,{volumes:i,meshes:a,volumeObject3D:o,isSliceMM:l});if(f[0]>=0)return f}return ce(-1,-1,-1)}function WC(e,t,n){const{volumes:i,meshes:a,volumeObject3D:o,isSliceMM:l=!1,sliceType:u}=n,f=Pc(e,{volumes:i,meshes:a,volumeObject3D:o,isSliceMM:l});let h={index:-1,distance:1/0};for(let d=0;d<t.length;d++){const m=t[d],p=m.axCorSag;if(p>2||m.AxyzMxy.length<4)continue;let A=ce(f[0],f[1],f[2]);p===1&&(A=at(A,[0,2,1])),p===2&&(A=at(A,[1,2,0]));const v=m.AxyzMxy,y=v[2]+v[4]*(A[1]-v[1])-v[3]*(A[0]-v[0]),w=Math.abs(A[2]-y),C=u===3?1:.1;if(w<h.distance&&(h={index:d,distance:w}),w<=C){const S=(A[0]-m.leftTopMM[0])/m.fovMM[0],E=(A[1]-m.leftTopMM[1])/m.fovMM[1];if(S>=0&&S<=1&&E>=0&&E<=1){const M=m.leftTopWidthHeight.slice();let R=!1;M[2]<0&&(R=!0,M[0]+=M[2],M[2]=-M[2]);let D=S;R&&(D=1-S);const T=1-E,F=M[0]+D*M[2],U=M[1]+T*M[3];return[F,U]}}}if(h.index>=0&&h.distance<2){const d=h.index,m=t[d],p=m.axCorSag;let A=ce(f[0],f[1],f[2]);p===1&&(A=at(A,[0,2,1])),p===2&&(A=at(A,[1,2,0]));const v=m.AxyzMxy;A[2]=v[2]+v[4]*(A[1]-v[1])-v[3]*(A[0]-v[0]);const y=(A[0]-m.leftTopMM[0])/m.fovMM[0],w=(A[1]-m.leftTopMM[1])/m.fovMM[1];if(y>=-.1&&y<=1.1&&w>=-.1&&w<=1.1){const C=Math.max(0,Math.min(1,y)),S=Math.max(0,Math.min(1,w)),E=m.leftTopWidthHeight.slice();let M=!1;E[2]<0&&(M=!0,E[0]+=E[2],E[2]=-E[2]);let R=C;M&&(R=1-C);const D=1-S,T=E[0]+R*E[2],F=E[1]+D*E[3];return[T,F]}}return null}function ZC(e,t,n){const{volumes:i,meshes:a,volumeObject3D:o,isSliceMM:l=!1,preferredSliceType:u}=n,f=Pc(e,{volumes:i,meshes:a,volumeObject3D:o,isSliceMM:l});let h={index:-1,distance:1/0};for(let d=0;d<t.length;d++){const m=t[d],p=m.axCorSag;if(p>2||m.AxyzMxy.length<4||u!==void 0&&p!==u)continue;let A=ce(f[0],f[1],f[2]);p===1&&(A=at(A,[0,2,1])),p===2&&(A=at(A,[1,2,0]));const v=m.AxyzMxy,y=v[2]+v[4]*(A[1]-v[1])-v[3]*(A[0]-v[0]),w=Math.abs(A[2]-y);if(w<h.distance&&(h={index:d,distance:w}),w<=.1){const S=(A[0]-m.leftTopMM[0])/m.fovMM[0],E=(A[1]-m.leftTopMM[1])/m.fovMM[1];if(S>=0&&S<=1&&E>=0&&E<=1){const M=m.leftTopWidthHeight.slice();let R=!1;M[2]<0&&(R=!0,M[0]+=M[2],M[2]=-M[2]);let D=S;R&&(D=1-S);const T=1-E,F=M[0]+D*M[2],U=M[1]+T*M[3];return{pos:[F,U],tileIndex:d}}}}if(h.index>=0&&h.distance<2){const d=h.index,m=t[d],p=m.axCorSag;let A=ce(f[0],f[1],f[2]);p===1&&(A=at(A,[0,2,1])),p===2&&(A=at(A,[1,2,0]));const v=m.AxyzMxy;A[2]=v[2]+v[4]*(A[1]-v[1])-v[3]*(A[0]-v[0]);const y=(A[0]-m.leftTopMM[0])/m.fovMM[0],w=(A[1]-m.leftTopMM[1])/m.fovMM[1];if(y>=-.1&&y<=1.1&&w>=-.1&&w<=1.1){const C=Math.max(0,Math.min(1,y)),S=Math.max(0,Math.min(1,w)),E=m.leftTopWidthHeight.slice();let M=!1;E[2]<0&&(M=!0,E[0]+=E[2],E[2]=-E[2]);let R=C;M&&(R=1-C);const D=1-S,T=E[0]+R*E[2],F=E[1]+D*E[3];return{pos:[T,F],tileIndex:d}}}return null}var JC=function(e,t,n){const i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t),e.compileShader(i);const a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,n),e.compileShader(a);const o=e.createProgram();if(e.attachShader(o,i),e.attachShader(o,a),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(o)),e.getShaderParameter(i,e.COMPILE_STATUS)||console.log("Vertex shader compilation error:",e.getShaderInfoLog(i)),e.getShaderParameter(a,e.COMPILE_STATUS)||console.log("Fragment shader compilation error:",e.getShaderInfoLog(a)),G.error(e.getProgramInfoLog(o)),new Error("Shader failed to link, see console for log");return o},Ne=class{constructor(e,t,n){L(this,"program"),L(this,"uniforms",{}),L(this,"isMatcap"),L(this,"isCrosscut"),this.program=JC(e,t,n);const i=/uniform[^;]+[ ](\w+);/g,a=/uniform[^;]+[ ](\w+);/,o=t.match(i),l=n.match(i);o&&o.forEach(u=>{const f=u.match(a);this.uniforms[f[1]]=-1}),l&&l.forEach(u=>{const f=u.match(a);this.uniforms[f[1]]=-1});for(const u in this.uniforms)this.uniforms[u]=e.getUniformLocation(this.program,u)}use(e){e.useProgram(this.program)}},Qs=`#version 300 es
#line 4
layout(location=0) in vec3 pos;
layout(location=1) in vec3 texCoords;
uniform mat4 mvpMtx;
out vec3 vColor;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vColor = texCoords;
}`,Jd=`
	vec4 drawColor(float scalar, float drawOpacity) {
		float nlayer = float(textureSize(colormap, 0).y);
		float layer = (nlayer - 0.5) / nlayer;
		vec4 dcolor = texture(colormap, vec2((scalar * 255.0)/256.0 + 0.5/256.0, layer)).rgba;
		dcolor.a *= drawOpacity;
		return dcolor;
}`,ho=`vec3 GetBackPosition(vec3 startPositionTex) {
	vec3 startPosition = startPositionTex * volScale;
	vec3 invR = 1.0 / rayDir;
	vec3 tbot = invR * (vec3(0.0)-startPosition);
	vec3 ttop = invR * (volScale-startPosition);
	vec3 tmax = max(ttop, tbot);
	vec2 t = min(tmax.xx, tmax.yz);
	vec3 endPosition = startPosition + (rayDir * min(t.x, t.y));
	//convert world position back to texture position:
	endPosition = endPosition / volScale;
	return endPosition;
}

float distance2Plane(in vec4 samplePos, in vec4 clipPlane) {
	// treat clipPlane.a > 1 as "no clip" sentinel (keeps existing behavior)
	if (clipPlane.a > 1.0) {
			return 1000.0; // sentinel large distance
	}
	vec3 n = clipPlane.xyz;
	const float EPS = 1e-6;
	float nlen = length(n);
	if (nlen < EPS) {
			return 1000.0; // invalid plane normal
	}
	// signed plane value: dot(n, p-0.5) + a
	float signedDist = dot(n, samplePos.xyz - 0.5) + clipPlane.a;
	// perpendicular (Euclidean) distance is |signedDist| / |n|
	return abs(signedDist) / nlen;
}

// see if clip plane trims ray sampling range sampleStartEnd.x..y
void clipSampleRange(in vec3 dir, in vec4 rayStart, in vec4 clipPlane, inout vec2 sampleStartEnd, inout bool hasClip) {
	const float CSR_EPS = 1e-6;
	// quick exit: no clip plane
	if (clipPlane.a > 1.0)
			return;
	hasClip = true;
	// quick exit: empty range
	if ((sampleStartEnd.y - sampleStartEnd.x) <= CSR_EPS)
			return;
	// Which side does the ray start on? (plane eqn: dot(n, p-0.5) + a = 0)
	float sampleSide = dot(clipPlane.xyz, rayStart.xyz - 0.5) + clipPlane.a;
	bool startsFront = (sampleSide < 0.0);
	float dis = - 1.0;
	// plane normal dot ray direction
	float cdot = dot(dir, clipPlane.xyz);
	// avoid division by 0 for near-parallel plne
	if (abs(cdot) >= CSR_EPS)
		dis = (-clipPlane.a - dot(clipPlane.xyz, rayStart.xyz - 0.5)) / cdot;
	if (dis < 0.0 || dis > sampleStartEnd.y + CSR_EPS) {
			if (startsFront)
				sampleStartEnd = vec2(0.0, 0.0);
			return;
	}
	bool frontface = (cdot > 0.0);
	if (frontface)
		sampleStartEnd.x = max(sampleStartEnd.x, dis);
	else
		sampleStartEnd.y = min(sampleStartEnd.y, dis);
	// if nothing remains, mark empty
	if (sampleStartEnd.y - sampleStartEnd.x <= CSR_EPS)
		sampleStartEnd = vec2(0.0, 0.0);
}

bool skipSample (float pos, vec2 sampleRange) {
	return (pos < sampleRange.x || pos > sampleRange.y);
}

float frac2ndc(vec3 frac) {
//https://stackoverflow.com/questions/7777913/how-to-render-depth-linearly-in-modern-opengl-with-gl-fragcoord-z-in-fragment-sh
	vec4 pos = vec4(frac.xyz, 1.0); //fraction
	vec4 dim = vec4(vec3(textureSize(volume, 0)), 1.0);
	pos = pos * dim;
	vec4 shim = vec4(-0.5, -0.5, -0.5, 0.0);
	pos += shim;
	vec4 mm = transpose(matRAS) * pos;
	float z_ndc = (mvpMtx * vec4(mm.xyz, 1.0)).z;
	return (z_ndc + 1.0) / 2.0;
}`+Jd,$d=`void main() {
	if (fColor.x > 2.0) {
		fColor = vec4(1.0, 0.0, 0.0, 0.5);
		return;
	}
	fColor = vec4(0.0,0.0,0.0,0.0);
	vec4 clipPlaneColorX = clipPlaneColor;
	//if (clipPlaneColor.a < 0.0)
	//	clipPlaneColorX.a = - 1.0;
	bool isColorPlaneInVolume = false;
	if (clipPlaneColorX.a < 0.0) {
		isColorPlaneInVolume = true;
		clipPlaneColorX.a = 0.0;
	}
	//fColor = vec4(vColor.rgb, 1.0); return;
	vec3 start = vColor;
	gl_FragDepth = 1.0;
	vec3 backPosition = GetBackPosition(start);
	// fColor = vec4(backPosition, 1.0); return;
	vec3 dir = normalize(backPosition - start);
	//clipVolumeStart(start, backPosition);
	dir = normalize(dir);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) { //length limit for parallel rays
		return;
	}
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	vec4 deltaDir = vec4(dir.xyz * stepSize, stepSize);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position

	vec2 sampleRange = vec2(0.0, len);
	bool hasClip = false;
	for (int i = 0; i < MAX_CLIP_PLANES; i++)
		clipSampleRange(dir, samplePos, clipPlanes[i], sampleRange, hasClip);
	bool isClip = (sampleRange.x > 0.0) || ((sampleRange.y < len) && (sampleRange.y > 0.0));
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	if ((isClipCutaway) && (sampleRange.x <= 0.0) && (sampleRange.y >= len)) {
		//completely clipped, but ray does not intersect plane
		if (hasClip)
			samplePos.a = len + 1.0;
		else
			sampleRange = vec2(0.0, 0.0);
	}
	if ((!isClipCutaway) && (sampleRange.x >= sampleRange.y))
		samplePos.a = len + 1.0;
	while (samplePos.a <= len) {
		if (skipSample(samplePos.a, sampleRange) ^^ isClipCutaway) {
			samplePos += deltaDirFast;
			continue;
		}
		float val = texture(volume, samplePos.xyz).a;
		if (val > 0.01)
			break;
		samplePos += deltaDirFast; //advance ray position
	}
	float drawOpacityA = renderDrawAmbientOcclusionXY.y;
	if ((samplePos.a >= len) && (((overlays < 1.0) && (drawOpacityA <= 0.0) ) || (backgroundMasksOverlays > 0)))  {
		if (isClip)
			fColor += clipPlaneColorX;
		return;
	}
	fColor = vec4(1.0, 1.0, 1.0, 1.0);
	//gl_FragDepth = frac2ndc(samplePos.xyz); //crude due to fast pass resolution
	if (samplePos.a > deltaDirFast.a )
		samplePos -= deltaDirFast;
	//end: fast pass
	vec4 colAcc = vec4(0.0,0.0,0.0,0.0);
	vec4 firstHit = vec4(0.0,0.0,0.0,2.0 * len);
	const float earlyTermination = 0.95;
	float backNearest = len; //assume no hit
	float ran = fract(sin(gl_FragCoord.x * 12.9898 + gl_FragCoord.y * 78.233) * 43758.5453);
	// clip planes create steep gradients: reduce aliasing with more jitter
	if (isClip)
		samplePos += deltaDir * ran * 1.41; //jitter ray
	else
		samplePos += deltaDir * ran; //jitter ray
`,zc=`
	if (firstHit.a < len) {
		gl_FragDepth = frac2ndc(firstHit.xyz);
		vec4 paqdSample = texture(paqd, samplePos.xyz);
		if (paqdSample.a > 0.0) {
			//colAcc.rgb = paqdSample.rgb;
			float a = max(abs(paqdUniforms[2]), abs(paqdUniforms[3]));
			colAcc.rgb = mix(colAcc.rgb, paqdSample.rgb, 0.5 * paqdSample.a * a);
		}
		if (isClip) {
			//shade voxels with clip color
			if (clipPlaneColor.a < 0.0) {
					float thresh = 4.0 * sliceSize;
					float firstHit1 = firstHit.a + deltaDir.a;
				if (isClipCutaway) {
					float min1 = abs(firstHit1 - sampleRange.y);
					float dx = samplePos.a - firstHit1;
					if (min1 < thresh)
						colAcc.rgb = mix(colAcc.rgb, clipPlaneColorX.rgb, abs(clipPlaneColor.a));
					else if (( colAcc.a > earlyTermination ) && (dx > thresh)) {
						min1 = abs(firstHit1 - sampleRange.x);
						if (min1 < (thresh * 0.5)) {
							colAcc.rgb = mix(colAcc.rgb , clipPlaneColorX.rgb, abs(clipPlaneColor.a)*0.5);
						}
							
					}
				} else {
					if (abs(firstHit1 - sampleRange.x) < thresh)
						colAcc.rgb = mix(colAcc.rgb, clipPlaneColorX.rgb, abs(clipPlaneColor.a));
				} // clipPlaneColor.a < 0.0
			}
			//ambient occlusion: make creases dark
			float min1 = 1000.0;
			float min2 = 1000.0;
			// find smallest and second-smallest distances
			vec4 firstHit1 = firstHit - deltaDir;
			for (int i = 0; i < MAX_CLIP_PLANES; i++) {
				float d = distance2Plane(firstHit1, clipPlanes[i]);
				if (d < min1) {
						min2 = min1;
						min1 = d;
				} else if (d < min2) {
						min2 = d;
				}
			}
			float thresh = 1.2 * sliceSize;
			if ((isClipCutaway) && (min2 < thresh) && (sampleRange.x > 0.0)) {
				if ((abs(sampleRange.x - firstHit.a) > ( 2.0 * thresh)) && ((abs(sampleRange.y - firstHit.a) > (2.0 * thresh))))
					min2 = thresh; 
			}
			// if second is 0 -> factor 0 (black), if second >= sliceSize -> factor 1 (unchanged)
			const float aoFrac = 0.5;
			float factor = (1.0 - aoFrac) + aoFrac * clamp(min2 / thresh, 0.0, 1.0);
			// linear darkening: multiply color by factor (or use mix(vec3(0), colAcc.rgb, factor))
			colAcc.rgb *= factor;
		}
	}
	colAcc.a = (colAcc.a / earlyTermination) * backOpacity;
	fColor = colAcc;
	float renderDrawAmbientOcclusionX = renderDrawAmbientOcclusionXY.x;
	float drawOpacity = renderDrawAmbientOcclusionXY.y;
	if ((overlays < 1.0) && (drawOpacity <= 0.0))
		return;
	//overlay pass
	samplePos = vec4(start.xyz, 0.0); //ray position
	//start: OPTIONAL fast pass: rapid traversal until first hit
	stepSizeFast = sliceSize * 1.0;
	deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	while (samplePos.a <= len) {
		float val = texture(overlay, samplePos.xyz).a;
		if (drawOpacity > 0.0)
			val = max(val, texture(drawing, samplePos.xyz).r);
		if (val > 0.001)
			break;
		samplePos += deltaDirFast; //advance ray position
	}
	if (samplePos.a >= len) {
		if (isClip && (fColor.a == 0.0))
				fColor += clipPlaneColorX;
			return;
	}
	samplePos -= deltaDirFast;
	if (samplePos.a < 0.0)
		vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	//end: fast pass
	float overFarthest = len;
	colAcc = vec4(0.0, 0.0, 0.0, 0.0);

	samplePos += deltaDir * ran; //jitter ray
	vec4 overFirstHit = vec4(0.0,0.0,0.0,2.0 * len);
	if (backgroundMasksOverlays > 0)
		samplePos = firstHit;
	bool firstDraw = true;
	while (samplePos.a <= len) {
		vec4 colorSample = texture(overlay, samplePos.xyz);
		if ((colorSample.a < 0.01) && (drawOpacity > 0.0)) {
			float val = texture(drawing, samplePos.xyz).r;
			vec4 draw = drawColor(val, drawOpacity);
			if ((draw.a > 0.0) && (firstDraw)) {
				firstDraw = false;
				float sum = 0.0;
				const float mn = 1.0 / 256.0;
				const float sampleRadius = 1.1;
				float dx = sliceSize * sampleRadius;
				vec3 center = samplePos.xyz;
				//six neighbors that share a face
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,0.0), dir)).r, mn);
				//float proportion = (sum / mn) / 6.0;
				
				//12 neighbors that share an edge
				dx = sliceSize * sampleRadius * sqrt(2.0) * 0.5;
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,+dx,0.0), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,-dx,0.0), dir)).r, mn);

				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,+dx,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,0.0,-dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(+dx,-dx,0.0), dir)).r, mn);
				
				sum += min(texture(drawing, center.xyz + cross(vec3(0.0,-dx,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,0.0,+dx), dir)).r, mn);
				sum += min(texture(drawing, center.xyz + cross(vec3(-dx,+dx,0.0), dir)).r, mn);
				float proportion = (sum / mn) / 18.0; //proportion of six neighbors is non-zero
				
				//a high proportion of hits means crevice
				//since the AO term adds shadows that darken most voxels, it will result in dark surfaces
				//the term brighten adds a little illumination to balance this
				// without brighten, only the most extreme ridges will not be darker
				const float brighten = 1.2;
				vec3 ao = draw.rgb * (1.0 - proportion) * brighten;
				draw.rgb = mix (draw.rgb, ao , renderDrawAmbientOcclusionX);
			}
			colorSample = draw;
		}
		samplePos += deltaDir; //advance ray position
		if (colorSample.a >= 0.01) {
			if (overFirstHit.a > len)
				overFirstHit = samplePos;
			colorSample.a *= renderOverlayBlend;
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			overFarthest = samplePos.a;
			if ( colAcc.a > earlyTermination )
				break;
		}
	}
	//if (samplePos.a >= len) {
	if (colAcc.a <= 0.0) {
		if (isClip && (fColor.a == 0.0))
			fColor += clipPlaneColorX;
		return;
	}
	if (overFirstHit.a < firstHit.a)
		gl_FragDepth = frac2ndc(overFirstHit.xyz);
	float overMix = colAcc.a;
	float overlayDepth = 0.3;
	if (fColor.a <= 0.0)
		overMix = 1.0;
	else if (((overFarthest) > backNearest)) {
		float dx = (overFarthest - backNearest)/1.73;
		dx = fColor.a * pow(dx, overlayDepth);
		overMix *= 1.0 - dx;
	}
	fColor.rgb = mix(fColor.rgb, colAcc.rgb, overMix);
	fColor.a = max(fColor.a, colAcc.a);
}`,$C=`#version 300 es
#line 215
#define MAX_CLIP_PLANES 6
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform vec4 clipPlanes[MAX_CLIP_PLANES];
uniform highp sampler3D volume, overlay;
uniform highp sampler3D paqd;
uniform vec4 paqdUniforms;
uniform float overlays;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform vec2 renderDrawAmbientOcclusionXY;
in vec3 vColor;
out vec4 fColor;
`+ho+`
	void main() {
	vec3 start = vColor;
	gl_FragDepth = 1.0;
	vec3 backPosition = GetBackPosition(start);
	vec3 dir = normalize(backPosition - start);
	//clipVolumeStart(start, backPosition);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) { //length limit for parallel rays
		fColor = vec4(0.0,0.0,0.0,0.0);
		return;
	}
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	vec4 deltaDir = vec4(dir.xyz * stepSize, stepSize);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	vec4 colAcc = vec4(0.0,0.0,0.0,0.0);
	vec4 firstHit = vec4(0.0,0.0,0.0,2.0 * len);
	const float earlyTermination = 0.95;
	float backNearest = len; //assume no hit
	float dis = len;
	//check if axial plane is closest
	vec4 aClip = vec4(0.0, 0.0, 1.0, (1.0- clipPlane.z) - 0.5);
	float adis = (-aClip.a - dot(aClip.xyz, samplePos.xyz-0.5)) / dot(dir,aClip.xyz);
	if (adis > 0.0)
		dis = min(adis, dis);
	//check of coronal plane is closest
	vec4 cClip = vec4(0.0, 1.0, 0.0, (1.0- clipPlane.y) - 0.5);
	float cdis = (-cClip.a - dot(cClip.xyz, samplePos.xyz-0.5)) / dot(dir,cClip.xyz);
	if (cdis > 0.0)
		dis = min(cdis, dis);
	//check if coronal slice is closest
	vec4 sClip = vec4(1.0, 0.0, 0.0, (1.0- clipPlane.x) - 0.5);
	float sdis = (-sClip.a - dot(sClip.xyz, samplePos.xyz-0.5)) / dot(dir,sClip.xyz);
	if (sdis > 0.0)
		dis = min(sdis, dis);
	if ((dis > 0.0) && (dis < len)) {
		samplePos = vec4(samplePos.xyz+dir * dis, dis);
		colAcc = texture(volume, samplePos.xyz);
		colAcc.a = earlyTermination;
		firstHit = samplePos;
		backNearest = min(backNearest, samplePos.a);
	}
	//the following are only used by overlays
	vec4 clipPlaneColorX = clipPlaneColor;
	bool isColorPlaneInVolume = false;
	bool isClip = false;
	bool isClipCutaway = false;
	vec2 sampleRange;
	// vec4 clipPos = applyClip(dir, samplePos, len, isClip);
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	if (samplePos.a < 0.0)
		vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	float ran = fract(sin(gl_FragCoord.x * 12.9898 + gl_FragCoord.y * 78.233) * 43758.5453);
	samplePos += deltaDir * ran; //jitter ray
`+zc,eS=`#version 300 es
#line 215
#define MAX_CLIP_PLANES 6
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform vec4 clipPlanes[MAX_CLIP_PLANES];
uniform bool isClipCutaway;
uniform highp sampler3D volume, overlay;
uniform highp sampler3D paqd;
uniform vec4 paqdUniforms;
uniform float overlays;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform vec2 renderDrawAmbientOcclusionXY;
in vec3 vColor;
out vec4 fColor;
`+ho+$d+`while (samplePos.a <= len) {
		if (skipSample(samplePos.a, sampleRange) ^^ isClipCutaway) {
			samplePos += deltaDirFast;
			continue;
		}
		vec4 colorSample = texture(volume, samplePos.xyz);
		samplePos += deltaDir; //advance ray position
		if (colorSample.a >= 0.01) {
			if (firstHit.a > len)
				firstHit = samplePos;
			// backNearest = min(backNearest, samplePos.a);
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			if ( colAcc.a > earlyTermination )
				break;
		}
	}
	if (firstHit.a < len)
		backNearest = firstHit.a;
`+zc,to=192,dv=`#version 300 es
#line 215
#define MAX_CLIP_PLANES 6
precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 texVox;
uniform int backgroundMasksOverlays;
uniform vec3 volScale;
uniform vec4 clipPlane;
uniform vec4 clipPlanes[MAX_CLIP_PLANES];
uniform bool isClipCutaway;
uniform highp sampler3D volume, overlay;
uniform highp sampler3D paqd;
uniform vec4 paqdUniforms;
uniform float overlays;
uniform float backOpacity;
uniform mat4 mvpMtx;
uniform mat4 normMtx;
uniform mat4 matRAS;
uniform vec4 clipPlaneColor;
uniform float renderOverlayBlend;
uniform highp sampler3D drawing, gradient;
uniform highp sampler2D colormap;
uniform highp sampler2D matCap;
uniform vec2 renderDrawAmbientOcclusionXY;
uniform float gradientAmount;
uniform float silhouettePower;
uniform float gradientOpacity[${to}];
in vec3 vColor;
out vec4 fColor;
`,tS=dv+ho+$d+`
	float startPos = samplePos.a;
	float clipCloseThresh = 5.0 * deltaDir.a;
	float clipClose = sampleRange.x;
	if (isClipCutaway)
		clipClose = sampleRange.y;
	if (!isClip)
		clipClose = -1.0;
	float brighten = 2.0; //modulating makes average intensity darker 0.5 * 0.5 = 0.25
	//vec4 prevGrad = vec4(0.0);
	float silhouetteThreshold = 1.0 - silhouettePower;
	while (samplePos.a <= len) {
		if (skipSample(samplePos.a, sampleRange) ^^ isClipCutaway) {
			samplePos += deltaDirFast;
			continue;
		}
		vec4 colorSample = texture(volume, samplePos.xyz);
		if (colorSample.a >= 0.0) {
			vec4 grad = texture(gradient, samplePos.xyz);
			grad.rgb = normalize(grad.rgb*2.0 - 1.0);
			//if (grad.a < prevGrad.a)
			//	grad.rgb = prevGrad.rgb;
			//prevGrad = grad;
			vec3 n = mat3(normMtx) * grad.rgb;
			n.y = - n.y;
			vec4 mc = vec4(texture(matCap, n.xy * 0.5 + 0.5).rgb, 1.0) * brighten;
			mc = mix(vec4(1.0), mc, gradientAmount);
			if (abs(samplePos.a - clipClose) > clipCloseThresh)
				colorSample.rgb *= mc.rgb;
			if (firstHit.a > len)
				firstHit = samplePos;
			backNearest = min(backNearest, samplePos.a);
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			int gradIdx = int(grad.a * ${to}.0);
			colorSample.a *= gradientOpacity[gradIdx];
			float lightNormDot = dot(grad.rgb, rayDir);
			// n.b. "lightNormDor" is cosTheta, "silhouettePower" is Fresnel effect exponent
 			colorSample.a *= pow(1.0 - abs(lightNormDot), silhouettePower);
 			float viewAlign = abs(lightNormDot); // 0 = perpendicular, 1 = aligned
 			// linearly map silhouettePower (0..1) to a threshold range, e.g., [1.0, 0.0]
 			// Cull voxels that are too aligned with the view direction
 			if (viewAlign > silhouetteThreshold)
 				colorSample.a = 0.0;
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			if ( colAcc.a > earlyTermination )
				break;
		}
		samplePos += deltaDir; //advance ray position
	}
`+zc,nS=dv+ho+$d+`
	float startPos = samplePos.a;
	//float clipClose = clipPos.a + 3.0 * deltaDir.a; //do not apply gradients near clip plane
	float brighten = 2.0; //modulating makes average intensity darker 0.5 * 0.5 = 0.25
	//vec4 prevGrad = vec4(0.0);
	while (samplePos.a <= len) {
		vec4 colorSample = texture(volume, samplePos.xyz);
		if (colorSample.a >= 0.0) {
			vec4 grad = texture(gradient, samplePos.xyz);
			colorSample.rgb = abs(normalize(grad.rgb*2.0 - 1.0));
			if (firstHit.a > len)
				firstHit = samplePos;
			backNearest = min(backNearest, samplePos.a);
			colorSample.a = 1.0-pow((1.0 - colorSample.a), opacityCorrection);
			colorSample.rgb *= colorSample.a;
			colAcc= (1.0 - colAcc.a) * colorSample + colAcc;
			if ( colAcc.a > earlyTermination )
				break;
		}
		samplePos += deltaDir; //advance ray position
	}
`+zc,dc=`#version 300 es
#line 392
layout(location=0) in vec3 pos;
uniform int axCorSag;
uniform mat4 mvpMtx;
uniform mat4 frac2mm;
uniform float slice;
out vec3 texPos;
void main(void) {
	texPos = vec3(pos.x, pos.y, slice);
	if (axCorSag > 1)
		texPos = vec3(slice, pos.x, pos.y);
	else if (axCorSag > 0)
		texPos = vec3(pos.x, slice, pos.y);
	vec4 mm = frac2mm * vec4(texPos, 1.0);
	gl_Position = mvpMtx * mm;
}`,mv=`#version 300 es
#line 411
precision highp int;
precision highp float;
uniform highp sampler3D volume, overlay;
uniform highp sampler3D paqd;
uniform vec4 paqdUniforms;
uniform int backgroundMasksOverlays;
uniform float overlayOutlineWidth;
uniform float overlayAlphaShader;
uniform int axCorSag;
uniform float overlays;
uniform float opacity;
uniform float drawOpacity;
uniform float drawRimOpacity;
uniform bool isAlphaClipDark;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
in vec3 texPos;
out vec4 color;
`+Jd+`
vec4 blendRGBA(vec4 foreground, vec4 background) {
  float alphaOut = foreground.a + background.a * (1.0 - foreground.a);
  vec3 colorOut = (foreground.rgb * foreground.a + background.rgb * background.a * (1.0 - foreground.a)) / alphaOut;
  return vec4(colorOut, alphaOut);
}
float paqdEaseAlpha(float alpha) {
  // t are alpha transitions
  // <t0 -> y0
  // t0..t1  -> mix between y0..y1
  // t1..t2 -> mix between y1..y2
  // >t2 -> y2
  float t0 = paqdUniforms[0]; // 0.3;
  float t1 = 0.5 * (paqdUniforms[0] + paqdUniforms[1]); // 0.4;
  float t2 = paqdUniforms[1]; // 0.9;
  float y0 = 0.0;
  float y1 = abs(paqdUniforms[2]); // 1.0;
  float y2 = abs(paqdUniforms[3]); //0.25;
  if (alpha <= t0) {
    return y0;
  } else if (alpha <= t1) {
    return mix(y0, y1, (alpha - t0) / (t1 - t0)); // LERP 0.0  1.0
  } else if (alpha <= t2) {
    return mix(y1, y2, (alpha - t1) / (t2 - t1)); // LERP 1.0  0.2
  } else {
    return y2;
  }
}

void main() {
	//color = vec4(1.0, 0.0, 1.0, 1.0);return;
	vec4 background = texture(volume, texPos);
	color = vec4(background.rgb, opacity);
	if ((isAlphaClipDark) && (background.a == 0.0)) color.a = 0.0; //FSLeyes clipping range
	vec4 ocolor = vec4(0.0);
	float overlayAlpha = overlayAlphaShader;
	if (overlays > 0.0) {
		ocolor = texture(overlay, texPos);
		//dFdx for "boxing" issue 435 has aliasing on some implementations (coarse vs fine)
		//however, this only identifies 50% of the edges due to aliasing effects
		// http://www.aclockworkberry.com/shader-derivative-functions/
		// https://bgolus.medium.com/distinctive-derivative-differences-cce38d36797b
		//if ((ocolor.a >= 1.0) && ((dFdx(ocolor.a) != 0.0) || (dFdy(ocolor.a) != 0.0)  ))
		//	ocolor.rbg = vec3(0.0, 0.0, 0.0);
		bool isOutlineBelowNotAboveThreshold = true;
		if (isOutlineBelowNotAboveThreshold) {
			if ((overlayOutlineWidth > 0.0) && (ocolor.a < 1.0)) { //check voxel neighbors for edge
				vec3 vx = (overlayOutlineWidth ) / vec3(textureSize(overlay, 0));
				//6 voxel neighbors that share a face
				vec3 vxR = vec3(texPos.x+vx.x, texPos.y, texPos.z);
				vec3 vxL = vec3(texPos.x-vx.x, texPos.y, texPos.z);
				vec3 vxA = vec3(texPos.x, texPos.y+vx.y, texPos.z);
				vec3 vxP = vec3(texPos.x, texPos.y-vx.y, texPos.z);
				vec3 vxS = vec3(texPos.x, texPos.y, texPos.z+vx.z);
				vec3 vxI = vec3(texPos.x, texPos.y, texPos.z-vx.z);
				float a = 0.0;
				if (axCorSag != 2) {
					a = max(a, texture(overlay, vxR).a);
					a = max(a, texture(overlay, vxL).a);
				}
				if (axCorSag != 1) {
					a = max(a, texture(overlay, vxA).a);
					a = max(a, texture(overlay, vxP).a);
				}
				if (axCorSag != 0) {
					a = max(a, texture(overlay, vxS).a);
					a = max(a, texture(overlay, vxI).a);
				}
				bool isCheckCorners = true;
				if (isCheckCorners) {
					//12 voxel neighbors that share an edge
					vec3 vxRA = vec3(texPos.x+vx.x, texPos.y+vx.y, texPos.z);
					vec3 vxLA = vec3(texPos.x-vx.x, texPos.y+vx.y, texPos.z);
					vec3 vxRP = vec3(texPos.x+vx.x, texPos.y-vx.y, texPos.z);
					vec3 vxLP = vec3(texPos.x-vx.x, texPos.y-vx.y, texPos.z);
					vec3 vxRS = vec3(texPos.x+vx.x, texPos.y, texPos.z+vx.z);
					vec3 vxLS = vec3(texPos.x-vx.x, texPos.y, texPos.z+vx.z);
					vec3 vxRI = vec3(texPos.x+vx.x, texPos.y, texPos.z-vx.z);
					vec3 vxLI = vec3(texPos.x-vx.x, texPos.y, texPos.z-vx.z);
					vec3 vxAS = vec3(texPos.x, texPos.y+vx.y, texPos.z+vx.z);
					vec3 vxPS = vec3(texPos.x, texPos.y-vx.y, texPos.z+vx.z);
					vec3 vxAI = vec3(texPos.x, texPos.y+vx.y, texPos.z-vx.z);
					vec3 vxPI = vec3(texPos.x, texPos.y-vx.y, texPos.z-vx.z);

					if (axCorSag == 0) { //axial corners
						a = max(a, texture(overlay, vxRA).a);
						a = max(a, texture(overlay, vxLA).a);
						a = max(a, texture(overlay, vxRP).a);
						a = max(a, texture(overlay, vxLP).a);
					}
					if (axCorSag == 1) { //coronal corners
						a = max(a, texture(overlay, vxRS).a);
						a = max(a, texture(overlay, vxLS).a);
						a = max(a, texture(overlay, vxRI).a);
						a = max(a, texture(overlay, vxLI).a);
					}
					if (axCorSag == 2) { //sagittal corners
						a = max(a, texture(overlay, vxAS).a);
						a = max(a, texture(overlay, vxPS).a);
						a = max(a, texture(overlay, vxAI).a);
						a = max(a, texture(overlay, vxPI).a);
					}
				}
				if (a >= 1.0) {
					ocolor = vec4(0.0, 0.0, 0.0, 1.0);
					overlayAlpha = 1.0;
				}
			}

		} else {
			if ((overlayOutlineWidth > 0.0) && (ocolor.a >= 1.0)) { //check voxel neighbors for edge
				vec3 vx = (overlayOutlineWidth ) / vec3(textureSize(overlay, 0));
				vec3 vxR = vec3(texPos.x+vx.x, texPos.y, texPos.z);
				vec3 vxL = vec3(texPos.x-vx.x, texPos.y, texPos.z);
				vec3 vxA = vec3(texPos.x, texPos.y+vx.y, texPos.z);
				vec3 vxP = vec3(texPos.x, texPos.y-vx.y, texPos.z);
				vec3 vxS = vec3(texPos.x, texPos.y, texPos.z+vx.z);
				vec3 vxI = vec3(texPos.x, texPos.y, texPos.z-vx.z);
				float a = 1.0;
				if (axCorSag != 2) {
					a = min(a, texture(overlay, vxR).a);
					a = min(a, texture(overlay, vxL).a);
				}
				if (axCorSag != 1) {
					a = min(a, texture(overlay, vxA).a);
					a = min(a, texture(overlay, vxP).a);
				}
				if (axCorSag != 0) {
					a = min(a, texture(overlay, vxS).a);
					a = min(a, texture(overlay, vxI).a);
				}
				if (a < 1.0) {
					ocolor = vec4(0.0, 0.0, 0.0, 1.0);
					overlayAlpha = 1.0;
				}
			}
		} //outline above threshold
	}

`,iS=`#version 300 es
#line 411
precision highp int;
precision highp float;
uniform highp sampler2D volume, overlay;
uniform int backgroundMasksOverlays;
uniform float overlayOutlineWidth;
uniform float overlayAlphaShader;
uniform int axCorSag;
uniform float overlays;
uniform float opacity;
uniform float drawOpacity;
uniform bool isAlphaClipDark;
uniform highp sampler2D drawing;
uniform highp sampler2D colormap;
in vec3 texPos;
out vec4 color;`+Jd+`void main() {
	//color = vec4(1.0, 0.0, 1.0, 1.0);return;
	vec4 background = texture(volume, texPos.xy);
	color = vec4(background.rgb, opacity);
	if ((isAlphaClipDark) && (background.a == 0.0)) color.a = 0.0; //FSLeyes clipping range
	vec4 dcolor = drawColor(texture(drawing, texPos.xy).r, drawOpacity);
	if (dcolor.a > 0.0) {
		color.rgb = mix(color.rgb, dcolor.rgb, dcolor.a);
		color.a = max(drawOpacity, color.a);
	}
}`,gv=`	ocolor.a *= overlayAlpha;
	float drawV = texture(drawing, texPos).r;
	vec4 dcolor = drawColor(drawV, drawOpacity);
	if (dcolor.a > 0.0) {
		if (drawRimOpacity >= 0.0) {
			vec3 vx = 1.0 / vec3(textureSize(drawing, 0));
			//6 voxel neighbors that share a face
			vec3 offsetX = dFdx(texPos); // left-right spacing
			vec3 offsetY = dFdy(texPos); // up-down spacing
			float L = texture(drawing, texPos - offsetX).r;
			float R = texture(drawing, texPos + offsetX).r;
			float T = texture(drawing, texPos - offsetY).r;
			float B = texture(drawing, texPos + offsetY).r;
			if (L != drawV || R != drawV || T != drawV || B != drawV)
				dcolor.a = drawRimOpacity;
		}
		color.rgb = mix(color.rgb, dcolor.rgb, dcolor.a);
		color.a = max(drawOpacity, color.a);
	}
	vec4 pcolor = texture(paqd, texPos);
	if (pcolor.a > 0.0) {
		pcolor.a = paqdEaseAlpha(pcolor.a);
		if (pcolor.a > 0.0) {
			if (paqdUniforms[3] < 0.0)
				ocolor = blendRGBA(pcolor, ocolor);
			else
				ocolor = blendRGBA(ocolor, pcolor);
		}
	}
	if ((backgroundMasksOverlays > 0) && (background.a == 0.0))
		return;
	float a = color.a + ocolor.a * (1.0 - color.a); // premultiplied alpha
	if (a == 0.0) return;
	color.rgb = mix(color.rgb, ocolor.rgb, ocolor.a / a);
	color.a = a;
}`,rS=mv+gv,aS=mv+`	if (ocolor.a > 0.0) {
		//https://gamedev.stackexchange.com/questions/102889/is-it-possible-to-convert-vec4-to-int-in-glsl-using-opengl-es
		uint alpha = uint(ocolor.a * 255.0);
		vec3 xyzFlip = vec3(float((uint(1) & alpha) > uint(0)), float((uint(2) & alpha) > uint(0)), float((uint(4) & alpha) > uint(0)));
		//convert from 0 and 1 to -1 and 1
		xyzFlip = (xyzFlip * 2.0) - 1.0;
		//https://math.stackexchange.com/questions/1905533/find-perpendicular-distance-from-point-to-line-in-3d
		//v1 principle direction of tensor for this voxel
		vec3 v1 = ocolor.rgb;
		//flips encode polarity to convert from 0..1 to -1..1 (27 bits vs 24 bit precision)
		v1 = normalize( v1 * xyzFlip);
		vec3 vxl = fract(texPos * vec3(textureSize(volume, 0))) - 0.5;
		//vxl coordinates now -0.5..+0.5 so 0,0,0 is origin
		vxl.x = -vxl.x;
		float t = dot(vxl,v1);
		vec3 P = t * v1;
		float dx = length(P-vxl);
		ocolor.a = 1.0 - smoothstep(0.2,0.25, dx);
		//if modulation was applied, use that to scale alpha not color:
		ocolor.a *= length(ocolor.rgb);
		ocolor.rgb = normalize(ocolor.rgb);
		//compute distance one half voxel closer to viewer:
		float pan = 0.5;
		if (axCorSag == 0)
			vxl.z -= pan;
		if (axCorSag == 1)
			vxl.y -= pan;
		if (axCorSag == 2)
			vxl.x += pan;
		t = dot(vxl,v1);
		P = t * v1;
		float dx2 = length(P-vxl);
		ocolor.rgb += (dx2-dx-(0.5 * pan)) * 1.0;
	}
`+gv,Fh=`#version 300 es
#line 480
precision highp int;
precision highp float;
uniform vec4 lineColor;
out vec4 color;
void main() {
	color = lineColor;
}`,sS=`#version 300 es
#line 723
precision highp int;
precision highp float;

uniform vec4 lineColor;
uniform vec4 leftTopWidthHeight;
uniform float thickness; // line thickness in pixels
uniform vec2 canvasWidthHeight;

out vec4 color;

void main() {
    // fragment position in screen coordinates
    vec2 fragCoord = gl_FragCoord.xy;

    // canvas height
    float canvasHeight = canvasWidthHeight.y;

    // 'top' and 'bottom' to match gl_FragCoord.y coordinate system
    float top = canvasHeight - leftTopWidthHeight.y;
    float bottom = top - leftTopWidthHeight.w;

    // left and right edges
    float left = leftTopWidthHeight.x;
    float right = left + leftTopWidthHeight.z;

    bool withinLeft = fragCoord.x >= left && fragCoord.x <= left + thickness;
    bool withinRight = fragCoord.x <= right && fragCoord.x >= right - thickness;
    bool withinTop = fragCoord.y <= top && fragCoord.y >= top - thickness;
    bool withinBottom = fragCoord.y >= bottom && fragCoord.y <= bottom + thickness;

    bool isOutline = withinLeft || withinRight || withinTop || withinBottom;

    if (isOutline) {
        color = lineColor;
    } else {
        discard; 
    }
}`,oS=`#version 300 es
#line 490
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
out vec2 vColor;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vColor = pos.xy;
}`,lS=`#version 300 es
#line 506
precision highp int;
precision highp float;
uniform highp sampler2D colormap;
uniform float layer;
in vec2 vColor;
out vec4 color;
void main() {
	float nlayer = float(textureSize(colormap, 0).y);
	float fmap = (0.5 + layer) / nlayer;
	color = vec4(texture(colormap, vec2(vColor.x, fmap)).rgb, 1.0);
}`,gp=`#version 300 es
#line 520
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
}`,cS=`#version 300 es
#line 534
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform float thickness;
uniform vec4 startXYendXY;
void main(void) {
	vec2 posXY = mix(startXYendXY.xy, startXYendXY.zw, pos.x);
	vec2 dir = normalize(startXYendXY.xy - startXYendXY.zw);
	posXY += vec2(-dir.y, dir.x) * thickness * (pos.y - 0.5);
	posXY.x = (posXY.x) / canvasWidthHeight.x; //0..1
	posXY.y = 1.0 - (posXY.y / canvasWidthHeight.y); //1..0
	gl_Position = vec4((posXY * 2.0) - 1.0, 0.0, 1.0);
}`,uS=`#version 300 es
#line 534
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform float thickness;
uniform vec2 startXY;
uniform vec3 endXYZ; // transformed XYZ point
void main(void) {	
	vec2 posXY = mix(startXY.xy, endXYZ.xy, pos.x);
	vec2 startDiff = endXYZ.xy - startXY.xy;
	float startDistance = length(startDiff);
	vec2 diff = endXYZ.xy - posXY;
	float currentDistance = length(diff);
	vec2 dir = normalize(startXY.xy - endXYZ.xy);
	posXY += vec2(-dir.y, dir.x) * thickness * (pos.y - 0.5);
	posXY.x = (posXY.x) / canvasWidthHeight.x; //0..1
	posXY.y = 1.0 - (posXY.y / canvasWidthHeight.y); //1..0	
	float z = endXYZ.z * ( 1.0 - abs(currentDistance/startDistance)); 
	gl_Position = vec4((posXY * 2.0) - 1.0, z, 1.0);
}`,fS=`#version 300 es
#line 549
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = vec2(pos.x, 1.0 - pos.y);
}`,hS=`#version 300 es
#line 565
precision highp int;
precision highp float;
uniform highp sampler2D bmpTexture;
in vec2 vUV;
out vec4 color;
void main() {
	color = texture(bmpTexture, vUV);
}`,dS=`#version 300 es
#line 576
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
uniform vec4 uvLeftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = vec2(uvLeftTopWidthHeight.x + (pos.x * uvLeftTopWidthHeight.z), uvLeftTopWidthHeight.y  + ((1.0 - pos.y) * uvLeftTopWidthHeight.w) );
}`,mS=`#version 300 es
#line 593
precision highp int;
precision highp float;
uniform highp sampler2D fontTexture;
uniform vec4 fontColor;
uniform float screenPxRange;
in vec2 vUV;
out vec4 color;
float median(float r, float g, float b) {
	return max(min(r, g), min(max(r, g), b));
}
void main() {
	vec3 msd = texture(fontTexture, vUV).rgb;
	float sd = median(msd.r, msd.g, msd.b);
	float screenPxDistance = screenPxRange*(sd - 0.5);
	float opacity = clamp(screenPxDistance + 0.5, 0.0, 1.0);
	color = vec4(fontColor.rgb , fontColor.a * opacity);
}`,gS=`#version 300 es
layout(location=0) in vec3 pos;
uniform vec2 canvasWidthHeight;
uniform vec4 leftTopWidthHeight;
uniform vec4 uvLeftTopWidthHeight;
out vec2 vUV;
void main(void) {
	//convert pixel x,y space 1..canvasWidth,1..canvasHeight to WebGL 1..-1,-1..1
	vec2 frac;
	frac.x = (leftTopWidthHeight.x + (pos.x * leftTopWidthHeight.z)) / canvasWidthHeight.x; //0..1
	frac.y = 1.0 - ((leftTopWidthHeight.y + ((1.0 - pos.y) * leftTopWidthHeight.w)) / canvasWidthHeight.y); //1..0
	frac = (frac * 2.0) - 1.0;
	gl_Position = vec4(frac, 0.0, 1.0);
	vUV = pos.xy;
}`,pS=`#version 300 es
precision highp int;
precision highp float;
uniform vec4 circleColor;
uniform float fillPercent;
in vec2 vUV;
out vec4 color;
void main() {
	/* Check if the pixel is inside the circle
		 and color it with a gradient. Otherwise, color it 
		 transparent   */
	float distance = length(vUV-vec2(0.5,0.5));
	if ( distance < 0.5 && distance >= (1.0 - fillPercent) / 2.0){
			color = vec4(circleColor.r,circleColor.g,circleColor.b,circleColor.a) ;			
	}else{
			color = vec4(0.0,0.0,0.0,0.0);
	}
}
`,Cr=`#version 300 es
#line 613
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	gl_Position = vec4( (vPos.xy-vec2(0.5,0.5)) * 2.0, 0.0, 1.0);
}`,Gl=`#version 300 es
uniform highp usampler3D intensityVol;
`,pp=`#version 300 es
uniform highp isampler3D intensityVol;
`,AS=`#version 300 es
uniform highp sampler3D intensityVol;
`,Ap=`#line 1042
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform bool isAdditiveBlend;
uniform float coordZ;
uniform float layer;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform float opacity;
uniform uint activeIndex;
uniform vec4 xyzaFrac;
uniform mat4 mtx;
float textureWidth;
float nlayer;
float layerY;

vec4 scalar2color(uint idx) {
	float fx = (float(idx) + 0.5) / textureWidth;
	vec4 clr = texture(colormap, vec2(fx, layerY)).rgba;
	if (clr.a > 0.0)
		clr.a = 1.0;
	clr.a *= opacity;
	return clr;
}
void main(void) {
	vec4 vx = vec4(TexCoord.x, TexCoord.y, coordZ, 1.0) * mtx;
	uint idx = uint(texture(intensityVol, vx.xyz).r);
	if (idx == uint(0)) {
		if (layer < 1.0) {
			FragColor = vec4(0.0, 0.0, 0.0, 0.0);
			return;
		}
		FragColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
		return;
	}
	textureWidth = float(textureSize(colormap, 0).x);
	nlayer = float(textureSize(colormap, 0).y);
	layerY = ((2.0 * layer) + 1.5) / nlayer;
	//idx = ((idx - uint(1)) % uint(100))+uint(1);
	FragColor = scalar2color(idx);
	bool isBorder = false;
	vx = vec4(TexCoord.x+xyzaFrac.x, TexCoord.y, coordZ, 1.0) * mtx;
	uint R = uint(texture(intensityVol, vx.xyz).r);
	vx = vec4(TexCoord.x-xyzaFrac.x, TexCoord.y, coordZ, 1.0) * mtx;
	uint L = uint(texture(intensityVol, vx.xyz).r);
	vx = vec4(TexCoord.x, TexCoord.y+xyzaFrac.y, coordZ, 1.0) * mtx;
	uint A = uint(texture(intensityVol, vx.xyz).r);
	vx = vec4(TexCoord.x, TexCoord.y-xyzaFrac.y, coordZ, 1.0) * mtx;
	uint P = uint(texture(intensityVol, vx.xyz).r);
	vx = vec4(TexCoord.x, TexCoord.y, coordZ+xyzaFrac.z, 1.0) * mtx;
	uint S = uint(texture(intensityVol, vx.xyz).r);
	vx = vec4(TexCoord.x, TexCoord.y, coordZ-xyzaFrac.z, 1.0) * mtx;
	uint I = uint(texture(intensityVol, vx.xyz).r);
	vec4 centerColor = FragColor;
	FragColor.a += scalar2color(R).a;
	FragColor.a += scalar2color(L).a;
	FragColor.a += scalar2color(A).a;
	FragColor.a += scalar2color(P).a;
	FragColor.a += scalar2color(S).a;
	FragColor.a += scalar2color(I).a;
	FragColor.a /= 7.0;
	if ((!isBorder) &&(idx == activeIndex)) {
		if (centerColor.a > 0.5)
			FragColor.a *= 0.4;
		else
			FragColor.a =0.8;
	}
	if (xyzaFrac.a != 0.0) { //outline
		if ((idx != R) || (idx != L) || (idx != A) || (idx != P) || (idx != S) || (idx != I)) {
			isBorder = true;
			if (xyzaFrac.a > 0.0)
				FragColor.a = xyzaFrac.a;
			else
				FragColor = vec4(0.0, 0.0, 0.0, 1.0);
		}
	}
	if (layer < 1.0) return;
		vec4 prevColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
		// https://en.wikipedia.org/wiki/Alpha_compositing
		float aout = FragColor.a + (1.0 - FragColor.a) * prevColor.a;
		if (aout <= 0.0) return;
		if (isAdditiveBlend)
			FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a)) / aout;
		else
			FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a * (1.0 - FragColor.a))) / aout;
		FragColor.a = aout;
}`,Bh=`#line 691
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform float scl_slope;
uniform float scl_inter;
uniform float cal_max;
uniform float cal_min;
uniform float cal_maxNeg;
uniform float cal_minNeg;
uniform bool isAlphaThreshold;
uniform bool isColorbarFromZero;
uniform bool isAdditiveBlend;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform int modulation;
uniform highp sampler3D modulationVol;
uniform float opacity;
uniform mat4 mtx;
void main(void) {
	vec4 vx = vec4(TexCoord.xy, coordZ, 1.0) * mtx;
	if ((vx.x < 0.0) || (vx.x > 1.0) || (vx.y < 0.0) || (vx.y > 1.0) || (vx.z < 0.0) || (vx.z > 1.0)) {
		//set transparent if out of range
		//https://webglfundamentals.org/webgl/webgl-3d-textures-repeat-clamp.html
		FragColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
		return;
	}
	float f = (scl_slope * float(texture(intensityVol, vx.xyz).r)) + scl_inter;
	float mn = cal_min;
	float mx = cal_max;
	if ((isAlphaThreshold) || (isColorbarFromZero))
		mn = 0.0;
	float r = max(0.00001, abs(mx - mn));
	mn = min(mn, mx);
	float txl = mix(0.0, 1.0, (f - mn) / r);
	if (f > mn) { //issue1139: survives threshold, so round up to opaque voxel
		txl = max(txl, 2.0/256.0);
	}
	//https://stackoverflow.com/questions/5879403/opengl-texture-coordinates-in-pixel-space
	float nlayer = float(textureSize(colormap, 0).y);
	//each volume has two color maps:
	// (layer*2) = negative and (layer * 2) + 1 = positive
	float y = ((2.0 * layer) + 1.5)/nlayer;
	FragColor = texture(colormap, vec2(txl, y)).rgba;
	//negative colors
	mn = cal_minNeg;
	mx = cal_maxNeg;
	if ((isAlphaThreshold) || (isColorbarFromZero))
		mx = 0.0;
	//if ((!isnan(cal_minNeg)) && ( f < mx)) {
	if ((cal_minNeg < cal_maxNeg) && ( f < mx)) {
		r = max(0.00001, abs(mx - mn));
		mn = min(mn, mx);
		txl = 1.0 - mix(0.0, 1.0, (f - mn) / r);
		//issue1139: survives threshold, so round up to opaque voxel
		txl = max(txl, 2.0/256.0);
		y = ((2.0 * layer) + 0.5)/nlayer;
		FragColor = texture(colormap, vec2(txl, y));
	}
	if (layer > 0.7)
		FragColor.a = step(0.00001, FragColor.a);
	//if (modulation > 10)
	//	FragColor.a *= texture(modulationVol, vx.xyz).r;
	//	FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	if (isAlphaThreshold) {
		if ((cal_minNeg != cal_maxNeg) && ( f < 0.0) && (f > cal_maxNeg))
			FragColor.a = pow(-f / -cal_maxNeg, 2.0);
		else if ((f > 0.0) && (cal_min > 0.0))
			FragColor.a *= pow(f / cal_min, 2.0); //issue435:  A = (V/X)**2
		//FragColor.g = 0.0;
	} else if (isColorbarFromZero) {
		if ((cal_minNeg != cal_maxNeg) && ( f < 0.0) && (f > cal_maxNeg))
			FragColor.a = 0.0;
		else if ((f > 0.0) && (cal_min > 0.0) && (f < cal_min))
			FragColor.a *= 0.0;

	}
	if (modulation == 1) {
		FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	} else if (modulation == 2) {
		FragColor.a = texture(modulationVol, vx.xyz).r;
	}
	FragColor.a *= opacity;
	if (layer < 1.0) return;
	vec4 prevColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
	// https://en.wikipedia.org/wiki/Alpha_compositing
	float aout = FragColor.a + (1.0 - FragColor.a) * prevColor.a;
	if (aout <= 0.0) return;
	if (isAdditiveBlend)
		FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a)) / aout;
	else
		FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a * (1.0 - FragColor.a))) / aout;
	FragColor.a = aout;
}`,vS=`#line 773
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform float scl_slope;
uniform float scl_inter;
uniform float cal_max;
uniform float cal_min;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform float opacity;
uniform mat4 mtx;
uniform bool hasAlpha;
uniform int modulation;
uniform highp sampler3D modulationVol;
float textureWidth;
float nlayer;
float layerY;

vec4 scalar2color(uint idx) {
	float fx = (float(idx) + 0.5) / textureWidth;
	vec4 clr = texture(colormap, vec2(fx, layerY)).rgba;
	if (clr.a > 0.0)
		clr.a = 1.0;
	clr.a *= opacity;
	return clr;
}

vec4 paqd2color(uvec4 rgba) {
  // paqd r: max prob index, g: 2nd index, b: max prob a: 2nd prob
  float prob1 = float(rgba.b)/255.0;
  float prob2 = float(rgba.a)/255.0;
  vec4 clr1 = scalar2color(rgba.r);
  vec4 clr2 = scalar2color(rgba.g);
  float total = prob1 + prob2;
  vec4 clr = vec4(clr1.rgb, total);
  // vec4 clr = vec4(clr1.rgb, prob1);
  if (total > 0.0) {
    clr.rgb = mix(clr2.rgb, clr1.rgb, prob1 / total);
  }
  return clr;
}
void main(void) {
	vec4 vx = vec4(TexCoord.xy, coordZ, 1.0) * mtx;
	ivec3 voxelCoord = ivec3(vx.xyz * vec3(textureSize(intensityVol, 0)));
	uvec4 rgba = texelFetch(intensityVol, voxelCoord, 0);
	FragColor = vec4(0.0, 0.0, 0.0, 0.0);
	if (rgba.r > uint(0)) {
		textureWidth = float(textureSize(colormap, 0).x);
		nlayer = float(textureSize(colormap, 0).y);
		layerY = ((2.0 * layer) + 1.5) / nlayer;
		FragColor = paqd2color(rgba);
		return;
	}
	// if (layer > 2.0) return;
	// FragColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
}`,xS=`#line 773
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float layer;
uniform float scl_slope;
uniform float scl_inter;
uniform float cal_max;
uniform float cal_min;
uniform highp sampler2D colormap;
uniform lowp sampler3D blend3D;
uniform float opacity;
uniform mat4 mtx;
uniform bool hasAlpha;
uniform int modulation;
uniform highp sampler3D modulationVol;
void main(void) {
	vec4 vx = vec4(TexCoord.xy, coordZ, 1.0) * mtx;
	uvec4 aColor = texture(intensityVol, vx.xyz);
	FragColor = vec4(float(aColor.r) / 255.0, float(aColor.g) / 255.0, float(aColor.b) / 255.0, float(aColor.a) / 255.0);
	if (modulation == 1)
		FragColor.rgb *= texture(modulationVol, vx.xyz).r;
	if (!hasAlpha) {
		FragColor.a = (FragColor.r * 0.21 + FragColor.g * 0.72 + FragColor.b * 0.07);
		//next line: we could binarize alpha, but see rendering of visible human
		//FragColor.a = step(0.01, FragColor.a);
	}
	if (modulation == 2)
		FragColor.a = texture(modulationVol, vx.xyz).r;
	FragColor.a *= opacity;
	if (layer < 1.0) return;
	vec4 prevColor = texture(blend3D, vec3(TexCoord.xy, coordZ));
	// https://en.wikipedia.org/wiki/Alpha_compositing
	float aout = FragColor.a + (1.0 - FragColor.a) * prevColor.a;
	if (aout <= 0.0) return;
	FragColor.rgb = ((FragColor.rgb * FragColor.a) + (prevColor.rgb * prevColor.a * (1.0 - FragColor.a))) / aout;
	FragColor.a = aout;
}`,yS=`#version 300 es
#line 808
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	gl_Position = vec4((vPos.x - 0.5) * 2.0, (vPos.y - 0.5) * 2.0, 0.0, 1.0);
}`,wS=`#version 300 es
#line 829
	precision highp float;
	precision highp int;
	precision highp isampler3D;
	layout(location = 0) out int label;
	layout(location = 1) out int strength;
	in vec2 TexCoord;
	uniform int finalPass;
	uniform float coordZ;
	uniform lowp sampler3D in3D;
	uniform highp isampler3D backTex; // background
	uniform highp isampler3D labelTex; // label
	uniform highp isampler3D strengthTex; // strength
void main(void) {
	vec3 interpolatedTextureCoordinate = vec3(TexCoord.xy, coordZ);
	ivec3 size = textureSize(backTex, 0);
	ivec3 texelIndex = ivec3(floor(interpolatedTextureCoordinate * vec3(size)));
	int background = texelFetch(backTex, texelIndex, 0).r;
	label = texelFetch(labelTex, texelIndex, 0).r;
	strength = texelFetch(strengthTex, texelIndex, 0).r;
	for (int k = -1; k <= 1; k++) {
		for (int j = -1; j <= 1; j++) {
			for (int i = -1; i <= 1; i++) {
				if (i != 0 && j != 0 && k != 0) {
					ivec3 neighborIndex = texelIndex + ivec3(i,j,k);
					int neighborBackground = texelFetch(backTex, neighborIndex, 0).r;
					int neighborStrength = texelFetch(strengthTex, neighborIndex, 0).r;
					int strengthCost = abs(neighborBackground - background);
					int takeoverStrength = neighborStrength - strengthCost;
					if (takeoverStrength > strength) {
						strength = takeoverStrength;
						label = texelFetch(labelTex, neighborIndex, 0).r;
					}
				}
			}
		}
	}
	if (finalPass < 1)
		return;
	int ok = 1;
	ivec4 labelCount = ivec4(0,0,0,0);
	for (int k = -1; k <= 1; k++)
		for (int j = -1; j <= 1; j++)
			for (int i = -1; i <= 1; i++) {
				ivec3 neighborIndex = texelIndex + ivec3(i,j,k);
				int ilabel = texelFetch(labelTex, neighborIndex, 0).r;
				if ((ilabel < 0) || (ilabel > 3))
					ok = 0;
				else
					labelCount[ilabel]++;
			}
	if (ok != 1) {
		return;
	}
	int maxIdx = 0;
	for (int i = 1; i < 4; i++) {
		if (labelCount[i] > labelCount[maxIdx])
			maxIdx = i;
	}
	label = maxIdx;
}`,bS=`#version 300 es
layout(location=0) in vec3 pos;
uniform mat4 mvpMtx;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
}`,CS=`#version 300 es
precision highp int;
precision highp float;
uniform vec4 surfaceColor;
out vec4 color;
void main() {
	color = surfaceColor;
}`,SS=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 clr;
out vec4 vClr;
uniform mat4 mvpMtx;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vClr = clr;
}`,MS=`#version 300 es
precision highp int;
precision highp float;
in vec4 vClr;
out vec4 color;
uniform float opacity;
void main() {
	color = vec4(vClr.rgb, opacity);
}`,e0=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 norm;
layout(location=2) in vec4 clr;
uniform mat4 mvpMtx;
//uniform mat4 modelMtx;
uniform mat4 normMtx;
out vec4 vClr;
out vec3 vN;
out vec4 vP;
out vec4 vPc;
void main(void) {
	vec3 lightPosition = vec3(0.0, 0.0, -10.0);
	vP = vec4(pos, 1.0);
	vPc = mvpMtx * vec4(pos, 1.0);
	gl_Position = vPc;
	vN = normalize((normMtx * vec4(norm.xyz,1.0)).xyz);
	//vV = -vec3(modelMtx*vec4(pos,1.0));
	vClr = clr;
}`,ES=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
out vec4 color;
vec4 packFloatToVec4i(const float value) {
	const vec4 bitSh = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);
	const vec4 bitMsk = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);
	vec4 res = fract(value * bitSh);
	res -= res.xxyz * bitMsk;
	return res;
}
void main() {
	color = packFloatToVec4i(gl_FragCoord.z);
}`,DS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
float stepmix(float edge0, float edge1, float E, float x){
	float T = clamp(0.5 * (x - edge0 + E) / E, 0.0, 1.0);
	return mix(edge0, edge1, T);
}
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0);
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.5;
	float shininess = 50.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float df = max(0.0, dot(n, l));
	float sf = pow(max(dot(reflect(l, n), r), 0.0), shininess);
	const float A = 0.1;
	const float B = 0.3;
	const float C = 0.6;
	const float D = 1.0;
	float E = fwidth(df);
	if (df > A - E && df < A + E) df = stepmix(A, B, E, df);
	else if (df > B - E && df < B + E) df = stepmix(B, C, E, df);
	else if (df > C - E && df < C + E) df = stepmix(C, D, E, df);
	else if (df < A) df = 0.0;
	else if (df < B) df = B;
	else if (df < C) df = C;
	else df = D;
	E = fwidth(sf);
	if (sf > 0.5 - E && sf < 0.5 + E)
		sf = smoothstep(0.5 - E, 0.5 + E, sf);
	else
		sf = step(0.5, sf);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(df, 0.0) * vClr.rgb * diffuse;
	color.rgb = a + d + (specular * sf);
	color.a = opacity;
}`,TS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.25;
	float shininess = 10.0;
	float PenWidth = 0.6;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	float view = abs(dot(n,r)); //with respect to viewer
	if (PenWidth < view) discard;
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color.rgb = a + d + s;
	color.a = opacity;
}`,RS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	const float thresh = 0.4;
	const vec3 viewDir = vec3(0.0, 0.0, -1.0);
	vec3 n = normalize(vN);
	// use abs() for two-sided lighting, max() for one sided
	float cosTheta = abs(dot(n, viewDir));
	// float cosTheta = max(dot(n, viewDir), 0.0);
	// optional fresnel equation - adjust exponent
	// cosTheta = 1.0 - pow(1.0 - cosTheta, 2.0);
	// use step for binary edges, smoothstep for feathered edges
	// vec3 d = step(thresh, cosTheta) * vClr.rgb;
	vec3 d = smoothstep(thresh - 0.05, thresh + 0.05, cosTheta) * vClr.rgb;
	color = vec4(d, opacity);
}`,FS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
  const float edge0 = 0.1;
  const float edge1 = 0.25;
  const vec3 viewDir = vec3(0.0, 0.0, -1.0);
  vec3 n = normalize(vN);
  float cosTheta = abs(dot(n, viewDir));
  float alpha = 1.0 - smoothstep(edge0, edge1, cosTheta);
  if (alpha <= 0.0) {
    discard;
  }
  color = vec4(0.0, 0.0, 0.0, opacity * alpha);
}`,BS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float diffuse = 1.0;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 0.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = max(dot(n, l), 0.0);
	vec3 d = lightNormDot * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(d + s, opacity);
}`,US=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float diffuse = 1.4;
	vec3 l = vec3(0.0, 0.0, -1.0);
	float lightNormDot = max(dot(normalize(vN), l), 0.0);
	color = vec4(lightNormDot * vClr.rgb * diffuse, opacity);
}`,NS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float specularRGB = 0.7;
	float specularWhite = 0.3;
	float shininess = 10.0;
	float diffuse = 1.0;
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	vec3 n = normalize(vN);
	vec3 l = vec3(0.0, 0.0, -1.0);
	float lightNormDot = max(dot(n, l), 0.0);
	vec3 d3 = lightNormDot * vClr.rgb * diffuse;
	float s = pow(max(dot(reflect(l, n), r), 0.0), shininess);
	vec3 s3 = specularRGB * s * vClr.rgb;
	s *= specularWhite;
	color = vec4(d3 + s3 + s, opacity);
}`,IS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
in vec4 vPc;
out vec4 color;
void main() {
	vec3 n = normalize(vN);
	// Compute curvature
	vec3 dx = dFdx(n);
	vec3 dy = dFdy(n);
	vec3 xneg = n - dx;
	vec3 xpos = n + dx;
	vec3 yneg = n - dy;
	vec3 ypos = n + dy;
	float depth = length(vPc.xyz);
	float curv = (cross(xneg, xpos).y - cross(yneg, ypos).x) / depth;
	//at this stage 0.5 for flat, with valleys dark and ridges bright
	curv = 1.0 - (curv + 0.5);
	//clamp
	curv =  min(max(curv, 0.0), 1.0);
	// easing function
	curv = pow(curv, 0.5);
	//modulate ambient and diffuse with curvature
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.6;
	float diffuse = 0.6;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 lightPosition = vec3(0.0, 10.0, -2.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient * curv;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,VS=`#version 300 es
precision highp int;
precision highp float;
uniform vec4 sliceMM;
uniform float thickMM ;
in vec4 vClr;
in vec4 vP;  // vertex position in mm
out vec4 color;
void main() {
    const float LINE_WIDTH_PX = 4.0;   // target thickness in pixels
    //const float LINE_THRESH_MM = 1.5;   // target thickness in pixels
    const float TILT_STRENGTH = 1.0;   // >0 shrinks ribbon for oblique triangles
    // --- signed distances to each orthogonal plane (object space) ---
    vec3 d = vP.xyz - sliceMM.xyz;
    vec3 ad = abs(d);
    // --- derivatives to get pixel-consistent widths (per-axis) ---
    vec3 fd = fwidth(vP.xyz);
    //minDist is in mm not pixels
    float minDist = min(ad.x, min(ad.y, ad.z));
    if (minDist >  sliceMM.w) discard;
    // --- per-plane obliqueness: use the two in-plane components' fwidth ---
    float tiltX = length(fd.yz); // for plane with normal X
    float tiltY = length(fd.xz); // for plane with normal Y
    float tiltZ = length(fd.xy); // for plane with normal Z
    float tfX = clamp(1.0 / (1.0 + TILT_STRENGTH * tiltX), 0.0, 1.0);
    float tfY = clamp(1.0 / (1.0 + TILT_STRENGTH * tiltY), 0.0, 1.0);
    float tfZ = clamp(1.0 / (1.0 + TILT_STRENGTH * tiltZ), 0.0, 1.0);
    // --- half-widths for each plane (apply per-axis tilt factor) ---
    vec3 halfWidth;
    halfWidth.x = (LINE_WIDTH_PX * 0.5) * fd.x * tfX;
    halfWidth.y = (LINE_WIDTH_PX * 0.5) * fd.y * tfY;
    halfWidth.z = (LINE_WIDTH_PX * 0.5) * fd.z * tfZ;
    // --- smooth alpha for each plane ---
    vec3 edgeA = 1.0 - smoothstep(vec3(0.0), halfWidth, ad);
    // combine planes (max of X,Y,Z ribbons)
    float edgeAlpha = max(edgeA.x, max(edgeA.y, edgeA.z));
    if (edgeAlpha <= 1e-4) discard; // outside ribbons
    color = vec4(vClr.rgb, vClr.a * edgeAlpha);
}`,OS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,LS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
uniform sampler2D matCap;
out vec4 color;
void main() {
	vec3 n = normalize(vN);
	vec2 uv = n.xy * 0.5 + 0.5;
	uv.y = 1.0 - uv.y;
	vec3 clr = texture(matCap,uv.xy).rgb * vClr.rgb;
	color = vec4(clr, opacity);
}`,PS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	float ambient = 0.35;
	float diffuse = 0.6;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	color = vec4(a + d, opacity);
}`,zS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 up = vec3(0.0, 1.0, 0.0);
	float ax = dot(n, up) * 0.5 + 0.5;  //Shreiner et al. (2013) OpenGL Programming Guide, 8th Ed., p 388. ISBN-10: 0321773039
	vec3 upClr = vec3(1.0, 1.0, 0.95);
	vec3 downClr = vec3(0.4, 0.4, 0.6);
	vec3 a = vClr.rgb * ambient;
	a *= mix(downClr, upClr, ax);
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,kS=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
in vec3 vN;
out vec4 color;
//Spherical harmonics constants
const float C1 = 0.429043;
const float C2 = 0.511664;
const float C3 = 0.743125;
const float C4 = 0.886227;
const float C5 = 0.247708;
//Spherical harmonics coefficients
// Ramamoorthi, R., and P. Hanrahan. 2001b. "An Efficient Representation for Irradiance Environment Maps." In Proceedings of SIGGRAPH 2001, pp. 497500.
// https://github.com/eskimoblood/processingSketches/blob/master/data/shader/shinyvert.glsl
// https://github.com/eskimoblood/processingSketches/blob/master/data/shader/shinyvert.glsl
// Constants for Eucalyptus Grove lighting
const vec3 L00  = vec3( 0.3783264,  0.4260425,  0.4504587);
const vec3 L1m1 = vec3( 0.2887813,  0.3586803,  0.4147053);
const vec3 L10  = vec3( 0.0379030,  0.0295216,  0.0098567);
const vec3 L11  = vec3(-0.1033028, -0.1031690, -0.0884924);
const vec3 L2m2 = vec3(-0.0621750, -0.0554432, -0.0396779);
const vec3 L2m1 = vec3( 0.0077820, -0.0148312, -0.0471301);
const vec3 L20  = vec3(-0.0935561, -0.1254260, -0.1525629);
const vec3 L21  = vec3(-0.0572703, -0.0502192, -0.0363410);
const vec3 L22  = vec3( 0.0203348, -0.0044201, -0.0452180);
vec3 SH(vec3 vNormal) {
	vNormal = vec3(vNormal.x,vNormal.z,vNormal.y);
	vec3 diffuseColor = C1 * L22 * (vNormal.x * vNormal.x - vNormal.y * vNormal.y) +
	C3 * L20 * vNormal.z * vNormal.z +
	C4 * L00 -
	C5 * L20 +
	2.0 * C1 * L2m2 * vNormal.x * vNormal.y +
	2.0 * C1 * L21  * vNormal.x * vNormal.z +
	2.0 * C1 * L2m1 * vNormal.y * vNormal.z +
	2.0 * C2 * L11  * vNormal.x +
	2.0 * C2 * L1m1 * vNormal.y +
	2.0 * C2 * L10  * vNormal.z;
	return diffuseColor;
}
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.3;
	float diffuse = 0.6;
	float specular = 0.1;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	vec3 a = vClr.rgb * ambient;
	vec3 d = vClr.rgb * diffuse * SH(-reflect(n, vec3(l.x, l.y, -l.z)) );
	color = vec4(a + d + s, opacity);
}`,GS=`#version 300 es
layout(location=0) in vec3 pos;
layout(location=1) in vec4 norm;
layout(location=2) in vec4 clr;
uniform mat4 mvpMtx;
//uniform mat4 modelMtx;
uniform mat4 normMtx;
out vec4 vClr;
flat out vec3 vN;
void main(void) {
	gl_Position = mvpMtx * vec4(pos, 1.0);
	vN = normalize((normMtx * vec4(norm.xyz,1.0)).xyz);
	//vV = -vec3(modelMtx*vec4(pos,1.0));
	vClr = clr;
}`,pv=`#version 300 es
precision highp int;
precision highp float;
uniform float opacity;
in vec4 vClr;
flat in vec3 vN;
out vec4 color;
void main() {
	vec3 r = vec3(0.0, 0.0, 1.0); //rayDir: for orthographic projections moving in Z direction (no need for normal matrix)
	float ambient = 0.35;
	float diffuse = 0.5;
	float specular = 0.2;
	float shininess = 10.0;
	vec3 n = normalize(vN);
	vec3 lightPosition = vec3(0.0, 10.0, -5.0);
	vec3 l = normalize(lightPosition);
	float lightNormDot = dot(n, l);
	vec3 a = vClr.rgb * ambient;
	vec3 d = max(lightNormDot, 0.0) * vClr.rgb * diffuse;
	float s = specular * pow(max(dot(reflect(l, n), r), 0.0), shininess);
	color = vec4(a + d + s, opacity);
}`,YS=`#version 300 es
#line 1260
#define MAX_CLIP_PLANES 6
//precision highp int;
precision highp float;
uniform vec3 rayDir;
uniform vec3 volScale;
uniform vec3 texVox;
uniform vec4 clipPlane;
uniform vec4 clipPlanes[MAX_CLIP_PLANES];
uniform bool isClipCutaway;
uniform highp sampler3D volume, overlay;
uniform highp sampler3D paqd;
uniform vec4 paqdUniforms;
uniform float overlays;
uniform mat4 matRAS;
uniform mat4 mvpMtx;
uniform float drawOpacity, renderOverlayBlend;
uniform highp sampler3D drawing;
uniform highp sampler2D colormap;
uniform int backgroundMasksOverlays;
in vec3 vColor;
out vec4 fColor;
`+ho+`
void main() {
	int id = 254;
	vec3 start = vColor;
	gl_FragDepth = 1.0;
	fColor = vec4(0.0, 0.0, 0.0, 0.0); //assume no hit: ID = 0
	float fid = float(id & 255)/ 255.0;
	vec3 backPosition = GetBackPosition(start);
	vec3 dir = normalize(backPosition - start);
	//clipVolumeStart(start, backPosition);
	float len = length(backPosition - start);
	float lenVox = length((texVox * start) - (texVox * backPosition));
	if ((lenVox < 0.5) || (len > 3.0)) return;//discard; //length limit for parallel rays
	float sliceSize = len / lenVox; //e.g. if ray length is 1.0 and traverses 50 voxels, each voxel is 0.02 in unit cube
	float stepSize = sliceSize; //quality: larger step is faster traversal, but fewer samples
	float opacityCorrection = stepSize/sliceSize;
	dir = normalize(dir);
	vec4 samplePos = vec4(start.xyz, 0.0); //ray position
	bool hasClip = false;
	vec2 sampleRange = vec2(0.0, len);
	for (int i = 0; i < MAX_CLIP_PLANES; i++)
		clipSampleRange(dir, samplePos, clipPlanes[i], sampleRange, hasClip);
	bool isClip = (sampleRange.x > 0.0) || ((sampleRange.y < len) && (sampleRange.y > 0.0));
	//vec4 clipPos = applyClip(dir, samplePos, len, isClip);
	if (isClip) fColor = vec4(samplePos.xyz, 253.0 / 255.0); //assume no hit: ID = 0
	if ((isClipCutaway) && (sampleRange.x <= 0.0) && (sampleRange.y >= len)) {
		//completely clipped, but ray does not intersect plane
		if (hasClip)
			samplePos.a = len + 1.0;
		else
			sampleRange = vec2(0.0, 0.0);
	}
	//start: OPTIONAL fast pass: rapid traversal until first hit
	float stepSizeFast = sliceSize * 1.9;
	vec4 deltaDirFast = vec4(dir.xyz * stepSizeFast, stepSizeFast);
	while (samplePos.a <= len) {
		if (skipSample(samplePos.a, sampleRange) ^^ isClipCutaway) {
			samplePos += deltaDirFast;
			continue;
		}
		float val = texture(volume, samplePos.xyz).a;
		if (val > 0.01) {
			fColor = vec4(samplePos.rgb, fid);
			gl_FragDepth = frac2ndc(samplePos.xyz);
			break;
		}
		samplePos += deltaDirFast; //advance ray position
	}
	//end: fast pass
	if ((overlays < 1.0) || (backgroundMasksOverlays > 0)) {
		return; //background hit, no overlays
	}
	//overlay pass
	len = min(len, samplePos.a); //only find overlay closer than background
	samplePos = vec4(start.xyz, 0.0); //ray position
	while (samplePos.a <= len) {
		float val = texture(overlay, samplePos.xyz).a;
		if (val > 0.01) {
			fColor = vec4(samplePos.rgb, fid);
			gl_FragDepth = frac2ndc(samplePos.xyz);
			return;
		}
		samplePos += deltaDirFast; //advance ray position
	}
	//if (fColor.a == 0.0) discard; //no hit in either background or overlays
	//you only get here if there is a hit with the background that is closer than any overlay
}`,HS=`#version 300 es
// an attribute is an input (in) to a vertex shader.
// It will receive data from a buffer
layout(location=0)  in vec3 a_position;
layout(location=1)  in vec3 a_color;
// A matrix to transform the positions by
uniform mat4 u_matrix;
out vec3 vColor;
// all shaders have a main function
void main() {
	// Multiply the position by the matrix.
	vec4 pos = vec4(a_position, 1.0);
	gl_Position = u_matrix * vec4(pos);
	vColor = a_color;
}
`,XS=`#version 300 es
precision highp float;
uniform vec4 u_color;
in vec3 vColor;
out vec4 outColor;
void main() {
	outColor = vec4(vColor, 1.0);
}`,jS=`#version 300 es
#line 1359
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
	TexCoord = vPos.xy;
	vec2 viewCoord = (vPos.xy - 0.5) * 2.0;
	gl_Position = vec4((vPos.xy - 0.5) * 2.0, 0.0, 1.0);
}`,qS=`#version 300 es
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform lowp sampler3D in3D;
void main(void) {
 FragColor = texture(in3D, vec3(TexCoord.xy, coordZ));
}`,Yl=`#version 300 es
#line 286
precision highp int;
precision highp float;
in vec3 vPos;
out vec2 TexCoord;
void main() {
    TexCoord = vPos.xy;
    gl_Position = vec4( (vPos.xy-vec2(0.5,0.5))* 2.0, 0.0, 1.0);
}`,_S=`#version 300 es
#line 298
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform highp sampler3D intensityVol;
void main(void) {
 vec3 vx = vec3(TexCoord.xy, coordZ);
 vec4 samp = texture(intensityVol,vx+vec3(+dX,+dY,+dZ));
 samp += texture(intensityVol,vx+vec3(+dX,+dY,-dZ));
 samp += texture(intensityVol,vx+vec3(+dX,-dY,+dZ));
 samp += texture(intensityVol,vx+vec3(+dX,-dY,-dZ));
 samp += texture(intensityVol,vx+vec3(-dX,+dY,+dZ));
 samp += texture(intensityVol,vx+vec3(-dX,+dY,-dZ));
 samp += texture(intensityVol,vx+vec3(-dX,-dY,+dZ));
 samp += texture(intensityVol,vx+vec3(-dX,-dY,-dZ));
 FragColor = samp*0.125;
}`,KS=`#version 300 es
#line 298
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform highp sampler3D intensityVol;
void main(void) {
 vec3 vx = vec3(TexCoord.xy, coordZ);
 vec4 XYZ = texture(intensityVol,vx+vec3(+dX,+dY,+dZ));
 vec4 OYZ = texture(intensityVol,vx+vec3(0.0,+dY,+dZ));
 vec4 xYZ = texture(intensityVol,vx+vec3(-dX,+dY,+dZ));
 vec4 XOZ = texture(intensityVol,vx+vec3(+dX,0.0,+dZ));
 vec4 OOZ = texture(intensityVol,vx+vec3(0.0,0.0,+dZ));
 vec4 xOZ = texture(intensityVol,vx+vec3(-dX,0.0,+dZ));
 vec4 XyZ = texture(intensityVol,vx+vec3(+dX,-dY,+dZ));
 vec4 OyZ = texture(intensityVol,vx+vec3(0.0,-dY,+dZ));
 vec4 xyZ = texture(intensityVol,vx+vec3(-dX,-dY,+dZ));

 vec4 XYO = texture(intensityVol,vx+vec3(+dX,+dY,0.0));
 vec4 OYO = texture(intensityVol,vx+vec3(0.0,+dY,0.0));
 vec4 xYO = texture(intensityVol,vx+vec3(-dX,+dY,0.0));
 vec4 XOO = texture(intensityVol,vx+vec3(+dX,0.0,0.0));
 vec4 OOO = texture(intensityVol,vx+vec3(0.0,0.0,0.0));
 vec4 xOO = texture(intensityVol,vx+vec3(-dX,0.0,0.0));
 vec4 XyO = texture(intensityVol,vx+vec3(+dX,-dY,0.0));
 vec4 OyO = texture(intensityVol,vx+vec3(0.0,-dY,0.0));
 vec4 xyO = texture(intensityVol,vx+vec3(-dX,-dY,0.0));

 vec4 XYz = texture(intensityVol,vx+vec3(+dX,+dY,-dZ));
 vec4 OYz = texture(intensityVol,vx+vec3(0.0,+dY,-dZ));
 vec4 xYz = texture(intensityVol,vx+vec3(-dX,+dY,-dZ));
 vec4 XOz = texture(intensityVol,vx+vec3(+dX,0.0,-dZ));
 vec4 OOz = texture(intensityVol,vx+vec3(0.0,0.0,-dZ));
 vec4 xOz = texture(intensityVol,vx+vec3(-dX,0.0,-dZ));
 vec4 Xyz = texture(intensityVol,vx+vec3(+dX,-dY,-dZ));
 vec4 Oyz = texture(intensityVol,vx+vec3(0.0,-dY,-dZ));
 vec4 xyz = texture(intensityVol,vx+vec3(-dX,-dY,-dZ));

 vec4 blurred = vec4 (0.0, 0.0, 0.0, 0.0);
 blurred.r = 2.0*(xOz.r +xOZ.r +xyO.r +xYO.r +xOO.r +XOz.r +XOZ.r +XyO.r +XYO.r +XOO.r) +xyz.r +xyZ.r +xYz.r +xYZ.r +Xyz.r +XyZ.r +XYz.r +XYZ.r;
 blurred.g = 2.0*(Oyz.r +OyZ.r +xyO.r +XyO.r +OyO.r +OYz.r +OYZ.r +xYO.r +XYO.r +OYO.r) +xyz.r +Xyz.r +xyZ.r +XyZ.r +xYz.r +XYz.r +xYZ.r +XYZ.r;
 blurred.b = 2.0*(Oyz.r +OYz.r +xOz.r +XOz.r +OOz.r +OyZ.r +OYZ.r +xOZ.r +XOZ.r +OOZ.r) +xyz.r +Xyz.r +xYz.r +XYz.r +xyZ.r +XyZ.r +XyZ.r +XYZ.r;
 blurred.a = 0.32*(abs(blurred.r)+abs(blurred.g)+abs(blurred.b));
 // 0.0357 = 1/28 to account for weights, rescale to 2**16,
 FragColor = 0.0357*blurred;
}`,Av=`
  gradientSample.a = log2(gradientSample.r*gradientSample.r + gradientSample.g*gradientSample.g + gradientSample.b*gradientSample.b + 1.922337562475971e-06) + 18.988706873717717;
`,QS=`#version 300 es
#line 323
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform highp sampler3D intensityVol;
void main(void) {
  vec3 vx = vec3(TexCoord.xy, coordZ);
  //Neighboring voxels 'T'op/'B'ottom, 'A'nterior/'P'osterior, 'R'ight/'L'eft
  float TAR = texture(intensityVol,vx+vec3(+dX,+dY,+dZ)).r;
  float TAL = texture(intensityVol,vx+vec3(+dX,+dY,-dZ)).r;
  float TPR = texture(intensityVol,vx+vec3(+dX,-dY,+dZ)).r;
  float TPL = texture(intensityVol,vx+vec3(+dX,-dY,-dZ)).r;
  float BAR = texture(intensityVol,vx+vec3(-dX,+dY,+dZ)).r;
  float BAL = texture(intensityVol,vx+vec3(-dX,+dY,-dZ)).r;
  float BPR = texture(intensityVol,vx+vec3(-dX,-dY,+dZ)).r;
  float BPL = texture(intensityVol,vx+vec3(-dX,-dY,-dZ)).r;
  vec4 gradientSample = vec4 (0.0, 0.0, 0.0, 0.0);
  gradientSample.r = BAR+BAL+BPR+BPL -TAR-TAL-TPR-TPL;
  gradientSample.g = TPR+TPL+BPR+BPL -TAR-TAL-BAR-BAL;
  gradientSample.b = TAL+TPL+BAL+BPL -TAR-TPR-BAR-BPR;
${Av}
	// 0.04242020977371934 = 1/(log2(3*8) - log2(1/(255**2*8))) // 3*8 -> max for 1st order gradient
	gradientSample.a *= 0.04242020977371934;
  gradientSample.rgb = normalize(gradientSample.rgb);
  gradientSample.rgb = (gradientSample.rgb * 0.5)+0.5;
  FragColor = gradientSample;
}`,WS=`#version 300 es
#line 323
precision highp int;
precision highp float;
in vec2 TexCoord;
out vec4 FragColor;
uniform float coordZ;
uniform float dX;
uniform float dY;
uniform float dZ;
uniform float dX2;
uniform float dY2;
uniform float dZ2;
uniform highp sampler3D intensityVol;
void main(void) {
  vec3 vx = vec3(TexCoord.xy, coordZ);
  //Neighboring voxels 'T'op/'B'ottom, 'A'nterior/'P'osterior, 'R'ight/'L'eft
  vec4 TAR = texture(intensityVol,vx+vec3(+dX,+dY,+dZ));
  vec4 TAL = texture(intensityVol,vx+vec3(+dX,+dY,-dZ));
  vec4 TPR = texture(intensityVol,vx+vec3(+dX,-dY,+dZ));
  vec4 TPL = texture(intensityVol,vx+vec3(+dX,-dY,-dZ));
  vec4 BAR = texture(intensityVol,vx+vec3(-dX,+dY,+dZ));
  vec4 BAL = texture(intensityVol,vx+vec3(-dX,+dY,-dZ));
  vec4 BPR = texture(intensityVol,vx+vec3(-dX,-dY,+dZ));
  vec4 BPL = texture(intensityVol,vx+vec3(-dX,-dY,-dZ));
  vec4 T = texture(intensityVol,vx+vec3(+dX2,0.0,0.0));
  vec4 A = texture(intensityVol,vx+vec3(0.0,+dY2,0.0));
  vec4 R = texture(intensityVol,vx+vec3(0.0,0.0,+dZ2));
  vec4 B = texture(intensityVol,vx+vec3(-dX2,0.0,0.0));
  vec4 P = texture(intensityVol,vx+vec3(0.0,-dY2,0.0));
  vec4 L = texture(intensityVol,vx+vec3(0.0,0.0,-dZ2));
  vec4 gradientSample = vec4 (0.0, 0.0, 0.0, 0.0);
  gradientSample.r = -4.0*B.r +8.0*(BAR.r+BAL.r+BPR.r+BPL.r) -8.0*(TAR.r+TAL.r+TPR.r+TPL.r) +4.0*T.r;
  gradientSample.g = -4.0*P.g +8.0*(TPR.g+TPL.g+BPR.g+BPL.g) -8.0*(TAR.g+TAL.g+BAR.g+BAL.g) +4.0*A.g;
  gradientSample.b = -4.0*L.b +8.0*(TAL.b+TPL.b+BAL.b+BPL.b) -8.0*(TAR.b+TPR.b+BAR.b+BPR.b) +4.0*R.b;
${Av}
	gradientSample.a *= 0.0325;
  gradientSample.rgb = normalize(gradientSample.rgb);
  gradientSample.rgb =  (gradientSample.rgb * 0.5)+0.5;
  FragColor = gradientSample;
}`;function ZS(){return[{Name:"Phong",Frag:OS},{Name:"Matte",Frag:PS},{Name:"Harmonic",Frag:kS},{Name:"Hemispheric",Frag:zS},{Name:"Crevice",Frag:IS},{Name:"Edge",Frag:BS},{Name:"Diffuse",Frag:US},{Name:"Outline",Frag:TS},{Name:"Specular",Frag:NS},{Name:"Toon",Frag:DS},{Name:"Flat",Frag:pv},{Name:"Matcap",Frag:LS},{Name:"Rim",Frag:RS},{Name:"Silhouette",Frag:FS},{Name:"Crosscut",Frag:VS}]}function Ws(e){const{gl:t,shader:n,gradientAmount:i=0,renderDrawAmbientOcclusion:a,renderSilhouette:o,gradientOpacity:l}=e;n.use(t),t.uniform1i(n.uniforms.volume,0),t.uniform1i(n.uniforms.colormap,1),t.uniform1i(n.uniforms.overlay,2),t.uniform1i(n.uniforms.drawing,7),t.uniform1i(n.uniforms.paqd,8),t.uniform1fv(n.uniforms.renderDrawAmbientOcclusion,[a,1]),t.uniform1f(n.uniforms.gradientAmount,i),t.uniform1f(n.uniforms.silhouettePower,o);const u=new Float32Array(to);for(let f=0;f<to;f++)l===0?u[f]=1:u[f]=Math.pow(f/(to-1),l*8);t.uniform1fv(t.getUniformLocation(n.program,"gradientOpacity"),u),n.uniforms.clipPlanes=t.getUniformLocation(n.program,"clipPlanes[0]")}function JS(e){const{gl:t,fragmentShaderText:n,drawOpacity:i,customSliceShader:a}=e;if(a&&t.deleteProgram(a.program),!n)return null;const o=new Ne(t,dc,n);return o.use(t),t.uniform1i(o.uniforms.volume,0),t.uniform1i(o.uniforms.colormap,1),t.uniform1i(o.uniforms.overlay,2),t.uniform1i(o.uniforms.drawing,7),t.uniform1i(o.uniforms.paqd,8),t.uniform1f(o.uniforms.drawOpacity,i),o}function vv(e,t){const n=e.toLowerCase();for(let i=0;i<t.length;i++)if(t[i].Name.toLowerCase()===n)return i}function $S(e){const{gl:t,fragmentShaderText:n,name:i,meshShaders:a}=e;if(!n)throw new Error("Need fragment shader");const o=vv(i,a);if(o!==void 0&&o>=0){const u=a[o].shader;u&&t.deleteProgram(u.program),a.splice(o,1)}const l=new Ne(t,e0,n);return l.use(t),{Name:i,Frag:n,shader:l}}function eM(e,t=!0){const n=e.map(i=>i.Name);return t?n.sort():n}function tM(e,t){const n=new Ne(e,dc,iS);n.use(e),e.uniform1i(n.uniforms.volume,0),e.uniform1i(n.uniforms.colormap,1),e.uniform1i(n.uniforms.overlay,2),e.uniform1i(n.uniforms.drawing,7),e.uniform1f(n.uniforms.drawOpacity,t);const i=new Ne(e,dc,rS);i.use(e),e.uniform1i(i.uniforms.volume,0),e.uniform1i(i.uniforms.colormap,1),e.uniform1i(i.uniforms.overlay,2),e.uniform1i(i.uniforms.drawing,7),e.uniform1f(i.uniforms.drawOpacity,t);const a=new Ne(e,dc,aS);return a.use(e),e.uniform1i(a.uniforms.volume,0),e.uniform1i(a.uniforms.colormap,1),e.uniform1i(a.uniforms.overlay,2),e.uniform1i(a.uniforms.drawing,7),e.uniform1f(a.uniforms.drawOpacity,t),{slice2DShader:n,sliceMMShader:i,sliceV1Shader:a}}function nM(e,t,n){const i=new Ne(e,HS,XS),a=e.createVertexArray();e.bindVertexArray(a);const o=e.createBuffer();return e.enableVertexAttribArray(0),e.enableVertexAttribArray(1),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.vertexAttribPointer(0,3,e.FLOAT,!1,24,0),e.enableVertexAttribArray(1),e.vertexAttribPointer(1,3,e.FLOAT,!1,24,12),e.bindVertexArray(n),{shader:i,vao:a}}function iM(e){const t=new Ne(e,gp,Fh);t.use(e);const n=new Ne(e,gp,sS);n.use(e);const i=new Ne(e,cS,Fh);i.use(e);const a=new Ne(e,uS,Fh);a.use(e);const o=new Ne(e,gS,pS);return o.use(e),{rectShader:t,rectOutlineShader:n,lineShader:i,line3DShader:a,circleShader:o}}function rM(e){const{gl:t,renderDrawAmbientOcclusion:n,renderSilhouette:i,gradientOpacity:a}=e,o=new Ne(t,Qs,eS);Ws({gl:t,shader:o,renderDrawAmbientOcclusion:n,renderSilhouette:i,gradientOpacity:a});const l=new Ne(t,Qs,$C);Ws({gl:t,shader:l,renderDrawAmbientOcclusion:n,renderSilhouette:i,gradientOpacity:a});const u=new Ne(t,Qs,tS);Ws({gl:t,shader:u,gradientAmount:.3,renderDrawAmbientOcclusion:n,renderSilhouette:i,gradientOpacity:a}),t.uniform1i(u.uniforms.matCap,5),t.uniform1i(u.uniforms.gradient,6);const f=new Ne(t,Qs,nS);return Ws({gl:t,shader:f,renderDrawAmbientOcclusion:n,renderSilhouette:i,gradientOpacity:a}),t.uniform1i(f.uniforms.matCap,5),t.uniform1i(f.uniforms.gradient,6),{renderVolumeShader:o,renderSliceShader:l,renderGradientShader:u,renderGradientValuesShader:f,renderShader:o}}function aM(e){const t=new Ne(e,oS,lS);return t.use(e),e.uniform1i(t.uniforms.colormap,1),t}function sM(e){const t=new Ne(e,Yl,_S),n=new Ne(e,Yl,KS),i=new Ne(e,Yl,QS),a=new Ne(e,Yl,WS),o=new Ne(e,yS,wS),l=new Ne(e,jS,qS);return{blurShader:t,sobelBlurShader:n,sobelFirstOrderShader:i,sobelSecondOrderShader:a,growCutShader:o,passThroughShader:l}}function oM(e){const t=new Ne(e,Cr,Gl.concat(Ap)),n=new Ne(e,Cr,pp.concat(Ap)),i=new Ne(e,Cr,Gl.concat(Bh)),a=new Ne(e,Cr,pp.concat(Bh)),o=new Ne(e,Cr,AS.concat(Bh)),l=new Ne(e,Cr,Gl.concat(xS)),u=new Ne(e,Cr,Gl.concat(vS));return{orientShaderAtlasU:t,orientShaderAtlasI:n,orientShaderU:i,orientShaderI:a,orientShaderF:o,orientShaderRGBU:l,orientShaderPAQD:u}}function lM(e){const t=new Ne(e,bS,CS);t.use(e);const n=new Ne(e,SS,MS);return{surfaceShader:t,fiberShader:n}}function cM(e){const t=new Ne(e,Qs,YS);return t.use(e),t.uniforms.clipPlanes=e.getUniformLocation(t.program,"clipPlanes[0]"),e.uniform1i(t.uniforms.volume,0),e.uniform1i(t.uniforms.colormap,1),e.uniform1i(t.uniforms.overlay,2),e.uniform1i(t.uniforms.drawing,7),t}function uM(e,t){for(let n=0;n<t.length;n++){const i=t[n];i.Name==="Flat"?i.shader=new Ne(e,GS,pv):i.shader=new Ne(e,e0,i.Frag),i.shader.use(e),i.shader.isCrosscut=i.Name==="Crosscut",i.shader.isMatcap=i.Name==="Matcap",i.shader.isMatcap&&e.uniform1i(i.shader.uniforms.matCap,5)}}function fM(e,t){const n=[...e,t],i=n.length===1?0:n.length-1;return{volumes:n,index:i}}function Oa(e,t){for(let n=0;n<e.length;n++)if(e[n].id===t)return n;return-1}function hM(e,t){const n=e.slice(1);for(let i=0;i<n.length;i++)if(n[i].id===t)return i;return-1}function La(e,t,n=0){const i=e.length;if(n>i)return{volumes:e,back:e.length>0?e[0]:null,overlays:e.slice(1)};const a=Oa(e,t.id),o=[...e];return n===0?(o.splice(a,1),o.unshift(t)):n<0?o.splice(a,1):(o.splice(a,1),o.splice(n,0,t)),{volumes:o,back:o.length>0?o[0]:null,overlays:o.slice(1)}}function xv(e,t){return{volumes:La(e,t,-1).volumes,removed:t}}function dM(e,t){if(t>=e.length)throw new Error("Index of volume out of bounds");return xv(e,e[t])}function mM(e,t){return La(e,t,0)}function gM(e,t){const n=Oa(e,t.id);return La(e,t,n+1)}function pM(e,t){const n=Oa(e,t.id);return La(e,t,n-1)}function AM(e,t){return La(e,t,e.length-1)}function vM(e,t,n){return e[t].opacity=n,e}function xM(e,t){return e[t].clone()}function yM(e,t,n){const i=Oa(e,t);if(i<0)return e;const a=e[i];let o=n;return o>a.nFrame4D-1&&(o=a.nFrame4D-1),o<0&&(o=0),o===a.frame4D||(a.frame4D=o),e}function wM(e,t){const n=Oa(e,t);return n<0?0:e[n].frame4D}function bM(e){const t=e.hdr,n=t.dims[1]*t.dims[2]*t.dims[3],i=new Uint8ClampedArray(n*4),a=.2*Math.min(Math.min(t.dims[1],t.dims[2]),t.dims[3]),o=.5*t.dims[1],l=.5*t.dims[2],u=.5*t.dims[3];let f=0;for(let h=0;h<t.dims[3];h++)for(let d=0;d<t.dims[2];d++)for(let m=0;m<t.dims[1];m++){const p=Math.abs(m-o),A=Math.abs(d-l),v=Math.abs(h-u),y=Math.sqrt(p*p+A*A+v*v);let w=0;y<a&&(w=255),i[f++]=0,i[f++]=w,i[f++]=0,i[f++]=w*.5}return i}function CM(e){let t=e.img;return e.frame4D>0&&e.frame4D<e.nFrame4D&&(t=e.img.slice(e.frame4D*e.nVox3D,(e.frame4D+1)*e.nVox3D)),t}function SM(e){const{hdr:t,max2D:n,max3D:i}=e,a=t.dims[1]>n||t.dims[2]>n,o=t.dims[1]>i||t.dims[2]>i||t.dims[3]>i;return{isAboveMax2D:a,isAboveMax3D:o}}function MM(e){const{gl:t,overlayItem:n,orientShader:i,createColormapTexture:a}=e;if(n.colormapLabel===null||n.colormapLabel.lut.length<=7)return{colormapLabelTexture:null,shouldCleanup:!1};const o=n.colormapLabel.max-n.colormapLabel.min+1,l=a(null,1,o);return t.texSubImage2D(t.TEXTURE_2D,0,0,0,o,1,t.RGBA,t.UNSIGNED_BYTE,n.colormapLabel.lut),t.uniform1f(i.uniforms.cal_min,n.colormapLabel.min-.5),t.uniform1f(i.uniforms.cal_max,n.colormapLabel.max+.5),t.bindTexture(t.TEXTURE_2D,l),{colormapLabelTexture:l,shouldCleanup:!0}}function EM(e){const{gl:t,overlayItem:n,hdr:i,volumes:a,orientShader:o,r8Tex:l,TEXTURE7:u}=e;if(n.modulationImage===null||n.modulationImage<0||n.modulationImage>=a.length)return t.uniform1i(o.uniforms.modulation,0),{modulateTexture:null};const f=a[n.modulationImage].hdr;if(f.dims[1]!==i.dims[1]||f.dims[2]!==i.dims[2]||f.dims[3]!==i.dims[3])return G.debug("Modulation image dimensions do not match target"),t.uniform1i(o.uniforms.modulation,0),{modulateTexture:null};G.debug("modulating",a),n.modulateAlpha?(t.uniform1i(o.uniforms.modulation,2),t.uniform1f(o.uniforms.opacity,1)):t.uniform1i(o.uniforms.modulation,1);const h=l(null,u,i.dims,!0);t.activeTexture(u),t.bindTexture(t.TEXTURE_3D,h);const d=i.dims[1]*i.dims[2]*i.dims[3],m=new Uint8Array(d),p=a[n.modulationImage].cal_min,A=1/(a[n.modulationImage].cal_max-p),v=a[n.modulationImage].img.buffer;let y=new Uint8Array(v);switch(f.datatypeCode){case 4:y=new Int16Array(v);break;case 16:y=new Float32Array(v);break;case 64:y=new Float64Array(v);break;case 128:y=new Uint8Array(v);break;case 512:y=new Uint16Array(v);break}G.debug(a[n.modulationImage]);const w=a[n.modulationImage].colormapNegative.length>0;let C=a[n.modulationImage].cal_min,S=a[n.modulationImage].cal_max;isFinite(a[n.modulationImage].cal_minNeg)&&isFinite(a[n.modulationImage].cal_maxNeg)&&(C=a[n.modulationImage].cal_minNeg,S=a[n.modulationImage].cal_maxNeg),C=Math.abs(C),S=Math.abs(S),C>S&&([C,S]=[S,C]);const E=1/(S-C);let M=Math.abs(n.modulateAlpha);M=Math.max(M,1);const R=a[n.modulationImage].frame4D*d;for(let D=0;D<d;D++){const T=y[D+R]*f.scl_slope+f.scl_inter;let F=(T-p)*A;w&&T<0&&(F=(Math.abs(T)-C)*E),F=Math.min(Math.max(F,0),1),F=Math.pow(F,M)*255,m[D]=F}return t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,i.dims[1],i.dims[2],i.dims[3],t.RED,t.UNSIGNED_BYTE,m),{modulateTexture:h}}function DM(e,t,n){if(!e.dimsRAS||!e.matRAS||!e.pixDimsRAS||!e.vox2mm)throw new Error("Cannot create NiivueObject3D: Missing required RAS properties or vox2mm access on NVImage.");const i=e.dimsRAS,a=e.matRAS,o=e.pixDimsRAS,l=-.5,u=-.5,f=-.5,h=i[1]-1+.5,d=i[2]-1+.5,m=i[3]-1+.5,p=e.vox2mm,A=p.call(e,[l,u,f],a),v=p.call(e,[l,d,f],a),y=p.call(e,[l,u,m],a),w=p.call(e,[l,d,m],a),C=p.call(e,[h,u,f],a),S=p.call(e,[h,d,f],a),E=p.call(e,[h,u,m],a),M=p.call(e,[h,d,m],a),R=[...y,0,0,1,...E,1,0,1,...M,1,1,1,...w,0,1,1,...A,0,0,0,...v,0,1,0,...S,1,1,0,...C,1,0,0],D=n.createBuffer();if(!D)throw new Error("Failed to create GL index buffer");n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,D);const T=[0,3,2,2,1,0,4,7,6,6,5,4,5,6,2,2,3,5,4,0,1,1,7,4,7,1,2,2,6,7,4,5,3,3,0,4];n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(T),n.STATIC_DRAW);const F=n.createBuffer();if(!F)throw new Error("Failed to create GL vertex buffer");n.bindBuffer(n.ARRAY_BUFFER,F),n.bufferData(n.ARRAY_BUFFER,new Float32Array(R),n.STATIC_DRAW);const U=n.createVertexArray();if(!U)throw new Error("Failed to create GL VAO");n.bindVertexArray(U),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,D),n.bindBuffer(n.ARRAY_BUFFER,F);const I=24;n.enableVertexAttribArray(0),n.vertexAttribPointer(0,3,n.FLOAT,!1,I,0),n.enableVertexAttribArray(1),n.vertexAttribPointer(1,3,n.FLOAT,!1,I,12),n.bindVertexArray(null);const V=new Br(t,F,n.TRIANGLES,T.length,D,U),N=[...y,...E,...M,...w,...A,...v,...S,...C],Y=S6(N);return V.extentsMin=Y.min.slice(),V.extentsMax=Y.max.slice(),V.furthestVertexFromOrigin=Y.furthestVertexFromOrigin,V.originNegate=wn(Y.origin),wy(V.originNegate,V.originNegate),V.fieldOfViewDeObliqueMM=[i[1]*o[1],i[2]*o[2],i[3]*o[3]],V}var TM=33984,RM=33986,vp=33994;function FM(e){const{overlayItem:t,VOLUME_ID:n,gl:i}=e;return DM(t,n,i)}function BM(e){const{overlayItem:t,mm2frac:n}=e,i=n(t.mm000,0,!0);let a=n(t.mm100,0,!0),o=n(t.mm010,0,!0),l=n(t.mm001,0,!0);a=Je(a,a,i),o=Je(o,o,i),l=Je(l,l,i);const u=Cn(a[0],o[0],l[0],i[0],a[1],o[1],l[1],i[1],a[2],o[2],l[2],i[2],0,0,0,1);return Kt(u,u),u}function UM(e){const{layer:t,backDims:n,rgbaTex:i}=e;if(t===0)return{volumeTexture:i(null,TM,n)};if(t===1){const a=i(null,RM,n);return{overlayTexture:a,overlayTextureID:a}}return{}}function NM(e){const t=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,t),e.disable(e.CULL_FACE),e.disable(e.BLEND),t}function IM(e){const{gl:t,layer:n,backDims:i,rgbaTex:a,passThroughShader:o}=e;if(n<=1)return a(null,vp,[2,2,2,2]);const l=a(null,vp,i);t.bindTexture(t.TEXTURE_3D,l),o.use(t),t.uniform1i(o.uniforms.in3D,2);for(let u=0;u<i[3];u++){const f=1/i[3]*(u+.5);t.uniform1f(o.uniforms.coordZ,f),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,l,0,u),t.drawArrays(t.TRIANGLE_STRIP,0,4)}return l}function VM(e){const{gl:t,overlayItem:n,orientShader:i,layer:a,isAdditiveBlend:o}=e,l=n.colormapType!==0?1:0,u=n.colormapType===1?1:0;t.uniform1i(i.uniforms.isAlphaThreshold,u),t.uniform1i(i.uniforms.isColorbarFromZero,l),t.uniform1i(i.uniforms.isAdditiveBlend,o?1:0);let f=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;n.colormapNegative.length>0&&(f=Math.min(-n.cal_min,-n.cal_max),h=Math.max(-n.cal_min,-n.cal_max),isFinite(n.cal_minNeg)&&isFinite(n.cal_maxNeg)&&(f=Math.min(n.cal_minNeg,n.cal_maxNeg),h=Math.max(n.cal_minNeg,n.cal_maxNeg))),t.uniform1f(i.uniforms.layer??null,a),t.uniform1f(i.uniforms.cal_minNeg??null,f),t.uniform1f(i.uniforms.cal_maxNeg??null,h)}function OM(e){const{gl:t,orientShader:n,backDims:i,outTexture:a,mtx:o,hdr:l,intensityVolTextureUnit:u,blendTextureUnit:f,colormapTextureUnit:h,modulationTextureUnit:d,opacity:m,atlasOutline:p,atlasActiveIndex:A}=e;n.use(t),t.uniform1i(n.uniforms.intensityVol??null,u),t.uniform1i(n.uniforms.blend3D??null,f),t.uniform1i(n.uniforms.colormap??null,h),t.uniform1f(n.uniforms.scl_inter??null,l.scl_inter),t.uniform1f(n.uniforms.scl_slope??null,l.scl_slope),t.uniform1f(n.uniforms.opacity??null,m),t.uniform1i(n.uniforms.modulationVol??null,d),t.uniformMatrix4fv(n.uniforms.mtx,!1,o);let v=0;l.intent_code===1002&&(v=p,t.uniform1ui(n.uniforms.activeIndex,A|0)),t.uniform4fv(n.uniforms.xyzaFrac,[1/i[1],1/i[2],1/i[3],v]);for(let y=0;y<i[3];y++){const w=1/i[3]*(y+.5);t.uniform1f(n.uniforms.coordZ,w),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,a,0,y),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}function LM(e){const{gl:t,renderShader:n,pickingImageShader:i,sliceShader:a,overlaysLength:o,clipPlaneColor:l,backOpacity:u,renderOverlayBlend:f,clipPlane:h,texVox:d,volScale:m,drawOpacity:p,paqdUniforms:A}=e;n.use(t),t.uniform1f(n.uniforms.overlays,o),t.uniform4fv(n.uniforms.clipPlaneColor,l),t.uniform1f(n.uniforms.backOpacity,u),t.uniform1f(n.uniforms.renderOverlayBlend,f),t.uniform4fv(n.uniforms.clipPlane,h),t.uniform3fv(n.uniforms.texVox,d),t.uniform3fv(n.uniforms.volScale,m),i.use(t),t.uniform1f(i.uniforms.overlays,o),t.uniform3fv(i.uniforms.texVox,d),a.use(t),t.uniform1f(a.uniforms.overlays,o),t.uniform1f(a.uniforms.drawOpacity,p),t.uniform4fv(a.uniforms.paqdUniforms,A)}function PM(e){const{is2DSliceShader:t,isV1SliceShader:n,sliceMMShader:i,slice2DShader:a,sliceV1Shader:o,customSliceShader:l}=e;let u=i;if(t&&(u=a),n&&(u=o),l&&(u=l),!u)throw new Error("slice shader undefined");return u}function zM(e){const{gl:t,shader:n,is2DSliceShader:i,drawTexture:a,paqdTexture:o,TEXTURE7_DRAW:l,TEXTURE8_PAQD:u}=e;t.uniform1i(n.uniforms.drawing,7),t.activeTexture(l),i?t.bindTexture(t.TEXTURE_2D,a):t.bindTexture(t.TEXTURE_3D,a),t.uniform1i(n.uniforms.paqd,8),t.activeTexture(u),t.bindTexture(t.TEXTURE_3D,o)}function kM(e){const{gl:t,TEXTURE9_ORIENT:n}=e,i=t.createTexture();return t.activeTexture(n),t.bindTexture(t.TEXTURE_3D,i),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.pixelStorei(t.UNPACK_ALIGNMENT,1),i}var GM=2,YM=4,HM=16,XM=64,jM=128,qM=512,_M=2304,Uh=1002;function KM(e){const{gl:t,hdr:n,img:i,orientShaderU:a,orientShaderI:o,orientShaderF:l,orientShaderRGBU:u,orientShaderAtlasU:f,orientShaderAtlasI:h}=e;let d=a;if(n.datatypeCode===GM)n.intent_code===Uh&&(d=f),t.texStorage3D(t.TEXTURE_3D,1,t.R8UI,n.dims[1],n.dims[2],n.dims[3]),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.dims[1],n.dims[2],n.dims[3],t.RED_INTEGER,t.UNSIGNED_BYTE,i);else if(n.datatypeCode===YM)d=o,n.intent_code===Uh&&(d=h),t.texStorage3D(t.TEXTURE_3D,1,t.R16I,n.dims[1],n.dims[2],n.dims[3]),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.dims[1],n.dims[2],n.dims[3],t.RED_INTEGER,t.SHORT,i);else if(n.datatypeCode===HM)t.texStorage3D(t.TEXTURE_3D,1,t.R32F,n.dims[1],n.dims[2],n.dims[3]),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.dims[1],n.dims[2],n.dims[3],t.RED,t.FLOAT,i),d=l;else if(n.datatypeCode===XM){const m=Float32Array.from(i);t.texStorage3D(t.TEXTURE_3D,1,t.R32F,n.dims[1],n.dims[2],n.dims[3]),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.dims[1],n.dims[2],n.dims[3],t.RED,t.FLOAT,m),d=l}else n.datatypeCode===jM?(d=u,d.use(t),t.uniform1i(d.uniforms.hasAlpha,0),t.texStorage3D(t.TEXTURE_3D,1,t.RGB8UI,n.dims[1],n.dims[2],n.dims[3]),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.dims[1],n.dims[2],n.dims[3],t.RGB_INTEGER,t.UNSIGNED_BYTE,i)):n.datatypeCode===qM&&(n.intent_code===Uh&&(d=f),t.texStorage3D(t.TEXTURE_3D,1,t.R16UI,n.dims[1],n.dims[2],n.dims[3]),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.dims[1],n.dims[2],n.dims[3],t.RED_INTEGER,t.UNSIGNED_SHORT,i));return{orientShader:d}}function QM(e){const{gl:t,hdr:n,img:i,overlayItem:a,layer:o,orientShaderRGBU:l,orientShaderPAQD:u,volumes:f,backDims:h,rgbaTex:d,paqdTexture:m,TEXTURE8_PAQD:p,TEXTURE9_ORIENT:A}=e;let v=l,y=null,w=m;if(a.colormapLabel){v=u;let C=!0;for(let S=0;S<o;S++){const E=f[S].hdr.datatypeCode===_M,M=!!f[S].colormapLabel;E&&M&&(C=!1)}C&&(w=d(m,p,h)),y=w,t.activeTexture(A)}return v.use(t),t.uniform1i(v.uniforms.hasAlpha,1),t.texStorage3D(t.TEXTURE_3D,1,t.RGBA8UI,n.dims[1],n.dims[2],n.dims[3]),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,n.dims[1],n.dims[2],n.dims[3],t.RGBA_INTEGER,t.UNSIGNED_BYTE,i),{orientShader:v,outTexture:y,paqdTexture:w}}function ir(e,t){if(typeof t=="number")return t>=e.length?-1:t;for(let n=0;n<e.length;n++)if(e[n].id===t)return n;return-1}function WM(e,t){const n=[...e,t],i=n.length===1?0:n.length-1;return{meshes:n,index:i}}function ZM(e,t,n=0){const i=e.length;if(n>i)return{meshes:e};const a=ir(e,t.id);if(a<0)return{meshes:e};const o=[...e];return n===0?(o.splice(a,1),o.unshift(t)):n<0?o.splice(a,1):(o.splice(a,1),o.splice(n,0,t)),{meshes:o}}function JM(e){const{meshes:t,id:n,key:i,val:a,gl:o}=e,l=ir(t,n);return l<0?(G.warn("setMeshProperty() id not loaded",n),-1):(t[l].setProperty(i,a,o),l)}function $M(e){const{meshes:t,meshId:n,Xmm:i,Ymm:a,Zmm:o}=e,l=ir(t,n);return l<0?(G.warn("indexNearestXYZmm() id not loaded",n),[NaN,NaN]):t[l].indexNearestXYZmm(i,a,o)}function eE(e){const{meshes:t,meshId:n,gl:i,order:a=3}=e,o=ir(t,n);return o<0?(G.warn("decimateHierarchicalMesh() id not loaded",n),!1):t[o].decimateHierarchicalMesh(i,a)}function tE(e){const{meshes:t,meshId:n,gl:i}=e,a=ir(t,n);return a<0?(G.warn("reverseFaces() id not loaded",n),!1):(t[a].reverseFaces(i),!0)}async function nE(e){const{meshes:t,meshId:n,layer:i,key:a,val:o,gl:l}=e,u=ir(t,n);return u<0?(G.warn("setMeshLayerProperty() id not loaded",n),!1):(await t[u].setLayerProperty(i,a,o,l),!0)}function iE(e){const{meshes:t,meshShaders:n,id:i,meshShaderNameOrNumber:a,meshShaderNameToNumber:o}=e;let l=0;if(typeof a=="number"?l=a:l=o(a),l===void 0)throw new Error("shaderIndex undefined");l=Math.min(l,n.length-1),l=Math.max(l,0);const u=ir(t,i);return u>=t.length||u<0?(G.debug("Unable to change shader until mesh is loaded (maybe you need async)"),null):(t[u].meshShaderIndex=l,{meshIndex:u,shaderIndex:l})}var Hl={name:"untitled connectome",nodeColormap:"warm",nodeColormapNegative:"winter",nodeMinColor:0,nodeMaxColor:4,nodeScale:3,edgeColormap:"warm",edgeColormapNegative:"winter",edgeMin:2,edgeMax:6,edgeScale:1,legendLineThickness:0,showLegend:!0},mc=class yv extends Ta{constructor(t,n){super(new Float32Array([]),new Uint32Array([]),n.name,new Uint8Array([]),1,!0,t,n),L(this,"gl"),L(this,"nodesChanged"),this.gl=t,this.type="connectome",this.nodes&&this.updateLabels(),this.nodesChanged=new EventTarget}static convertLegacyConnectome(t){const n={nodes:[],edges:[],...Hl};for(const a in t)if(a in Hl){const o=a;n[o]=t[o]}const i=t.nodes;for(let a=0;a<i.names.length;a++)n.nodes.push({name:i.names[a],x:i.X[a],y:i.Y[a],z:i.Z[a],colorValue:i.Color[a],sizeValue:i.Size[a]});for(let a=0;a<i.names.length-1;a++)for(let o=a+1;o<i.names.length;o++){const l=t.edges[a*i.names.length+o];n.edges.push({first:a,second:o,colorValue:l})}return n}static convertFreeSurferConnectome(t,n="warm"){let i=!0;if("data_type"in t?t.data_type!=="fs_pointset"&&(i=!1):i=!1,"points"in t||(i=!1),!i)throw Error("not a valid FreeSurfer json pointset");const a=t.points.map(l=>({name:Array.isArray(l.comments)&&l.comments.length>0&&"text"in l.comments[0]?l.comments[0].text:"",x:l.coordinates.x,y:l.coordinates.y,z:l.coordinates.z,colorValue:1,sizeValue:1,metadata:l.comments}));return{...Hl,nodeColormap:n,edgeColormap:n,nodes:a,edges:[]}}updateLabels(){const t=this.nodes;if(t&&t.length>0){const n=t.reduce((h,d)=>h.sizeValue>d.sizeValue?h:d).sizeValue;let i,a;if(typeof this.nodeMinColor<"u"&&isFinite(this.nodeMinColor))i=this.nodeMinColor;else{i=t[0].colorValue;for(let h=1;h<t.length;h++)t[h].colorValue<i&&(i=t[h].colorValue)}if(typeof this.nodeMaxColor<"u"&&isFinite(this.nodeMaxColor))a=this.nodeMaxColor;else{a=t[0].colorValue;for(let h=1;h<t.length;h++)t[h].colorValue>a&&(a=t[h].colorValue)}const o=Xe.colormap(this.nodeColormap,this.colormapInvert),l=Xe.colormap(this.nodeColormapNegative,this.colormapInvert),u="nodeColormapNegative"in this;let f=this.legendLineThickness?this.legendLineThickness:0;this.showLegend===!1&&(f=0);for(let h=0;h<t.length;h++){let d=t[h].colorValue,m=!1;if(u&&d<0&&(m=!0,d=-d),i<a){if(d<i){G.warn("color value lower than min");continue}d=(d-i)/(a-i)}else d=1;d=Math.round(Math.max(Math.min(255,d*255)))*4;let p=[o[d],o[d+1],o[d+2],255];m&&(p=[l[d],l[d+1],l[d+2],255]),p=p.map(A=>A/255),G.debug("adding label for ",t[h]),t[h].label=new _d(t[h].name,{textColor:p,bulletScale:t[h].sizeValue/n,bulletColor:p,lineWidth:f,lineColor:p,textScale:1,textAlignment:"left",lineTerminator:"none"},[t[h].x,t[h].y,t[h].z]),G.debug("label for node:",t[h].label)}}}addConnectomeNode(t){if(G.debug("adding node",t),!this.nodes)throw new Error("nodes not defined");this.nodes.push(t),this.updateLabels(),this.nodesChanged.dispatchEvent(new CustomEvent("nodeAdded",{detail:{node:t}}))}deleteConnectomeNode(t){const n=this.nodes.indexOf(t),i=this.edges;i&&(this.edges=i.filter(a=>a.first!==n&&a.second!==n)),this.nodes=this.nodes.filter(a=>a!==t),this.updateLabels(),this.updateConnectome(this.gl),this.nodesChanged.dispatchEvent(new CustomEvent("nodeDeleted",{detail:{node:t}}))}updateConnectomeNodeByIndex(t,n){this.nodes[t]=n,this.updateLabels(),this.updateConnectome(this.gl),this.nodesChanged.dispatchEvent(new CustomEvent("nodeChanged",{detail:{node:n}}))}updateConnectomeNodeByPoint(t,n){const i=this.nodes;if(!i)throw new Error("Node to update does not exist");const a=i.find(l=>Ce.arraysAreEqual([l.x,l.y,l.z],t));if(!a)throw new Error(`Node with point ${t} to update does not exist`);const o=i.findIndex(l=>l===a);this.updateConnectomeNodeByIndex(o,n)}addConnectomeEdge(t,n,i){const a=this.edges;let o=a.find(l=>(l.first===t||l.second===t)&&l.first+l.second===t+n);return o||(o={first:t,second:n,colorValue:i},a.push(o),this.updateConnectome(this.gl),o)}deleteConnectomeEdge(t,n){const i=this.edges,a=i.find(o=>(o.first===t||o.first===n)&&o.first+o.second===t+n);if(a)this.edges=i.filter(o=>o!==a);else throw new Error(`edge between ${t} and ${n} not found`);return this.updateConnectome(this.gl),a}findClosestConnectomeNode(t,n){const i=this.nodes;if(!i||i.length===0)return null;const a=i.map((o,l)=>({node:o,distance:Math.sqrt(Math.pow(o.x-t[0],2)+Math.pow(o.y-t[1],2)+Math.pow(o.z-t[2],2)),index:l})).filter(o=>o.distance<n).sort((o,l)=>o.distance-l.distance);return a.length>0?a[0].node:null}updateConnectome(t){const n=[],i=[],a=[];let o=Xe.colormap(this.nodeColormap,this.colormapInvert),l=Xe.colormap(this.nodeColormapNegative,this.colormapInvert),u="nodeColormapNegative"in this;this.nodeMinColor===void 0&&(this.nodeMinColor=NaN),this.nodeMaxColor===void 0&&(this.nodeMaxColor=NaN),this.edgeMin===void 0&&(this.edgeMin=NaN),this.edgeMax===void 0&&(this.edgeMax=NaN);let f=this.nodeMinColor,h=this.nodeMaxColor;if(!isFinite(f)||!isFinite(f)){const C=this.nodes;f=C[0].colorValue,h=C[0].colorValue;for(let S=0;S<C.length;S++)f=Math.min(f,C[S].colorValue),h=Math.max(h,C[S].colorValue)}const d=this.nodes,m=d.length;for(let C=0;C<m;C++){const S=d[C].sizeValue*this.nodeScale;if(S<=0)continue;let E=d[C].colorValue,M=!1;if(u&&E<0&&(M=!0,E=-E),f<h){if(E<f)continue;E=(E-f)/(h-f)}else E=1;E=Math.round(Math.max(Math.min(255,E*255)))*4;let R=[o[E],o[E+1],o[E+2],255];M&&(R=[l[E],l[E+1],l[E+2],255]);const D=ce(d[C].x,d[C].y,d[C].z);Br.makeColoredSphere(i,n,a,S,D,R)}o=Xe.colormap(this.edgeColormap,this.colormapInvert),l=Xe.colormap(this.edgeColormapNegative,this.colormapInvert),u="edgeColormapNegative"in this;const p=this.edges;if(p!==void 0&&p.length>0){if(f=this.edgeMin,h=this.edgeMax,!isFinite(f)||!isFinite(f)){f=p[0].colorValue,h=p[0].colorValue;for(let C=0;C<p.length;C++)f=Math.min(f,p[C].colorValue),h=Math.max(h,p[C].colorValue)}for(const C of p){let S=C.colorValue;const E=u&&S<0;E&&(S=-S);const M=S*this.edgeScale;if(M<=0)continue;if(f<h){if(S<f)continue;S=(S-f)/(h-f)}else S=1;S=Math.round(Math.max(Math.min(255,S*255)))*4;let R=[o[S],o[S+1],o[S+2],255];E&&(R=[l[S],l[S+1],l[S+2],255]);const D=ce(d[C.first].x,d[C.first].y,d[C.first].z),T=ce(d[C.second].x,d[C.second].y,d[C.second].z);Br.makeColoredCylinder(i,n,a,D,T,M,R)}}const A=new Float32Array(i),v=new Uint32Array(n),y=Mr.getExtents(A);this.furthestVertexFromOrigin=y.mxDx,this.extentsMin=y.extentsMin,this.extentsMax=y.extentsMax;const w=this.generatePosNormClr(A,v,new Uint8Array(a));t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Uint32Array.from(v),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,Float32Array.from(w),t.STATIC_DRAW),this.indexCount=n.length}updateMesh(t){this.updateConnectome(t),this.updateLabels()}json(){const t={};for(const n in this)(n in Hl||n==="nodes"||n==="edges")&&(t[n]=this[n]);return t}static async loadConnectomeFromUrl(t,n){const a=await(await fetch(n)).json();return new yv(t,a)}};function rE(e){const{gl:t,json:n}=e;let i=n;if("data_type"in n&&n.data_type==="fs_pointset")i=mc.convertFreeSurferConnectome(n),G.warn("converted FreeSurfer connectome",i);else if("nodes"in n){const a=n.nodes;"names"in a&&"X"in a&&"Y"in a&&"Z"in a&&"Color"in a&&"Size"in a&&(i=mc.convertLegacyConnectome(n))}else throw new Error("not a known connectome format");return new mc(t,i)}function aE(e,t="none"){const n=[1,1,1,1];return{text:e.name,style:{textColor:n,bulletScale:1,bulletColor:n,lineWidth:0,lineColor:n,lineTerminator:t,textScale:1},position:[e.x,e.y,e.z]}}function sE(e){const{meshes:t,documentLabels:n}=e,l=t.filter(f=>f.type==="connectome").flatMap(f=>f.nodes).map(f=>f.label).filter(f=>f!==void 0);return[...n,...l]}function oE(e){const{meshes:t,documentLabels:n}=e,l=t.filter(d=>d.type==="connectome"&&d.showLegend!==!1).flatMap(d=>d.nodes).map(d=>d.label).filter(d=>d!==void 0&&d.text!==""),u=n.filter(d=>d.anchor==null||d.anchor===0),f=new Set(l);for(const d of u)f.add(d);const h=t.filter(d=>d.type==="mesh");for(let d=0;d<h.length;d++)for(let m=0;m<h[d].layers.length;m++)if(h[d].layers[m].labels)for(let p=0;p<h[d].layers[m].labels.length;p++)f.add(h[d].layers[m].labels[p]);return Array.from(f)}var wv={};It(wv,{MESH_EXTENSIONS:()=>t0,getFileExt:()=>n0,getLoader:()=>lE,getMediaByUrl:()=>Cv,handleDragEnter:()=>Ev,handleDragOver:()=>Dv,isDicomExtension:()=>cE,isMeshExt:()=>bv,readDirectory:()=>Mv,readFileAsDataURL:()=>uE,registerLoader:()=>Sv,traverseFileTree:()=>i0});var t0=["ASC","BYU","DFS","FSM","PIAL","ORIG","INFLATED","SMOOTHWM","SPHERE","WHITE","G","GEO","GII","ICO","MZ3","NV","OBJ","OFF","PLY","SRF","STL","TCK","TRACT","TRI","TRK","TT","TRX","VTK","WRL","X3D","JCON","JSON"];function n0(e,t=!0){let n;typeof e=="object"?(n=e.fullname,t=e.upperCase??!0):n=e,G.debug("fullname: ",n);const i=/(?:\.([^.]+))?$/;let a=i.exec(n)[1];if(a=a.toUpperCase(),a==="GZ")a=i.exec(n.slice(0,-3))[1],a=a.toUpperCase();else if(a==="CBOR"){const o=a;a=i.exec(n.slice(0,-5))[1],a=a.toUpperCase(),a=`${a}.${o}`}return t?a:a.toLowerCase()}function bv(e){const t=n0(e);return G.debug("checking mesh ext:",t),t0.includes(t)}function Cv(e,t){return[...t.entries()].filter(n=>n[1]===e).map(n=>n[0]).pop()}function Sv(e){const{loaders:t,loader:n,fileExt:i,toExt:a}=e;return{...t,[i.toUpperCase()]:{loader:n,toExt:a}}}function lE(e,t){return e[t.toUpperCase()]}function cE(e){return e.toUpperCase()==="DCM"}async function i0(e,t="",n){return new Promise(i=>{if(e.isFile)e.file(a=>{a.fullPath=t+a.name,a._webkitRelativePath=t+a.name,n.push(a),i(n)});else if(e.isDirectory){const a=e.createReader(),o=()=>{a.readEntries(l=>{if(l.length>0){const u=l.map(f=>i0(f,t+e.name+"/",n));Promise.all(u).then(o).catch(f=>{throw f})}else i(n)})};o()}})}function Mv(e){const t=e.createReader();let n=[];const i=async o=>{const l=[],u=async f=>new Promise((h,d)=>f.file(h,d));for(let f=0;f<o.length;f++)l.push(await u(o[f]));return l},a=()=>{t.readEntries(o=>{o.length?(n=n.concat(o),a()):i(n).then(async()=>{}).catch(l=>{throw l})})};return a(),n}function uE(e){return new Promise((t,n)=>{e.file(i=>{const a=new FileReader;a.onload=()=>t(a.result),a.onerror=()=>n(new Error("Failed to read file as data URL")),a.readAsDataURL(i)},i=>n(i))})}function Ev(e){e.stopPropagation(),e.preventDefault()}function Dv(e){e.stopPropagation(),e.preventDefault()}var fE=33984,hE=33986;function dE(e){const{gl:t,layer:n,isForceLinear:i=!1,isNearestInterpolation:a,is2DSliceShader:o}=e;let l=t.LINEAR;!i&&a&&(l=t.NEAREST),n===0?t.activeTexture(fE):t.activeTexture(hE),o?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,l),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,l)):(t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MIN_FILTER,l),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MAG_FILTER,l))}function xp(e,t,n,i){let a=n.slice(),o=i.slice();return e===1&&(a=t.slice()),e===2&&(a=t.slice(),o=n.slice()),{linesH:a,linesV:o}}function mE(e,t,n,i){let a,o;switch(e){case 0:a=t[0],o=t[1];break;case 1:a=t[0],o=t[2];break;case 2:a=t[1],o=t[2];break;default:return[n,i]}const l=a/o,u=n/i;let f,h;return l>u?(f=n,h=n/l):(h=i,f=i*l),[f,h]}var gE=33984,r0=33990,yp=33992;function kc(e,t){const n=-t*(Math.PI/180),i=(e-90)%360*(Math.PI/180),a=[Math.cos(n)*Math.cos(i),Math.cos(n)*Math.sin(i),Math.sin(n)],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return o<=0||(a[0]/=o,a[1]/=o,a[2]/=o),a}function a0(e){const{azimuth:t,elevation:n,obliqueRAS:i}=e,a=Ue();if(a[0]=-1,vc(a,a,Ji(270-n)),xc(a,a,Ji(t-180)),i){const o=lt(i);Tr(a,a,o)}return a}function Tv(e){const{azimuth:t,elevation:n,obliqueRAS:i}=e,a=ce(0,0,-1),o=a0({azimuth:t,elevation:n,obliqueRAS:i}),l=Wi(1,0,0,0,-1,0,0,0,-1),u=je();zg(u,a,l);const f=ed();dy(f,o);const h=ed();if(!my(h,f))return ce(0,0,1);const d=je();zg(d,u,h),bn(d,d);const m=5e-5;for(let p=0;p<3;p++)Math.abs(d[p])<m&&(d[p]=Math.sign(d[p])*m||m);return d}function wp(e){const{gl:t,hdr:n,genericVAO:i,unusedVAO:a,volumeTexture:o,paqdTexture:l,gradientOrder:u,blurShader:f,sobelBlurShader:h,sobelFirstOrderShader:d,sobelSecondOrderShader:m,rgbaTex:p}=e;let{gradientTexture:A}=e;t.bindVertexArray(i);const v=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,v),t.viewport(0,0,n.dims[1],n.dims[2]),t.disable(t.BLEND);const y=p(null,yp,n.dims,!0),w=u===2?h:f;w.use(t),t.activeTexture(gE),t.bindTexture(t.TEXTURE_3D,o),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MAG_FILTER,t.LINEAR);const C=.7;t.uniform1i(w.uniforms.intensityVol,0),t.uniform1f(w.uniforms.dX,C/n.dims[1]),t.uniform1f(w.uniforms.dY,C/n.dims[2]),t.uniform1f(w.uniforms.dZ,C/n.dims[3]);for(let M=0;M<n.dims[3]-1;M++){const R=1/n.dims[3]*(M+.5);t.uniform1f(w.uniforms.coordZ,R),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,y,0,M);const D=t.checkFramebufferStatus(t.FRAMEBUFFER);D!==t.FRAMEBUFFER_COMPLETE&&G.error("blur shader: ",D),t.drawArrays(t.TRIANGLE_STRIP,0,4)}const S=u===2?m:d;S.use(t),t.activeTexture(yp),t.bindTexture(t.TEXTURE_3D,y),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.uniform1i(S.uniforms.intensityVol,8);const E=.7;t.uniform1f(S.uniforms.dX,E/n.dims[1]),t.uniform1f(S.uniforms.dY,E/n.dims[2]),t.uniform1f(S.uniforms.dZ,E/n.dims[3]),u===2&&(t.uniform1f(S.uniforms.dX2,2*E/n.dims[1]),t.uniform1f(S.uniforms.dY2,2*E/n.dims[2]),t.uniform1f(S.uniforms.dZ2,2*E/n.dims[3])),t.uniform1f(S.uniforms.coordZ,.5),A!==null&&t.deleteTexture(A),A=p(A,r0,n.dims);for(let M=0;M<n.dims[3]-1;M++){const R=1/n.dims[3]*(M+.5);t.uniform1f(S.uniforms.coordZ,R),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,A,0,M);const D=t.checkFramebufferStatus(t.FRAMEBUFFER);D!==t.FRAMEBUFFER_COMPLETE&&G.error("sobel shader: ",D),t.drawArrays(t.TRIANGLE_STRIP,0,4)}return t.deleteFramebuffer(v),t.deleteTexture(y),t.bindFramebuffer(t.FRAMEBUFFER,null),t.activeTexture(33992),t.bindTexture(t.TEXTURE_3D,l),t.bindVertexArray(a),A}function pE(e){const{gl:t,gradientTexture:n,dims:i}=e;if(!n||!i)return null;const a=i[1],o=i[2],l=i[3],u=a*o*l,f=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,f);const h=new Float32Array(u*4);try{for(let d=0;d<l;d++){t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,n,0,d);const m=t.checkFramebufferStatus(t.FRAMEBUFFER);if(m!==t.FRAMEBUFFER_COMPLETE){console.warn("Framebuffer not complete for gradient texture reading, slice",d,"status:",m.toString(16));continue}try{const p=new Uint8Array(a*o*4);t.readPixels(0,0,a,o,t.RGBA,t.UNSIGNED_BYTE,p);const A=new Float32Array(a*o*4);for(let y=0;y<p.length;y++)A[y]=p[y]/127.5-1;const v=d*a*o*4;h.set(A,v)}catch(p){console.warn("Failed to read pixels for slice",d,":",p);const A=d*a*o*4,v=new Float32Array(a*o*4);h.set(v,A)}}}catch(d){return console.error("Error reading gradient texture:",d),null}finally{t.deleteFramebuffer(f),t.bindFramebuffer(t.FRAMEBUFFER,null)}return h}function AE(e){const{gl:t,data:n,dims:i,backDims:a,gradientTextureAmount:o,hdr:l,gradientGLFn:u}=e;let{gradientTexture:f}=e;if(n===null)return l&&o>0&&u&&u(l),{gradientTexture:f,useCustomGradientTexture:!1};if(!i&&!a)return console.warn("No dimensions provided and no background volume loaded"),{gradientTexture:f,useCustomGradientTexture:!1};const h=i||a,d=h[1],m=h[2],p=h[3],A=d*m*p*4;if(n.length!==A)return console.warn(`Custom gradient data size mismatch. Expected ${A}, got ${n.length}`),{gradientTexture:f,useCustomGradientTexture:!1};f!==null&&t.deleteTexture(f),f=t.createTexture(),t.activeTexture(r0),t.bindTexture(t.TEXTURE_3D,f),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.pixelStorei(t.UNPACK_ALIGNMENT,1);let v;if(n instanceof Float32Array){v=new Uint8Array(n.length);for(let y=0;y<n.length;y++){const w=Math.max(-1,Math.min(1,n[y]));v[y]=Math.round((w+1)*127.5)}}else v=n;return t.texStorage3D(t.TEXTURE_3D,1,t.RGBA8,d,m,p),t.texSubImage3D(t.TEXTURE_3D,0,0,0,0,d,m,p,t.RGBA,t.UNSIGNED_BYTE,v),{gradientTexture:f,useCustomGradientTexture:!0}}function vE(e){const{gl:t,mvpMatrix:n,azimuth:i,elevation:a,volumesLength:o,volumeObject3D:l,unusedVAO:u,renderShader:f,pickingImageShader:h,mouseDepthPicker:d,backgroundMasksOverlays:m,gradientTextureAmount:p,gradientTexture:A,drawBitmap:v,renderDrawAmbientOcclusion:y,drawOpacity:w,paqdUniforms:C,matRAS:S,crosshairPos:E,clipPlaneDepthAziElevs:M,isClipPlanesCutaway:R,obliqueRAS:D}=e;if(o===0)return;const T=Tv({azimuth:i,elevation:a,obliqueRAS:D}),F=l;if(F){t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.enable(t.CULL_FACE),t.cullFace(t.FRONT);let U=f;if(d&&(U=h),U.use(t),t.uniform1i(U.uniforms.backgroundMasksOverlays,m),p>0&&U.uniforms.normMtx&&A){t.activeTexture(r0),t.bindTexture(t.TEXTURE_3D,A);const I=a0({azimuth:i,elevation:a,obliqueRAS:D}),V=Ue();Kt(V,I);const N=Ue();_t(N,V),t.uniformMatrix4fv(U.uniforms.normMtx,!1,N)}if(v&&v.length>8?t.uniform2f(U.uniforms.renderDrawAmbientOcclusionXY,y,w):t.uniform2f(U.uniforms.renderDrawAmbientOcclusionXY,y,0),t.uniform4fv(U.uniforms.paqdUniforms,C),t.uniformMatrix4fv(U.uniforms.mvpMtx,!1,n),t.uniformMatrix4fv(U.uniforms.matRAS,!1,S),t.uniform3fv(U.uniforms.rayDir,T),p<0)t.uniform4fv(U.uniforms.clipPlane,[E[0],E[1],E[2],30]);else{const V=new Float32Array(24).fill(2);for(let N=0;N<M.length;N++){const Y=M[N],P=kc(Y[1]+180,Y[2]),Q=[P[0],P[1],P[2],Y[0]];V.set(Q,N*4)}t.uniform4fv(U.uniforms.clipPlanes,V)}t.uniform1f(U.uniforms.drawOpacity,1),t.uniform1i(U.uniforms.isClipCutaway,R?1:0),t.bindVertexArray(F.vao),t.drawElements(F.mode,F.indexCount,t.UNSIGNED_SHORT,0),t.bindVertexArray(u)}}var xE=33989;function yE(e){const{visible:t,opacity:n,indexCount:i}=e;return t&&n>0&&i>=3}function wE(e){const{meshShaderIndex:t,meshShaders:n,pickingMeshShader:i,mouseDepthPicker:a}=e;return a?i:n[t]?.shader??null}function bE(e){const{meshOpacity:t,globalAlpha:n}=e;return t*n}function CE(e){const{offsetPt0:t,fiberSides:n,fiberRadius:i}=e;return!!t&&(n<3||i<=0)}function SE(e){const{modelMtx:t,crosshairMM:n,is2D:i}=e,a=1e9,o=[n[0],n[1],n[2]];return i&&(Math.abs(t[2])+Math.abs(t[4])+Math.abs(t[9])>=2.95&&(o[1]=a,o[2]=a),Math.abs(t[0])+Math.abs(t[6])+Math.abs(t[9])>=2.95&&(o[0]=a,o[2]=a),Math.abs(t[0])+Math.abs(t[5])+Math.abs(t[10])>=2.95&&(o[0]=a,o[1]=a)),o}function ME(e){let t=Number(e);return Number.isFinite(t)||(t=1),t}function EE(e){const{gl:t,shader:n,modelMtx:i,sliceMM:a,meshThickness:o}=e;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.uniformMatrix4fv(n.uniforms.modelMtx,!1,i),t.uniform4fv(n.uniforms.sliceMM,[a[0],a[1],a[2],o])}function bp(e){const{gl:t,shader:n,mvpMtx:i,normMtx:a,opacity:o}=e;t.uniformMatrix4fv(n.uniforms.mvpMtx,!1,i),t.uniformMatrix4fv(n.uniforms.normMtx,!1,a),t.uniform1f(n.uniforms.opacity,o)}function DE(e){const{gl:t,matCapTexture:n}=e;t.activeTexture(xE),t.bindTexture(t.TEXTURE_2D,n)}function Cp(e){const{gl:t,mesh:n,unusedVAO:i}=e;t.bindVertexArray(n.vao),t.drawElements(t.TRIANGLES,n.indexCount,t.UNSIGNED_INT,0),t.bindVertexArray(i)}function TE(e){const{gl:t,mesh:n,unusedVAO:i}=e;t.bindVertexArray(n.vaoFiber),t.drawElements(t.LINE_STRIP,n.indexCount,t.UNSIGNED_INT,0),t.bindVertexArray(i)}function RE(e){const{gl:t}=e;t.enable(t.BLEND),t.depthMask(!1),t.depthFunc(t.ALWAYS)}function FE(e){e.depthMask(!0),e.depthFunc(e.LEQUAL),e.disable(e.BLEND)}function BE(e){e.depthMask(!0),e.disable(e.BLEND)}function UE(e){const{gl:t,meshes:n,isDepthTest:i,alpha:a,mvpMatrix:o,modelMatrix:l,normalMatrix:u,is2D:f,meshShaders:h,pickingMeshShader:d,fiberShader:m,mouseDepthPicker:p,matCapTexture:A,unusedVAO:v,meshXRay:y,meshThicknessOn2D:w,frac2mm:C,crosshairPos:S}=e;if(n.length<1)return;t.enable(t.DEPTH_TEST),i?t.depthFunc(t.LEQUAL):t.depthFunc(t.ALWAYS),t.cullFace(t.BACK),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA);let E=!1;for(const M of n){if(!yE({visible:M.visible,opacity:M.opacity,indexCount:M.indexCount}))continue;const R=bE({meshOpacity:M.opacity,globalAlpha:a}),D=wE({meshShaderIndex:M.meshShaderIndex,meshShaders:h,pickingMeshShader:d,mouseDepthPicker:p});if(D){if(D.use(t),D.isCrosscut){const T=C([S[0],S[1],S[2]]),F=SE({modelMtx:l,crosshairMM:T,is2D:f}),U=ME(w);EE({gl:t,shader:D,modelMtx:l,sliceMM:F,meshThickness:U})}else t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST);if(bp({gl:t,shader:D,mvpMtx:o,normMtx:u,opacity:R}),R>=1?(t.disable(t.BLEND),t.depthMask(!0)):(t.enable(t.BLEND),t.depthMask(!1)),CE({offsetPt0:M.offsetPt0,fiberSides:M.fiberSides,fiberRadius:M.fiberRadius})){E=!0;continue}D.isMatcap&&DE({gl:t,matCapTexture:A}),Cp({gl:t,mesh:M,unusedVAO:v})}}if(t.enable(t.CULL_FACE),y>0&&!E){RE({gl:t});for(const M of n){if(!M.visible||M.indexCount<3)continue;const R=h[M.meshShaderIndex]?.shader;R&&(R.use(t),bp({gl:t,shader:R,mvpMtx:o,normMtx:u,opacity:M.opacity*a*y}),Cp({gl:t,mesh:M,unusedVAO:v}))}FE(t)}if(E&&m){m.use(t),t.uniformMatrix4fv(m.uniforms.mvpMtx,!1,o),t.uniform1f(m.uniforms.opacity,a);for(const M of n)M.offsetPt0&&(M.fiberSides>=3&&M.fiberRadius>0||TE({gl:t,mesh:M,unusedVAO:v}))}BE(t)}function NE(e){const{canvasWidth:t,canvasHeight:n,leftTopWidthHeight:i,azimuth:a,elevation:o,furthestFromPivot:l,pivot3D:u,volScaleMultiplier:f,position:h}=e;let d=i;(d[2]===0||d[3]===0)&&(d=[0,0,t,n]);const m=d[2]/d[3];let p=l;const A=u,v=Ue();p=.8*p/f,m<1?yc(v,-p,p,-p/m,p/m,p*8,p*.01):yc(v,-p*m,p*m,-p,p,p*8,p*.01);const y=Ue();y[0]=-1;const w=ce(0,0,-p*1.8);Ba(y,y,w),h&&Ba(y,y,h),vc(y,y,Ji(270-o)),xc(y,y,Ji(a-180)),Ba(y,y,[-A[0],-A[1],-A[2]]);const C=Ue();Kt(C,y);const S=Ue();_t(S,C);const E=Ue();return Tr(E,v,y),{mvpMatrix:E,modelMatrix:y,normalMatrix:S}}function IE(e){const{sceneMin:t,sceneMax:n}=e,i=je();Rr(i,t,n),xy(i,i,.5);const a=je();return Je(a,n,t),{pivot3D:[i[0],i[1],i[2]],furthestFromPivot:$i(a)*.5,extentsMin:t,extentsMax:n}}function VE(e){const{volumes:t}=e;if(t.length<1)return 0;let n=0;for(let i=0;i<t.length;i++)n=Math.max(n,t[i].nFrame4D??0);return n}function OE(e){const{fontMets:t,scale:n,str:i}=e;if(!i)return 0;let a=0;const o=new TextEncoder().encode(i);for(let l=0;l<i.length;l++)a+=n*t.mets[o[l]].xadv;return a}function LE(e){const{fontMets:t,scale:n,str:i}=e;if(!i)return 0;const a=new Set(Array.from(i)),o=new TextEncoder().encode(Array.from(a).join("")),u=Object.values(t.mets).filter((f,h)=>o.includes(h)).reduce((f,h)=>f.lbwh[3]>h.lbwh[3]?f:h).lbwh[3];return n*u}function PE(e,t){const{xy:n,str:i,fontPx:a,canvasWidth:o}=e;let l=e.scale,u=a*l,f=t(u,i);f>o&&(l*=(o-2)/f,u=a*l,f=t(u,i));let h=n[0]-.5*t(u,i);return h=Math.max(h,1),h=Math.min(h,o-f-1),{x:h,y:n[1],scale:l}}function zE(e,t){const{xy:n,str:i,fontPx:a,canvasWidth:o}=e;let l=e.scale,u=a*l,f=t(u,i);f>o&&(l*=(o-2)/f,u=a*l,f=t(u,i));let h=n[0]-.5*t(u,i);h=Math.max(h,1),h=Math.min(h,o-f-1);const d=n[1]-u;return{x:h,y:d,scale:l}}function kE(e,t,n,i,a){const o=n*i,l=a(o,t),u=(e[0]+e[2])*.5-.5*l,f=(e[1]+e[3])*.5-.5*o;return{textX:u,textY:f,rectLTWH:[u-1,f-1,l+2,o+2]}}function GE(e,t){const n=e??t;return n&&n[0]+n[1]+n[2]>.8?[0,0,0,.5]:[1,1,1,.5]}function YE(e){const{fovMM:t,ltwh:n,rulerWidth:i,regionBounds:a}=e;if(n.length<4||t.length<1)return null;const l=100/t[0]*n[2],u=Math.max(Math.round(l*.1),2),f=Math.floor(n[0]+.5*n[2]-.5*l),h=Math.floor(n[1]+n[3]-u)+.5*i,d=Math.max(a.x,f),m=Math.min(a.x+a.w,f+l),p=Math.min(a.y+a.h,h);return m<=d?null:{startXYendXY:[d,p,m,p],pix1cm:u,clipped:d>f||m<f+l}}function HE(e){return e[0]+e[1]+e[2]<.8?[1,1,1,1]:[0,0,0,1]}function XE(e,t){const n=[],i=-.1*(e[0]-e[2]),a=e[1]-Math.floor(.5*t),o=Math.floor(a-.35*i),l=Math.floor(a-.7*i);for(let u=0;u<11;u++){let f=e[0]+u*i;f=Math.max(f,e[0]+.5*t),f=Math.min(f,e[2]-.5*t);const h=[f,a,f,u%5===0?l:o];n.push(h)}return n}function jE(e){const{startXYendXY:t,distance:n}=e,i=t[0],a=t[1],o=t[2],l=t[3],u=i-o,f=a-l;if(u===0&&f===0)return{origin:[o+n,l],terminus:[o+n,l]};const h=Math.sqrt(u*u+f*f),d=n*u/h,m=n*f/h;return{origin:[i+d,a+m],terminus:[o-d,l-m]}}function qE(e,t,n){const i=[],a=e[2]-e[0],o=e[3]-e[1],l=Math.sqrt(a*a+o*o);if(l===0)return i;const f=t*n/2,h=a/l,d=o/l,m=h*f,p=d*f;let A=Math.floor(l/f);l%f&&A++;let v=e[0],y=e[1];for(let w=0;w<A-1;w++)w%2===0&&i.push({startX:v,startY:y,endX:v+m,endY:y+p}),v+=m,y+=p;return i}function _E(e,t,n){let i=t,a=t*n;return a>e&&(i=e/n,a=e),{left:(e-a)/2,top:(t-i)/2,width:a,height:i}}function Rv(e,t){const n=t||e.target;if(!n)return;const i=n;if(typeof i.getBoundingClientRect!="function")return;const a=i.getBoundingClientRect();return{x:e.clientX-a.left,y:e.clientY-a.top}}function KE(e,t){const n=t||e.target;return Rv(e,n)}function QE(e){const{forceDevicePixelRatio:t}=e;return t===0?window.devicePixelRatio||1:t<0?1:t}function WE(e){const{canvas:t,isResizeCanvas:n,forceDevicePixelRatio:i}=e;if(!n)return{dpr:1,width:t.width,height:t.height,shouldDraw:!0};const a=QE({forceDevicePixelRatio:i});let o,l;const u=t.parentElement;return u&&"width"in u?(o=u.width*a,l=u.height*a):(o=t.offsetWidth*a,l=t.offsetHeight*a),{dpr:a,width:o,height:l,shouldDraw:!0}}function ZE(e){return()=>{requestAnimationFrame(()=>{e()})}}function JE(e){return new ResizeObserver(()=>{requestAnimationFrame(()=>{e()})})}function $E(e){return new MutationObserver(e)}function Sp(e){e.style.width="100%",e.style.height="100%",e.style.display="block"}function e8(e,t){return e!==null&&t!==null}function t8(e,t,n){n&&window.removeEventListener("resize",n),e&&e.disconnect(),t&&t.disconnect()}function n8(e){e&&e.abort()}var Fv={};It(Fv,{CENTER_MOUSE_BUTTON:()=>s0,LEFT_MOUSE_BUTTON:()=>Sc,RIGHT_MOUSE_BUTTON:()=>o0,calculateMouseDownPosition:()=>md,calculateMouseMovePosition:()=>Uv,calculateWindowingValues:()=>s8,createOffCanvasPosition:()=>Iv,createResetButtonState:()=>Nv,determineButtonState:()=>i8,getMouseButtonDragMode:()=>Bv,getNextAngleState:()=>o8,hasDragMoved:()=>gd,initializeDragState:()=>r8,isAngleMeasurementInProgress:()=>l8,isFunction:()=>Vv,isOffCanvas:()=>a8,shouldTrackDrag:()=>c8});var Sc=0,s0=1,o0=2;function Bv(e){const{button:t,shiftKey:n,ctrlKey:i,mouseConfig:a,dragMode:o,dragModePrimary:l}=e;return t===Sc?a?.leftButton?n&&a.leftButton.withShift!==void 0?a.leftButton.withShift:i&&a.leftButton.withCtrl!==void 0?a.leftButton.withCtrl:a.leftButton.primary:i?8:l:t===o0?a?.rightButton!==void 0?a.rightButton:o:t===s0&&a?.centerButton!==void 0?a.centerButton:o}function i8(e){const{button:t,shiftKey:n}=e;return t===Sc&&n?{mouseButtonCenterDown:!0}:t===Sc?{mouseButtonLeftDown:!0}:t===o0?{mouseButtonRightDown:!0}:t===s0?{mouseButtonCenterDown:!0}:{}}function md(e){const{x:t,y:n,dpr:i}=e,a=t*i,o=n*i;return{scaledX:a,scaledY:o,mousePos:[a,o]}}function Uv(e){const{x:t,y:n,dpr:i,currentMousePos:a}=e,o=t*i,l=n*i,u=(o-a[0])/i,f=(l-a[1])/i;return{scaledX:o,scaledY:l,dx:u,dy:f,mousePos:[o,l]}}function r8(e){const{posX:t,posY:n,pan2Dxyzmm:i,clipPlaneDepthAziElev:a}=e;return{dragStart:[t,n],pan2DxyzmmAtMouseDown:hi(i),isDragging:!0,dragClipPlaneStartDepthAziElev:[...a]}}function Nv(){return{mousedown:!1,mouseButtonLeftDown:!1,mouseButtonCenterDown:!1,mouseButtonRightDown:!1}}function gd(e,t){return e[0]!==t[0]||e[1]!==t[1]}function a8(e){return e[0]<0||e[1]<0}function Iv(){return[-1,-1]}function s8(e){const{currentX:t,currentY:n,windowX:i,windowY:a,calMin:o,calMax:l,robustMin:u,robustMax:f,windowRangeMultiplier:h}=e,m=(f-u)*h/100;let p=o,A=l;return n<a?(p=o-m,A=l-m):n>a&&(p=o+m,A=l+m),t>i?(p=p-m,A=A+m):t<i&&(p=p+m,A=A-m),{newCalMin:p,newCalMax:A,newWindowX:t,newWindowY:n}}function o8(e){const{currentState:t,dragMode:n}=e;if(n!==7)return t;switch(t){case"none":return"drawing_first_line";case"drawing_first_line":return"drawing_second_line";case"drawing_second_line":return"complete";case"complete":return"drawing_first_line";default:return"none"}}function l8(e){return e==="drawing_first_line"||e==="drawing_second_line"}function c8(e){return e!==8&&e!==9&&e!==0}function Vv(e){return Object.prototype.toString.call(e).indexOf("Function")>-1}function u8(e){const{isDoubleTouch:t,touchConfig:n,dragMode:i,dragModePrimary:a}=e;return t?n?.doubleTouch??i:n?.singleTouch??a}function Nh(e){const{touch:t,canvasRect:n}=e;return{x:t.clientX-n.left,y:t.clientY-n.top}}function f8(e){const{currentTime:t,lastTouchTime:n,doubleTouchTimeout:i}=e,a=t-n;return{isDoubleTap:a<i&&a>0,timeSinceTouch:a}}function h8(e){const{currentTime:t,touchCount:n,isTouchdown:i}=e;return{touchdown:!0,currentTouchTime:t,multiTouchGesture:i&&n>=2}}function d8(){return{touchdown:!1,lastTwoTouchDistance:0,multiTouchGesture:!1}}function m8(e){return{doubleTouch:!1,lastTouchTime:e}}function g8(e){return{doubleTouch:!0,lastTouchTime:e}}function p8(e){const{touch1:t,touch2:n,lastTwoTouchDistance:i}=e,a=Math.hypot(t.pageX-n.pageX,t.pageY-n.pageY);let o;i===0?o=0:a<i?o=-.01:o=.01;const l={x:(t.clientX+n.clientX)/2,y:(t.clientY+n.clientY)/2};return{distance:a,scrollDelta:o,centerPosition:l}}function A8(e,t){return e===2&&t===2}function v8(e){const{touch:t,canvasRect:n}=e;return{x:t.clientX-n.left,y:t.clientY-n.top,pageX:t.pageX,pageY:t.pageY}}function x8(e){const{touchdown:t,multiTouchGesture:n}=e;return t&&!n}function Mp(e,t){return e&&t<2}function y8(e){const{touch:t,canvasRect:n}=e;return[t.clientX-n.left,t.clientY-n.top]}function w8(e){const{doubleTouch:t,isDragging:n}=e;return t&&n}function b8(e){return e===null}var C8=[[2,0,0],[0,270,0],[0,90,0],[0,0,0],[0,180,0],[0,0,-90],[0,0,90]];function S8(e){const{code:t,ctrlKey:n,shiftKey:i,sliceType:a}=e,o=a===4;return t==="KeyH"&&o?{action:"render_azimuth_decrease"}:t==="KeyL"&&o?{action:"render_azimuth_increase"}:t==="KeyJ"&&o?{action:"render_elevation_increase"}:t==="KeyK"&&o?{action:"render_elevation_decrease"}:t==="KeyH"&&!o?{action:"crosshair_left"}:t==="KeyL"&&!o?{action:"crosshair_right"}:t==="KeyU"&&!o&&n?{action:"crosshair_forward"}:t==="KeyD"&&!o&&n?{action:"crosshair_backward"}:t==="KeyJ"&&!o?{action:"crosshair_down"}:t==="KeyK"&&!o?{action:"crosshair_up"}:t==="KeyM"&&!o?{action:"cycle_drag_mode"}:t==="ArrowLeft"?{action:"frame_previous"}:t==="ArrowRight"?{action:"frame_next"}:t==="Slash"&&i?{action:"show_version"}:{action:"none"}}function M8(e){const t=e+1;return t>=4?0:t}function E8(e){const{currentTime:t,lastCalledTime:n,debounceTime:i}=e;return t-n>i}function D8(e){const{currentIndex:t,clipPlanesLength:n}=e,i=n||6;let a;return t==null?a=0:a=(t+1)%i,{newIndex:a,defaultClipPlane:[0,0,0,2],defaultDepthAziElev:[2,0,0]}}function T8(e){const{currentClipPlaneIndex:t}=e,n=(t+1)%7,i=C8[n];return{newIndex:n,depthAziElev:i}}function R8(e){const{currentSliceType:t,totalSliceTypes:n}=e;return(t+1)%n}function Ih(e,t){return e===t}function F8(e){const{deltaY:t,invertScrollDirection:n}=e;let i=t<0?-.01:.01;return n&&(i=-i),i}function B8(e){const{dragMode:t,dragStart:n,dragEnd:i}=e;if(t!==6)return!1;const a=n.reduce((l,u)=>l+u,0),o=i.reduce((l,u)=>l+u,0);return a>0&&o>0}function U8(e){const{dragStart:t,dragEnd:n,delta:i}=e,a=[...t],o=[...n];return t[0]<n[0]?(a[0]=t[0]-i,o[0]=n[0]+i):(a[0]=t[0]+i,o[0]=n[0]-i),t[1]<n[1]?(a[1]=t[1]-i,o[1]=n[1]+i):(a[1]=t[1]+i,o[1]=n[1]-i),{newDragStart:a,newDragEnd:o}}function N8(e){return e>0?1:-1}function I8(e){const{currentZoom:t,scrollAmount:n}=e,i=n<0?1:-1;let a=t*(1+10*(.01*i));a=Math.round(a*10)/10;const o=t-a;return{newZoom:a,zoomChange:o}}function V8(e){const{currentPan:t,zoomChange:n,crosshairMM:i}=e;return[t[0]+n*i[0],t[1]+n*i[1],t[2]+n*i[2]]}function O8(e){const{currentPercent:t,scrollAmount:n}=e;let i=t;return n<0?(i-=.01,i=Math.max(i,0)):(i+=.01,i=Math.min(i,1)),i}function L8(e){const{thumbnailVisible:t,mosaicStringLength:n,eventInBounds:i,hasBounds:a}=e;return t||n>0?{shouldProcess:!1,showBoundsBorder:!1}:i?{shouldProcess:!0,showBoundsBorder:a}:{shouldProcess:!1,showBoundsBorder:!1}}function P8(e){const{dragMode:t,isInRenderTile:n}=e;return t===3&&!n}function z8(e,t,n){return[e-n.left,t-n.top]}var k8={none:0,contrast:1,measurement:2,angle:7,pan:3,slicer3D:4,callbackOnly:5,roiSelection:6,crosshair:8,windowing:9};function G8(e){if(typeof e=="string"){const t=k8[e];return t!==void 0?t:null}return e}function Y8(e){const{activeDragMode:t,fallbackDragMode:n}=e;return t!==null?t:n}function H8(){return{activeDragMode:null,activeDragButton:null}}function X8(e,t){return{activeDragMode:e,activeDragButton:t}}function j8(e){if(e.length>2)throw new Error("array must not contain more than two values");return[Math.floor(Math.min(e[0],e[1])),Math.floor(Math.max(e[0],e[1]))]}function q8(e,t){const n=e[2],i=e[3],a=e[0]-n,o=e[1]-i,l=t[2]-n,u=t[3]-i,f=a*l+o*u,h=Math.sqrt(a*a+o*o),d=Math.sqrt(l*l+u*u);if(h===0||d===0)return 0;const m=Math.max(-1,Math.min(1,f/(h*d)));return Math.acos(m)*(180/Math.PI)}function _8(){return{angleState:"none",angleFirstLine:[0,0,0,0]}}function Ep(e,t,n){return[e*n,t*n]}function K8(e){const{startMM:t,endMM:n,pan2DxyzmmAtMouseDown:i}=e,a=mi();Ey(a,n,t);const o=i[3];return{pan2Dxyzmm:[i[0]+o*a[0],i[1]+o*a[1],i[2]+o*a[2],o]}}function Q8(e){const{startY:t,endY:n,pan2DxyzmmAtMouseDown:i,currentPan2Dxyzmm:a,crosshairMM:o,yoke3Dto2DZoom:l}=e;let u=i[3];const f=n-t;u+=f*.01,u=Math.max(u,.1),u=Math.min(u,10);const d=a[3]-u,m={zoom:u,pan2Dxyzmm:[a[0]+d*o[0],a[1]+d*o[1],a[2]+d*o[2],u]};return l&&(m.volScaleMultiplier=u),m}function W8(e){const{x:t,y:n,windowX:i,windowY:a,currentCalMin:o,currentCalMax:l,globalMin:u,globalMax:f}=e;let h=o,d=l;return n<a?(h+=1,d+=1):n>a&&(h-=1,d-=1),t>i?(h-=1,d+=1):t<i&&(h+=1,d-=1),d-h<1&&(d=h+1),h<u&&(h=u),d>f&&(d=f),h>d&&(h=d-1),{calMin:h,calMax:d,windowX:t,windowY:n}}function Z8(e){const{xrange:t,yrange:n,zrange:i,dims:a,img:o}=e;let l=-Number.MAX_VALUE,u=Number.MAX_VALUE;const f=a[1],h=a[2];for(let d=i[0];d<i[1];d++){const m=d*f*h;for(let p=n[0];p<n[1];p++){const A=p*f;for(let v=t[0];v<t[1];v++){const y=m+A+v;u>o[y]&&(u=o[y]),l<o[y]&&(l=o[y])}}}return{lo:u,hi:l,hasVariation:u<l}}function J8(e,t,n,i,a){const o=[...n],l=[...i],u=[...a];return e[0]-t[0]===0?o[1]=e[0]+1:e[1]-t[1]===0?l[1]=e[1]+1:e[2]-t[2]===0&&(u[1]=e[2]+1),{xrange:o,yrange:l,zrange:u}}function $8(e){return e===7}function Dp(e){return t0.includes(e)?"mesh":e==="NVD"?"document":"volume"}function eD(e){return e.lastIndexOf("BRIK")!==-1?"brik":e.toUpperCase().lastIndexOf("IMG")!==-1?"img":null}function tD(e,t){const n=e.name.lastIndexOf("HEAD");if(n===-1)return null;const i=e.name.substring(0,n);for(const a of Array.from(t)){const o=a.webkitGetAsEntry();if(!o)continue;const l=o.name.lastIndexOf("BRIK");if(l===-1)continue;const u=o.name.substring(0,l);if(i===u)return o}return null}function nD(e,t){const i=e.name.toUpperCase().lastIndexOf("HDR");if(i===-1)return null;const a=e.name.substring(0,i);for(const o of Array.from(t)){const l=o.webkitGetAsEntry();if(!l)continue;const f=l.name.toUpperCase().lastIndexOf("IMG");if(f===-1)continue;const h=l.name.substring(0,f);if(a.toUpperCase()===h.toUpperCase())return l}return null}function iD(e,t){const n=tD(e,t);return n||nD(e,t)}function Tp(e){return new Promise((t,n)=>{e.file(t,n)})}function rD(e){const t=[];for(const n of Array.from(e)){const i=n.webkitGetAsEntry();if(!i){G.warn("could not get entry from dropped item");continue}if(i.isFile){if(eD(i.name))continue;const a=iD(i,e);t.push({entry:i,pairedEntry:a})}}return t}function aD(e){const t=[];for(const n of Array.from(e)){const i=n.webkitGetAsEntry();i?.isDirectory&&t.push(i)}return t}function sD(e){return e.getData("text/uri-list")||null}function oD(e){return e.items.length>0}function l0(e){const{x:t,y:n,screenSlices:i}=e;for(let a=0;a<i.length;a++){const o=i[a].leftTopWidthHeight;if(t>o[0]&&n>o[1]&&t<o[0]+o[2]&&n<o[1]+o[3])return a}return-1}function lD(e){const{x:t,y:n,screenSlices:i}=e,a=l0({x:t,y:n,screenSlices:i});return a>=0&&i[a].axCorSag===4?a:-1}function cD(e){const{x:t,y:n,graph:i,volumesLength:a,firstVolumeFrameCount:o}=e;if(i.opacity<=0||a<1||o<1||!i.plotLTWH||i.plotLTWH[2]<1||i.plotLTWH[3]<1)return!1;const l=[(t-i.LTWH[0])/i.LTWH[2],(n-i.LTWH[1])/i.LTWH[3]];return l[0]>0&&l[1]>0&&l[0]<=1&&l[1]<=1}function uD(e){const{x:t,y:n,dpr:i,canvasHeight:a,boundsRegion:o}=e,[l,u,f,h]=o,d=t*i,m=a-n*i;return d>=l&&d<=l+f&&m>=u&&m<=u+h}function Mc(e){const{sliceType:t,crosshairPos:n}=e;return t===0?n[2]:t===1?n[1]:t===2?n[0]:0}function fD(e){const{dragStart:t,screenSlices:n,crosshairPos:i,currentSliceType:a,canvasPos2frac:o}=e,l=l0({x:t[0],y:t[1],screenSlices:n});if(l>=0&&l<n.length){const f=n[l].axCorSag,h=Mc({sliceType:f,crosshairPos:i});return{sliceIndex:l,sliceType:f,slicePosition:h}}let u=0;return a===0?u=i[2]:a===1?u=i[1]:a===2?u=i[0]:a===3&&o([t[0],t[1]])[0]>=0&&(u=i[2]),{sliceIndex:-1,sliceType:a,slicePosition:u}}function hD(e){const{sliceType:t,slicePosition:n,currentSliceTypeOpt:i,screenSlices:a,crosshairPos:o}=e;if(i===3){if(t>2)return!1;for(let h=0;h<a.length;h++)if(a[h].axCorSag===t){const d=Mc({sliceType:t,crosshairPos:o});if(Math.abs(d-n)<.001)return!0}return!1}if(t!==i)return!1;const l=Mc({sliceType:t,crosshairPos:o});return Math.abs(l-n)<.001}function dD(e){const{posChange:t,volumesLength:n,clipPlaneDepthAziElevs:i,activeClipPlaneIndex:a,volScaleMultiplier:o}=e;if(t===0)return{action:"none"};if(n>0&&i[a][0]<1.8){const u=i[a][0];let f=u;return t>0&&(f=Math.min(1.5,u+.025)),t<0&&(f=Math.max(-1.5,u-.025)),f!==u?{action:"clipPlane",newClipPlaneDepth:f}:{action:"none"}}let l=o;return t>0&&(l=Math.min(2,o*1.1)),t<0&&(l=Math.max(.5,o*.9)),{action:"zoom",newVolScaleMultiplier:l}}function mD(e){const{posChange:t,currentZoom:n,yoke3Dto2DZoom:i,crosshairMM:a}=e;let o=n*(1+10*t);o=Math.round(o*10)/10;const l=n-o;return{newZoom:o,zoomChange:l,panOffsetX:l*a[0],panOffsetY:l*a[1],panOffsetZ:l*a[2],newVolScaleMultiplier:i?o:void 0}}function gD(e){const{x:t,y:n,z:i,currentVox:a,dimsRAS:o}=e,l=wn(a),u=l[2];return l[0]+=t,l[1]+=n,l[2]+=i,l[0]=Math.max(0,Math.min(l[0],o[1]-1)),l[1]=Math.max(0,Math.min(l[1],o[2]-1)),l[2]=Math.max(0,Math.min(l[2],o[3]-1)),{newVox:l,zChanged:u!==l[2]}}function pD(e){const{scrollRequiresFocus:t,canvasHasFocus:n}=e;return!t||n}function AD(e){const{posChange:t,dragMode:n,isInRenderTile:i}=e;return t!==0&&n===3&&!i}function vD(e){const{layout:t}=e;for(let n=0;n<t.length;n++){const[i,a,o,l]=t[n].position,u=i+o,f=a+l;for(let h=n+1;h<t.length;h++){const[d,m,p,A]=t[h].position,v=d+p,y=m+A,w=i<v&&u>d,C=a<y&&f>m;if(w&&C)return{valid:!1,error:`Custom layout is invalid. Tile ${n} overlaps with tile ${h}.`,overlappingTiles:[n,h]}}}return{valid:!0}}function xD(e){const{bounds:t,canvasWidth:n,canvasHeight:i,cssWidth:a,cssHeight:o,dpr:l}=e;if(!t)return[0,0,n,i];const[[u,f],[h,d]]=t,m=Math.floor(u*a*l),p=Math.ceil((h-u)*a*l);let A=Math.floor((1-d)*o*l),v=Math.ceil((d-f)*o*l);return A<0&&(v+=A,A=0),A+v>i&&(v=i-A),[m,A,p,v]}function yD(e){const{bounds:t,rectWidth:n,rectHeight:i}=e;if(!t)return[0,0,n,i];const[[a,o],[l,u]]=t,f=Math.round(a*n),h=Math.round((l-a)*n),d=Math.round(o*i),m=Math.round(u*i),p=m-d,A=i-m;return[f,A,h,p]}function wD(e){const{canvasHeight:t,bounds:n,colorbarHeight:i}=e;let a=t;if(n){const[[,o],[,l]]=n,u=Math.round(o*t);a=Math.round(l*t)-u}return a-i}function bD(e){const{canvasWidth:t,bounds:n,legendPanelWidth:i}=e;let a=t;if(n){const[[o],[l]]=n;a=Math.round((l-o)*t)}return a-i}function CD(e){const{forceVox:t,getScreenFieldOfViewMM:n,getScreenFieldOfViewVox:i,backDims:a}=e;let o=n(0);t&&(o=i(0));const l=Math.max(o[0],Math.max(o[1],o[2])),u=[o[0]/l,o[1]/l,o[2]/l],f=[a[1],a[2],a[3]];return{volScale:u,vox:f,longestAxis:l,dimsMM:o}}function SD(e){const{axCorSag:t,sliceFrac:n,frac2mm:i,swizzleVec3MM:a}=e;let o=2;t===1&&(o=1),t===2&&(o=0);const l=[0,0,0],u=[1,1,0],f=[1,0,1];l[o]=n,u[o]=n,f[o]=n;const h=i(l),d=i(u),m=i(f),p=a(ce(h[0],h[1],h[2]),t),A=a(ce(d[0],d[1],d[2]),t),v=a(ce(m[0],m[1],m[2]),t),y=(A[0]-p[0])*(v[1]-p[1])-(v[0]-p[0])*(A[1]-p[1]);let w=(A[0]-p[0])*(v[2]-p[2])-(v[0]-p[0])*(A[2]-p[2]);w/=y;let C=(A[1]-p[1])*(v[2]-p[2])-(v[1]-p[1])*(A[2]-p[2]);C/=y;const S=[0,0,0,0,0];return S[0]=p[0],S[1]=p[1],S[2]=p[2],S[3]=C,S[4]=w,S}function MD(e){const{labels:t,fontPx:n,textHeight:i}=e;if(t.length===0)return 0;const a=t.length===1?t[0].style.bulletScale??1:t.reduce((f,h)=>(f.style.bulletScale??1)>(h.style.bulletScale??1)?f:h).style.bulletScale??1,o=t.length===1?t[0]:t.reduce((f,h)=>{const d=n*f.style.textScale,m=n*h.style.textScale;return i(d,f.text)>i(m,h.text)?f:h}),l=n*o.style.textScale;let u=i(l,o.text)*a;return u+=l,u}function ED(e){const{labels:t,showLegend:n,fontPx:i,canvasWidth:a,textWidth:o,getBulletMarginWidth:l}=e;if(!n||t.length===0)return 0;const f=i*1;let h=0;const d=t.reduce((v,y)=>{const w=i*v.style.textScale,C=i*y.style.textScale;return o(w,v.text)>o(C,y.text)?v:y}),m=i*d.style.textScale,p=o(m,d.text),A=l();return p&&(h=A+p,h+=f*2),h>=a?0:h}function DD(e){const{labels:t,fontPx:n,panelScale:i,textHeight:a}=e;let o=0;const l=n;for(const u of t){const f=n*u.style.textScale*i,h=a(f,u.text);o+=h}return o&&(o+=l/2*(t.length+1)*i),o}function TD(e){const{fontPx:t,boundsRegion:n,colorbarWidth:i}=e,a=3*t;if(a<0)return{leftTopWidthHeight:[0,0,0,0],colorbarHeight:0};const[o,l,u,f]=n,d=(i>0&&i<=1?i:1)*u;return{leftTopWidthHeight:[o+(u-d)/2,l+f-a,d,a],colorbarHeight:a+1}}function RD(e){const{x:t,y:n,boundsRegion:i}=e,[a,o,l,u]=i;return t>=a&&t<=a+l&&n>=o&&n<=o+u}function FD(e){const{mouseX:t,mouseY:n,boundsRegion:i}=e;if(t<0||n<0)return!1;const[a,o,l,u]=i;return t>=a&&t<=a+l&&n>=o&&n<=o+u}function BD(e){let t=e%360;return t<0&&(t+=360),t}function UD(e){const{currentAzimuth:t,currentElevation:n,deltaX:i,deltaY:a}=e,o=BD(t+i),l=n+a;return{azimuth:o,elevation:l}}function ND(e){const{dx:t,dy:n,threshold:i=1}=e;return Math.abs(t)>=i||Math.abs(n)>=i}var ID=[0,0,0,2],VD=[2,0,0],OD=1.8;function LD(e){const{depth:t,azimuth:n,elevation:i}=e,a=kc(n+180,i);return[a[0],a[1],a[2],t]}function PD(e){const{depth:t,azimuth:n,elevation:i}=e,a=kc(n,i);return[a[0],a[1],a[2],-t]}function zD(e){const{startDepthAziElev:t,dragDeltaX:n,dragDeltaY:i}=e,a=[t[0],(t[1]-n)%360,t[2]+i],o=a[1]!==t[1]||a[2]!==t[2];return{depthAziElev:a,changed:o}}function kD(e){const{index:t}=e,n=e.clipPlanes?[...e.clipPlanes]:[],i=e.clipPlaneDepthAziElevs?[...e.clipPlaneDepthAziElevs]:[];for(;n.length<=t;)n.push([...ID]);for(;i.length<=t;)i.push([...VD]);return{clipPlanes:n,clipPlaneDepthAziElevs:i}}function GD(e,t=OD){return e<t}function YD(e){const{depthAziElevs:t}=e,n=[],i=[];for(const a of t){const o=PD({depth:a[0],azimuth:a[1],elevation:a[2]});n.push(o),i.push([...a])}return{clipPlanes:n,clipPlaneDepthAziElevs:i}}function HD(e){const{isDragging:t,activeClipPlaneDepth:n,dragStartTileIndex:i}=e;return t&&GD(n)&&i>=0}function XD(e){const{index:t,depthAzimuthElevation:n}=e,{clipPlanes:i,clipPlaneDepthAziElevs:a}=kD({clipPlanes:e.clipPlanes,clipPlaneDepthAziElevs:e.clipPlaneDepthAziElevs,index:t}),o=LD({depth:n[0],azimuth:n[1],elevation:n[2]});return i[t]=o,a[t]=[...n],{clipPlanes:i,clipPlaneDepthAziElevs:a,clipPlane:o}}function jD(e){return!!e&&e.length>0}function qD(e){const t=e.length;let n=0;const i=new Uint8Array(t+Math.ceil(.01*t)),a=new Int8Array(i.buffer);let o=0;for(;n<t;){let l=e[n];n++;let u=1;for(;u<129&&n<t&&e[n]===l;)n++,u++;if(u>1){a[o]=-u+1,o++,i[o]=l,o++;continue}for(;n<t&&!(u>127||n+2<t&&l!==e[n]&&e[n+2]===e[n]&&e[n+1]===e[n]);)l=e[n],n++,u++;i[o]=u-1,o++;for(let f=0;f<u;f++)i[o]=e[n-u+f],o++}return G.debug("PackBits "+t+" -> "+o+" bytes (x"+t/o+")"),i.slice(0,o)}function c0(e,t){const n=new Uint8Array(e.buffer),i=new Int8Array(n.buffer);let a=0;const o=new Uint8Array(t);let l=0;for(;a<n.length;){const u=i[a];if(a++,u<0){const f=i[a];a++;for(let h=0;h<1-u;h++)o[l]=f,l++}else for(let f=0;f<u+1;f++)o[l]=i[a],a++,l++}return o}var _D=({drawUndoBitmaps:e,currentDrawUndoBitmap:t,drawBitmap:n})=>{const i=e.length;if(i<1){G.debug("undo bitmaps not loaded");return}if(t--,t<0&&(t=i-1),t>=i&&(t=0),e[t].length<2){G.debug("drawUndo is misbehaving");return}return n=c0(e[t],n.length),{drawBitmap:n,currentDrawUndoBitmap:t}};function KD(e,t,n){const{dimX:i,dimY:a,dimZ:o}=n;let l;if(e===0)l=o;else if(e===1)l=a;else if(e===2)l=i;else return null;let u=-1,f=-1;for(let h=0;h<l;h++){let d=!1;if(e===0){const m=h*i*a;for(let p=0;p<i*a;p++)if(t[m+p]>0){d=!0;break}}else if(e===1)for(let m=0;m<o;m++){for(let p=0;p<i;p++){const A=p+h*i+m*i*a;if(t[A]>0){d=!0;break}}if(d)break}else if(e===2)for(let m=0;m<o;m++){for(let p=0;p<a;p++){const A=h+p*i+m*i*a;if(t[A]>0){d=!0;break}}if(d)break}d&&(u===-1&&(u=h),f=h)}return u===-1||f===-1?null:{first:u,last:f}}function Vh(e,t,n,i){const{dimX:a,dimY:o,dimZ:l}=i;let u;if(t===0){u=new Float32Array(a*o);const f=e*a*o;for(let h=0;h<a*o;h++)u[h]=n[f+h]}else if(t===1){u=new Float32Array(a*l);for(let f=0;f<l;f++)for(let h=0;h<a;h++){const d=h+e*a+f*a*o,m=h+f*a;u[m]=n[d]}}else if(t===2){u=new Float32Array(o*l);for(let f=0;f<l;f++)for(let h=0;h<o;h++){const d=e+h*a+f*a*o,m=h+f*o;u[m]=n[d]}}else throw new Error("Invalid slice type");return u}function Oh(e,t,n,i,a){const{dimX:o,dimY:l,dimZ:u}=i;let f;if(t===0){f=new Float32Array(o*l);const h=e*o*l;for(let d=0;d<o*l;d++)f[d]=n[h+d]/a}else if(t===1){f=new Float32Array(o*u);for(let h=0;h<u;h++)for(let d=0;d<o;d++){const m=d+e*o+h*o*l,p=d+h*o;f[p]=n[m]/a}}else if(t===2){f=new Float32Array(l*u);for(let h=0;h<u;h++)for(let d=0;d<l;d++){const m=e+d*o+h*o*l,p=d+h*l;f[p]=n[m]/a}}else throw new Error("Invalid slice type");return f}function QD(e,t,n,i,a,o,l){const{dimX:u,dimY:f,dimZ:h}=a;if(n===0){const d=t*u*f;for(let m=0;m<e.length;m++)e[m]>=o&&(i[d+m]=l)}else if(n===1)for(let d=0;d<h;d++)for(let m=0;m<u;m++){const p=m+d*u,A=m+t*u+d*u*f;e[p]>=o&&(i[A]=l)}else if(n===2)for(let d=0;d<h;d++)for(let m=0;m<f;m++){const p=m+d*f,A=t+m*u+d*u*f;e[p]>=o&&(i[A]=l)}else throw new Error("Invalid slice type")}function Rp(e,t,n){if(t<3||n<3)return;const i=new Float32Array(e.length);for(let a=0;a<n;a++)for(let o=0;o<t;o++){const l=o+a*t;o===0||o===t-1?i[l]=e[l]:i[l]=(e[l-1]+2*e[l]+e[l+1])*.25}for(let a=0;a<n;a++)for(let o=0;o<t;o++){const l=o+a*t;a===0||a===n-1?e[l]=i[l]:e[l]=(i[l-t]+2*i[l]+i[l+t])*.25}}function WD(e,t,n,i){const a=Math.abs(n-e),o=Math.abs(n-t),l=Math.exp(-a*a/(2*i*i)),u=Math.exp(-o*o/(2*i*i)),f=l+u;return f<1e-6?.5:l/f}function ZD(e,t,n,i,a,o){const l=(n-i)/(a-i),u=1-l;for(let f=0;f<e.length;f++)o[f]=e[f]*u+t[f]*l}function JD(e,t,n,i,a,o,l,u,f,h){const d=(n-i)/(a-i),m=1-d;for(let p=0;p<e.length;p++)if(e[p]>0||t[p]>0){const A=WD(u[p],f[p],h[p],l.intensitySigma),v=l.intensityWeight,y=v*A+(1-v)*m,w=1-y;o[p]=e[p]*y+t[p]*w}else o[p]=e[p]*m+t[p]*d}function $D(e,t,n,i,a,o,l,u){const{dimX:f,dimY:h,dimZ:d}=t,m=l.sliceType??0;let p,A,v;if(m===0)p=f,A=h,v=d-1;else if(m===1)p=f,A=d,v=h-1;else if(m===2)p=h,A=d,v=f-1;else throw new Error("Invalid slice type. Must be AXIAL, CORONAL, or SAGITTAL");const y={intensityWeight:l.intensityWeight??.7,binaryThreshold:l.binaryThreshold??.375,intensitySigma:l.intensitySigma??.1,applySmoothingToSlices:l.applySmoothingToSlices??!0,useIntensityGuided:l.useIntensityGuided??!0};if(a!==void 0&&o!==void 0){if(a>=o)throw new Error("Low slice index must be less than high slice index");if(a<0||o>v)throw new Error(`Slice indices out of bounds [0, ${v}]`)}const w=new Map;for(let C=0;C<=v;C++){const S=Vh(C,m,e,t);for(let E=0;E<S.length;E++){const M=S[E];if(M>0)if(!w.has(M))w.set(M,{min:C,max:C});else{const R=w.get(M);R.min=Math.min(R.min,C),R.max=Math.max(R.max,C)}}}for(const[C,S]of w){const E=a!==void 0?Math.max(a,S.min):S.min,M=o!==void 0?Math.min(o,S.max):S.max;if(E>=M||M-E<2)continue;const R=Vh(E,m,e,t),D=Vh(M,m,e,t),T=new Float32Array(R.length),F=new Float32Array(D.length);for(let U=0;U<R.length;U++)T[U]=R[U]===C?1:0,F[U]=D[U]===C?1:0;y.applySmoothingToSlices&&(Rp(T,p,A),Rp(F,p,A));for(let U=E+1;U<M;U++){const I=new Float32Array(p*A);if(y.useIntensityGuided&&n){const V=Oh(E,m,n,t,i),N=Oh(M,m,n,t,i),Y=Oh(U,m,n,t,i);JD(T,F,U,E,M,I,y,V,N,Y)}else ZD(T,F,U,E,M,I);QD(I,U,m,e,t,y.binaryThreshold,C)}}u()}function eT(e,t){const n=[...e],i=t;if(!n||n.length<1)return{drawUndoBitmaps:n,currentDrawUndoBitmap:i};for(let a=n.length-1;a>=0;a--)n[a]=new Uint8Array;return{drawUndoBitmaps:n,currentDrawUndoBitmap:i}}function tT(e){const{drawBitmap:t,drawUndoBitmaps:n,currentDrawUndoBitmap:i,maxDrawUndoBitmaps:a,drawFillOverwrites:o}=e;if(!t||t.length<1)return G.debug("addUndoBitmap error: No drawing open"),{drawBitmap:t,drawUndoBitmaps:n,currentDrawUndoBitmap:i,needsRefresh:!1};const l=[...n];let u=t,f=!1;if(!o&&l.length>0){const d=t.length,m=c0(l[i],d);u=new Uint8Array(t);for(let p=0;p<d;p++)m[p]>0&&(u[p]=m[p]);f=!0}let h=i+1;return h>=a&&(h=0),l[h]=qD(u),{drawBitmap:u,drawUndoBitmaps:l,currentDrawUndoBitmap:h,needsRefresh:f}}function Lh(e,t,n){const i=new Array(e);if(n)for(let a=0;a<e;a++)i[a]=(e-1-a)*t;else for(let a=0;a<e;a++)i[a]=a*t;return i}function nT(e){const{permRAS:t,dims:n}=e,i=[0,0,0];for(let d=0;d<3;d++)for(let m=0;m<3;m++)Math.abs(t[d])-1===m&&(i[m]=d*Math.sign(t[d]));let a=1;const o=[1,1,1],l=[!1,!1,!1];for(let d=0;d<i.length;d++)for(let m=0;m<i.length;m++)Math.abs(i[m])===d&&(o[m]=a,(i[m]<0||Object.is(i[m],-0))&&(l[m]=!0),a*=n[m+1]);const u=Lh(n[1],o[0],l[0]),f=Lh(n[2],o[1],l[1]),h=Lh(n[3],o[2],l[2]);return{instride:o,inflip:l,xlut:u,ylut:f,zlut:h}}function iT(e){const{inputData:t,dims:n,xlut:i,ylut:a,zlut:o}=e,l=n[1]*n[2]*n[3],u=new Uint8Array(l);let f=0;for(let h=0;h<n[3];h++)for(let d=0;d<n[2];d++)for(let m=0;m<n[1];m++)u[i[m]+a[d]+o[h]]=t[f],f++;return u}function rT(e){const{drawingDims:t,backgroundDims:n}=e;return t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function Ph(e){return!e||e.length<4?0:e[1]*e[2]*e[3]}function zh(e){return new Uint8Array(e)}function aT(e){let{useClickToSegmentBitmap:t,drawingEnabled:n,clickToSegment:i,drawBitmap:a,clickToSegmentGrowingBitmap:o}=e,l=null;t&&(!n||!i)&&(G.debug("determineBitmapDataSource: Conditions not met for clickToSegment bitmap, using drawBitmap."),t=!1);const u=t?o:a;return!u&&!t&&o?l="drawBitmap is null, but clickToSegmentGrowingBitmap exists. Check state.":!u&&t&&a?(l="clickToSegmentGrowingBitmap is null, falling back to drawBitmap.",t=!1):u||(l="Both bitmaps are null. Uploading empty data."),{bitmapDataSource:t?o:a,useClickToSegmentBitmap:t,warning:l}}function sT(e){const{clickToSegmentIsGrowing:t,drawShapePreviewBitmap:n,drawBitmap:i}=e;let a=i,o=!1;return t&&(o=!0),n&&(a=n),{clickToSegmentIsGrowing:!1,drawPenLocation:[NaN,NaN,NaN],drawPenAxCorSag:-1,drawPenFillPts:[],drawShapeStartLocation:[NaN,NaN,NaN],drawShapePreviewBitmap:null,drawBitmap:a,needsRefresh:o}}function oT(e,t){return e===8?[t[0],2,2,2,...t.slice(4)]:t}function lT(e,t){return e===8?!0:e===t}function Fp(e,t,n,i,a){return e+t*i+n*i*a}function ui(e,t){return Math.min(Math.max(e,0),t-1)}function Ua(e){const{x:t,y:n,z:i,penValue:a,drawBitmap:o,dims:l,penSize:u,penAxCorSag:f}=e,h=l[1],d=l[2],m=l[3],p=ui(t,h),A=ui(n,d),v=ui(i,m);if(o[Fp(p,A,v,h,d)]=a,u>1){const y=Math.floor(u/2),w=f===0,C=f===1,S=f===2;for(let E=-y;E<=y;E++)for(let M=-y;M<=y;M++){let R,D,T;if(w)R=ui(p+E,h),D=ui(A+M,d),T=v;else if(C)R=ui(p+E,h),D=A,T=ui(v+M,m);else if(S)R=p,D=ui(A+M,d),T=ui(v+E,m);else continue;o[Fp(R,D,T,h,d)]=a}}}function cT(e){const{ptA:t,ptB:n,penValue:i,drawBitmap:a,dims:o,penSize:l,penAxCorSag:u}=e,f=Math.abs(t[0]-n[0]),h=Math.abs(t[1]-n[1]),d=Math.abs(t[2]-n[2]),m=n[0]>t[0]?1:-1,p=n[1]>t[1]?1:-1,A=n[2]>t[2]?1:-1;let v=t[0],y=t[1],w=t[2];const C=n[0],S=n[1],E=n[2],M={x:0,y:0,z:0,penValue:i,drawBitmap:a,dims:o,penSize:l,penAxCorSag:u};if(f>=h&&f>=d){let R=2*h-f,D=2*d-f;for(;v!==C;)v+=m,R>=0&&(y+=p,R-=2*f),D>=0&&(w+=A,D-=2*f),R+=2*h,D+=2*d,M.x=v,M.y=y,M.z=w,Ua(M)}else if(h>=f&&h>=d){let R=2*f-h,D=2*d-h;for(;y!==S;)y+=p,R>=0&&(v+=m,R-=2*h),D>=0&&(w+=A,D-=2*h),R+=2*f,D+=2*d,M.x=v,M.y=y,M.z=w,Ua(M)}else{let R=2*h-d,D=2*f-d;for(;w!==E;)w+=A,R>=0&&(y+=p,R-=2*d),D>=0&&(v+=m,D-=2*d),R+=2*h,D+=2*f,M.x=v,M.y=y,M.z=w,Ua(M)}}function Ov(e){const{img2D:t,dims2D:n,minPt:i,maxPt:a}=e,o=n[0],[l,u]=i,[f,h]=a,d=4*(f-l+h-u+2),m=new Int32Array(d*2);let p=0,A=0;function v(C,S){if(C<l||C>f||S<u||S>h)return;const E=C+S*o;t[E]===0&&(t[E]=2,m[A]=C,m[A+1]=S,A=(A+2)%m.length)}function y(){if(p===A)return null;const C=m[p],S=m[p+1];return p=(p+2)%m.length,[C,S]}for(let C=l;C<=f;C++)v(C,u),v(C,h);for(let C=u+1;C<=h-1;C++)v(l,C),v(f,C);let w;for(;(w=y())!==null;){const[C,S]=w;v(C-1,S),v(C+1,S),v(C,S-1),v(C,S+1)}}function Bp(e,t,n,i,a){const o=Math.abs(n[0]-i[0]),l=Math.abs(n[1]-i[1]);e[n[0]+n[1]*t[0]]=a,e[i[0]+i[1]*t[0]]=a;const u=i[0]>n[0]?1:-1,f=i[1]>n[1]?1:-1;let h=n[0],d=n[1];const m=i[0],p=i[1];if(o>=l){let A=2*l-o;for(;h!==m;)h+=u,A>=0&&(d+=f,A-=2*o),A+=2*l,e[h+d*t[0]]=a}else{let A=2*o-l;for(;d!==p;)d+=f,A>=0&&(h+=u,A-=2*l),A+=2*o,e[h+d*t[0]]=a}}function Up(e,t){const n=Math.min(Math.max(e[0],0),t[0]-1),i=Math.min(Math.max(e[1],0),t[1]-1);return[n,i]}function uT(e){let t=0,n=1;return e===1?n=2:e===2&&(t=1,n=2),[t,n]}function fT(e){const{penFillPts:t,penAxCorSag:n,drawBitmap:i,dims:a,penValue:o,fillOverwrites:l,currentUndoBitmap:u}=e,f=t.length;if(f<2)return{drawBitmap:i,success:!1};const[h,d]=uT(n),m=[a[h+1],a[d+1]],p=new Uint8Array(m[0]*m[1]),A=1,v=Up([t[0][h],t[0][d]],m);let y=[...v],w=[...v],C=v;for(let D=1;D<f;D++){let T=[t[D][h],t[D][d]];T=Up(T,m),y=[Math.min(T[0],y[0]),Math.min(T[1],y[1])],w=[Math.max(T[0],w[0]),Math.max(T[1],w[1])],Bp(p,m,C,T,A),C=T}Bp(p,m,v,C,A);const S=1;y[0]=Math.max(0,y[0]-S),y[1]=Math.max(0,y[1]-S),w[0]=Math.min(m[0]-1,w[0]+S),w[1]=Math.min(m[1]-1,w[1]+S);for(let D=0;D<m[1];D++)for(let T=0;T<m[0];T++){if(T>=y[0]&&T<w[0]&&D>=y[1]&&D<=w[1])continue;const F=T+D*m[0];p[F]===0&&(p[F]=2)}const E=Date.now();Ov({img2D:p,dims2D:m,minPt:y,maxPt:w}),G.debug(`FloodFill ${Date.now()-E}`);const M=t[0][3-(h+d)],R=new Uint8Array(i);if(n===0){const D=M*m[0]*m[1];for(let T=0;T<m[0]*m[1];T++)p[T]!==2&&(R[T+D]=o)}else{let D=1;const T=a[1]*a[2];let F=M*a[1];n===2&&(D=a[1],F=M);let U=0;for(let I=0;I<m[1];I++)for(let V=0;V<m[0];V++)p[U]!==2&&(R[V*D+I*T+F]=o),U++}if(!l&&u&&u.length>0){const D=R.length,T=c0(u,D);for(let F=0;F<D;F++)T[F]!==0&&(R[F]=T[F])}return{drawBitmap:R,success:!0}}function Lv(e){const{ptA:t,ptB:n,dims:i}=e,a=i[1],o=i[2],l=i[3],u=Math.min(Math.max(Math.min(t[0],n[0]),0),a-1),f=Math.min(Math.max(Math.min(t[1],n[1]),0),o-1),h=Math.min(Math.max(Math.min(t[2],n[2]),0),l-1),d=Math.min(Math.max(Math.max(t[0],n[0]),0),a-1),m=Math.min(Math.max(Math.max(t[1],n[1]),0),o-1),p=Math.min(Math.max(Math.max(t[2],n[2]),0),l-1);return{x1:u,y1:f,z1:h,x2:d,y2:m,z2:p}}function hT(e){const{x1:t,y1:n,z1:i,x2:a,y2:o,z2:l}=e,u=(t+a)/2,f=(n+o)/2,h=(i+l)/2,d=Math.abs(a-t)/2,m=Math.abs(o-n)/2,p=Math.abs(l-i)/2;return{centerX:u,centerY:f,centerZ:h,radiusX:d,radiusY:m,radiusZ:p}}function dT(e,t,n,i){const{centerX:a,centerY:o,centerZ:l,radiusX:u,radiusY:f,radiusZ:h}=i,d=(e-a)/(u+.5),m=(t-o)/(f+.5),p=(n-l)/(h+.5);return d*d+m*m+p*p<=1}function mT(e){const{ptA:t,ptB:n,penValue:i,drawBitmap:a,dims:o,penSize:l,penAxCorSag:u}=e,f=Lv({ptA:t,ptB:n,dims:o}),{x1:h,y1:d,z1:m,x2:p,y2:A,z2:v}=f,y={x:0,y:0,z:0,penValue:i,drawBitmap:a,dims:o,penSize:l,penAxCorSag:u};for(let w=m;w<=v;w++)for(let C=d;C<=A;C++)for(let S=h;S<=p;S++)y.x=S,y.y=C,y.z=w,Ua(y)}function gT(e){const{ptA:t,ptB:n,penValue:i,drawBitmap:a,dims:o,penSize:l,penAxCorSag:u}=e,f=Lv({ptA:t,ptB:n,dims:o}),{x1:h,y1:d,z1:m,x2:p,y2:A,z2:v}=f,y=hT(f),w={x:0,y:0,z:0,penValue:i,drawBitmap:a,dims:o,penSize:l,penAxCorSag:u};for(let C=m;C<=v;C++)for(let S=d;S<=A;S++)for(let E=h;E<=p;E++)dT(E,S,C,y)&&(w.x=E,w.y=S,w.z=C,Ua(w))}function pT(e,t,n){return e[0]+e[1]*t+e[2]*n}function AT(e,t,n){const i=Math.floor(e/n),a=Math.floor((e-i*n)/t);return[Math.floor(e%t),a,i]}function Pv(e){const t=e[0],n=t*e[1],i=n*e[2];return{xyz2vx:a=>pT(a,t,n),vx2xyz:a=>AT(a,t,n),nx:t,nxy:n,nxyz:i}}function vT(e,t){return e?t===0?2:t===1?1:t===2?0:-1:-1}var kh={face:[[0,0,-1],[0,0,1],[0,-1,0],[0,1,0],[-1,0,0],[1,0,0]],edge:[[-1,-1,0],[1,-1,0],[-1,1,0],[1,1,0],[0,-1,-1],[0,1,-1],[-1,0,-1],[1,0,-1],[0,-1,1],[0,1,1],[-1,0,1],[1,0,1]],corner:[[-1,-1,-1],[1,-1,-1],[-1,1,-1],[1,1,-1],[-1,-1,1],[1,-1,1],[-1,1,1],[1,1,1]]};function xT(e){const{img:t,seedVx:n,dims:i,neighbors:a=6}=e,o=Pv(i),l=[];l.push(n),t[n]=2;const u=[...kh.face];for(a>=18&&u.push(...kh.edge),a>=26&&u.push(...kh.corner);l.length>0;){const f=l.shift(),h=o.vx2xyz(f);for(const d of u){const m=[h[0]+d[0],h[1]+d[1],h[2]+d[2]];if(m[0]<0||m[1]<0||m[2]<0||m[0]>=i[0]||m[1]>=i[1]||m[2]>=i[2])continue;const p=o.xyz2vx(m);t[p]===1&&(t[p]=2,l.push(p))}}}function yT(e){const{voxelIntensity:t,thresholdPercent:n,calMin:i,calMax:a,autoIntensity:o,currentIntensityMin:l,currentIntensityMax:u,currentBright:f}=e;let h=l,d=u,m=f;if(o){if(n!==0){const p=t===0?.01:t;d=p*(1+n),h=p*(1-n)}m=t>(i+a)*.5}return{intensityMin:h,intensityMax:d,isBright:m}}function wT(e){return e?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY}function bT(e){const{sourceBitmap:t,targetBitmap:n}=e;if(!t||!n||t.length!==n.length)return!1;const i=n.length;for(let a=0;a<i;a++)n[a]=t[a];return!0}function CT(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function ST(e){const{clusterImg:t,backImg:n,nxyz:i,fallbackIntensity:a}=e;let o=0,l=0;for(let u=0;u<i;u++)t[u]===2&&(o+=n[u],l++);return l>0?o/l:a}function Np(e,t,n,i){return isFinite(n)&&isFinite(i)?[n,i]:e===Number.POSITIVE_INFINITY?[t,1/0]:e===Number.NEGATIVE_INFINITY?[-1/0,t]:[-1/0,1/0]}function MT(e,t){return!(e[0]<0||e[1]<0||e[2]<0||e[0]>=t[0]||e[1]>=t[1]||e[2]>=t[2])}function ET(e){return e!==0}function DT(e,t,n,i){return n&&i!==0?e!==0:e!==0||t===0}function TT(e){const{img:t,targetBitmap:n,originalBitmap:i,newColor:a,nxyz:o,isPreviewMode:l}=e;let u=0;for(let f=0;f<o;f++)t[f]===2?(n[f]=a,u++):l&&(n[f]=i[f]);return u}function RT(e){const{img:t,dims:n}=e,i=n[1]*n[2]*n[3],a=new Uint8Array(i);for(let o=0;o<i;o++)t[o]!==0&&(a[o]=1);return{img:a,datatypeCode:2,cal_min:0,cal_max:1}}function FT(e){const{img:t,cal_min:n,cal_max:i,scl_inter:a,scl_slope:o,mlevel:l=2}=e,u=t.length;if(u<1)return[];const f=256,h=f-1,d=new Array(f).fill(0),m=n,p=i;if(p<=m)return[];const A=(p-m)/f;function v(M){return M*A+m}const y=(f-1)/Math.abs(p-m);for(let M=0;M<u;M++){let R=t[M]*o+a;R=Math.min(Math.max(R,m),p),R=Math.round((R-m)*y),d[R]++}const w=Array(f).fill(0).map(()=>Array(f).fill(0)),C=Array(f).fill(0).map(()=>Array(f).fill(0));for(let M=1;M<f;++M)w[M][M]=d[M],C[M][M]=M*d[M];for(let M=1;M<f-1;++M)w[1][M+1]=w[1][M]+d[M+1],C[1][M+1]=C[1][M]+(M+1)*d[M+1];for(let M=2;M<f;M++)for(let R=M+1;R<f;R++)w[M][R]=w[1][R]-w[1][M-1],C[M][R]=C[1][R]-C[1][M-1];for(let M=1;M<f;++M)for(let R=M+1;R<f;R++)w[M][R]!==0&&(w[M][R]=C[M][R]*C[M][R]/w[M][R]);let S=0;const E=[1/0,1/0,1/0];if(l>3)for(let M=0;M<f-3;M++)for(let R=M+1;R<f-2;R++)for(let D=R+1;D<f-1;D++){const T=w[0][M]+w[M+1][R]+w[R+1][D]+w[D+1][h];T>S&&(E[0]=M,E[1]=R,E[2]=D,S=T)}else if(l===3)for(let M=0;M<f-2;M++)for(let R=M+1;R<f-1;R++){const D=w[0][M]+w[M+1][R]+w[R+1][h];D>S&&(E[0]=M,E[1]=R,S=D)}else for(let M=0;M<f-1;M++){const R=w[0][M]+w[M+1][h];R>S&&(E[0]=M,S=R)}return[v(E[0]),v(E[1]),v(E[2])]}function BT(e){const{img:t,drawBitmap:n,thresholds:i}=e,a=t.length,o=new Uint8Array(n);for(let l=0;l<a;l++){if(o[l]!==0)continue;const u=t[l];u>i[0]&&(o[l]=1),u>i[1]&&(o[l]=2),u>i[2]&&(o[l]=3)}return o}function UT(e){const{level:t}=e;return t===5||t===1?4:t===4||t===2?3:2}function NT(e){const{level:t,thresholds:n}=e;return t===1?n[2]:t===2?n[1]:n[0]}function IT(e){const{img:t,scl_inter:n,scl_slope:i,global_min:a,threshold:o}=e,l=t.length;for(let u=0;u<l;u++)t[u]*i+n<o&&(t[u]=a)}function wt(e,t,n,i){return n*i[0]*i[1]+t*i[0]+e}function u0(e,t,n){let i=0;const a=new Uint32Array(n+5).fill(0);let l=2147483647;for(let u=0;u<n;u++){let f=t[u];for(i=0;e[f-1]!==f;)if(f=e[f-1],i++,i>100){G.info(`
Ooh no!!`);break}a[u]=f,l=Math.min(l,f)}for(let u=0;u<n;u++)e[a[u]-1]=l}function zv(e,t,n,i,a,o,l,u){const f=new Uint32Array(27);let h=0;if(!a)return 0;const d=e[wt(n,i,a,o)];if(l>=6){const m=wt(n,i,a-1,o);d===e[m]&&(f[h++]=t[m])}if(l>=18){if(n){const m=wt(n-1,i,a-1,o);d===e[m]&&(f[h++]=t[m])}if(i){const m=wt(n,i-1,a-1,o);d===e[m]&&(f[h++]=t[m])}if(n<o[0]-1){const m=wt(n+1,i,a-1,o);d===e[m]&&(f[h++]=t[m])}if(i<o[1]-1){const m=wt(n,i+1,a-1,o);d===e[m]&&(f[h++]=t[m])}}if(l===26){if(n&&i){const m=wt(n-1,i-1,a-1,o);d===e[m]&&(f[h++]=t[m])}if(n<o[0]-1&&i){const m=wt(n+1,i-1,a-1,o);d===e[m]&&(f[h++]=t[m])}if(n&&i<o[1]-1){const m=wt(n-1,i+1,a-1,o);d===e[m]&&(f[h++]=t[m])}if(n<o[0]-1&&i<o[1]-1){const m=wt(n+1,i+1,a-1,o);d===e[m]&&(f[h++]=t[m])}}return h?(u0(u,f,h),f[0]):0}function kv(e,t,n){let i=1;const a=8192;let o=a,l=new Uint32Array(o).fill(0);const u=new Uint32Array(t[0]*t[1]*t[2]).fill(0),f=new Uint32Array(27);for(let h=0;h<t[2];h++)for(let d=0;d<t[1];d++)for(let m=0;m<t[0];m++){let p=0;const A=e[wt(m,d,h,t)];if(A!==0){if(f[0]=zv(e,u,m,d,h,t,n,l),f[0]&&(p+=1),n>=6){if(m){const v=wt(m-1,d,h,t);A===e[v]&&(f[p++]=u[v])}if(d){const v=wt(m,d-1,h,t);A===e[v]&&(f[p++]=u[v])}}if(n>=18){if(d&&m){const v=wt(m-1,d-1,h,t);A===e[v]&&(f[p++]=u[v])}if(d&&m<t[0]-1){const v=wt(m+1,d-1,h,t);A===e[v]&&(f[p++]=u[v])}}if(p)u[wt(m,d,h,t)]=f[0],u0(l,f,p);else{if(u[wt(m,d,h,t)]=i,i>=o){o+=a;const v=new Uint32Array(o);v.set(l),l=v}l[i-1]=i,i++}}}for(let h=0;h<i-1;h++){let d=h;for(;l[d]!==d+1;)d=l[d]-1;l[h]=d+1}return{labelCount:i-1,translationTable:l,initialLabels:u}}function Gv(e,t,n,i){const a=t[0]*t[1]*t[2];let o=0;const l=new Uint32Array(a).fill(0);for(let h=0;h<i;h++)o=Math.max(o,n[h]);const u=new Uint32Array(o).fill(0);let f=0;for(let h=0;h<a;h++)e[h]&&(u[n[e[h]-1]-1]||(f+=1,u[n[e[h]-1]-1]=f),l[h]=u[n[e[h]-1]-1]);return{clusterCount:f,labels:l}}function Yv(e,t,n){const i=e.length,a=new Uint32Array(t+1).fill(0),o=new Uint32Array(t+1).fill(0);for(let f=0;f<i;f++){const h=e[f],d=n[f];a[d]=h,o[d]++}let l=0;for(let f=0;f<t+1;f++){const h=a[f];l=Math.max(l,h);for(let d=0;d<t+1;d++)d!==f&&h===a[d]&&(o[f]<o[d]||o[f]===o[d]&&f<d)&&(a[f]=0)}const u=new Uint32Array(i).fill(0);for(let f=0;f<i;f++)u[f]=a[n[f]];return{maxValue:l,voxels:u}}function VT(e){const{img:t,dim:n,conn:i=26,binarize:a=!1,onlyLargestClusterPerClass:o=!1}=e,l=Date.now(),u=n[0]*n[1]*n[2],f=new Uint32Array(u).fill(0);if(![6,18,26].includes(i))return G.info("bwlabel: conn must be 6, 18 or 26."),{clusterCount:0,labels:f};if(n[0]<2||n[1]<2||n[2]<1)return G.info("bwlabel: img must be 2 or 3-dimensional"),{clusterCount:0,labels:f};if(a)for(let v=0;v<u;v++)t[v]!==0&&(f[v]=1);else f.set(t);let{labelCount:h,translationTable:d,initialLabels:m}=kv(f,n,i);d===void 0&&(d=new Uint32Array);const{clusterCount:p,labels:A}=Gv(m,n,d,h);if(G.info(i+" neighbor clustering into "+p+" regions in "+(Date.now()-l)+"ms"),o){const{maxValue:v,voxels:y}=Yv(f,p,A);return{clusterCount:v,labels:y}}return{clusterCount:p,labels:A}}function OT(e,t=0,n=255,i,a){const o=e.length,l=new Uint8Array(o);for(let u=0;u<o;u++){let f=e[u];f=t+a*(f-i),f=Math.max(f,t),f=Math.min(f,n),l[u]=f}return l}function LT(e,t=0,n=1,i,a){const o=e.length,l=new Float32Array(o);for(let u=0;u<o;u++){let f=e[u];f=t+a*(f-i),f=Math.max(f,t),f=Math.min(f,n),l[u]=f}return l}function Ip(e){const{img:t,dims:n,global_min:i,global_max:a,datatypeCode:o,scl_slope:l,scl_inter:u,cal_min:f,cal_max:h,dst_min:d=0,dst_max:m=255,f_low:p=0,f_high:A=.999}=e;let v=i,y=a;if(o===2)return[v,1];if((!isFinite(p)||!isFinite(A))&&isFinite(f)&&isFinite(h)&&h>f){v=f,y=h;const V=(m-d)/(y-v);return G.info(" Robust Rescale:  min: "+v+"  max: "+y+" scale: "+V),[v,V]}const w=n[1]*n[2]*n[3];let C=t;if(l!==1||u!==0){const V=new Float32Array(w);for(let N=0;N<w;N++)V[N]=t[N]*l+u;C=V}if(v<0&&G.warn("WARNING: Input image has value(s) below 0.0 !"),G.info(" Input:    min: "+v+"  max: "+y),p===0&&A===1)return[v,1];let S=0;for(let V=0;V<w;V++)Math.abs(C[V])>=1e-15&&S++;const E=1e3,M=(y-v)/E,R=new Array(E).fill(0);for(let V=0;V<w;V++){const N=C[V];let Y=Math.floor((N-v)/M);Y=Math.min(Y,E-1),R[Y]++}const D=new Array(E).fill(0);D[0]=R[0];for(let V=1;V<E;V++)D[V]=D[V-1]+R[V];let T=Math.floor(p*w),F=0;for(;F<E&&!(D[F]>=T);)F++;const U=v;for(v=F*M+U,T=w-Math.floor((1-A)*S),F=0;F<E-1&&!(D[F+1]>=T);)F++;y=F*M+U;let I=1;return v!==y&&(I=(m-d)/(y-v)),G.info(" Rescale:  min: "+v+"  max: "+y+" scale: "+I),[v,I]}function PT(e){const{inDims:t,inAffine:n,outDim:i=256,outMM:a=1,toRAS:o=!1}=e,l=n.flat(),u=Cn(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15]),f=nt(t[1]/2,t[2]/2,t[3]/2,1),h=mi(),d=Ue();_t(d,u),Ft(h,f,d);const m=ce(h[0],h[1],h[2]),p=ce(a,a,a);let A=Cn(-1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1);o&&(A=Cn(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),_t(A,A);const v=nt(i,i,i,1),y=Ue();bA(y,A,p);const w=nt(v[0],v[1],v[2],1);Ft(w,w,y),My(w,w,.5);const C=je();Je(C,m,ce(w[0],w[1],w[2]));const S=Ue();_t(S,y),S[3]=C[0],S[7]=C[1],S[11]=C[2];const E=Ue();Kt(E,S);const M=Ue();CA(M,u,E);const R=Ue();return Kt(R,M),{outAffine:S,vox2vox:M,invVox2vox:R}}function zT(e){const{inImg:t,inDims:n,outDim:i,invVox2vox:a,isLinear:o}=e,l=i*i*i,u=new Float32Array(l),f=n[1],h=n[2],d=n[3],m=f*h;function p(C,S,E){return C+S*f+E*m}const A=a[0],v=a[4],y=a[8];let w=-1;if(o)for(let C=0;C<i;C++)for(let S=0;S<i;S++){const E=S*a[1]+C*a[2]+a[3],M=S*a[5]+C*a[6]+a[7],R=S*a[9]+C*a[10]+a[11];for(let D=0;D<i;D++){const T=D*A+E,F=D*v+M,U=D*y+R,I=Math.floor(T),V=Math.floor(F),N=Math.floor(U);if(w++,I<0||V<0||N<0)continue;const Y=Math.ceil(T),P=Math.ceil(F),Q=Math.ceil(U);if(Y>=f||P>=h||Q>=d)continue;const k=T-I,j=F-V,H=U-N,Z=1-k,J=1-j,X=1-H,K=p(I,V,N);let te=0;te+=t[K]*Z*J*X,te+=t[K+m]*Z*J*H,te+=t[K+f]*Z*j*X,te+=t[K+f+m]*Z*j*H,te+=t[K+1]*k*J*X,te+=t[K+1+m]*k*J*H,te+=t[K+1+f]*k*j*X,te+=t[K+1+f+m]*k*j*H,u[w]=te}}else for(let C=0;C<i;C++)for(let S=0;S<i;S++){const E=S*a[1]+C*a[2]+a[3],M=S*a[5]+C*a[6]+a[7],R=S*a[9]+C*a[10]+a[11];for(let D=0;D<i;D++){const T=Math.round(D*A+E),F=Math.round(D*v+M),U=Math.round(D*y+R);w++,!(T<0||F<0||U<0)&&(T>=f||F>=h||U>=d||(u[w]=t[p(T,F,U)]))}}return u}function kT(e,t,n,i,a){const o=new Uint8Array(e);o.fill(0);let l=-1;if(t[0]===n[0])l=0;else if(t[1]===n[1])l=1;else if(t[2]===n[2])l=2;else return console.error("Error: No constant dimension found."),null;const f=[0,1,2].filter(D=>D!==l),h=[];h[l]=t[l],h[f[0]]=(t[f[0]]+n[f[0]])/2,h[f[1]]=(t[f[1]]+n[f[1]])/2;const d=Math.abs(n[f[0]]-t[f[0]])/2,m=Math.abs(n[f[1]]-t[f[1]])/2,p=i.dims[1],A=i.dims[2],v=Math.max(0,Math.floor(h[f[0]]-d)),y=Math.min(i.dims[f[0]+1]-1,Math.ceil(h[f[0]]+d)),w=Math.max(0,Math.floor(h[f[1]]-m)),C=Math.min(i.dims[f[1]+1]-1,Math.ceil(h[f[1]]+m)),S=h[l];if(S<0||S>=i.dims[l+1])return console.error("Error: Constant dimension value is out of bounds."),null;for(let D=v;D<=y;D++)for(let T=w;T<=C;T++){const F=[];F[l]=S,F[f[0]]=D,F[f[1]]=T;const U=(F[f[0]]-h[f[0]])/d,I=(F[f[1]]-h[f[1]])/m;if(U*U+I*I<=1){const N=F[0],Y=F[1],Q=F[2]*p*A+Y*p+N;o[Q]=1}}const E=d*a[f[0]+1],M=m*a[f[1]+1],R=Math.PI*E*M;return{mask:o,area:R}}function GT(e){const{nv:t,maskImages:n,drawBitmap:i,drawingIsMask:a,roiIsMask:o,startVox:l,endVox:u,hdr:f,pixDimsRAS:h}=e,d=new Uint8Array(t);d.fill(1);const m=null;if(n&&n.length>0){for(const p of n)if(p.length===t)for(let A=0;A<t;A++)(p[A]===0||isNaN(p[A]))&&(d[A]=0)}else if(a&&i)for(let p=0;p<t;p++)(i[p]===0||isNaN(i[p]))&&(d[p]=0);else if(o&&l&&u&&f&&h){const p=kT(t,l,u,f,h);return p?{mask:p.mask,area:p.area}:{mask:d,area:null}}return{mask:d,area:m}}function YT(e,t){const n=e.length;let i=0,a=0,o=0,l=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY,f=0,h=0,d=0;for(let y=0;y<n;y++){if(t[y]<1)continue;const w=e[y];i++;let C=a+(w-a)/i;o=o+(w-a)*(w-C),a=C,w!==0&&(f++,C=h+(w-h)/f,d=d+(w-h)*(w-C),h=C,u=Math.min(w,u),l=Math.max(w,l))}const m=Math.sqrt(o/(i-1)),p=Math.sqrt(d/(f-1)),A=u,v=l;return i!==f&&(u=Math.min(0,u),l=Math.max(0,l)),{mean:a,stdev:m,nvox:i,min:u,max:l,meanNot0:h,stdevNot0:p,nvoxNot0:f,minNot0:A,maxNot0:v}}function HT(e,t,n){const i=e.length,a=new Float32Array(i);for(let o=0;o<i;o++)a[o]=e[o]*t+n;return a}var{version:Vp}=nb,{MESH_EXTENSIONS:Xl}=wv,{LEFT_MOUSE_BUTTON:jl,CENTER_MOUSE_BUTTON:Op,RIGHT_MOUSE_BUTTON:Lp}=Fv,Pp={filename:"",isSaveDrawing:!1,volumeByIndex:0},Ra,XT=class{constructor(e=Bn){L(this,"loaders",{}),L(this,"dicomLoader",null),L(this,"canvas",null),L(this,"_gl",null),L(this,"isBusy",!1),L(this,"needsRefresh",!1),L(this,"colormapTexture",null),L(this,"colormapLists",[]),L(this,"volumeTexture",null),L(this,"gradientTexture",null),L(this,"gradientTextureAmount",0),L(this,"useCustomGradientTexture",!1),L(this,"renderGradientValues",!1),L(this,"drawTexture",null),L(this,"paqdTexture",null),L(this,"drawUndoBitmaps",[]),L(this,"drawLut",Xe.makeDrawLut("$itksnap")),L(this,"drawOpacity",.8),L(this,"drawRimOpacity",-1),L(this,"clickToSegmentIsGrowing",!1),L(this,"clickToSegmentGrowingBitmap",null),L(this,"clickToSegmentXY",[0,0]),L(this,"renderDrawAmbientOcclusion",.4),L(this,"colorbarHeight",0),L(this,"drawPenLocation",[NaN,NaN,NaN]),L(this,"drawPenAxCorSag",-1),L(this,"drawFillOverwrites",!0),L(this,"drawPenFillPts",[]),L(this,"drawShapeStartLocation",[NaN,NaN,NaN]),L(this,"drawShapePreviewBitmap",null),L(this,"overlayTexture",null),L(this,"overlayTextureID",null),L(this,"sliceMMShader"),L(this,"slice2DShader"),L(this,"sliceV1Shader"),L(this,"orientCubeShader"),L(this,"orientCubeShaderVAO",null),L(this,"rectShader"),L(this,"rectOutlineShader"),L(this,"renderShader"),L(this,"lineShader"),L(this,"line3DShader"),L(this,"passThroughShader"),L(this,"renderGradientShader"),L(this,"renderGradientValuesShader"),L(this,"renderSliceShader"),L(this,"renderVolumeShader"),L(this,"pickingMeshShader"),L(this,"pickingImageShader"),L(this,"colorbarShader"),L(this,"customSliceShader",null),L(this,"fontShader",null),L(this,"fiberShader"),L(this,"fontTexture",null),L(this,"circleShader"),L(this,"matCapTexture",null),L(this,"bmpShader",null),L(this,"bmpTexture",null),L(this,"thumbnailVisible",!1),L(this,"bmpTextureWH",1),L(this,"growCutShader"),L(this,"orientShaderAtlasU",null),L(this,"orientShaderAtlasI",null),L(this,"orientShaderU",null),L(this,"orientShaderI",null),L(this,"orientShaderF",null),L(this,"orientShaderRGBU",null),L(this,"orientShaderPAQD",null),L(this,"surfaceShader",null),L(this,"blurShader",null),L(this,"sobelBlurShader",null),L(this,"sobelFirstOrderShader",null),L(this,"sobelSecondOrderShader",null),L(this,"genericVAO",null),L(this,"unusedVAO",null),L(this,"crosshairs3D",null),L(this,"DEFAULT_FONT_GLYPH_SHEET",up),L(this,"DEFAULT_FONT_METRICS",fp),L(this,"fontMetrics"),L(this,"fontMets",null),L(this,"fontPx",12),L(this,"legendFontScaling",1),L(this,"backgroundMasksOverlays",0),L(this,"overlayOutlineWidth",0),L(this,"overlayAlphaShader",1),L(this,"position"),L(this,"extentsMin"),L(this,"extentsMax"),L(this,"resizeObserver",null),L(this,"resizeEventListener",null),L(this,"canvasObserver",null),L(this,"syncOpts",{"3d":!1,"2d":!1,zoomPan:!1,cal_min:!1,cal_max:!1,clipPlane:!1,gamma:!1,sliceType:!1,crosshair:!1}),L(this,"readyForSync",!1),L(this,"uiData",{mousedown:!1,touchdown:!1,mouseButtonLeftDown:!1,mouseButtonCenterDown:!1,mouseButtonRightDown:!1,mouseDepthPicker:!1,clickedTile:-1,pan2DxyzmmAtMouseDown:[0,0,0,1],prevX:0,prevY:0,currX:0,currY:0,currentTouchTime:0,lastTouchTime:0,touchTimer:null,doubleTouch:!1,isDragging:!1,dragStart:[0,0],dragEnd:[0,0],dragClipPlaneStartDepthAziElev:[0,0,0],lastTwoTouchDistance:0,multiTouchGesture:!1,windowX:0,windowY:0,activeDragMode:null,activeDragButton:null,angleFirstLine:[0,0,0,0],angleState:"none",activeClipPlaneIndex:0}),Ea(this,Ra,null),L(this,"back",null),L(this,"overlays",[]),L(this,"deferredVolumes",[]),L(this,"deferredMeshes",[]),L(this,"furthestVertexFromOrigin",100),L(this,"volScale",[]),L(this,"vox",[]),L(this,"mousePos",[0,0]),L(this,"screenSlices",[]),L(this,"cuboidVertexBuffer"),L(this,"otherNV",null),L(this,"volumeObject3D",null),L(this,"pivot3D",[0,0,0]),L(this,"furthestFromPivot",10),L(this,"currentClipPlaneIndex",0),L(this,"lastCalled",new Date().getTime()),L(this,"selectedObjectId",-1),L(this,"CLIP_PLANE_ID",1),L(this,"VOLUME_ID",254),L(this,"DISTANCE_FROM_CAMERA",-.54),L(this,"graph",{LTWH:[0,0,640,480],opacity:0,vols:[0],autoSizeMultiplanar:!1,normalizeValues:!1,isRangeCalMinMax:!1}),L(this,"customLayout",[]),L(this,"meshShaders",ZS()),L(this,"dragModes",{contrast:1,measurement:2,angle:7,none:0,pan:3,slicer3D:4,callbackOnly:5}),L(this,"sliceTypeAxial",0),L(this,"sliceTypeCoronal",1),L(this,"sliceTypeSagittal",2),L(this,"sliceTypeMultiplanar",3),L(this,"sliceTypeRender",4),L(this,"onDragRelease",()=>{}),L(this,"onMouseUp",()=>{}),L(this,"onLocationChange",()=>{}),L(this,"onIntensityChange",()=>{}),L(this,"onClickToSegment",()=>{}),L(this,"onImageLoaded",()=>{}),L(this,"onMeshLoaded",()=>{}),L(this,"onFrameChange",()=>{}),L(this,"onError",()=>{}),L(this,"onColormapChange",()=>{}),L(this,"onInfo",()=>{}),L(this,"onWarn",()=>{}),L(this,"onDebug",()=>{}),L(this,"onVolumeAddedFromUrl",()=>{}),L(this,"onVolumeWithUrlRemoved",()=>{}),L(this,"onVolumeUpdated",()=>{}),L(this,"onMeshAddedFromUrl",()=>{}),L(this,"onMeshAdded",()=>{}),L(this,"onMeshWithUrlRemoved",()=>{}),L(this,"onZoom3DChange",()=>{}),L(this,"onAzimuthElevationChange",()=>{}),L(this,"onClipPlaneChange",()=>{}),L(this,"onCustomMeshShaderAdded",()=>{}),L(this,"onMeshShaderChanged",()=>{}),L(this,"onMeshPropertyChanged",()=>{}),L(this,"onDicomLoaderFinishedWithImages",()=>{}),L(this,"onDocumentLoaded",()=>{}),L(this,"onOptsChange",()=>{}),L(this,"document",new Th),L(this,"mediaUrlMap",new Map),L(this,"initialized",!1),L(this,"currentDrawUndoBitmap");for(const t in e)typeof e[t]=="function"?this[t]=e[t]:this.opts[t]=Bn[t]===void 0?Bn[t]:e[t];this.opts.forceDevicePixelRatio===0?this.uiData.dpr=window.devicePixelRatio||1:this.opts.forceDevicePixelRatio<0?this.uiData.dpr=1:this.uiData.dpr=this.opts.forceDevicePixelRatio,this.currentDrawUndoBitmap=this.opts.maxDrawUndoBitmaps,this.opts.drawingEnabled&&this.createEmptyDrawing(),this.opts.thumbnail.length>0&&(this.thumbnailVisible=!0),G.setLogLevel(this.opts.logLevel),this.document.setOptsChangeCallback((t,n,i)=>{this.onOptsChange(t,n,i)})}get scene(){return this.document.scene}get opts(){return this.document.opts}get sliceMosaicString(){return this.document.opts.sliceMosaicString||""}set sliceMosaicString(e){this.document.opts.sliceMosaicString=e}get isAlphaClipDark(){return this.document.opts.isAlphaClipDark}set isAlphaClipDark(e){this.document.opts.isAlphaClipDark=e}cleanup(){t8(this.resizeObserver,this.canvasObserver,this.resizeEventListener),this.resizeEventListener=null,this.resizeObserver=null,this.canvasObserver=null,n8(ve(this,Ra)),Qi(this,Ra,null),this.document.removeOptsChangeCallback()}get volumes(){return this.document.volumes}set volumes(e){this.document.volumes=e}get meshes(){return this.document.meshes}set meshes(e){this.document.meshes=e}get drawBitmap(){return this.document.drawBitmap}set drawBitmap(e){this.document.drawBitmap=e}get volScaleMultiplier(){return this.scene.volScaleMultiplier}set volScaleMultiplier(e){this.setScale(e)}async saveScene(e="niivue.png"){function t(i,a){const o=document.createElement("a");document.body.appendChild(o),o.style.display="none";const l=window.URL.createObjectURL(i);o.href=l,o.download=a,o.click(),o.remove()}const n=this.canvas;if(!n)throw new Error("canvas not defined");this.drawScene(),n.toBlob(i=>{i&&(e===""&&(e=`niivue-screenshot-${new Date().toString()}.png`,e=e.replace(/\s/g,"_")),t(i,e))})}async attachTo(e,t=null){return await this.attachToCanvas(document.getElementById(e),t),G.debug("attached to element with id: ",e),this}async attachToCanvas(e,t=null){this.canvas=e,t===null&&(t=navigator.hardwareConcurrency>6,G.debug("AntiAlias ",t," Threads ",navigator.hardwareConcurrency));const{gl:n,max2D:i,max3D:a}=UC(this.canvas,t);return this.gl=n,this.uiData.max2D=i,this.uiData.max3D=a,G.info("NIIVUE VERSION ",Vp),G.debug(`Max texture size 2D: ${this.uiData.max2D} 3D: ${this.uiData.max3D}`),this.canvas.parentElement.style.backgroundColor="black",this.opts.isResizeCanvas&&(Sp(this.canvas),this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight,this.resizeEventListener=ZE(()=>this.resizeListener()),window.addEventListener("resize",this.resizeEventListener),this.resizeObserver=JE(()=>this.resizeListener()),this.resizeObserver.observe(this.canvas.parentElement),this.canvasObserver=$E(o=>{for(const l of o)if(l.type==="childList"&&l.removedNodes.length>0&&Array.from(l.removedNodes).includes(this.canvas)){this.cleanup();break}}),this.canvasObserver.observe(this.canvas.parentElement,{childList:!0})),this.opts.interactive&&this.registerInteractions(),await this.init(),this.drawScene(),this}syncWith(e,t={"2d":!0,"3d":!0}){e instanceof Array||(e=[e]),this.otherNV=e,this.syncOpts={...t}}broadcastTo(e,t={"2d":!0,"3d":!0}){e instanceof Array||(e=[e]),this.otherNV=e,this.syncOpts=t}doSync3d(e){e.scene.renderAzimuth=this.scene.renderAzimuth,e.scene.renderElevation=this.scene.renderElevation,e.scene.volScaleMultiplier=this.scene.volScaleMultiplier}doSync2d(e){const t=this.frac2mm(this.scene.crosshairPos);e.scene.crosshairPos=e.mm2frac(t),e.scene.pan2Dxyzmm=hi(this.scene.pan2Dxyzmm)}doSyncGamma(e){const t=this.scene.gamma,n=e.scene.gamma;t!==n&&e.setGamma(t)}doSyncZoomPan(e){e.scene.pan2Dxyzmm=hi(this.scene.pan2Dxyzmm)}doSyncCrosshair(e){const t=this.frac2mm(this.scene.crosshairPos);e.scene.crosshairPos=e.mm2frac(t)}doSyncCalMin(e){this.volumes[0].cal_min!==e.volumes[0].cal_min&&(e.volumes[0].cal_min=this.volumes[0].cal_min,e.updateGLVolume())}doSyncCalMax(e){this.volumes[0].cal_max!==e.volumes[0].cal_max&&(e.volumes[0].cal_max=this.volumes[0].cal_max,e.updateGLVolume())}doSyncSliceType(e){e.setSliceType(this.opts.sliceType)}doSyncClipPlane(e){e.setClipPlane(this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex])}sync(){if(!(!this.gl||!this.otherNV||typeof this.otherNV>"u")&&this.gl.canvas.matches(":focus"))for(let e=0;e<this.otherNV.length;e++)this.otherNV[e]!==this&&(this.syncOpts.gamma&&this.doSyncGamma(this.otherNV[e]),this.syncOpts.crosshair&&this.doSyncCrosshair(this.otherNV[e]),this.syncOpts.zoomPan&&this.doSyncZoomPan(this.otherNV[e]),this.syncOpts.sliceType&&this.doSyncSliceType(this.otherNV[e]),this.syncOpts.cal_min&&this.doSyncCalMin(this.otherNV[e]),this.syncOpts.cal_max&&this.doSyncCalMax(this.otherNV[e]),this.syncOpts.clipPlane&&this.doSyncClipPlane(this.otherNV[e]),this.syncOpts["2d"]&&this.doSync2d(this.otherNV[e]),this.syncOpts["3d"]&&this.doSync3d(this.otherNV[e]),this.otherNV[e].canvas!==this.canvas&&this.otherNV[e].drawScene(),this.otherNV[e].createOnLocationChange())}arrayEquals(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((n,i)=>n===t[i])}textSizePoints(){this.opts.textHeight>=0&&(G.warn("textHeight is deprecated (use fontMinPx and fontSizeScaling)"),this.opts.fontMinPx=this.opts.textHeight*217,this.opts.fontSizeScaling=.4,this.opts.textHeight=-1);const e=this.uiData.dpr||1,t=this.opts.fontMinPx,n=this.gl.canvas.width/e,i=this.gl.canvas.height/e,a=n*i,o=800*600,l=Math.max(a/o,1),u=Math.pow(l,this.opts.fontSizeScaling),f=t*u*e;this.fontPx=f,G.debug(`${n.toFixed(0)}x${i.toFixed(0)} pts (dpi=${e}) => areaScale=${l.toFixed(2)}, scale=${u.toFixed(2)}, minPx=${this.opts.fontMinPx} fontScale=${this.opts.fontSizeScaling} fontPx=${f.toFixed(2)}`)}resizeListener(){if(!e8(this.canvas,this._gl))return;if(!this.opts.isResizeCanvas){this.opts.forceDevicePixelRatio>=0&&G.warn("this.opts.forceDevicePixelRatio requires isResizeCanvas"),this.drawScene();return}Sp(this.canvas);const e=WE({canvas:this.canvas,gl:this.gl,isResizeCanvas:this.opts.isResizeCanvas,forceDevicePixelRatio:this.opts.forceDevicePixelRatio});this.uiData.dpr=e.dpr,G.debug("devicePixelRatio: "+this.uiData.dpr),this.canvas.width=e.width,this.canvas.height=e.height,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.textSizePoints(),this.drawScene()}getRelativeMousePosition(e,t){return Rv(e,t)}getNoPaddingNoBorderCanvasRelativeMousePosition(e,t){return KE(e,t)}mouseContextMenuListener(e){e.preventDefault()}mouseDownListener(e){if(this.uiData.mousedown=!0,this.eventInBounds(e))this.opts.bounds&&(this.opts.showBoundsBorder=!0);else{this.opts.showBoundsBorder=!1,this.drawScene();return}e.preventDefault(),this.drawPenLocation=[NaN,NaN,NaN],this.drawPenAxCorSag=-1,this.drawShapeStartLocation=[NaN,NaN,NaN];const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);if(this.opts.dragMode===7&&this.uiData.angleState==="drawing_second_line"||(this.setDragStart(t.x,t.y),this.setDragEnd(t.x,t.y)),G.debug("mouse down"),G.debug(e),!t)return;const[n,i]=[t.x*this.uiData.dpr,t.y*this.uiData.dpr];this.opts.clickToSegment&&(this.clickToSegmentXY=[n,i]);const a=this.getLabelAtPoint([n,i]);if(a){if(a.onClick){a.onClick(a,e);return}for(const o of this.meshes){if(o.type!=="connectome"){if(Array.isArray(a.points)&&a.points.length===3&&a.points.every(Number.isFinite)){const[l,u,f]=a.points;this.scene.crosshairPos=this.mm2frac([l,u,f]),this.updateGLVolume()}continue}for(const l of o.nodes)l.label===a&&(this.scene.crosshairPos=this.mm2frac([l.x,l.y,l.z]),this.updateGLVolume())}}this.uiData.clickedTile=this.tileIndex(n,i),e.button===jl&&e.shiftKey?(this.uiData.mouseButtonCenterDown=!0,this.setActiveDragMode(jl,!0,e.ctrlKey),this.handleMouseAction(this.uiData.activeDragMode,e,t)):e.button===jl?(this.uiData.mouseButtonLeftDown=!0,this.setActiveDragMode(jl,!1,e.ctrlKey),this.handleMouseAction(this.uiData.activeDragMode,e,t)):e.button===Lp?(this.uiData.mouseButtonRightDown=!0,this.setActiveDragMode(Lp,e.shiftKey,e.ctrlKey),this.handleMouseAction(this.uiData.activeDragMode,e,t)):e.button===Op&&(this.uiData.mouseButtonCenterDown=!0,this.setActiveDragMode(Op,e.shiftKey,e.ctrlKey),this.handleMouseAction(this.uiData.activeDragMode,e,t)),this.drawScene()}getMouseButtonDragMode(e,t,n){return Bv({button:e,shiftKey:t,ctrlKey:n,mouseConfig:this.opts.mouseEventConfig,dragMode:this.opts.dragMode,dragModePrimary:this.opts.dragModePrimary})}getTouchDragMode(e){return u8({isDoubleTouch:e,touchConfig:this.opts.touchEventConfig,dragMode:this.opts.dragMode,dragModePrimary:this.opts.dragModePrimary})}setActiveDragMode(e,t,n){const i=this.getMouseButtonDragMode(e,t,n),a=X8(i,e);this.uiData.activeDragMode=a.activeDragMode,this.uiData.activeDragButton=a.activeDragButton}getCurrentDragMode(){return Y8({activeDragMode:this.uiData.activeDragMode,fallbackDragMode:this.opts.dragMode})}clearActiveDragMode(){const e=H8();this.uiData.activeDragMode=e.activeDragMode,this.uiData.activeDragButton=e.activeDragButton}handleMouseAction(e,t,n){if(e===8)this.mouseDown(n.x,n.y),this.mouseClick(n.x,n.y);else if(e===9)this.uiData.windowX=t.x,this.uiData.windowY=t.y;else{if(this.mousePos=[n.x*this.uiData.dpr,n.y*this.uiData.dpr],e===0)return;if(e===7)if(this.uiData.angleState==="none")this.uiData.angleState="drawing_first_line";else if(this.uiData.angleState==="drawing_second_line"){const i=[n.x*this.uiData.dpr,n.y*this.uiData.dpr],a=this.tileIndex(i[0],i[1]);let o={sliceIndex:-1,sliceType:0,slicePosition:0};if(a>=0&&a<this.screenSlices.length){const m=this.screenSlices[a].axCorSag;let p=0;m===0?p=this.scene.crosshairPos[2]:m===1?p=this.scene.crosshairPos[1]:m===2&&(p=this.scene.crosshairPos[0]),o={sliceIndex:a,sliceType:m,slicePosition:p}}const l=[this.uiData.angleFirstLine[2],this.uiData.angleFirstLine[3],i[0],i[1]],u=this.canvasPos2frac([this.uiData.angleFirstLine[0],this.uiData.angleFirstLine[1]]),f=this.canvasPos2frac([this.uiData.angleFirstLine[2],this.uiData.angleFirstLine[3]]),h=this.canvasPos2frac([l[0],l[1]]),d=this.canvasPos2frac([l[2],l[3]]);if(u[0]>=0&&f[0]>=0&&h[0]>=0&&d[0]>=0){const m=this.frac2mm(u),p=this.frac2mm(f),A=this.frac2mm(h),v=this.frac2mm(d),y={firstLineMM:{start:ce(m[0],m[1],m[2]),end:ce(p[0],p[1],p[2])},secondLineMM:{start:ce(A[0],A[1],A[2]),end:ce(v[0],v[1],v[2])},sliceIndex:o.sliceIndex,sliceType:o.sliceType,slicePosition:o.slicePosition,angle:this.calculateAngleBetweenLines(this.uiData.angleFirstLine,l)};this.document.completedAngles.push(y)}this.resetAngleMeasurement(),this.uiData.angleState="complete",this.drawScene();return}else this.uiData.angleState==="complete"&&(this.resetAngleMeasurement(),this.uiData.angleState="drawing_first_line");this.setDragStart(n.x,n.y),this.uiData.isDragging||(this.uiData.pan2DxyzmmAtMouseDown=hi(this.scene.pan2Dxyzmm)),this.uiData.isDragging=!0,this.uiData.dragClipPlaneStartDepthAziElev=this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex]}}calculateMinMaxVoxIdx(e){return j8(e)}calculateNewRange({volIdx:e=0}={}){if(this.opts.sliceType===4&&this.sliceMosaicString.length<1||!gd(this.uiData.dragStart,this.uiData.dragEnd))return;let t=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]);if(t[0]<0)return;const n=this.frac2vox(t,e);if(t=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]),t[0]<0)return;const i=this.frac2vox(t,e),a=this.calculateMinMaxVoxIdx([n[0],i[0]]),o=this.calculateMinMaxVoxIdx([n[1],i[1]]),l=this.calculateMinMaxVoxIdx([n[2],i[2]]),u=J8(n,i,a,o,l),f=this.volumes[e].hdr,h=this.volumes[e].img;if(!f||!h)return;const d=Z8({xrange:u.xrange,yrange:u.yrange,zrange:u.zrange,dims:f.dims,img:h});if(!d.hasVariation)return;const m=dp(f,d.lo),p=dp(f,d.hi);this.volumes[e].cal_min=m,this.volumes[e].cal_max=p,this.onIntensityChange(this.volumes[e])}generateMouseUpCallback(e,t){const n=this.tileIndex(this.uiData.dragStart[0],this.uiData.dragStart[1]),i=this.tileIndex(this.uiData.dragEnd[0],this.uiData.dragEnd[1]);let a=-1;n===i&&(a=i);let o=-1;a>=0&&(o=this.screenSlices[a].axCorSag);const l=this.frac2mm(e),u=this.frac2mm(t),f=je();kg(f,ce(l[0],l[1],l[2]),ce(u[0],u[1],u[2]));const h=no(f),d=this.frac2vox(e),m=this.frac2vox(t);this.onDragRelease({fracStart:e,fracEnd:t,voxStart:d,voxEnd:m,mmStart:l,mmEnd:u,mmLength:h,tileIdx:a,axCorSag:o})}mouseUpListener(){this.uiData.mousedown=!1;const e={mouseButtonRightDown:this.uiData.mouseButtonRightDown,mouseButtonCenterDown:this.uiData.mouseButtonCenterDown,isDragging:this.uiData.isDragging,mousePos:this.mousePos,fracPos:this.canvasPos2frac(this.mousePos)};this.uiData.mouseButtonRightDown=!1;const t=this.uiData.mouseButtonCenterDown;this.uiData.mouseButtonCenterDown=!1,this.uiData.mouseButtonLeftDown=!1;const n=this.getCurrentDragMode();if(this.drawPenFillPts.length>0?this.drawPenFilled():this.opts.drawingEnabled&&!isNaN(this.drawPenLocation[0])?this.drawAddUndoBitmap():this.opts.drawingEnabled&&!isNaN(this.drawShapeStartLocation[0])&&(this.opts.penType===1||this.opts.penType===2)&&(this.opts.penValue===0?this.drawAddUndoBitmap():this.drawAddUndoBitmap(this.drawFillOverwrites),this.drawShapePreviewBitmap=null),this.drawPenLocation=[NaN,NaN,NaN],this.drawPenAxCorSag=-1,this.drawShapeStartLocation=[NaN,NaN,NaN],this.drawShapePreviewBitmap&&(this.drawBitmap=this.drawShapePreviewBitmap,this.drawShapePreviewBitmap=null,this.refreshDrawing(!0,!1)),Vv(this.onMouseUp)&&this.onMouseUp(e),this.uiData.isDragging){if(this.uiData.isDragging=!1,n===7){if(this.uiData.angleState==="drawing_first_line"){this.uiData.angleFirstLine=[this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]],this.uiData.angleState="drawing_second_line",this.uiData.isDragging=!0,this.drawScene();return}if(this.uiData.angleState==="drawing_second_line"){this.uiData.angleState="complete",this.clearActiveDragMode(),this.drawScene();return}}n===5&&this.drawScene();const i=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]),a=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);if(this.generateMouseUpCallback(i,a),n===6){this.clearActiveDragMode();return}if(n===1){if(t){this.clearActiveDragMode();return}if(!gd(this.uiData.dragStart,this.uiData.dragEnd)){this.clearActiveDragMode();return}this.calculateNewRange({volIdx:0}),this.refreshLayers(this.volumes[0],0)}if(n===2){const o=this.getCurrentSliceInfo(),l=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]),u=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);if(l[0]>=0&&u[0]>=0){const f=this.frac2mm(l),h=this.frac2mm(u);this.document.completedMeasurements.push({startMM:ce(f[0],f[1],f[2]),endMM:ce(h[0],h[1],h[2]),sliceIndex:o.sliceIndex,sliceType:o.sliceType,slicePosition:o.slicePosition,distance:yy(ce(f[0],f[1],f[2]),ce(h[0],h[1],h[2]))})}this.clearActiveDragMode(),this.drawScene();return}}this.clearActiveDragMode(),this.drawScene()}checkMultitouch(e){if(x8({touchdown:this.uiData.touchdown,multiTouchGesture:this.uiData.multiTouchGesture})){const t=this.canvas.getBoundingClientRect(),n=Nh({touch:e.touches[0],canvasRect:t});this.mouseDown(n.x,n.y),this.mouseClick(n.x,n.y)}}touchStartListener(e){e.preventDefault(),b8(this.uiData.touchTimer)&&(this.uiData.touchTimer=setTimeout(()=>{this.resetBriCon(e)},this.opts.longTouchTimeout));const t=new Date().getTime(),n=h8({currentTime:t,touchCount:e.touches.length,isTouchdown:this.uiData.touchdown});if(this.uiData.touchdown=n.touchdown,this.uiData.currentTouchTime=n.currentTouchTime,f8({currentTime:t,lastTouchTime:this.uiData.lastTouchTime,doubleTouchTimeout:this.opts.doubleTouchTimeout}).isDoubleTap){const a=g8(t);this.uiData.doubleTouch=a.doubleTouch,this.uiData.lastTouchTime=a.lastTouchTime;const o=e.target.getBoundingClientRect(),l=Nh({touch:e.targetTouches[0],canvasRect:o});this.setDragStart(l.x,l.y),this.resetBriCon(e);return}else{const a=m8(t);this.uiData.doubleTouch=a.doubleTouch,this.uiData.lastTouchTime=a.lastTouchTime,this.setDragStart(0,0),this.setDragEnd(0,0)}Mp(this.uiData.touchdown,e.touches.length)?this.uiData.multiTouchGesture=!1:this.uiData.multiTouchGesture=!0,setTimeout(this.checkMultitouch.bind(this),1,e)}touchEndListener(e){e.preventDefault();const t=d8();if(this.uiData.touchdown=t.touchdown,this.uiData.lastTwoTouchDistance=t.lastTwoTouchDistance,this.uiData.multiTouchGesture=t.multiTouchGesture,this.uiData.touchTimer&&(clearTimeout(this.uiData.touchTimer),this.uiData.touchTimer=null),this.uiData.isDragging){this.uiData.isDragging=!1,this.getCurrentDragMode()===1&&(this.calculateNewRange(),this.refreshLayers(this.volumes[0],0));const n=this.canvasPos2frac([this.uiData.dragStart[0],this.uiData.dragStart[1]]),i=this.canvasPos2frac([this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);this.generateMouseUpCallback(n,i)}this.mouseUpListener()}windowingHandler(e,t,n=0){const i=W8({x:e,y:t,windowX:this.uiData.windowX,windowY:this.uiData.windowY,currentCalMin:this.volumes[0].cal_min,currentCalMax:this.volumes[0].cal_max,globalMin:this.volumes[0].global_min,globalMax:this.volumes[0].global_max});this.volumes[n].cal_min=i.calMin,this.volumes[n].cal_max=i.calMax,this.refreshLayers(this.volumes[n],0),this.uiData.windowX=i.windowX,this.uiData.windowY=i.windowY}mouseLeaveListener(){if(this.clickToSegmentIsGrowing&&(G.debug("Mouse left canvas, stopping clickToSegment preview."),this.clickToSegmentIsGrowing=!1,this.refreshDrawing(!0,!1)),this.opts.drawingEnabled&&!isNaN(this.drawPenLocation[0])&&(G.debug("Mouse left canvas during drawing, resetting pen state."),this.drawPenLocation=[NaN,NaN,NaN],this.drawPenAxCorSag=-1,this.drawPenFillPts=[]),this.opts.drawingEnabled&&!isNaN(this.drawShapeStartLocation[0])&&(G.debug("Mouse left canvas during shape drawing, resetting shape state."),this.drawShapeStartLocation=[NaN,NaN,NaN],this.drawShapePreviewBitmap&&(this.drawBitmap=this.drawShapePreviewBitmap,this.drawShapePreviewBitmap=null,this.refreshDrawing(!0,!1))),this.uiData.isDragging||this.uiData.mousedown){G.debug("Mouse left canvas during drag, resetting drag state."),this.uiData.isDragging=!1;const e=Nv();this.uiData.mouseButtonLeftDown=e.mouseButtonLeftDown,this.uiData.mouseButtonCenterDown=e.mouseButtonCenterDown,this.uiData.mouseButtonRightDown=e.mouseButtonRightDown,this.uiData.mousedown=e.mousedown,this.drawScene()}this.mousePos=Iv()}mouseMoveListener(e){this.uiData.mousedown&&this.drawScene();const t=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);if(t){if(!this.eventInBounds(e)){this.updateMousePos(t.x,t.y);return}if(this.uiData.mousedown){const n=t.x*this.uiData.dpr,i=t.y*this.uiData.dpr;if(this.tileIndex(n,i)!==this.uiData.clickedTile)return;const o=this.getCurrentDragMode();if(o===8){this.mouseMove(t.x,t.y),this.mouseClick(t.x,t.y),this.drawScene(),this.uiData.prevX=this.uiData.currX,this.uiData.prevY=this.uiData.currY;return}if(o===9){this.windowingHandler(t.x,t.y),this.drawScene(),this.uiData.prevX=this.uiData.currX,this.uiData.prevY=this.uiData.currY;return}this.setDragEnd(t.x,t.y),this.drawScene(),this.uiData.prevX=this.uiData.currX,this.uiData.prevY=this.uiData.currY}else if(this.getCurrentDragMode()===7&&this.uiData.angleState==="drawing_second_line"){const n=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);if(!n)return;this.setDragEnd(n.x,n.y),this.drawScene()}else if(!this.uiData.mousedown&&this.opts.clickToSegment){const n=this.getNoPaddingNoBorderCanvasRelativeMousePosition(e,this.gl.canvas);if(!n)return;const i=n.x*this.uiData.dpr,a=n.y*this.uiData.dpr;this.mousePos=[i,a];const o=this.tileIndex(i,a);o>=0&&this.opts.drawingEnabled&&this.screenSlices[o].axCorSag<=2&&(this.clickToSegmentXY=[i,a],this.clickToSegmentIsGrowing=!0,this.doClickToSegment({x:i,y:a,tileIndex:o}))}}}resetBriCon(e=null){if(this.uiData.isDragging)return;if(!this.eventInBounds(e)){this.opts.showBoundsBorder=!1;return}let t=!1;this.opts.sliceType===4&&(t=!0);let n=0,i=0;if(e!==null&&("targetTouches"in e?(n=e.targetTouches[0].clientX-e.target.getBoundingClientRect().left,i=e.targetTouches[0].clientY-e.target.getBoundingClientRect().top):(n=e.offsetX,i=e.offsetY),n*=this.uiData.dpr,i*=this.uiData.dpr,this.inRenderTile(n,i)>=0&&(t=!0)),t){this.uiData.mouseDepthPicker=!0,this.drawScene(),this.drawScene();return}this.getCurrentDragMode()!==4&&(this.volumes.length<1||this.uiData.doubleTouch||(this.volumes[0].cal_min=this.volumes[0].robust_min,this.volumes[0].cal_max=this.volumes[0].robust_max,this.onIntensityChange(this.volumes[0]),this.refreshLayers(this.volumes[0],0),this.drawScene()))}setDragStart(e,t){const[n,i]=Ep(e,t,this.uiData.dpr);this.uiData.dragStart[0]=n,this.uiData.dragStart[1]=i}setDragEnd(e,t){const[n,i]=Ep(e,t,this.uiData.dpr);this.uiData.dragEnd[0]=n,this.uiData.dragEnd[1]=i}touchMoveListener(e){if(Mp(this.uiData.touchdown,e.touches.length)){const t=this.canvas.getBoundingClientRect();if(this.uiData.isDragging||(this.uiData.pan2DxyzmmAtMouseDown=hi(this.scene.pan2Dxyzmm)),this.uiData.isDragging=!0,w8({doubleTouch:this.uiData.doubleTouch,isDragging:this.uiData.isDragging})){const a=Nh({touch:e.targetTouches[0],canvasRect:e.target.getBoundingClientRect()});this.setDragEnd(a.x,a.y),this.drawScene();return}const n=this.getTouchDragMode(!1),i=v8({touch:e.touches[0],canvasRect:t});n===8?(this.mouseClick(i.x,i.y),this.mouseMove(i.x,i.y)):n===9&&(this.windowingHandler(i.pageX,i.pageY),this.drawScene())}else this.handlePinchZoom(e)}handlePinchZoom(e){if(A8(e.targetTouches.length,e.changedTouches.length)){const t=this.canvas.getBoundingClientRect(),n=p8({touch1:e.touches[0],touch2:e.touches[1],lastTwoTouchDistance:this.uiData.lastTwoTouchDistance}),i=y8({touch:e.touches[0],canvasRect:t});this.mousePos=i,this.uiData.lastTwoTouchDistance>0&&this.sliceScroll2D(n.scrollDelta,i[0],i[1]),this.uiData.lastTwoTouchDistance=n.distance}}cycleActiveClipPlane(){const e=D8({currentIndex:this.uiData.activeClipPlaneIndex,clipPlanesLength:this.scene.clipPlanes.length});this.uiData.activeClipPlaneIndex=e.newIndex;const t=e.newIndex;return this.scene.clipPlanes[t]||(this.scene.clipPlanes[t]=e.defaultClipPlane),this.scene.clipPlaneDepthAziElevs[t]||(this.scene.clipPlaneDepthAziElevs[t]=e.defaultDepthAziElev),t}keyUpListener(e){if(!this.cursorInBounds()){this.opts.showBoundsBorder=!1,this.drawScene();return}const t=new Date().getTime(),n=E8({currentTime:t,lastCalledTime:this.lastCalled,debounceTime:this.opts.keyDebounceTime});if(Ih(e.code,this.opts.cycleClipPlaneHotKey)&&n){const i=this.cycleActiveClipPlane();console.log("Active clip plane cycled to:",i),console.log("clip planes",this.scene.clipPlanes),this.lastCalled=t}if(Ih(e.code,this.opts.clipPlaneHotKey)){if(n){const i=T8({currentClipPlaneIndex:this.currentClipPlaneIndex});this.currentClipPlaneIndex=i.newIndex,this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex]=i.depthAziElev,this.setClipPlane(this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex])}this.lastCalled=t}else if(Ih(e.code,this.opts.viewModeHotKey)&&n){const i=R8({currentSliceType:this.opts.sliceType,totalSliceTypes:5});this.setSliceType(i),this.lastCalled=t}this.drawScene()}keyDownListener(e){if(!this.cursorInBounds()){this.opts.showBoundsBorder=!1,this.drawScene();return}const{action:t}=S8({code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,sliceType:this.opts.sliceType});switch(t){case"render_azimuth_decrease":this.setRenderAzimuthElevation(this.scene.renderAzimuth-1,this.scene.renderElevation);break;case"render_azimuth_increase":this.setRenderAzimuthElevation(this.scene.renderAzimuth+1,this.scene.renderElevation);break;case"render_elevation_increase":this.setRenderAzimuthElevation(this.scene.renderAzimuth,this.scene.renderElevation+1);break;case"render_elevation_decrease":this.setRenderAzimuthElevation(this.scene.renderAzimuth,this.scene.renderElevation-1);break;case"crosshair_left":this.moveCrosshairInVox(-1,0,0);break;case"crosshair_right":this.moveCrosshairInVox(1,0,0);break;case"crosshair_up":this.moveCrosshairInVox(0,1,0);break;case"crosshair_down":this.moveCrosshairInVox(0,-1,0);break;case"crosshair_forward":this.moveCrosshairInVox(0,0,1);break;case"crosshair_backward":this.moveCrosshairInVox(0,0,-1);break;case"cycle_drag_mode":this.opts.dragMode=M8(this.opts.dragMode),G.info("drag mode changed to ",Dr[this.opts.dragMode]);break;case"frame_previous":this.setFrame4D(this.volumes[0].id,this.volumes[0].frame4D-1);break;case"frame_next":this.setFrame4D(this.volumes[0].id,this.volumes[0].frame4D+1);break;case"show_version":alert(`NIIVUE VERSION: ${Vp}`);break}this.drawScene()}wheelListener(e){const t=L8({thumbnailVisible:this.thumbnailVisible,mosaicStringLength:this.opts.sliceMosaicString.length,eventInBounds:this.eventInBounds(e),hasBounds:this.opts.bounds!==null});if(!t.shouldProcess){this.eventInBounds(e)||(this.opts.showBoundsBorder=!1,this.drawScene());return}if(this.opts.showBoundsBorder=t.showBoundsBorder,e.preventDefault(),e.stopPropagation(),B8({dragMode:this.getCurrentDragMode(),dragStart:this.uiData.dragStart,dragEnd:this.uiData.dragEnd})){const u=N8(e.deltaY),f=U8({dragStart:this.uiData.dragStart,dragEnd:this.uiData.dragEnd,delta:u});this.uiData.dragStart[0]=f.newDragStart[0],this.uiData.dragStart[1]=f.newDragStart[1],this.uiData.dragEnd[0]=f.newDragEnd[0],this.uiData.dragEnd[1]=f.newDragEnd[1],this.uiData.isDragging=!0,this.drawScene(),this.uiData.isDragging=!1;const h=this.tileIndex(this.uiData.dragStart[0],this.uiData.dragStart[1]);h>=0?this.generateMouseUpCallback(this.screenXY2TextureFrac(this.uiData.dragStart[0],this.uiData.dragStart[1],h),this.screenXY2TextureFrac(this.uiData.dragEnd[0],this.uiData.dragEnd[1],h)):G.warn("Could not generate drag release callback for ROI selection: Invalid tile index.");return}const n=F8({deltaY:e.deltaY,invertScrollDirection:this.opts.invertScrollDirection});if(this.opts.clickToSegment){this.opts.clickToSegmentPercent=O8({currentPercent:this.opts.clickToSegmentPercent,scrollAmount:n});const u=this.clickToSegmentXY[0],f=this.clickToSegmentXY[1],h=this.tileIndex(u,f);h>=0&&this.screenSlices[h].axCorSag<=2&&(G.debug(`Adjusting clickToSegment threshold: ${this.opts.clickToSegmentPercent.toFixed(3)}`),this.clickToSegmentIsGrowing=!0,this.doClickToSegment({x:u,y:f,tileIndex:h}));return}const i=this.canvas.getBoundingClientRect(),[a,o]=z8(e.clientX,e.clientY,i),l=this.inRenderTile(this.uiData.dpr*a,this.uiData.dpr*o)!==-1;if(P8({dragMode:this.getCurrentDragMode(),isInRenderTile:l})){const u=I8({currentZoom:this.scene.pan2Dxyzmm[3],scrollAmount:n});this.opts.yoke3Dto2DZoom&&(this.scene.volScaleMultiplier=u.newZoom),this.scene.pan2Dxyzmm[3]=u.newZoom;const f=this.frac2mm(this.scene.crosshairPos),h=V8({currentPan:[this.scene.pan2Dxyzmm[0],this.scene.pan2Dxyzmm[1],this.scene.pan2Dxyzmm[2]],zoomChange:u.zoomChange,crosshairMM:[f[0],f[1],f[2]]});this.scene.pan2Dxyzmm[0]=h[0],this.scene.pan2Dxyzmm[1]=h[1],this.scene.pan2Dxyzmm[2]=h[2],this.drawScene(),this.canvas.focus(),this.sync();return}this.sliceScroll2D(n,a,o)}registerInteractions(){if(!this.canvas)throw new Error("canvas undefined");Qi(this,Ra,new AbortController);const{signal:e}=ve(this,Ra);this.canvas.addEventListener("mousedown",this.mouseDownListener.bind(this),{signal:e}),this.canvas.addEventListener("mouseup",this.mouseUpListener.bind(this),{signal:e}),this.canvas.addEventListener("mousemove",this.mouseMoveListener.bind(this),{signal:e}),this.canvas.addEventListener("mouseleave",this.mouseLeaveListener.bind(this),{signal:e}),this.canvas.addEventListener("touchstart",this.touchStartListener.bind(this),{signal:e}),this.canvas.addEventListener("touchend",this.touchEndListener.bind(this),{signal:e}),this.canvas.addEventListener("touchmove",this.touchMoveListener.bind(this),{signal:e}),this.canvas.addEventListener("wheel",this.wheelListener.bind(this),{signal:e}),this.canvas.addEventListener("contextmenu",this.mouseContextMenuListener.bind(this),{signal:e}),this.canvas.addEventListener("dblclick",this.resetBriCon.bind(this),{signal:e}),this.canvas.addEventListener("dragenter",this.dragEnterListener.bind(this),{signal:e}),this.canvas.addEventListener("dragover",this.dragOverListener.bind(this),{signal:e}),this.canvas.addEventListener("drop",t=>{this.dropListener(t).catch(console.error)},{signal:e}),this.canvas.setAttribute("tabindex","0"),this.canvas.addEventListener("keyup",this.keyUpListener.bind(this),{signal:e}),this.canvas.addEventListener("keydown",this.keyDownListener.bind(this),{signal:e})}dragEnterListener(e){Ev(e)}dragOverListener(e){Dv(e)}getFileExt(e,t=!0){return n0(e,t)}async addVolumeFromUrl(e){const t=await jt.loadFromUrl(e);return this.document.addImageOptions(t,e),t.onColormapChange=this.onColormapChange,this.mediaUrlMap.set(t,e.url),this.onVolumeAddedFromUrl&&this.onVolumeAddedFromUrl(e,t),this.addVolume(t),t}async addVolumesFromUrl(e){const t=e.map(async i=>{const a=this.getFileExt(i.name||i.url);if(a==="DCM")throw new Error("DICOM files must be loaded using useDicomLoader");if(this.loaders[a]){let u=i.url;const f=this.loaders[a].toExt;let h=i.name||i.url;if(h=h.split("/").pop(),typeof i.url=="string"){const m=i.url;try{const p=await fetch(m);if(!p.ok)throw new Error(`Failed to load file: ${p.statusText}`);u=await p.arrayBuffer()}catch(p){throw new Error(`Failed to load url ${m}: ${p}`)}}const d=await this.loaders[a].loader(u);i.url=d,i.name=`${h}.${f}`}const o={url:i.url,headers:i.headers,name:i.name,colormap:i.colormap?i.colormap:i.colorMap,colormapNegative:i.colormapNegative?i.colormapNegative:i.colorMapNegative,opacity:i.opacity,urlImgData:i.urlImgData,cal_min:i.cal_min,cal_max:i.cal_max,trustCalMinMax:this.opts.trustCalMinMax,isManifest:i.isManifest,frame4D:i.frame4D,limitFrames4D:i.limitFrames4D||this.opts.limitFrames4D,colorbarVisible:i.colorbarVisible},l=await jt.loadFromUrl(o);return this.document.addImageOptions(l,o),l.onColormapChange=this.onColormapChange,this.mediaUrlMap.set(l,o.url),this.onVolumeAddedFromUrl&&this.onVolumeAddedFromUrl(o,l),l}),n=await Promise.all(t);for(let i=0;i<n.length;i++)this.addVolume(n[i]);return n}getMediaByUrl(e){return Cv(e,this.mediaUrlMap)}removeVolumeByUrl(e){const t=this.getMediaByUrl(e);if(t)this.removeVolume(t);else throw new Error("No volume with URL present")}async traverseFileTree(e,t="",n){return i0(e,t,n)}readDirectory(e){return Mv(e)}isMeshExt(e){return bv(e)}async loadFromArrayBuffer(e,t){const n=this.getFileExt(t);if(Xl.includes(n)){await this.addMeshFromUrl({url:t,buffer:e});return}const i=cc(t);i.buffer=e,i.name=t,await this.addVolumeFromUrl(i)}async loadFromFile(e){const t=this.getFileExt(e.name);if(Xl.includes(t)){await Ta.loadFromFile({file:e,gl:this.gl,name:e.name}).then(n=>{this.addMesh(n)});return}await jt.loadFromFile({file:e,name:e.name}).then(n=>{this.addVolume(n)})}useLoader(e,t,n){this.loaders=Sv({loaders:this.loaders,loader:e,fileExt:t,toExt:n})}useDicomLoader(e){this.dicomLoader=e}getDicomLoader(){return this.dicomLoader}async dropListener(e){if(this.eventInBounds(e))this.opts.bounds&&(this.opts.showBoundsBorder=!0);else{this.opts.showBoundsBorder=!1;return}if(e.stopPropagation(),e.preventDefault(),!this.opts.dragAndDropEnabled)return;const t=e.dataTransfer;if(!t)return;const n=sD(t);n?await this.handleUrlDrop(n):oD(t)&&await this.handleFilesDrop(t.items,e.shiftKey,e.altKey),this.drawScene()}async handleUrlDrop(e){const t=this.getFileExt(e);switch(G.debug("dropped ext:",t),Dp(t)){case"mesh":await this.addMeshFromUrl({url:e});break;case"document":await this.loadDocumentFromUrl(e);break;default:await this.addVolumeFromUrl(cc(e))}}async handleFilesDrop(e,t,n){!t&&!n&&(this.volumes=[],this.overlays=[],this.meshes=[]),this.closeDrawing(),this.closePAQD();const i=rD(e);for(const{entry:o,pairedEntry:l}of i)await this.handleFileEntry(o,l,n);const a=aD(e);for(const o of a)await this.handleDirectoryDrop(o)}async handleFileEntry(e,t,n){const i=this.getFileExt(e.name);if(this.loaders[i]){const l=await zC(e);await this.loadImages([{url:l,name:e.name}]);return}const a=await Tp(e);switch(Dp(i)){case"mesh":await this.handleMeshFileDrop(a);break;case"document":await this.handleDocumentFileDrop(a);break;default:await this.handleVolumeFileDrop(a,t,n)}}async handleMeshFileDrop(e){try{const t=await Ta.loadFromFile({file:e,gl:this.gl,name:e.name});this.addMesh(t)}catch(t){console.error("Error loading mesh:",t)}}async handleDocumentFileDrop(e){try{const t=await Th.loadFromFile(e);await this.loadDocument(t),G.debug("loaded document")}catch(t){console.error("Error loading document:",t)}}async handleVolumeFileDrop(e,t,n){try{let i;t&&(i=await Tp(t));const a=await jt.loadFromFile({file:e,urlImgData:i,limitFrames4D:this.opts.limitFrames4D});n?(G.debug("alt key detected: assuming this is a drawing overlay"),this.drawClearAllUndoBitmaps(),this.loadDrawing(a)):this.addVolume(a)}catch(i){console.error("Error loading volume:",i)}}async handleDirectoryDrop(e){try{const t=await this.traverseFileTree(e,"",[]),n=this.getDicomLoader().loader;if(!n)throw new Error("No loader for DICOM files");const a=(await n(t)).map(l=>jt.loadFromUrl({url:l.data,name:l.name,limitFrames4D:this.opts.limitFrames4D})),o=await Promise.all(a);await this.onDicomLoaderFinishedWithImages(o)}catch(t){console.error("Error loading DICOM files:",t)}}setMultiplanarPadPixels(e){this.opts.multiplanarPadPixels=e,this.drawScene()}setMultiplanarLayout(e){typeof e=="string"&&(e=parseInt(e)),this.opts.multiplanarLayout=e,this.drawScene()}setCornerOrientationText(e){this.opts.isCornerOrientationText=e,this.updateGLVolume()}setIsOrientationTextVisible(e){this.opts.isOrientationTextVisible=e,this.drawScene()}setShowAllOrientationMarkers(e){this.opts.showAllOrientationMarkers=e,this.drawScene()}setHeroImage(e){this.opts.heroImageFraction=e,this.drawScene()}setCustomLayout(e){const t=vD({layout:e});if(!t.valid&&t.error)throw new Error(t.error);this.customLayout=e,this.drawScene()}clearCustomLayout(){this.customLayout=null,this.drawScene()}getCustomLayout(){return this.customLayout}setRadiologicalConvention(e){this.opts.isRadiologicalConvention=e,this.updateGLVolume()}setDefaults(e={},t=!1){this.document.opts={...Bn},this.scene.sceneData={...Ks};for(const n in e)typeof e[n]=="function"?this[n]=e[n]:this.opts[n]=Bn[n]===void 0?Bn[n]:e[n];if(this.scene.pan2Dxyzmm=[0,0,0,1],t&&this.volumes&&this.volumes.length>0)for(let n=0;n<this.volumes.length;n++)this.volumes[n].cal_min=this.volumes[n].robust_min,this.volumes[n].cal_max=this.volumes[n].robust_max;this.updateGLVolume()}setMeshThicknessOn2D(e){this.opts.meshThicknessOn2D=e,this.updateGLVolume()}setSliceMosaicString(e){this.sliceMosaicString=e,this.updateGLVolume()}setSliceMM(e){this.opts.isSliceMM=e,this.updateGLVolume()}setAdditiveBlend(e){this.opts.isAdditiveBlend=e,this.updateGLVolume()}getRadiologicalConvention(){return this.opts.isRadiologicalConvention}setHighResolutionCapable(e){typeof e=="boolean"&&(e=e?0:-1),this.opts.forceDevicePixelRatio=e,this.resizeListener(),this.drawScene()}watchOptsChanges(e){this.onOptsChange=e}unwatchOptsChanges(){this.onOptsChange=()=>{}}addVolume(e){const t=fM(this.volumes,e);this.volumes=t.volumes,this.setVolume(e,t.index),this.onImageLoaded(e),G.debug("loaded volume",e.name),G.debug(e)}addMesh(e){const t=WM(this.meshes,e);this.meshes=t.meshes,this.setMesh(e,t.index),this.onMeshLoaded(e)}getVolumeIndexByID(e){return Oa(this.volumes,e)}drawAddUndoBitmap(e=!0){const t=tT({drawBitmap:this.drawBitmap,drawUndoBitmaps:this.drawUndoBitmaps,currentDrawUndoBitmap:this.currentDrawUndoBitmap,maxDrawUndoBitmaps:this.opts.maxDrawUndoBitmaps,drawFillOverwrites:e});this.drawBitmap=t.drawBitmap,this.drawUndoBitmaps=t.drawUndoBitmaps,this.currentDrawUndoBitmap=t.currentDrawUndoBitmap,t.needsRefresh&&this.refreshDrawing(!1)}drawClearAllUndoBitmaps(){const e=eT(this.drawUndoBitmaps,this.opts.maxDrawUndoBitmaps);this.drawUndoBitmaps=e.drawUndoBitmaps,this.currentDrawUndoBitmap=e.currentDrawUndoBitmap}drawUndo(){const{drawBitmap:e,currentDrawUndoBitmap:t}=_D({drawUndoBitmaps:this.drawUndoBitmaps,currentDrawUndoBitmap:this.currentDrawUndoBitmap,drawBitmap:this.drawBitmap});this.drawBitmap=e,this.currentDrawUndoBitmap=t,this.refreshDrawing(!0)}loadDrawing(e){if(this.drawBitmap&&G.debug("Overwriting open drawing!"),!this.back)throw new Error("back undefined");this.drawClearAllUndoBitmaps();const t=e.hdr.dims;if(!rT({drawingDims:t,backgroundDims:this.back.hdr.dims}))return G.debug("drawing dimensions do not match background image"),!1;e.img.constructor!==Uint8Array&&G.debug("Drawings should be UINT8");const n=e.permRAS,i=Ph(t);this.drawBitmap=zh(i),this.opts.is2DSliceShader?this.drawTexture=this.r8Tex2D(this.drawTexture,Le.TEXTURE7_DRAW,this.back.dims,!0):this.drawTexture=this.r8Tex(this.drawTexture,Le.TEXTURE7_DRAW,this.back.dims,!0);const a=nT({permRAS:n,dims:t});return this.drawBitmap=iT({inputData:e.img,dims:t,xlut:a.xlut,ylut:a.ylut,zlut:a.zlut}),this.drawAddUndoBitmap(),this.refreshDrawing(!1),this.drawScene(),!0}binarize(e){const t=RT({img:e.img,dims:e.hdr.dims});e.img=t.img,e.hdr.datatypeCode=t.datatypeCode,e.hdr.cal_min=t.cal_min,e.hdr.cal_max=t.cal_max}async loadDrawingFromUrl(e,t=!1){this.drawBitmap&&G.debug("Overwriting open drawing!"),this.drawClearAllUndoBitmaps();let n=!1;try{const i=await jt.loadFromUrl(cc(e));t&&await this.binarize(i),n=this.loadDrawing(i)}catch{G.error("loadDrawingFromUrl() failed to load "+e),this.drawClearAllUndoBitmaps()}return n}findOtsu(e=2){return this.volumes.length<1?[]:FT({img:this.volumes[0].img,cal_min:this.volumes[0].cal_min,cal_max:this.volumes[0].cal_max,scl_inter:this.volumes[0].hdr.scl_inter,scl_slope:this.volumes[0].hdr.scl_slope,mlevel:e})}drawOtsu(e=2){if(this.volumes.length===0)return;const t=this.findOtsu(e);if(t.length<3)return;this.drawBitmap||this.createEmptyDrawing();const n=BT({img:this.volumes[0].img,drawBitmap:this.drawBitmap,thresholds:t});this.drawBitmap.set(n),this.drawAddUndoBitmap(),this.refreshDrawing(!0)}removeHaze(e=5,t=0){const n=this.volumes[t].img,i=this.volumes[t].hdr,a=UT({level:e}),o=this.findOtsu(a);if(o.length<3)return;const l=NT({level:e,thresholds:o});IT({img:n,scl_inter:i.scl_inter,scl_slope:i.scl_slope,global_min:this.volumes[t].global_min,threshold:l}),this.refreshLayers(this.volumes[t],0),this.drawScene()}async saveImage(e=Pp){const t={...Pp,...e},{filename:n,isSaveDrawing:i,volumeByIndex:a}=t;return G.debug("saveImage",n,i,a),this.back?.dims===void 0?(G.debug("No voxelwise image open"),!1):i?this.drawBitmap?await this.volumes[0].saveToDisk(n,this.drawBitmap):(G.debug("No drawing open"),!1):(G.debug("saving image"),this.volumes[a].saveToDisk(n))}getMeshIndexByID(e){return ir(this.meshes,e)}setMeshProperty(e,t,n){const i=JM({meshes:this.meshes,id:e,key:t,val:n,gl:this.gl});i<0||(this.updateGLVolume(),this.onMeshPropertyChanged(i,t,n))}indexNearestXYZmm(e,t,n,i){return $M({meshes:this.meshes,meshId:e,Xmm:t,Ymm:n,Zmm:i})}decimateHierarchicalMesh(e,t=3){const n=eE({meshes:this.meshes,meshId:e,gl:this.gl,order:t});return n&&this.updateGLVolume(),n}reverseFaces(e){tE({meshes:this.meshes,meshId:e,gl:this.gl})&&this.updateGLVolume()}async setMeshLayerProperty(e,t,n,i){await nE({meshes:this.meshes,meshId:e,layer:t,key:n,val:i,gl:this.gl})&&this.updateGLVolume()}setPan2Dxyzmm(e){this.scene.pan2Dxyzmm=e,this.opts.yoke3Dto2DZoom&&(this.scene.volScaleMultiplier=e[3]),this.drawScene()}setRenderAzimuthElevation(e,t){this.scene.renderAzimuth=e,this.scene.renderElevation=t,this.onAzimuthElevationChange(e,t),this.drawScene()}getOverlayIndexByID(e){return hM(this.volumes,e)}setVolume(e,t=0){const n=La(this.volumes,e,t);this.volumes=n.volumes,this.back=n.back,this.overlays=n.overlays,this.updateGLVolume()}setMesh(e,t=0){this.meshes.forEach(i=>{G.debug("MESH: ",i.name)});const n=ZM(this.meshes,e,t);this.meshes=n.meshes,this.updateGLVolume(),this.meshes.forEach(i=>{G.debug(i.name)})}removeVolume(e){const t=xv(this.volumes,e);if(this.volumes=t.volumes,this.back=this.volumes.length>0?this.volumes[0]:null,this.overlays=this.volumes.slice(1),this.mediaUrlMap.has(e)){const n=this.mediaUrlMap.get(e);this.onVolumeWithUrlRemoved(n),this.mediaUrlMap.delete(e)}this.updateGLVolume(),this.drawScene()}removeVolumeByIndex(e){const t=dM(this.volumes,e);t.removed&&this.removeVolume(t.removed)}removeMesh(e){if(e.unloadMesh(this.gl),this.setMesh(e,-1),this.mediaUrlMap.has(e)){const t=this.mediaUrlMap.get(e);this.onMeshWithUrlRemoved(t),this.mediaUrlMap.delete(e)}}removeMeshByUrl(e){const t=this.getMediaByUrl(e);t&&(this.removeMesh(t),this.mediaUrlMap.delete(t),this.onMeshWithUrlRemoved(e))}moveVolumeToBottom(e){const t=mM(this.volumes,e);this.volumes=t.volumes,this.back=t.back,this.overlays=t.overlays,this.updateGLVolume()}moveVolumeUp(e){const t=gM(this.volumes,e);this.volumes=t.volumes,this.back=t.back,this.overlays=t.overlays,this.updateGLVolume()}moveVolumeDown(e){const t=pM(this.volumes,e);this.volumes=t.volumes,this.back=t.back,this.overlays=t.overlays,this.updateGLVolume()}moveVolumeToTop(e){const t=AM(this.volumes,e);this.volumes=t.volumes,this.back=t.back,this.overlays=t.overlays,this.updateGLVolume()}mouseDown(e,t){const n=md({x:e,y:t,dpr:this.uiData.dpr});this.mousePos=n.mousePos}updateMousePos(e,t){const n=md({x:e,y:t,dpr:this.uiData.dpr});return this.mousePos=n.mousePos,n.mousePos}mouseMove(e,t){const n=Uv({x:e,y:t,dpr:this.uiData.dpr,currentMousePos:this.mousePos});if(this.mousePos=n.mousePos,this.inRenderTile(n.scaledX,n.scaledY)<0||!ND({dx:n.dx,dy:n.dy}))return;const i=UD({currentAzimuth:this.scene.renderAzimuth,currentElevation:this.scene.renderElevation,deltaX:n.dx,deltaY:n.dy});this.scene.renderAzimuth=i.azimuth,this.scene.renderElevation=i.elevation,this.drawScene()}sph2cartDeg(e,t){return kc(e,t)}setClipPlanes(e){const t=YD({depthAziElevs:e});this.scene.clipPlanes=t.clipPlanes,this.scene.clipPlaneDepthAziElevs=t.clipPlaneDepthAziElevs,this.drawScene()}setClipPlane(e){if(!jD(e))return;const t=this.uiData.activeClipPlaneIndex??0,n=XD({clipPlanes:this.scene.clipPlanes,clipPlaneDepthAziElevs:this.scene.clipPlaneDepthAziElevs,index:t,depthAzimuthElevation:e});this.scene.clipPlanes=n.clipPlanes,this.scene.clipPlaneDepthAziElevs=n.clipPlaneDepthAziElevs,this.onClipPlaneChange(n.clipPlane),this.drawScene()}setCrosshairColor(e){this.opts.crosshairColor=e,this.drawScene()}setCrosshairWidth(e){this.opts.crosshairWidth=e,this.crosshairs3D&&(this.crosshairs3D.mm[0]=NaN),this.drawScene()}setDrawColormap(e){this.drawLut=Xe.makeDrawLut(e),this.updateGLVolume()}setDrawingEnabled(e){if(this.opts.drawingEnabled=e,this.opts.drawingEnabled)this.drawBitmap||this.createEmptyDrawing();else{const t=sT({clickToSegmentIsGrowing:this.clickToSegmentIsGrowing,drawPenLocation:this.drawPenLocation,drawPenAxCorSag:this.drawPenAxCorSag,drawPenFillPts:this.drawPenFillPts,drawShapeStartLocation:this.drawShapeStartLocation,drawShapePreviewBitmap:this.drawShapePreviewBitmap,drawBitmap:this.drawBitmap});this.clickToSegmentIsGrowing=t.clickToSegmentIsGrowing,this.drawPenLocation=t.drawPenLocation,this.drawPenAxCorSag=t.drawPenAxCorSag,this.drawPenFillPts=t.drawPenFillPts,this.drawShapeStartLocation=t.drawShapeStartLocation,this.drawShapePreviewBitmap=t.drawShapePreviewBitmap,this.drawBitmap=t.drawBitmap,t.needsRefresh&&this.refreshDrawing(!0,!1)}this.drawScene()}setPenValue(e,t=!1){this.opts.penValue=e,this.opts.isFilledPen=t,this.drawScene()}setDrawOpacity(e){this.drawOpacity=e,this.drawScene()}setSelectionBoxColor(e){this.opts.selectionBoxColor=e}setBounds(e){if(!Array.isArray(e)||e.length!==4)throw new Error("setBounds: expected [x1,y1,x2,y2] array");this.opts.bounds=[[e[0],e[1]],[e[2],e[3]]],this.gl&&this.drawScene()}sliceScroll2D(e,t,n,i=!0){if(!pD({scrollRequiresFocus:this.opts.scrollRequiresFocus,canvasHasFocus:this.canvas===document.activeElement})){G.warn("Canvas element does not have focus. Scroll events will not be processed.");return}if(this.inGraphTile(t,n)){let o=this.volumes[0].frame4D;e>0&&o++,e<0&&o--,this.setFrame4D(this.volumes[0].id,o);return}const a=this.inRenderTile(this.uiData.dpr*t,this.uiData.dpr*n)!==-1;if(AD({posChange:e,dragMode:this.opts.dragMode,isInRenderTile:a})){const o=this.frac2mm(this.scene.crosshairPos),l=mD({posChange:e,currentZoom:this.scene.pan2Dxyzmm[3],yoke3Dto2DZoom:this.opts.yoke3Dto2DZoom,crosshairMM:o});l.newVolScaleMultiplier!==void 0&&(this.scene.volScaleMultiplier=l.newVolScaleMultiplier),this.scene.pan2Dxyzmm[3]=l.newZoom,this.scene.pan2Dxyzmm[0]+=l.panOffsetX,this.scene.pan2Dxyzmm[1]+=l.panOffsetY,this.scene.pan2Dxyzmm[2]+=l.panOffsetZ,this.drawScene(),this.canvas.focus(),this.sync();return}this.mouseClick(t,n,e,i)}setSliceType(e){return this.opts.sliceType=e,this.drawScene(),this}setOpacity(e,t){vM(this.volumes,e,t),this.updateGLVolume()}setScale(e){this.scene.volScaleMultiplier=e,this.drawScene()}setClipPlaneColor(e){this.opts.clipPlaneColor=e,this.renderShader.use(this.gl),this.gl.uniform4fv(this.renderShader.uniforms.clipPlaneColor,this.opts.clipPlaneColor),this.drawScene()}setClipPlaneThick(e){G.warn("setClipPlaneThick() has been removed. use setClipPlanes() instead.")}setClipVolume(e,t){G.warn("setClipVolume() has been removed. use setClipPlanes() instead.")}async setVolumeRenderIllumination(e=0){this.renderGradientValues=Number.isNaN(e),this.renderShader=this.renderVolumeShader,this.renderGradientValues?this.renderShader=this.renderGradientValuesShader:(this.opts.gradientAmount=e,e>0||this.opts.gradientOpacity>0?this.renderShader=this.renderGradientShader:e<0&&(this.renderShader=this.renderSliceShader)),this.initRenderShader(this.renderShader,e),this.renderShader.use(this.gl),this.setClipPlaneColor(this.opts.clipPlaneColor),Number.isNaN(e)?this.gradientTextureAmount=1:this.gradientTextureAmount=e,!(this.volumes.length<1)&&(await this.refreshLayers(this.volumes[0],0),this.drawScene())}async setGradientOpacity(e=0,t=0){this.opts.gradientOpacity=e,this.opts.renderSilhouette=t,this.renderGradientValues?this.renderShader=this.renderGradientValuesShader:this.gradientTextureAmount>0||e>0?this.renderShader=this.renderGradientShader:this.gradientTextureAmount<0&&(this.renderShader=this.renderSliceShader),this.initRenderShader(this.renderShader,this.gradientTextureAmount),this.renderShader.use(this.gl),this.gradientTextureAmount>0&&this.refreshLayers(this.volumes[0],0),this.drawScene()}overlayRGBA(e){return bM(e)}vox2mm(e,t){return qC(e,t)}cloneVolume(e){return xM(this.volumes,e)}async loadDocumentFromUrl(e){const t=await Th.loadFromUrl(e);await this.loadDocument(t)}async loadDocument(e){this.volumes=[],this.meshes=[],this.document=e,this.document.labels=this.document.labels?this.document.labels:[];const t={...Bn,...e.opts};this.scene.pan2Dxyzmm=e.scene.pan2Dxyzmm?e.scene.pan2Dxyzmm:[0,0,0,1],this.document.opts=t,this.scene.clipPlaneDepthAziElevs&&this.setClipPlane(this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex??0]),G.debug("load document",e),this.mediaUrlMap.clear(),this.createEmptyDrawing();const n=e.encodedImageBlobs;for(let a=0;a<e.imageOptionsArray.length;a++){const o=e.imageOptionsArray[a],l=n[a];if(l){"colorMap"in o&&(o.colormap=o.colorMap);const u=await jt.loadFromBase64({base64:l,...o});if(u){if(u.colormapLabel){const f=Object.keys(u.colormapLabel.lut).length,h=new Uint8ClampedArray(f);for(const d in u.colormapLabel.lut)h[d]=u.colormapLabel.lut[d];u.colormapLabel.lut=h}this.addVolume(u)}}}this.volumes.length>0&&(this.back=this.volumes[0]);for(const a of e.meshDataObjects??[]){const o={gl:this.gl,...a};a.offsetPt0&&(o.rgba255[3]=0,o.tris=new Uint32Array(a.offsetPt0)),G.debug(o);const l=new Ta(o.pts,o.tris,o.name,o.rgba255,o.opacity,o.visible,this.gl,o.connectome,o.dpg,o.dps,o.dpv);a.offsetPt0&&(l.fiberGroupColormap=a.fiberGroupColormap,l.fiberColor=a.fiberColor,l.fiberDither=a.fiberDither,l.fiberRadius=a.fiberRadius,l.colormap=a.colormap),l.meshShaderIndex=o.meshShaderIndex,l.layers=o.layers,l.updateMesh(this.gl),G.debug(l),this.addMesh(l)}if(e.data.connectomes)for(const a of e.data.connectomes){const o=JSON.parse(a),l=this.loadConnectomeAsMesh(o);l.updateMesh(this.gl),this.addMesh(l)}this.createEmptyDrawing();const i=e.encodedDrawingBlob;if(i){const a=await Ce.b64toUint8(i);if(a){const o=this.back.dims;let l=o[1]*o[2]*o[3];if(a.length-352===l&&(l+=352),a.length!==l)throw new Error(`drawBitmap size does not match the texture dimensions (${o[1]}${o[2]}${o[3]}) ${l} != ${o[1]*o[2]*o[3]}.`);this.drawBitmap=a,this.refreshDrawing()}}return await this.setGradientOpacity(this.opts.gradientOpacity),await this.setVolumeRenderIllumination(this.opts.gradientAmount),this.updateGLVolume(),this.drawScene(),this.onDocumentLoaded(e),this}async generateLoadDocumentJavaScript(e,t){const n=this.json(),i=await Ce.compressToBase64String(JSON.stringify(n));return`
        ${t}

        async function saveNiivueAsHtml(pageName) {
          //get new docstring
          const docString = nv1.json();
          const html =
          document.getElementsByTagName("html")[0]
              .innerHTML.replace(base64, await NVUtilities.compressToBase64String(JSON.stringify(docString)));
          NVUtilities.download(html, pageName, "application/html");
        }

        var nv1 = new Niivue();
        await nv1.attachTo("${e}");
        var base64 = "${i}";
        NVUtilities.decompressBase64String(base64).then((jsonText) => {
          var json = JSON.parse(jsonText); // string -> JSON
          var doc = NVDocument.loadFromJSON(json);
          nv1.loadDocument(doc);
          nv1.updateGLVolume();
        });

      `}async generateHTML(e="gl1",t){return`<!DOCTYPE html>
        <html lang="en">
          <head>
            <meta charset="utf-8" />
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta name="viewport" content="width=device-width,initial-scale=1.0" />
            <title>Save as HTML</title>
            <style>
            html {
              height: auto;
              min-height: 100%;
              margin: 0;
            }
            body {
              display: flex;
              flex-direction: column;
              margin: 0;
              min-height: 100%;
              width: 100%;
              position: absolute;
              font-family: system-ui, Arial, Helvetica, sans-serif;
              background: #ffffff;
              color: black;
              user-select: none; /* Standard syntax */
            }
            header {
              margin: 10px;
            }
            main {
              flex: 1;
              background: #000000;
              position: relative;
            }
            footer {
              margin: 10px;
            }
            canvas {
              position: absolute;
              cursor: crosshair;
            }
            canvas:focus {
              outline: 0px;
            }
            div {
              display: table-row;
              background-color: blue;
            }
            </style>
          </head>
          <body>
            <noscript>niivue requires JavaScript.</noscript>
            <header>
            Save the current scene as HTML
            <button id="save">Save as HTML</button>
            </header>
            <main>
              <canvas id="gl1"></canvas>
            </main>
            <script type="module" async>
              ${await this.generateLoadDocumentJavaScript(e,t)}
              function saveAsHtml() {
                saveNiivueAsHtml("page.html");
              }
              // assign our event handler
              var button = document.getElementById("save");
              button.onclick = saveAsHtml;
            <\/script>
          </body>
        </html>`}async saveHTML(e="untitled.html",t="gl1",n){const i=await this.generateHTML(t,n);return Ce.download(i,e,"application/html")}json(){return this.document.opts=this.opts,this.document.scene=this.scene,this.document.volumes=this.volumes,this.document.meshes=this.meshes,this.drawScene(),this.document.previewImageDataURL=this.canvas.toDataURL(),this.document.json()}async saveDocument(e="untitled.nvd",t=!0,n={}){const{embedImages:i=!0,embedPreview:a=!0}=n;this.document.title=e,this.document.volumes=this.volumes,this.document.meshes=this.meshes,a?(this.drawScene(),this.document.previewImageDataURL=this.canvas.toDataURL()):this.document.previewImageDataURL="",await this.document.download(e,t,{embedImages:i})}async loadImages(e){const t=[],n=[];for(const i of e)if("url"in i){const a=this.getFileExt(i.name?i.name:i.url);if(this.loaders[a]){const o=this.loaders[a].toExt.toUpperCase();Xl.includes(o)?n.push(i):t.push(i);continue}Xl.includes(a.toUpperCase())?n.push(i):t.push(i)}return t.length>0&&await this.loadVolumes(t),n.length>0&&await this.loadMeshes(n),this}async loadDicoms(e){if(!this.getDicomLoader())throw new Error("No dicom loader set. Please set a dicom loader before loading dicoms");this.drawScene(),this.volumes=[];const t=e.map(async i=>{let a=null;if(i.isManifest)a=await jt.fetchDicomData(i.url);else{const d=await fetch(i.url);if(!d.ok)throw new Error(`Failed to load file: ${d.statusText}`);const m=await d.arrayBuffer();a=[{name:i.url.split("/").pop(),data:m}]}const o=this.getDicomLoader().loader,l=await o(a),u=l[0].name,f=l[0].data;return await jt.loadFromUrl({url:f,name:u})}),n=await Promise.all(t);return n.length===1?this.addVolume(n[0]):this.onDicomLoaderFinishedWithImages(n),this}async loadVolumes(e){return this.drawScene(),this.thumbnailVisible?(this.deferredVolumes=e,this):(this.volumes=[],this.closePAQD(),await this.addVolumesFromUrl(e),this)}async addMeshFromUrl(e){const t=this.getFileExt(e.url);if(t==="JCON"||t==="JSON"){let i;if(e.buffer){const o=ArrayBuffer.isView(e.buffer)?e.buffer:new Uint8Array(e.buffer),l=new TextDecoder("utf-8").decode(o);i=JSON.parse(l)}else i=await(await fetch(e.url)).json();const a=this.loadConnectomeAsMesh(i);return this.mediaUrlMap.set(a,e.url),this.onMeshAddedFromUrl(e,a),this.addMesh(a),a}const n=await Ta.loadFromUrl({...e,gl:this.gl});return this.mediaUrlMap.set(n,e.url),this.onMeshAddedFromUrl(e,n),this.addMesh(n),n}async addMeshesFromUrl(e){const t=e.map(async i=>{const a=this.getFileExt(i.name||i.url);if(this.loaders[a]){let l=i.url;const u=this.loaders[a].toExt;let f=i.name||i.url;if(f=f.split("/").pop(),typeof i.url=="string"){const y=i.url;try{const w=await fetch(y);if(!w.ok)throw new Error(`Failed to load file: ${w.statusText}`);l=await w.arrayBuffer()}catch(w){throw new Error(`Failed to load url ${y}: ${w}`)}}const{positions:h,indices:d,colors:m=null,scalars:p=null,colormapLabel:A=null}=await this.loaders[a].loader(l);i.name=`${f}.${u}`;const v=await Mr.createMZ3Async(h,d,!1,m,p,A);i.buffer=v}if(a==="JCON"||a==="JSON"){const u=await(await fetch(i.url,{})).json(),f=this.loadConnectomeAsMesh(u);return this.mediaUrlMap.set(f,i.url),this.onMeshAddedFromUrl(i,f),f}const o=await Ta.loadFromUrl({...i,gl:this.gl});return this.mediaUrlMap.set(o,i.url),this.onMeshAddedFromUrl(i,o),o}),n=await Promise.all(t);for(let i=0;i<n.length;i++)this.addMesh(n[i]);return n}async loadMeshes(e){return this.drawScene(),this.thumbnailVisible?(this.deferredMeshes=e,this):(this.initialized,this.meshes=[],await this.addMeshesFromUrl(e),this.updateGLVolume(),this.drawScene(),this)}async loadConnectomeFromUrl(e,t={}){const i=await(await fetch(e,{headers:t})).json();return this.loadConnectome(i)}async loadFreeSurferConnectomeFromUrl(e,t={}){const i=await(await fetch(e,{headers:t})).json();return this.loadFreeSurferConnectome(i)}async loadFreeSurferConnectome(e){const t=mc.convertFreeSurferConnectome(e);return this.loadConnectome(t)}handleNodeAdded(e){const t=aE(e.detail.node);this.addLabel(t.text,t.style,t.position),this.drawScene()}loadConnectomeAsMesh(e){return rE({gl:this.gl,json:e})}loadConnectome(e){this.drawScene(),this.meshes=[];const t=this.loadConnectomeAsMesh(e);return this.addMesh(t),this.drawScene(),this}createEmptyDrawing(){if(this.back===null||!this.back.dims||Math.min(Math.min(this.back.dims[1],this.back.dims[2]),this.back.dims[3])<1)return;const t=Ph(this.back.dims);this.drawBitmap=zh(t),this.clickToSegmentGrowingBitmap=zh(t),this.drawClearAllUndoBitmaps(),this.drawAddUndoBitmap(),this.opts.is2DSliceShader?this.drawTexture=this.r8Tex2D(this.drawTexture,Le.TEXTURE7_DRAW,this.back.dims):this.drawTexture=this.r8Tex(this.drawTexture,Le.TEXTURE7_DRAW,this.back.dims,!0),this.refreshDrawing(!1)}drawGrowCut(){if(!this.back||!this.back.dims)throw new Error("back not defined");const e=this.back.hdr,t=this.gl,n=e.dims[1]*e.dims[2]*e.dims[3];if(!this.drawBitmap||this.drawBitmap.length!==n){G.debug("bitmap dims are wrong");return}const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.disable(t.CULL_FACE),t.viewport(0,0,this.back.dims[1],this.back.dims[2]),t.disable(t.BLEND);let a=kC(this.back);const o=this.r16Tex(null,Le.TEXTURE11_GC_BACK,this.back.dims,a);for(let M=1;M<n;M++)a[M]=this.drawBitmap[M];const l=this.r16Tex(null,Le.TEXTURE14_GC_LABEL0,this.back.dims,a),u=this.r16Tex(null,Le.TEXTURE15_GC_LABEL1,this.back.dims,a),f=1e4;for(let M=1;M<n;M++)a[M]>0&&(a[M]=f);const h=this.r16Tex(null,Le.TEXTURE12_GC_STRENGTH0,this.back.dims,a),d=this.r16Tex(null,Le.TEXTURE13_GC_STRENGTH1,this.back.dims,a);t.bindVertexArray(this.genericVAO);const m=this.growCutShader;m.use(t);const p=128;t.uniform1i(m.uniforms.finalPass,0),t.uniform1i(m.uniforms.backTex,11);for(let M=0;M<p;M++){t.uniform1i(m.uniforms.labelTex,14),t.uniform1i(m.uniforms.strengthTex,12);for(let R=0;R<this.back.dims[3];R++){const D=1/this.back.dims[3]*(R+.5);t.uniform1f(m.uniforms.coordZ,D),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,u,0,R),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT1,d,0,R),t.drawBuffers([t.COLOR_ATTACHMENT0,t.COLOR_ATTACHMENT1]),t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE&&G.error("Incomplete framebuffer"),t.drawArrays(t.TRIANGLE_STRIP,0,4)}M===p-1&&t.uniform1i(m.uniforms.finalPass,1),t.uniform1i(m.uniforms.labelTex,15),t.uniform1i(m.uniforms.strengthTex,13);for(let R=0;R<this.back.dims[3];R++){const D=1/this.back.dims[3]*(R+.5);t.uniform1f(m.uniforms.coordZ,D),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,l,0,R),t.framebufferTextureLayer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT1,h,0,R),t.drawBuffers([t.COLOR_ATTACHMENT0,t.COLOR_ATTACHMENT1]),t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE&&G.error("Incomplete framebuffer"),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}t.drawBuffers([t.COLOR_ATTACHMENT0]);const A=t.COLOR_ATTACHMENT1,v=l;t.readBuffer(A);const y=t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT),w=t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE);(y!==t.RED_INTEGER||w!==t.SHORT)&&G.debug("readPixels will fail."),a=new Int16Array;const C=this.back.dims[1]*this.back.dims[2],S=new Int16Array(C);for(let M=0;M<this.back.dims[3];M++)t.framebufferTextureLayer(t.FRAMEBUFFER,A,v,0,M),t.readPixels(0,0,this.back.dims[1],this.back.dims[2],y,w,S),a=Int16Array.from([...a,...S]);let E=a[0];for(let M=0;M<a.length;M++)E=Math.max(E,a[M]);for(let M=1;M<n;M++)this.drawBitmap[M]=a[M];t.deleteTexture(o),t.deleteTexture(h),t.deleteTexture(d),t.deleteTexture(l),t.deleteTexture(u),t.bindVertexArray(this.unusedVAO),t.viewport(0,0,t.canvas.width,t.canvas.height),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(i),this.drawAddUndoBitmap(),this.refreshDrawing(!0)}drawPt(e,t,n,i,a=null){const o=a??this.drawBitmap;if(!o)throw new Error("drawBitmap not set");if(!this.back?.dims)throw new Error("back.dims not set");Ua({x:e,y:t,z:n,penValue:i,drawBitmap:o,dims:this.back.dims,penSize:this.opts.penSize,penAxCorSag:this.drawPenAxCorSag})}drawPenLine(e,t,n){if(!this.drawBitmap)throw new Error("drawBitmap not set");if(!this.back?.dims)throw new Error("back.dims not set");cT({ptA:e,ptB:t,penValue:n,drawBitmap:this.drawBitmap,dims:this.back.dims,penSize:this.opts.penSize,penAxCorSag:this.drawPenAxCorSag})}drawRectangleMask(e,t,n){if(!this.drawBitmap)throw new Error("drawBitmap not set");if(!this.back?.dims)throw new Error("back.dims not set");mT({ptA:e,ptB:t,penValue:n,drawBitmap:this.drawBitmap,dims:this.back.dims,penSize:this.opts.penSize,penAxCorSag:this.drawPenAxCorSag})}drawEllipseMask(e,t,n){if(!this.drawBitmap)throw new Error("drawBitmap not set");if(!this.back?.dims)throw new Error("back.dims not set");gT({ptA:e,ptB:t,penValue:n,drawBitmap:this.drawBitmap,dims:this.back.dims,penSize:this.opts.penSize,penAxCorSag:this.drawPenAxCorSag})}drawingBinaryDilationWithSeed(e,t=6){try{let n=function(w){return w[0]+w[1]*u+w[2]*f};const i=this.drawBitmap,a=this.back.dims[1],o=this.back.dims[2],l=this.back.dims[3],u=a,f=a*o,h=f*l,d=n(e);if(d<0||d>=h)throw new Error("Seed index is out of bounds.");const m=i[d];if(m===0)throw new Error("Seed voxel is not part of a filled cluster.");const p=i.slice();for(let w=0;w<h;w++)p[w]=p[w]===m?1:0;this.drawFloodFillCore(p,d,t);const A=i.slice(),v=[],y=[-f,f,-a,a,-1,1];v.push(...y),t>6&&v.push(-a-1,-a+1,a-1,a+1,-f-a,-f+a,-f-1,-f+1,f-a,f+a,f-1,f+1),t>18&&v.push(-f-a-1,-f-a+1,-f+a-1,-f+a+1,f-a-1,f-a+1,f+a-1,f+a+1);for(let w=0;w<h;w++)if(p[w]===2){const C=w%a,S=Math.floor(w%f/a),E=Math.floor(w/f);for(const M of v){const R=w+M;if(R<0||R>=h)continue;const D=R%a,T=Math.floor(R%f/a),F=Math.floor(R/f);Math.abs(D-C)>1||Math.abs(T-S)>1||Math.abs(F-E)>1||i[R]===0&&(A[R]=m)}}this.drawBitmap=A,this.drawAddUndoBitmap(),this.refreshDrawing(!0)}catch(n){G.error("Error in drawingBinaryDilationWithSeed:",n)}}drawFloodFillCore(e,t,n=6){if(!this.back?.dims)throw new Error("back.dims undefined");const i=[this.back.dims[1],this.back.dims[2],this.back.dims[3]];xT({img:e,seedVx:t,dims:i,neighbors:n})}drawFloodFill(e,t=0,n=0,i=NaN,a=NaN,o=6,l=Number.POSITIVE_INFINITY,u=!1,f=null,h=!1){if(!this.drawBitmap&&(G.warn("drawFloodFill called without an initialized drawBitmap."),this.createEmptyDrawing(),!this.drawBitmap)){G.error("Failed to create drawing bitmap.");return}if(this.clickToSegmentIsGrowing&&!this.clickToSegmentGrowingBitmap){if(G.warn("drawFloodFill called in preview mode without initialized clickToSegmentGrowingBitmap."),this.drawBitmap)this.clickToSegmentGrowingBitmap=this.drawBitmap.slice();else{G.error("Cannot initialize growing bitmap as drawBitmap is null.");return}if(!this.clickToSegmentGrowingBitmap){G.error("Failed to create growing bitmap.");return}}if(f===null&&(f=this.drawBitmap),!f){G.error("drawFloodFill targetBitmap is null.");return}if(!this.back?.dims)throw new Error("back.dims undefined");t=Math.abs(t);const d=[this.back.dims[1],this.back.dims[2],this.back.dims[3]];if(!MT(e,d))return;const m=Pv(d),{nxyz:p}=m,A=this.clickToSegmentIsGrowing?this.drawBitmap:f;if(!A){G.error("Could not determine original bitmap state.");return}const v=new Uint8Array(p).fill(0),y=vT(u,this.drawPenAxCorSag),w=m.vx2xyz,C=m.xyz2vx,S=U=>this.vox2mm(U,this.back.matRAS),E=S(e),M=l**2;function R(U){const I=w(U);if(y>=0&&I[y]!==e[y])return!1;const V=S(I);return(V[0]-E[0])**2+(V[1]-E[1])**2+(V[2]-E[2])**2<=M}const D=C(e),T=A[D];if(h&&!ET(T)){G.debug("Grow/Erase Cluster tool requires starting on a masked voxel."),this.clickToSegmentIsGrowing&&this.clickToSegmentGrowingBitmap&&this.drawBitmap&&(this.clickToSegmentGrowingBitmap.set(this.drawBitmap),this.refreshDrawing(!0,!0));return}if(n===0&&T===t&&!h&&t!==0&&(G.debug("drawFloodFill selected voxel is already desired color"),!this.clickToSegmentIsGrowing))return;let F=NaN;if(h&&(n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)){const U=A.slice();for(let Y=0;Y<p;Y++)U[Y]=U[Y]===T&&R(Y)?1:0;if(U[D]!==1){G.error("Seed voxel could not be marked for cluster ID.");return}this.drawFloodFillCore(U,D,o);const I=this.volumes[0].img2RAS();F=ST({clusterImg:U,backImg:I,nxyz:p,fallbackIntensity:I[D]}),G.debug(`Grow Cluster using mean intensity: ${F.toFixed(2)} voxels.`);const[V,N]=Np(n,F,NaN,NaN);for(let Y=0;Y<p;Y++)if(U[Y]===2)v[Y]=1;else if(A[Y]===0){const P=I[Y];P>=V&&P<=N&&R(Y)&&(v[Y]=1)}t=T}else if(n===0)if(h&&t===0){G.debug(`Erase Cluster: Identifying cluster with color ${T}`);for(let U=0;U<p;U++)v[U]=A[U]===T&&R(U)?1:0}else for(let U=0;U<p;U++)A[U]===T&&R(U)&&T!==0&&(v[U]=1);else{const U=this.volumes[0].img2RAS();F=U[D];const[I,V]=Np(n,F,i,a);for(let N=0;N<p;N++){const Y=U[N];Y>=I&&Y<=V&&R(N)&&(v[N]=1)}t=A[D],t===0&&(t=this.opts.penValue,(t<1||!isFinite(t))&&(t=1))}if(v[D]!==1)if(DT(T,t,h,n)&&R(D))v[D]=1,G.debug("Forcing seed voxel to 1 in working buffer.");else{G.debug("Seed voxel not marked as candidate '1' and not valid originally."),this.clickToSegmentIsGrowing&&this.clickToSegmentGrowingBitmap&&this.drawBitmap&&this.clickToSegmentGrowingBitmap.set(this.drawBitmap);return}this.drawFloodFillCore(v,D,o),TT({img:v,targetBitmap:f,originalBitmap:A,newColor:t,nxyz:p,isPreviewMode:this.clickToSegmentIsGrowing&&f===this.clickToSegmentGrowingBitmap}),this.clickToSegmentIsGrowing?this.refreshDrawing(!0,!0):(this.drawAddUndoBitmap(),this.refreshDrawing(!0,!1))}floodFillSectionFIFO(e,t,n,i){Ov({img2D:e,dims2D:t,minPt:n,maxPt:i})}drawPenFilled(){if(this.drawPenFillPts.length<2){this.drawPenFillPts=[];return}if(!this.drawBitmap)throw new Error("drawBitmap undefined");if(!this.back?.dims)throw new Error("back.dims undefined");const e=this.drawUndoBitmaps[this.currentDrawUndoBitmap]?.length>0?this.drawUndoBitmaps[this.currentDrawUndoBitmap]:null,t=fT({penFillPts:this.drawPenFillPts,penAxCorSag:this.drawPenAxCorSag,drawBitmap:this.drawBitmap,dims:this.back.dims,penValue:this.opts.penValue,fillOverwrites:this.drawFillOverwrites,currentUndoBitmap:e});t.success&&(this.drawBitmap=t.drawBitmap),this.drawPenFillPts=[],this.drawAddUndoBitmap(),this.refreshDrawing(!1)}closeDrawing(){this.drawClearAllUndoBitmaps(),this.drawTexture=this.rgbaTex(this.drawTexture,Le.TEXTURE7_DRAW,[2,2,2,2],!0),this.drawBitmap=null,this.clickToSegmentGrowingBitmap=null,this.drawScene()}refreshDrawing(e=!0,t=!1){const n=aT({useClickToSegmentBitmap:t,drawingEnabled:this.opts.drawingEnabled,clickToSegment:this.opts.clickToSegment,drawBitmap:this.drawBitmap,clickToSegmentGrowingBitmap:this.clickToSegmentGrowingBitmap});n.warning&&G.warn(`refreshDrawing: ${n.warning}`);const i=n.bitmapDataSource;if(!this.back?.dims){G.warn("refreshDrawing: back.dims undefined, cannot refresh drawing texture yet.");return}const a=Ph(this.back.dims);if(!i){G.warn(`refreshDrawing: Bitmap data source (${n.useClickToSegmentBitmap?"growing":"main"}) is null. Cannot update texture.`),e&&this.drawScene();return}const o=oT(i.length,this.back.dims.slice());if(lT(i.length,a)||G.warn(`Drawing bitmap length (${i.length}) must match the background image (${a})`),this.gl.activeTexture(Le.TEXTURE7_DRAW),this.opts.is2DSliceShader){const l=this.frac2vox(this.scene.crosshairPos),u=Math.min(Math.max(l[2],0),o[3]-1),f=o[1]*o[2],h=u*f;G.debug(`refresh huge 2D drawing xyz ${o[1]}${o[2]}${o[3]} slice ${h}`);const d=i.subarray(h,h+f);this.gl.bindTexture(this.gl.TEXTURE_2D,this.drawTexture),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,o[1],o[2],this.gl.RED,this.gl.UNSIGNED_BYTE,d)}else this.gl.bindTexture(this.gl.TEXTURE_3D,this.drawTexture),this.gl.texSubImage3D(this.gl.TEXTURE_3D,0,0,0,0,o[1],o[2],o[3],this.gl.RED,this.gl.UNSIGNED_BYTE,i);if(!this.drawTexture){G.error("refreshDrawing: drawTexture (GPU texture) is null.");return}e&&this.drawScene()}closePAQD(){!this._gl||!this.paqdTexture||(this.paqdTexture=this.rgbaTex(this.paqdTexture,Le.TEXTURE8_PAQD,[2,2,2,2],!0))}r8Tex2D(e,t,n,i=!1){if(e&&this.gl.deleteTexture(e),e=this.gl.createTexture(),this.gl.activeTexture(t),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texStorage2D(this.gl.TEXTURE_2D,1,this.gl.R8,n[1],n[2]),i){const a=new Uint8Array(n[1]*n[2]);this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,n[1],n[2],this.gl.RED,this.gl.UNSIGNED_BYTE,a)}return e}initFontMets(){if(!this.fontMetrics)throw new Error("fontMetrics undefined");this.fontMets={distanceRange:this.fontMetrics.atlas.distanceRange,size:this.fontMetrics.atlas.size,mets:{}};for(let n=0;n<256;n++)this.fontMets.mets[n]={xadv:0,uv_lbwh:[0,0,0,0],lbwh:[0,0,0,0]};const e=this.fontMetrics.atlas.width,t=this.fontMetrics.atlas.height;for(let n=0;n<this.fontMetrics.glyphs.length;n++){const i=this.fontMetrics.glyphs[n],a=i.unicode;if(this.fontMets.mets[a].xadv=i.advance,i.planeBounds===void 0)continue;let o=i.atlasBounds.left/e,l=(t-i.atlasBounds.top)/t,u=(i.atlasBounds.right-i.atlasBounds.left)/e,f=(i.atlasBounds.top-i.atlasBounds.bottom)/t;this.fontMets.mets[a].uv_lbwh=[o,l,u,f],o=i.planeBounds.left,l=i.planeBounds.bottom,u=i.planeBounds.right-i.planeBounds.left,f=i.planeBounds.top-i.planeBounds.bottom,this.fontMets.mets[a].lbwh=[o,l,u,f]}}async loadFont(e=up,t=fp){await this.loadFontTexture(e);const n=await fetch(t);if(!n.ok)throw Error(n.statusText);const i=await n.text();this.fontMetrics=JSON.parse(i),this.initFontMets(),this.fontShader.use(this.gl),this.drawScene()}async loadDefaultMatCap(){return this.loadMatCapTexture(TC)}async loadDefaultFont(){await this.loadFontTexture(this.DEFAULT_FONT_GLYPH_SHEET),this.fontMetrics=this.DEFAULT_FONT_METRICS,this.initFontMets()}async initText(){this.fontShader=new Ne(this.gl,dS,mS),this.fontShader.use(this.gl),await this.loadDefaultFont(),await this.loadDefaultMatCap(),this.drawLoadingText(this.opts.loadingText)}meshShaderNameToNumber(e="Phong"){return vv(e,this.meshShaders)}setMeshShader(e,t=2){const n=iE({meshes:this.meshes,meshShaders:this.meshShaders,id:e,meshShaderNameOrNumber:t,meshShaderNameToNumber:this.meshShaderNameToNumber.bind(this)});n!==null&&(this.updateGLVolume(),this.onMeshShaderChanged(n.meshIndex,n.shaderIndex))}createCustomMeshShader(e,t="Custom"){return $S({gl:this.gl,fragmentShaderText:e,name:t,meshShaders:this.meshShaders})}setCustomSliceShader(e=""){this.customSliceShader=JS({gl:this.gl,fragmentShaderText:e,drawOpacity:this.drawOpacity,customSliceShader:this.customSliceShader}),this.updateGLVolume()}setCustomMeshShader(e="",t="Custom"){const n=this.createCustomMeshShader(e,t);return this.meshShaders.push(n),this.onCustomMeshShaderAdded(e,t),this.meshShaders.length-1}async setCustomMeshShaderFromUrl(e,t=""){try{const n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch shader from ${e}: ${n.status} ${n.statusText}`);const i=await n.text();return(!t||t.trim()==="")&&(t=(e.split("/").pop()??e).split("?")[0].split("#")[0].replace(/\.[^/.]+$/,"")),this.setCustomMeshShader(i,t)}catch(n){throw new Error(`setCustomMeshShaderFromUrl(${e}) failed: ${n.message}`)}}meshShaderNames(e=!0){return eM(this.meshShaders,e)}initRenderShader(e,t=0){Ws({gl:this.gl,shader:e,gradientAmount:t,renderDrawAmbientOcclusion:this.renderDrawAmbientOcclusion,renderSilhouette:this.opts.renderSilhouette,gradientOpacity:this.opts.gradientOpacity})}async init(){const e=this.gl.getExtension("WEBGL_debug_renderer_info");if(e){const m=this.gl.getParameter(e.UNMASKED_VENDOR_WEBGL),p=this.gl.getParameter(e.UNMASKED_RENDERER_WEBGL);G.info("renderer vendor: ",m),G.info("renderer: ",p)}else G.info("debug_renderer_info unavailable");const t=this.gl.getParameter(this.gl.RENDERER);G.info("firefox renderer: ",t),this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.volumeTexture=this.rgbaTex(this.volumeTexture,Le.TEXTURE0_BACK_VOL,[2,2,2,2],!0),this.overlayTexture=this.rgbaTex(this.overlayTexture,Le.TEXTURE2_OVERLAY_VOL,[2,2,2,2],!0),this.drawTexture=this.r8Tex(this.drawTexture,Le.TEXTURE7_DRAW,[2,2,2,2],!0),this.paqdTexture=this.rgbaTex(this.paqdTexture,Le.TEXTURE8_PAQD,[2,2,2,2],!0);const n=[1,1,0,1,0,0,0,1,0,0,0,0],i=this.gl;this.cuboidVertexBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.cuboidVertexBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array(n),i.STATIC_DRAW),this.genericVAO=i.createVertexArray(),i.bindVertexArray(this.genericVAO),i.bindBuffer(i.ARRAY_BUFFER,this.cuboidVertexBuffer),i.enableVertexAttribArray(0),i.vertexAttribPointer(0,3,i.FLOAT,!1,0,0),i.bindVertexArray(this.unusedVAO),this.pickingMeshShader=new Ne(i,e0,ES),this.pickingMeshShader.use(i),this.pickingImageShader=cM(i);const a=tM(i,this.drawOpacity);this.slice2DShader=a.slice2DShader,this.sliceMMShader=a.sliceMMShader,this.sliceV1Shader=a.sliceV1Shader;const o=nM(i,ib,this.unusedVAO);this.orientCubeShader=o.shader,this.orientCubeShaderVAO=o.vao;const l=iM(i);this.rectShader=l.rectShader,this.rectOutlineShader=l.rectOutlineShader,this.lineShader=l.lineShader,this.line3DShader=l.line3DShader,this.circleShader=l.circleShader;const u=rM({gl:i,renderDrawAmbientOcclusion:this.renderDrawAmbientOcclusion,renderSilhouette:this.opts.renderSilhouette,gradientOpacity:this.opts.gradientOpacity});this.renderVolumeShader=u.renderVolumeShader,this.renderSliceShader=u.renderSliceShader,this.renderGradientShader=u.renderGradientShader,this.renderGradientValuesShader=u.renderGradientValuesShader,this.renderShader=u.renderShader,this.colorbarShader=aM(i);const f=sM(i);this.blurShader=f.blurShader,this.sobelBlurShader=f.sobelBlurShader,this.sobelFirstOrderShader=f.sobelFirstOrderShader,this.sobelSecondOrderShader=f.sobelSecondOrderShader,this.growCutShader=f.growCutShader,this.passThroughShader=f.passThroughShader;const h=oM(i);this.orientShaderAtlasU=h.orientShaderAtlasU,this.orientShaderAtlasI=h.orientShaderAtlasI,this.orientShaderU=h.orientShaderU,this.orientShaderI=h.orientShaderI,this.orientShaderF=h.orientShaderF,this.orientShaderRGBU=h.orientShaderRGBU,this.orientShaderPAQD=h.orientShaderPAQD;const d=lM(i);return this.surfaceShader=d.surfaceShader,this.fiberShader=d.fiberShader,this.pickingImageShader.use(i),uM(i,this.meshShaders),this.bmpShader=new Ne(i,fS,hS),await this.initText(),this.opts.thumbnail.length>0&&(await this.loadBmpTexture(this.opts.thumbnail),this.thumbnailVisible=!0),this.updateGLVolume(),this.initialized=!0,this.resizeListener(),this.drawScene(),this}gradientGL(e){this.gradientTexture=wp({gl:this.gl,hdr:e,genericVAO:this.genericVAO,unusedVAO:this.unusedVAO,volumeTexture:this.volumeTexture,paqdTexture:this.paqdTexture,gradientTexture:this.gradientTexture,gradientOrder:this.opts.gradientOrder,blurShader:this.blurShader,sobelBlurShader:this.sobelBlurShader,sobelFirstOrderShader:this.sobelFirstOrderShader,sobelSecondOrderShader:this.sobelSecondOrderShader,rgbaTex:this.rgbaTex.bind(this)})}getGradientTextureData(){return pE({gl:this.gl,gradientTexture:this.gradientTexture,dims:this.back?.dims??null})}setCustomGradientTexture(e,t){const n=AE({gl:this.gl,data:e,dims:t,backDims:this.back?.dims??null,gradientTexture:this.gradientTexture,gradientTextureAmount:this.gradientTextureAmount,hdr:this.back?.hdr??null,gradientGLFn:this.gradientGL.bind(this)});this.gradientTexture=n.gradientTexture,this.useCustomGradientTexture=n.useCustomGradientTexture,e!==null&&n.useCustomGradientTexture&&this.drawScene()}updateGLVolume(){let e=0;const t=this.volumes.length;this.refreshColormaps(),this.closePAQD();for(let n=0;n<t;n++)this.volumes[n].toRAS&&(this.refreshLayers(this.volumes[n],e),e++);if(this.furthestVertexFromOrigin=0,t>0&&(this.furthestVertexFromOrigin=this.volumeObject3D?.furthestVertexFromOrigin??0),this.meshes)for(let n=0;n<this.meshes.length;n++)this.furthestVertexFromOrigin=Math.max(this.furthestVertexFromOrigin,this.meshes[n].furthestVertexFromOrigin);this.onVolumeUpdated&&this.onVolumeUpdated(),this.drawScene()}getDescriptives(e){const{layer:t=0,masks:n=[],drawingIsMask:i=!1,roiIsMask:a=!1,startVox:o=[0,0,0],endVox:l=[0,0,0]}=e,u=this.volumes[t].hdr,f=this.volumes[t].pixDimsRAS,h=isNaN(u.scl_slope)?1:u.scl_slope,d=isNaN(u.scl_inter)?1:u.scl_inter,m=this.volumes[t].img,p=m.length,A=HT(m,h,d),v=n.filter(S=>{const E=this.volumes[S].img.length===p;return E||G.debug("Mask resolution does not match image. Skipping masking layer "+S),E}).map(S=>this.volumes[S].img),{mask:y,area:w}=GT({nv:p,maskImages:v.length>0?v:void 0,drawBitmap:this.drawBitmap,drawingIsMask:n.length<1&&i,roiIsMask:n.length<1&&a,startVox:o,endVox:l,hdr:u,pixDimsRAS:f}),C=YT(A,y);return{...C,volumeMM3:C.nvox*u.pixDims[1]*u.pixDims[2]*u.pixDims[3],volumeML:C.nvox*u.pixDims[1]*u.pixDims[2]*u.pixDims[3]*.001,cal_min:this.volumes[t].cal_min,cal_max:this.volumes[t].cal_max,robust_min:this.volumes[t].robust_min,robust_max:this.volumes[t].robust_max,area:w}}refreshLayers(e,t){if(this.volumes.length<1)return;this.refreshColormaps();const n=e.hdr,i=CM(e),a=e.opacity;if(t>1&&a===0)return;let o=null;if(!this.back)throw new Error("back undefined");this.gl.bindVertexArray(this.unusedVAO),this.crosshairs3D&&(this.crosshairs3D.mm[0]=NaN);let l=lt(e.toRAS);if(t===0){this.volumeObject3D=FM({overlayItem:e,VOLUME_ID:this.VOLUME_ID,gl:this.gl}),Kt(l,l),this.back.matRAS=e.matRAS,this.back.dims=e.dimsRAS,this.back.pixDims=e.pixDimsRAS;const{volScale:C,vox:S}=this.sliceScale(!0);this.volScale=C,this.vox=S,this.volumeObject3D.scale=Array.from(C);const{isAboveMax2D:E,isAboveMax3D:M}=SM({hdr:n,max2D:this.uiData.max2D,max3D:this.uiData.max3D});if(E&&G.error("Image dimensions exceed maximum texture size of hardware."),M&&n.datatypeCode===2304&&n.dims[3]<2){G.info(`Large RGBA image (>${this.uiData.max3D}) requires Texture2D`),this.opts.is2DSliceShader=!0,o=this.rgbaTex2D(this.volumeTexture,Le.TEXTURE0_BACK_VOL,e.dimsRAS,i);return}if(M){G.info(`Large scalar image (>${this.uiData.max3D}) requires Texture2D (${n.dims[1]}${n.dims[2]}${n.dims[3]})`);const D=n.dims[1]*n.dims[2],T=this.frac2vox(this.scene.crosshairPos),U=Math.min(Math.max(T[2],0),n.dims[3]-1)*D,I=new Uint8Array(D*4),V=new Uint32Array(I.buffer),N=Math.floor(e.opacity*255),Y=255*n.scl_slope/(e.cal_max-e.cal_min),P=255*(n.scl_inter-e.cal_min)/(e.cal_max-e.cal_min),Q=new Uint8Array(this.colormap(e.colormap)),k=new Uint32Array(Q.buffer);let j=-1;for(let H=0;H<D;H++){const Z=i[H+U]*Y+P,J=Math.round(Math.min(255,Math.max(0,Z)));V[H]=k[J],I[j+=4]=N}this.opts.is2DSliceShader=!0,o=this.rgbaTex2D(this.volumeTexture,Le.TEXTURE0_BACK_VOL,e.dimsRAS,I,!1);return}if(M&&G.warn(`dimensions exceed 3D limits ${n.dims}`),this.opts.is2DSliceShader=!1,o=this.rgbaTex(this.volumeTexture,Le.TEXTURE0_BACK_VOL,e.dimsRAS),!this.renderShader)throw new Error("renderShader undefined");this.renderShader.use(this.gl),this.gl.uniform3fv(this.renderShader.uniforms.texVox,this.vox),this.gl.uniform3fv(this.renderShader.uniforms.volScale,this.volScale);const R=this.pickingImageShader;R.use(this.gl),this.gl.uniform1i(R.uniforms.volume,0),this.gl.uniform1i(R.uniforms.colormap,1),this.gl.uniform1i(R.uniforms.overlay,2),this.gl.uniform3fv(R.uniforms.volScale,this.volScale),G.debug(this.volumeObject3D)}else this.back?.dims===void 0&&G.error("Fatal error: Unable to render overlay: background dimensions not defined!"),l=BM({overlayItem:e,mm2frac:this.mm2frac.bind(this)}),t===1?(o=UM({gl:this.gl,layer:t,backDims:this.back.dims,rgbaTex:this.rgbaTex.bind(this)}).overlayTexture,this.overlayTexture=o,this.overlayTextureID=o):o=this.overlayTextureID;const u=NM(this.gl);this.gl.viewport(0,0,this.back.dims[1],this.back.dims[2]);const f=kM({gl:this.gl,TEXTURE9_ORIENT:Le.TEXTURE9_ORIENT});if(!n)throw new Error("hdr undefined");if(!i)throw new Error("img undefined");let h=this.orientShaderU;if(n.datatypeCode===2304){const C=QM({gl:this.gl,hdr:n,img:i,overlayItem:e,layer:t,orientShaderRGBU:this.orientShaderRGBU,orientShaderPAQD:this.orientShaderPAQD,volumes:this.volumes,backDims:this.back.dims,rgbaTex:this.rgbaTex.bind(this),paqdTexture:this.paqdTexture,TEXTURE8_PAQD:Le.TEXTURE8_PAQD,TEXTURE9_ORIENT:Le.TEXTURE8_PAQD});h=C.orientShader,C.outTexture!==null&&(o=C.outTexture),C.paqdTexture!==null&&(this.paqdTexture=C.paqdTexture)}else h=KM({gl:this.gl,hdr:n,img:i,orientShaderU:this.orientShaderU,orientShaderI:this.orientShaderI,orientShaderF:this.orientShaderF,orientShaderRGBU:this.orientShaderRGBU,orientShaderAtlasU:this.orientShaderAtlasU,orientShaderAtlasI:this.orientShaderAtlasI}).orientShader;e.global_min===void 0&&e.calMinMax(),this.gl.bindVertexArray(this.genericVAO);const d=IM({gl:this.gl,layer:t,backDims:this.back.dims,rgbaTex:this.rgbaTex.bind(this),passThroughShader:this.passThroughShader});h.use(this.gl),this.gl.activeTexture(Le.TEXTURE1_COLORMAPS);const{colormapLabelTexture:m}=MM({gl:this.gl,overlayItem:e,orientShader:h,createColormapTexture:this.createColormapTexture.bind(this)});if(m===null&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture),this.gl.uniform1f(h.uniforms.cal_min,e.cal_min),this.gl.uniform1f(h.uniforms.cal_max,e.cal_max)),"alphaThreshold"in e&&(G.warn("alphaThreshold is deprecated: use colormapType"),e.alphaThreshold===!0&&(e.colormapType=2),e.alphaThreshold===!1&&(e.colormapType=1),delete e.alphaThreshold),!h)throw new Error("orientShader undefined");VM({gl:this.gl,overlayItem:e,orientShader:h,layer:t,isAdditiveBlend:this.opts.isAdditiveBlend});const{modulateTexture:p}=EM({gl:this.gl,overlayItem:e,hdr:n,volumes:this.volumes,orientShader:h,r8Tex:this.r8Tex.bind(this),TEXTURE7:this.gl.TEXTURE7});if(this.gl.bindTexture(this.gl.TEXTURE_3D,f),!this.back.dims)throw new Error("back.dims undefined");if(OM({gl:this.gl,orientShader:h,backDims:this.back.dims,outTexture:o,mtx:l,hdr:n,intensityVolTextureUnit:9,blendTextureUnit:10,colormapTextureUnit:1,modulationTextureUnit:7,opacity:a,atlasOutline:this.opts.atlasOutline,atlasActiveIndex:this.opts.atlasActiveIndex}),G.debug("back dims: ",this.back.dims),this.gl.bindVertexArray(this.unusedVAO),this.gl.deleteTexture(f),this.gl.deleteTexture(p),this.gl.deleteTexture(d),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.deleteFramebuffer(u),t===0&&(this.volumeTexture=o,this.gradientTexture=wp({gl:this.gl,hdr:n,genericVAO:this.genericVAO,unusedVAO:this.unusedVAO,volumeTexture:this.volumeTexture,paqdTexture:this.paqdTexture,gradientTexture:this.gradientTexture,gradientOrder:this.opts.gradientOrder,blurShader:this.blurShader,sobelBlurShader:this.sobelBlurShader,sobelFirstOrderShader:this.sobelFirstOrderShader,sobelSecondOrderShader:this.sobelSecondOrderShader,rgbaTex:this.rgbaTex.bind(this)})),!this.renderShader)throw new Error("renderShader undefined");if(!this.pickingImageShader)throw new Error("pickingImageShader undefined");const A=this.sliceScale(!0),v=A.vox,y=A.volScale,w=PM({is2DSliceShader:this.opts.is2DSliceShader,isV1SliceShader:this.opts.isV1SliceShader,sliceMMShader:this.sliceMMShader,slice2DShader:this.slice2DShader,sliceV1Shader:this.sliceV1Shader,customSliceShader:this.customSliceShader});LM({gl:this.gl,renderShader:this.renderShader,pickingImageShader:this.pickingImageShader,sliceShader:w,overlaysLength:this.overlays.length,clipPlaneColor:this.opts.clipPlaneColor,backOpacity:this.volumes[0].opacity,renderOverlayBlend:this.opts.renderOverlayBlend,clipPlane:this.scene.clipPlane,texVox:v,volScale:y,drawOpacity:this.drawOpacity,paqdUniforms:this.opts.paqdUniforms}),m!==null&&(this.gl.deleteTexture(m),this.gl.activeTexture(Le.TEXTURE1_COLORMAPS),this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture)),zM({gl:this.gl,shader:w,is2DSliceShader:this.opts.is2DSliceShader,drawTexture:this.drawTexture,paqdTexture:this.paqdTexture,TEXTURE7_DRAW:Le.TEXTURE7_DRAW,TEXTURE8_PAQD:Le.TEXTURE8_PAQD}),this.updateInterpolation(t)}colormaps(){return Xe.colormaps()}addColormap(e,t){Xe.addColormap(e,t)}setColormap(e,t){const n=this.getVolumeIndexByID(e);this.volumes[n].colormap=t,this.updateGLVolume()}idx(e,t,n,i){return wt(e,t,n,i)}check_previous_slice(e,t,n,i,a,o,l,u){return zv(e,t,n,i,a,o,l,u)}do_initial_labelling(e,t,n){const i=kv(e,t,n);return[i.labelCount,i.translationTable,i.initialLabels]}fill_tratab(e,t,n){u0(e,t,n)}translate_labels(e,t,n,i){const a=Gv(e,t,n,i);return[a.clusterCount,a.labels]}largest_original_cluster_labels(e,t,n){const i=Yv(e,t,n);return[i.maxValue,i.voxels]}bwlabel(e,t,n=26,i=!1,a=!1){const o=VT({img:e,dim:t,conn:n,binarize:i,onlyLargestClusterPerClass:a});return[o.clusterCount,o.labels]}async createConnectedLabelImage(e,t=26,n=!1,i=!1){const a=this.getVolumeIndexByID(e),o=Uint32Array.from(this.volumes[a].dims?.slice(1,4)??[]),l=Uint32Array.from(this.volumes[a].img?.slice()??[]),[u,f]=this.bwlabel(l,o,t,n,i),h=this.volumes[a].clone();h.opacity=.5,h.colormap="random";for(let d=0;d<h.img.length;d++)h.img[d]=f[d];return h.cal_min=0,h.cal_max=u,h}async createNiftiArray(e=[256,256,256],t=[1,1,1],n=[1,0,0,-128,0,1,0,-128,0,0,1,-128,0,0,0,1],i=2,a=new Uint8Array){return await jt.createNiftiArray(e,t,n,i,a)}async niftiArray2NVImage(e=new Uint8Array){return await jt.loadFromUrl({url:e})}async loadFromUrl(e){return await jt.loadFromUrl({url:e})}async conform(e,t=!1,n=!0,i=!1,a=!1){const{outAffine:u,invVox2vox:f}=PT({inDims:e.hdr.dims,inAffine:e.hdr.affine.flat(),outDim:256,outMM:1,toRAS:t}),h=new Float32Array(e.img),d=e.hdr.dims[1]*e.hdr.dims[2]*e.hdr.dims[3];if(e.hdr.scl_slope!==1||e.hdr.scl_inter!==0)for(let y=0;y<d;y++)h[y]=h[y]*e.hdr.scl_slope+e.hdr.scl_inter;const m=zT({inImg:h,inDims:e.hdr.dims,outDim:256,invVox2vox:f,isLinear:n}),p=a?NaN:0,A={img:e.img,dims:e.hdr.dims,global_min:e.global_min,global_max:e.global_max,datatypeCode:e.hdr.datatypeCode,scl_slope:e.hdr.scl_slope,scl_inter:e.hdr.scl_inter,cal_min:e.cal_min,cal_max:e.cal_max,f_low:p};let v;if(i){A.dst_min=0,A.dst_max=1;const[y,w]=Ip(A),C=LT(m,0,1,y,w);v=await this.createNiftiArray([256,256,256],[1,1,1],Array.from(u),16,new Uint8Array(C.buffer))}else{A.dst_min=0,A.dst_max=255;const[y,w]=Ip(A),C=OT(m,0,255,y,w);v=await this.createNiftiArray([256,256,256],[1,1,1],Array.from(u),2,C)}return this.niftiArray2NVImage(v)}setRenderDrawAmbientOcclusion(e){if(!this.renderShader)throw new Error("renderShader undefined");this.renderDrawAmbientOcclusion=e,this.renderShader.use(this.gl),this.gl.uniform1fv(this.renderShader.uniforms.renderDrawAmbientOcclusion,[this.renderDrawAmbientOcclusion,1]),this.drawScene()}setColorMap(e,t){this.setColormap(e,t)}setColormapNegative(e,t){const n=this.getVolumeIndexByID(e);this.volumes[n].colormapNegative=t,this.updateGLVolume()}setModulationImage(e,t,n=0){const i=this.getVolumeIndexByID(e);let a=null;t.length>0&&(a=this.getVolumeIndexByID(t)),this.volumes[i].modulationImage=a,this.volumes[i].modulateAlpha=n,this.updateGLVolume()}setGamma(e=1){this.scene.gamma=e,Xe.gamma=e,this.updateGLVolume()}async loadDeferred4DVolumes(e){const t=this.getVolumeIndexByID(e),n=this.volumes[t];if(n.nTotalFrame4D<=n.nFrame4D)return;n.nTotalFrame4D=n.nFrame4D;let i;n.fileObject?i=await jt.loadFromFile({file:n.fileObject}):i=await jt.loadFromUrl({url:n.url}),i&&(n.img=i.img.slice(),n.nTotalFrame4D=i.nTotalFrame4D,n.nFrame4D=i.nFrame4D,this.updateGLVolume())}setFrame4D(e,t){const n=this.getVolumeIndexByID(e);if(n<0)return;const i=this.volumes[n].frame4D;yM(this.volumes,e,t),this.volumes[n].frame4D!==i&&(this.updateGLVolume(),this.onFrameChange(this.volumes[n],this.volumes[n].frame4D),this.createOnLocationChange())}getFrame4D(e){return wM(this.volumes,e)}colormapFromKey(e){return Xe.colormapFromKey(e)}colormap(e="",t=!1){return Xe.colormap(e,t)}createColormapTexture(e=null,t=0,n=256){return e!==null&&this.gl.deleteTexture(e),t<1||n<1?null:(e=this.gl.createTexture(),this.gl.activeTexture(Le.TEXTURE1_COLORMAPS),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texStorage2D(this.gl.TEXTURE_2D,1,this.gl.RGBA8,n,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_R,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),e)}addColormapList(e="",t=NaN,n=NaN,i=!1,a=!1,o=!0,l=!1){e.length<1&&(o=!1),this.colormapLists.push({name:e,min:t,max:n,isColorbarFromZero:i,negative:a,visible:o,invert:l})}refreshColormaps(){if(this.colormapLists=[],this.volumes.length<1&&this.meshes.length<1)return;const e=this.volumes.length;if(e>0)for(let o=0;o<e;o++){const l=this.volumes[o],u=Rh(l.cal_min,l.cal_max,l.cal_minNeg,l.cal_maxNeg),f=l.colormapType!==0;this.addColormapList(l.colormapNegative,u[0],u[1],f,!0,l.colorbarVisible,l.colormapInvert),this.addColormapList(l.colormap,l.cal_min,l.cal_max,f,!1,l.colorbarVisible,l.colormapInvert)}const t=this.meshes.length;if(t>0)for(let o=0;o<t;o++){const l=this.meshes[o];if(!l.colorbarVisible)continue;const u=l.layers.length,f=l.fiberColor.toLowerCase();if(l.offsetPt0&&f.startsWith("dp")){let h=null;const d=parseInt(f.substring(3));f.startsWith("dpg")&&!l.fiberGroupColormap&&(h=d<l.dpg.length?l.dpg[d]:l.dpg[0]),f.startsWith("dps")&&(h=d<l.dps.length?l.dps[d]:l.dps[0]),f.startsWith("dpv")&&(h=d<l.dpv.length?l.dpv[d]:l.dpv[0]),h&&typeof l.colormap=="string"&&this.addColormapList(l.colormap,h.cal_min,h.cal_max,!1,!1,!0,l.colormapInvert)}if("edgeColormap"in l&&"edges"in l&&l.edges!==void 0){const h=Rh(l.edgeMin,l.edgeMax,NaN,NaN);this.addColormapList(l.edgeColormapNegative,h[0],h[1],!1,!0,!0,l.colormapInvert),this.addColormapList(l.edgeColormap,l.edgeMin,l.edgeMax,!1,!1,!0,l.colormapInvert)}if(!(u<1))for(let h=0;h<u;h++){const d=this.meshes[o].layers[h];if(!d.colorbarVisible||d.colormap.length<1)continue;const m=d.colormapType!==0;if(d.useNegativeCmap){const p=Rh(d.cal_min,d.cal_max,d.cal_minNeg,d.cal_maxNeg);this.addColormapList(d.colormapNegative,p[0],p[1],m,!0,!0,d.colormapInvert)}this.addColormapList(d.colormap,d.cal_min,d.cal_max,m,!1,!0,d.colormapInvert)}}const n=this.colormapLists.length;if(n<1)return;this.colormapTexture=this.createColormapTexture(this.colormapTexture,n+1);let i=new Uint8ClampedArray;function a(o){const l=new Uint8ClampedArray(i.length+o.length);l.set(i),l.set(o,i.length),i=l}for(let o=0;o<n;o++)a(Array.from(this.colormap(this.colormapLists[o].name,this.colormapLists[o].invert)));return a(Array.from(this.drawLut.lut)),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,256,n+1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i),this}sliceScale(e=!1){if(!this.back?.dims)throw new Error("back.dims undefined");return CD({forceVox:e,getScreenFieldOfViewMM:t=>this.screenFieldOfViewMM(t),getScreenFieldOfViewVox:t=>this.screenFieldOfViewVox(t),backDims:this.back.dims})}tileIndex(e,t){return l0({x:e,y:t,screenSlices:this.screenSlices})}inRenderTile(e,t){return lD({x:e,y:t,screenSlices:this.screenSlices})}sliceScroll3D(e=0){const t=dD({posChange:e,volumesLength:this.volumes.length,clipPlaneDepthAziElevs:this.scene.clipPlaneDepthAziElevs,activeClipPlaneIndex:this.uiData.activeClipPlaneIndex,volScaleMultiplier:this.scene.volScaleMultiplier});if(t.action!=="none"){if(t.action==="clipPlane"&&t.newClipPlaneDepth!==void 0){const n=this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex].slice();return n[0]=t.newClipPlaneDepth,this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex]=n,this.setClipPlane(this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex])}t.action==="zoom"&&t.newVolScaleMultiplier!==void 0&&(this.scene.volScaleMultiplier=t.newVolScaleMultiplier,this.drawScene())}}inGraphTile(e,t){return cD({x:e,y:t,graph:this.graph,volumesLength:this.volumes.length,firstVolumeFrameCount:this.volumes.length>0?this.volumes[0].nFrame4D??0:0})}updateBitmapFromClickToSegment(){this.clickToSegmentGrowingBitmap===null||this.drawBitmap===null||bT({sourceBitmap:this.clickToSegmentGrowingBitmap,targetBitmap:this.drawBitmap})}sumBitmap(e){return CT(e)}doClickToSegment(e){const{tileIndex:t}=e;if(t<0||t>=this.screenSlices.length){G.warn(`Invalid tileIndex ${t} received in doClickToSegment.`);return}const n=this.screenSlices[t].axCorSag;if(n>2){G.warn("ClickToSegment attempted on non-2D slice tile.");return}const i=this.screenXY2TextureFrac(this.clickToSegmentXY[0],this.clickToSegmentXY[1],t,!1);if(i[0]<0){G.debug("Click location outside valid texture fraction for the tile.");return}const a=this.frac2vox(i),o=this.back.getValue(a[0],a[1],a[2]),l=yT({voxelIntensity:o,thresholdPercent:this.opts.clickToSegmentPercent,calMin:this.back.cal_min,calMax:this.back.cal_max,autoIntensity:this.opts.clickToSegmentAutoIntensity,currentIntensityMin:this.opts.clickToSegmentIntensityMin,currentIntensityMax:this.opts.clickToSegmentIntensityMax,currentBright:this.opts.clickToSegmentBright});this.opts.clickToSegmentIntensityMin=l.intensityMin,this.opts.clickToSegmentIntensityMax=l.intensityMax,this.opts.clickToSegmentBright=l.isBright;const u=wT(l.isBright);this.drawPenAxCorSag=n;const f=this.clickToSegmentIsGrowing?this.clickToSegmentGrowingBitmap:this.drawBitmap;if(!f){if(G.error("Target bitmap for flood fill is null."),this.clickToSegmentIsGrowing){if(this.drawBitmap||this.createEmptyDrawing(),!this.drawBitmap)return;this.clickToSegmentGrowingBitmap=this.drawBitmap.slice()}else if(this.createEmptyDrawing(),!this.drawBitmap)return;G.warn("Initialized missing bitmap in doClickToSegment.")}if(this.drawFloodFill([a[0],a[1],a[2]],this.opts.penValue,u,this.opts.clickToSegmentIntensityMin,this.opts.clickToSegmentIntensityMax,this.opts.floodFillNeighbors,this.opts.clickToSegmentMaxDistanceMM,this.opts.clickToSegmentIs2D,f),!this.clickToSegmentIsGrowing&&(G.debug("Applying clickToSegment mask to drawBitmap."),this.drawBitmap?(this.refreshDrawing(!1,!1),this.drawScene()):G.error("Cannot refresh drawing after click-to-segment apply, drawBitmap is null."),this.drawBitmap)){const h=this.getDescriptives({layer:0,masks:[],drawingIsMask:!0});this.onClickToSegment({mL:h.volumeML,mm3:h.volumeMM3})}this.createOnLocationChange(n)}mouseClick(e,t,n=0,i=!0){if(e*=this.uiData.dpr,t*=this.uiData.dpr,this.canvas.focus(),this.thumbnailVisible){this.thumbnailVisible=!1,Promise.all([this.loadVolumes(this.deferredVolumes),this.loadMeshes(this.deferredMeshes)]).catch(a=>{throw a});return}if(this.inGraphTile(e,t)){if(!this.graph.plotLTWH)throw new Error("plotLTWH undefined");const a=[(e-this.graph.plotLTWH[0])/this.graph.plotLTWH[2],(t-this.graph.plotLTWH[1])/this.graph.plotLTWH[3]];if(a[0]>0&&a[1]>0&&a[0]<=1&&a[1]<=1){const o=Math.round(a[0]*(this.volumes[0].nFrame4D-1));this.setFrame4D(this.volumes[0].id,o);return}a[0]>.5&&a[1]>1&&this.loadDeferred4DVolumes(this.volumes[0].id).catch(o=>{throw o});return}if(this.inRenderTile(e,t)>=0){this.sliceScroll3D(n),this.drawScene();return}if(!(this.screenSlices.length<1||this.gl.canvas.height<1||this.gl.canvas.width<1))for(let a=0;a<this.screenSlices.length;a++){const o=this.screenSlices[a].axCorSag;if(this.drawPenAxCorSag>=0&&this.drawPenAxCorSag!==o||o>2&&!this.opts.clickToSegment&&n===0)continue;const l=this.screenXY2TextureFrac(e,t,a,!0);if(!(l[0]<0)){if(n!==0||!i){if(!i){o<=2&&(this.scene.crosshairPos[2-o]=n,this.drawScene(),this.createOnLocationChange(o));return}const u=n<0?-1:1,f=[0,0,0];o<=2&&(f[2-o]=u,this.moveCrosshairInVox(f[0],f[1],f[2]));return}if(this.opts.isForceMouseClickToVoxelCenters?this.scene.crosshairPos=wn(this.vox2frac(this.frac2vox(l))):this.scene.crosshairPos=wn(l),this.opts.drawingEnabled){const u=this.frac2vox(this.scene.crosshairPos);if(!isFinite(this.opts.penValue)||this.opts.penValue<0||Object.is(this.opts.penValue,-0)){let f=0,h=Math.abs(this.opts.penValue);const d=!0;Object.is(this.opts.penValue,-0)?(f=0,h=0,G.debug("Erase Cluster selected")):(f=this.opts.penValue,G.debug("Intensity Grow selected",f)),this.drawFloodFill(u,h,f,NaN,NaN,this.opts.floodFillNeighbors,Number.POSITIVE_INFINITY,!1,this.drawBitmap,d),this.drawScene(),this.createOnLocationChange(o);return}else if(this.opts.clickToSegment){o<=2&&(this.clickToSegmentIsGrowing=!1,this.doClickToSegment({x:this.clickToSegmentXY[0],y:this.clickToSegmentXY[1],tileIndex:a})),this.createOnLocationChange(o);return}else if(this.opts.penType===0){if(isNaN(this.drawPenLocation[0]))this.drawPenAxCorSag=o,this.drawPenFillPts=[],this.drawPt(...u,this.opts.penValue);else{if(u[0]===this.drawPenLocation[0]&&u[1]===this.drawPenLocation[1]&&u[2]===this.drawPenLocation[2]){this.drawScene(),this.createOnLocationChange(o);return}this.drawPenLine(u,this.drawPenLocation,this.opts.penValue)}this.drawPenLocation=u,this.opts.isFilledPen&&this.drawPenFillPts.push(u),this.refreshDrawing(!1,!1)}else(this.opts.penType===1||this.opts.penType===2)&&(isNaN(this.drawShapeStartLocation[0])?(this.drawPenAxCorSag=o,this.drawShapeStartLocation=[...u],this.drawBitmap&&(this.drawShapePreviewBitmap=this.drawBitmap.slice())):this.drawShapePreviewBitmap&&this.drawBitmap&&(this.drawBitmap.set(this.drawShapePreviewBitmap),this.opts.penType===1?this.drawRectangleMask(this.drawShapeStartLocation,u,this.opts.penValue):this.opts.penType===2&&this.drawEllipseMask(this.drawShapeStartLocation,u,this.opts.penValue),this.refreshDrawing(!1,!1)))}this.drawScene(),this.createOnLocationChange(o);return}}}drawRuler(){let e=[],t=[];for(let h=0;h<this.screenSlices.length;h++)if(this.screenSlices[h].axCorSag!==4&&this.screenSlices[h].fovMM.length>1){t=this.screenSlices[h].leftTopWidthHeight,e=this.screenSlices[h].fovMM;break}if(t.length<4)return;const[n,i,a,o]=this.getBoundsRegion(),l=Number(this.opts.rulerWidth),u=YE({fovMM:e,ltwh:t,rulerWidth:l,regionBounds:{x:n,y:i,w:a,h:o}});if(!u)return;const f=HE(this.opts.rulerColor);this.drawRuler10cm(u.startXYendXY,f,l+1),this.drawRuler10cm(u.startXYendXY,this.opts.rulerColor,l)}drawRuler10cm(e,t,n=1){if(!this.lineShader)throw new Error("lineShader undefined");this.gl.bindVertexArray(this.genericVAO),this.lineShader.use(this.gl),this.gl.uniform4fv(this.lineShader.uniforms.lineColor,t),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,n),this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,e),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);const i=XE(e,this.opts.rulerWidth);for(const a of i)this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,a),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);this.gl.bindVertexArray(this.unusedVAO)}screenXY2mm(e,t,n=-1){return KC(e,t,this.screenSlices,{volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D,isSliceMM:this.opts.isSliceMM,forceSlice:n})}dragForPanZoom(e){const t=this.screenXY2mm(e[2],e[3]);if(isNaN(t[0]))return;const n=this.screenXY2mm(e[0],e[1],t[3]);if(isNaN(n[0])||isNaN(t[0])||isNaN(t[3]))return;const i=K8({startMM:n,endMM:t,pan2DxyzmmAtMouseDown:this.uiData.pan2DxyzmmAtMouseDown});this.scene.pan2Dxyzmm[0]=i.pan2Dxyzmm[0],this.scene.pan2Dxyzmm[1]=i.pan2Dxyzmm[1],this.scene.pan2Dxyzmm[2]=i.pan2Dxyzmm[2],this.canvas.focus()}dragForCenterButton(e){this.dragForPanZoom(e)}dragForSlicer3D(e){const t=this.frac2mm(this.scene.crosshairPos),n=Q8({startY:e[1],endY:e[3],pan2DxyzmmAtMouseDown:this.uiData.pan2DxyzmmAtMouseDown,currentPan2Dxyzmm:this.scene.pan2Dxyzmm,crosshairMM:t,yoke3Dto2DZoom:this.opts.yoke3Dto2DZoom});n.volScaleMultiplier!==void 0&&(this.scene.volScaleMultiplier=n.volScaleMultiplier),this.scene.pan2Dxyzmm[0]=n.pan2Dxyzmm[0],this.scene.pan2Dxyzmm[1]=n.pan2Dxyzmm[1],this.scene.pan2Dxyzmm[2]=n.pan2Dxyzmm[2],this.scene.pan2Dxyzmm[3]=n.pan2Dxyzmm[3]}drawMeasurementTool(e,t=!0){const n=(h,d,m,p,A)=>jE({startXYendXY:[h,d,m,p],distance:A}),i=this.gl;if(i.viewport(0,0,i.canvas.width,i.canvas.height),i.bindVertexArray(this.genericVAO),i.depthFunc(i.ALWAYS),i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl),i.uniform4fv(this.lineShader.uniforms.lineColor,this.opts.rulerColor),i.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[i.canvas.width,i.canvas.height]),i.uniform1f(this.lineShader.uniforms.thickness,this.opts.rulerWidth),i.uniform4fv(this.lineShader.uniforms.startXYendXY,e),i.drawArrays(i.TRIANGLE_STRIP,0,4);const a=this.opts.measureLineColor;a[3]=1,i.uniform4fv(this.lineShader.uniforms.lineColor,a);const o=this.opts.rulerWidth;i.uniform1f(this.lineShader.uniforms.thickness,o*2);let l=[e[0],e[1]-o,e[0],e[1]+o];i.uniform4fv(this.lineShader.uniforms.startXYendXY,l),i.drawArrays(i.TRIANGLE_STRIP,0,4),l=[e[2],e[3]-o,e[2],e[3]+o],i.uniform4fv(this.lineShader.uniforms.startXYendXY,l),i.drawArrays(i.TRIANGLE_STRIP,0,4);let u=this.canvasPos2frac([e[0],e[1]]),f=this.canvasPos2frac([e[2],e[3]]);if(u[0]>=0&&f[0]>=0){const h=this.frac2mm(u);u=ce(h[0],h[1],h[2]);const d=this.frac2mm(f);f=ce(d[0],d[1],d[2]);const m=je();kg(m,u,f);const p=no(m);let A=2;p>9&&(A=1),p>99&&(A=0);let v=p.toFixed(A);this.opts.showMeasureUnits&&(v=`${v} mm`);let y=e;const[w,C,S,E]=e,{origin:M,terminus:R}=n(w,C,S,E,30);switch(this.opts.measureTextJustify){case"start":y=[...M,...M.map(D=>D+1)];break;case"end":y=y=[...R,...R.map(D=>D+1)];break;default:y=e;break}t&&this.drawTextBetween(y,v,this.opts.measureTextHeight/.06,this.opts.measureTextColor)}i.bindVertexArray(this.unusedVAO)}drawAngleMeasurementTool(){this.uiData.angleState==="drawing_first_line"?this.drawMeasurementTool([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]],!1):this.uiData.angleState==="drawing_second_line"&&(this.drawMeasurementTool(this.uiData.angleFirstLine,!1),this.drawMeasurementTool([this.uiData.angleFirstLine[2],this.uiData.angleFirstLine[3],this.uiData.dragEnd[0],this.uiData.dragEnd[1]],!1),this.drawAngleText())}drawAngleText(){const e=this.uiData.angleFirstLine,t=[this.uiData.angleFirstLine[2],this.uiData.angleFirstLine[3],this.uiData.dragEnd[0],this.uiData.dragEnd[1]],n=this.calculateAngleBetweenLines(e,t),i=this.uiData.angleFirstLine[2],a=this.uiData.angleFirstLine[3],o=`${n.toFixed(1)}`;this.drawTextBetween([i,a,i+1,a+1],o,this.opts.measureTextHeight/.06,this.opts.measureTextColor)}drawAngleTextForAngle(e){const t=this.calculateAngleBetweenLines(e.firstLine,e.secondLine),n=e.firstLine[2],i=e.firstLine[3],a=`${t.toFixed(1)}`;this.drawTextBetween([n,i,n+1,i+1],a,this.opts.measureTextHeight/.06,this.opts.measureTextColor)}calculateAngleBetweenLines(e,t){return q8(e,t)}resetAngleMeasurement(){const e=_8();this.uiData.angleState=e.angleState,this.uiData.angleFirstLine=e.angleFirstLine}getCurrentSliceInfo(){return fD({dragStart:this.uiData.dragStart,screenSlices:this.screenSlices,crosshairPos:this.scene.crosshairPos,currentSliceType:this.opts.sliceType,canvasPos2frac:e=>this.canvasPos2frac(e)})}getCurrentSlicePosition(e){return Mc({sliceType:e,crosshairPos:this.scene.crosshairPos})}shouldDrawOnCurrentSlice(e,t,n){return hD({sliceType:t,slicePosition:n,currentSliceTypeOpt:this.opts.sliceType,screenSlices:this.screenSlices,crosshairPos:this.scene.crosshairPos})}clearMeasurements(){this.document.completedMeasurements=[],this.drawScene()}clearAngles(){this.document.completedAngles=[],this.drawScene()}clearAllMeasurements(){this.document.completedMeasurements=[],this.document.completedAngles=[],this.drawScene()}setDragMode(e){const t=G8(e);if(t===null){console.warn(`Unknown drag mode: ${e}`);return}this.opts.dragMode=t,$8(this.opts.dragMode)||this.resetAngleMeasurement(),this.clearActiveDragMode()}setMouseEventConfig(e){this.opts.mouseEventConfig=e,this.clearActiveDragMode()}setTouchEventConfig(e){this.opts.touchEventConfig=e,this.clearActiveDragMode()}getMouseEventConfig(){return this.opts.mouseEventConfig}getTouchEventConfig(){return this.opts.touchEventConfig}drawRect(e,t=[1,0,0,-1]){if(t[3]<0&&(t=this.opts.crosshairColor),!this.rectShader)throw new Error("rectShader undefined");this.gl.disable(this.gl.CULL_FACE),this.opts.selectionBoxIsOutline?(this.drawCircle(e,t,.1),this.rectOutlineShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform1f(this.rectOutlineShader.uniforms.thickness,this.opts.selectionBoxLineThickness),this.gl.uniform4fv(this.rectOutlineShader.uniforms.lineColor,t),this.gl.uniform2fv(this.rectOutlineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.rectOutlineShader.uniforms.leftTopWidthHeight,e[0],e[1],e[2],e[3]),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)):(this.rectShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform4fv(this.rectShader.uniforms.lineColor,t),this.gl.uniform2fv(this.rectShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.rectShader.uniforms.leftTopWidthHeight,e[0],e[1],e[2],e[3]),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO))}drawBoundsBox(e,t,n=2){if(!this.rectOutlineShader)throw new Error("rectOutlineShader undefined");const i=this.gl,[a,o,l,u]=e;i.viewport(0,0,i.canvas.width,i.canvas.height),this.rectOutlineShader.use(i),i.enable(i.BLEND),i.uniform1f(this.rectOutlineShader.uniforms.thickness,n),i.uniform4fv(this.rectOutlineShader.uniforms.lineColor,t),i.uniform2fv(this.rectOutlineShader.uniforms.canvasWidthHeight,[i.canvas.width,i.canvas.height]),i.uniform4f(this.rectOutlineShader.uniforms.leftTopWidthHeight,a,o,l,u),i.bindVertexArray(this.genericVAO),i.drawArrays(i.TRIANGLE_STRIP,0,4),i.bindVertexArray(this.unusedVAO)}drawCircle(e,t=this.opts.fontColor,n=1){if(!this.circleShader)throw new Error("circleShader undefined");this.circleShader.use(this.gl),this.gl.enable(this.gl.BLEND),this.gl.uniform4fv(this.circleShader.uniforms.circleColor,t),this.gl.uniform2fv(this.circleShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform4f(this.circleShader.uniforms.leftTopWidthHeight,e[0],e[1],e[2],e[3]),this.gl.uniform1f(this.circleShader.uniforms.fillPercent,n),this.gl.uniform4fv(this.circleShader.uniforms.circleColor,t),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawSelectionBox(e){if(this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.getCurrentDragMode()===6){this.drawCircle(e,this.opts.selectionBoxColor,.1);return}this.drawRect(e,this.opts.selectionBoxColor)}effectiveCanvasHeight(){return wD({canvasHeight:this.gl.canvas.height,bounds:this.opts.bounds,colorbarHeight:this.colorbarHeight})}effectiveCanvasWidth(){return bD({canvasWidth:this.gl.canvas.width,bounds:this.opts.bounds,legendPanelWidth:this.getLegendPanelWidth()})}getAllLabels(){return sE({meshes:this.meshes,documentLabels:this.document.labels})}getConnectomeLabels(){return oE({meshes:this.meshes,documentLabels:this.document.labels})}getBulletMarginWidth(){const e=this.getConnectomeLabels();return MD({labels:e,fontPx:this.fontPx,textHeight:(t,n)=>this.textHeight(t,n)})}getLegendPanelWidth(){const e=this.getConnectomeLabels();return ED({labels:e,showLegend:this.opts.showLegend,fontPx:this.fontPx,canvasWidth:this.gl.canvas.width,textWidth:(t,n)=>this.textWidth(t,n),getBulletMarginWidth:()=>this.getBulletMarginWidth()})}getLegendPanelHeight(e=1){const t=this.getConnectomeLabels();return DD({labels:t,fontPx:this.fontPx,panelScale:e,textHeight:(n,i)=>this.textHeight(n,i)})}reserveColorbarPanel(){const e=TD({fontPx:this.fontPx,boundsRegion:this.getBoundsRegion(),colorbarWidth:this.opts.colorbarWidth});return this.colorbarHeight=e.colorbarHeight,e.leftTopWidthHeight}drawColorbarCore(e=0,t=[0,0,0,0],n=!1,i=0,a=1,o){if(t[2]<=0||t[3]<=0)return;const l=this.fontPx;if(l<=0)return;this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);let u=l;const f=3*l;let h=l;if(t[3]<f){if(t[3]<3)return;u=1,h=t[3]-2}this.gl.disable(this.gl.DEPTH_TEST),this.colorbarHeight=t[3]+1;const d=[t[0]+u,t[1],t[2]-2*u,h],m=[d[0]-1,d[1]-1,d[2]+2,d[3]+2];if(this.opts.showColorbarBorder&&this.drawRect(m,this.opts.crosshairColor),!this.colorbarShader)throw new Error("colorbarShader undefined");this.colorbarShader.use(this.gl),this.gl.activeTexture(Le.TEXTURE1_COLORMAPS),this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST);const p=e;if(this.gl.uniform1f(this.colorbarShader.uniforms.layer,p),this.gl.uniform2fv(this.colorbarShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.disable(this.gl.CULL_FACE),n){const D=[d[0]+d[2],d[1],-d[2],d[3]];this.gl.uniform4fv(this.colorbarShader.uniforms.leftTopWidthHeight,D)}else this.gl.uniform4fv(this.colorbarShader.uniforms.leftTopWidthHeight,d);this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);let A=0;if(o&&a<0&&n?(A=a,a=0):o&&i>0&&(A=i,i=0),i===a||l<1)return;const v=Math.abs(a-i);let[y,w]=mp(i,a);w<i&&(w+=y);function C(D){return D.toFixed(6).replace(/\.?0*$/,"")}let S=w;const E=[0,d[1]+d[3]-l*.5,2,l*.75],M=E[1]+E[3],R=1;for(;S<=a;){E[0]=d[0]+(S-i)/v*d[2],this.drawRect(E);const D=C(R*S);this.drawTextBelow([E[0],M],D),S+=y}if(A!==0){const D=[d[0]+(A-i)/v*d[2],d[1]-d[3]*.25,2,d[3]*1.5];this.drawRect(D)}}drawColorbar(){const e=this.colormapLists,t=e.length;if(t<1)return;let n=0;for(let l=0;l<t;l++)e[l].visible&&n++;if(n<1)return;let i=this.reserveColorbarPanel();const a=3*this.fontPx;if(a<0)return;let o=i[2]/n;(i[2]<=0||i[3]<=0)&&(o=this.gl.canvas.width/n,i=[0,this.gl.canvas.height-a,o,a]),i[2]=o;for(let l=0;l<t;l++)e[l].visible&&(this.drawColorbarCore(l,i,e[l].negative,e[l].min,e[l].max,e[l].isColorbarFromZero),i[0]+=o)}textWidth(e,t){return OE({fontMets:this.fontMets,scale:e,str:t})}textHeight(e,t){return LE({fontMets:this.fontMets,scale:e,str:t})}drawChar(e,t,n){if(!this.fontShader)throw new Error("fontShader undefined");const i=this.fontMets.mets[n],a=e[0]+t*i.lbwh[0],o=-(t*i.lbwh[1]),l=t*i.lbwh[2],u=t*i.lbwh[3],f=e[1]+(o-u)+t;return this.gl.uniform4f(this.fontShader.uniforms.leftTopWidthHeight,a,f,l,u),this.gl.uniform4fv(this.fontShader.uniforms.uvLeftTopWidthHeight,i.uv_lbwh),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),t*i.xadv}drawLoadingText(e){if(!e)return;if(!this.canvas)throw new Error("canvas undefined");const[t,n,i,a]=this.getBoundsRegion();this.gl.viewport(t,n,i,a),this.gl.enable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND);const o=t+i/2,l=n+a/2;this.drawTextBelow([o,l],e,3)}drawText(e,t,n=1,i=null){if(this.fontPx<=0)return;if(!this.fontShader)throw new Error("fontShader undefined");this.fontShader.use(this.gl);const a=this.fontPx*n;this.gl.enable(this.gl.BLEND),this.gl.uniform2f(this.fontShader.uniforms.canvasWidthHeight,this.gl.canvas.width,this.gl.canvas.height),i===null&&(i=this.opts.fontColor),this.gl.uniform4fv(this.fontShader.uniforms.fontColor,i);let o=a/this.fontMets.size*this.fontMets.distanceRange;o=Math.max(o,1),this.gl.uniform1f(this.fontShader.uniforms.screenPxRange,o);const l=new TextEncoder().encode(t);this.gl.bindVertexArray(this.genericVAO);for(let u=0;u<t.length;u++)e[0]+=this.drawChar(e,a,l[u]);this.gl.bindVertexArray(this.unusedVAO)}drawTextRight(e,t,n=1,i=null){this.fontPx<=0||(e[1]-=.5*this.fontPx,this.drawText(e,t,n,i))}drawTextLeft(e,t,n=1,i=null){if(this.fontPx<=0)return;const a=this.fontPx*n;e[0]-=this.textWidth(a,t),e[1]-=.5*a,this.drawText(e,t,n,i)}drawTextRightBelow(e,t,n=1,i=null){this.fontPx<=0||this.drawText(e,t,n,i)}drawTextBetween(e,t,n=1,i=null){if(this.fontPx<=0)return;const a=kE(e,t,this.fontPx,n,(l,u)=>this.textWidth(l,u)),o=GE(i,this.opts.crosshairColor);this.drawRect(a.rectLTWH,o),this.drawText([a.textX,a.textY],t,n,i)}drawTextBelow(e,t,n=1,i=null){if(this.fontPx<=0)return;if(!this.canvas)throw new Error("canvas undefined");const a=PE({xy:e,str:t,fontPx:this.fontPx,scale:n,canvasWidth:this.canvas.width},(o,l)=>this.textWidth(o,l));this.drawText([a.x,a.y],t,a.scale,i)}drawTextAbove(e,t,n=1,i=null){if(this.fontPx<=0)return;if(!this.canvas)throw new Error("canvas undefined");const a=zE({xy:e,str:t,fontPx:this.fontPx,scale:n,canvasWidth:this.canvas.width},(o,l)=>this.textWidth(o,l));this.drawText([a.x,a.y],t,a.scale,i)}updateInterpolation(e,t=!1){dE({gl:this.gl,layer:e,isForceLinear:t,isNearestInterpolation:this.opts.isNearestInterpolation,is2DSliceShader:this.opts.is2DSliceShader})}setAtlasOutline(e){this.opts.atlasOutline=e,this.updateGLVolume(),this.drawScene()}setInterpolation(e){this.opts.isNearestInterpolation=e;const t=this.volumes.length;if(!(t<1)){for(let n=0;n<t;n++)this.updateInterpolation(n);this.drawScene()}}calculateMvpMatrix2D(e,t,n,i=1/0,a=0,o=0,l=0,u=!1){this.gl.viewport(e[0],this.gl.canvas.height-(e[1]+e[3]),e[2],e[3]);let h=t[0],d=n[0],m=[h,t[1]],p=[d-h,n[1]-t[1]];u&&(m=[n[0],t[1]],p=[t[0]-n[0],n[1]-t[1]],h=-n[0],d=-t[0]);const A=2*Math.max(Math.abs(t[2]),Math.abs(n[2])),v=Ue();let y=.01,w=A*8;if(i!==1/0){let D=u;l===0&&(o===0||o===180)&&(D=!D);let T=A*1.8-a;D||(T=A*1.8+a),w=T-i,y=T+i}yc(v,h,d,t[1],n[1],w,y);const C=Ue();C[0]=-1;const S=ce(0,0,-A*1.8);Ba(C,C,S),vc(C,C,Ji(270-l)),xc(C,C,Ji(o-180));const E=Ue();Kt(E,C);const M=Ue();_t(M,E);const R=Ue();return Tr(R,v,C),{modelViewProjectionMatrix:R,modelMatrix:C,normalMatrix:M,leftTopMM:m,fovMM:p}}swizzleVec3MM(e,t){return _C(e,t)}screenFieldOfViewVox(e=0){const t=wn(this.volumeObject3D.fieldOfViewDeObliqueMM);return this.swizzleVec3MM(t,e)}screenFieldOfViewMM(e=0,t=!1){if(this.volumes.length<1){let u=ce(this.extentsMin[0],this.extentsMin[1],this.extentsMin[2]),f=ce(this.extentsMax[0],this.extentsMax[1],this.extentsMax[2]);u=this.swizzleVec3MM(u,e),f=this.swizzleVec3MM(f,e);const h=je();return Je(h,f,u),h}if(!t&&!this.opts.isSliceMM)return this.screenFieldOfViewVox(e);const n=this.volumeObject3D.extentsMin,i=this.volumeObject3D.extentsMax;let a=ce(n[0],n[1],n[2]),o=ce(i[0],i[1],i[2]);a=this.swizzleVec3MM(a,e),o=this.swizzleVec3MM(o,e);const l=je();return Je(l,o,a),l}screenFieldOfViewExtendedVox(e=0){const t=this.volumes[0].extentsMinOrtho,n=this.volumes[0].extentsMaxOrtho;let i=ce(t[0],t[1],t[2]),a=ce(n[0],n[1],n[2]);const o=Ue();i=this.swizzleVec3MM(i,e),a=this.swizzleVec3MM(a,e);const l=je();return Je(l,a,i),{mnMM:i,mxMM:a,rotation:o,fovMM:l}}screenFieldOfViewExtendedMM(e=0){if(this.volumes.length<1){let u=ce(this.extentsMin[0],this.extentsMin[1],this.extentsMin[2]),f=ce(this.extentsMax[0],this.extentsMax[1],this.extentsMax[2]);const h=Ue();u=this.swizzleVec3MM(u,e),f=this.swizzleVec3MM(f,e);const d=je();return Je(d,f,u),{mnMM:u,mxMM:f,rotation:h,fovMM:d}}if(!this.volumeObject3D)throw new Error("volumeObject3D undefined");const t=this.volumeObject3D.extentsMin,n=this.volumeObject3D.extentsMax;let i=ce(t[0],t[1],t[2]),a=ce(n[0],n[1],n[2]);const o=Ue();i=this.swizzleVec3MM(i,e),a=this.swizzleVec3MM(a,e);const l=je();return Je(l,a,i),{mnMM:i,mxMM:a,rotation:o,fovMM:l}}drawSliceOrientationText(e,t,n=[NaN,NaN]){this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);let i="S";t===0&&(i="A");let a=this.opts.isRadiologicalConvention?"R":"L";t===2&&(a=this.opts.sagittalNoseLeft?"A":"P");let o="I";t===0&&(o="P");let l=this.opts.isRadiologicalConvention?"L":"R";if(t===2&&(l=this.opts.sagittalNoseLeft?"P":"A"),this.opts.isCornerOrientationText){this.drawTextRightBelow([e[0],e[1]],a+i);return}let u=!0,f=!0;const h=this.opts.showAllOrientationMarkers,d=this.opts.showAllOrientationMarkers;if(!isNaN(n[0])){const m=this.fontPx+2;n[1]>m&&(this.drawTextBelow([e[0]+e[2]*.5,e[1]+n[1]-m],i),u=!1);const p=this.textWidth(m,a)+2;n[0]>p&&(this.drawTextRight([e[0]+n[0]-p,e[1]+e[3]*.5],a),f=!1)}u&&this.drawTextBelow([e[0]+e[2]*.5,e[1]],i),f&&this.drawTextRight([e[0],e[1]+e[3]*.5],a),h&&this.drawTextAbove([e[0]+e[2]*.5,e[1]+e[3]],o),d&&this.drawTextLeft([e[0]+e[2],e[1]+e[3]*.5],l)}xyMM2xyzMM(e,t){return SD({axCorSag:e,sliceFrac:t,frac2mm:n=>this.frac2mm(n),swizzleVec3MM:(n,i)=>this.swizzleVec3MM(n,i)})}draw2DMain(e,t,n=NaN){let i=new Float32Array([0,0,0]);this.volumes.length>0&&(i=new Float32Array(this.volumes[0].frac2mm.slice()));let a=this.screenFieldOfViewExtendedMM(t),o=Ue();!this.opts.isSliceMM&&this.volumes.length>0&&(i=new Float32Array(this.volumes[0].frac2mmOrtho.slice()),o=lt(this.volumes[0].mm2ortho),a=this.screenFieldOfViewExtendedVox(t));let l=this.opts.isRadiologicalConvention&&t<2;n===1/0||n===-1/0?(l=n!==1/0,t===1&&(l=!l)):this.opts.sagittalNoseLeft&&t===2&&(l=!l);let u=0,f=0;t===2?f=l?90:-90:t===1?f=l?180:0:(f=l?180:0,u=l?-90:90);const h=this.gl;let d=!1;if(e[2]===0||e[3]===0){d=!0;const S=h.canvas.width/a.fovMM[0],E=h.canvas.height/a.fovMM[1],M=Math.min(S,E),R=S/M,D=E/M;a.fovMM[0]*=R,a.fovMM[1]*=D;let T=(a.mnMM[0]+a.mxMM[0])*.5;a.mnMM[0]=T-a.fovMM[0]*.5,a.mxMM[0]=T+a.fovMM[0]*.5,T=(a.mnMM[1]+a.mxMM[1])*.5,a.mnMM[1]=T-a.fovMM[1]*.5,a.mxMM[1]=T+a.fovMM[1]*.5,e=[0,0,h.canvas.width,h.canvas.height]}if(isNaN(n)){const S=this.scene.pan2Dxyzmm,E=this.swizzleVec3MM(ce(S[0],S[1],S[2]),t),M=this.scene.pan2Dxyzmm[3];a.mnMM[0]-=E[0],a.mxMM[0]-=E[0],a.mnMM[1]-=E[1],a.mxMM[1]-=E[1],a.mnMM[0]/=M,a.mxMM[0]/=M,a.mnMM[1]/=M,a.mxMM[1]/=M}let m=2;t===1&&(m=1),t===2&&(m=0);let p=this.scene.crosshairPos[m],A=this.frac2mm(this.scene.crosshairPos);!isNaN(n)&&n!==1/0&&n!==-1/0&&(A=this.frac2mm([.5,.5,.5]),A[m]=n,p=this.mm2frac(A)[m]);const v=A[m],y=h.canvas.height-e[1]-e[3],w=[e[0],y,e[2],e[3]];this.clearBounds(h.DEPTH_BUFFER_BIT,w),h.viewport(w[0],w[1],w[2],w[3]);let C=this.calculateMvpMatrix2D(e,a.mnMM,a.mxMM,1/0,0,f,u,l);if(n===1/0||n===-1/0){const S=e.slice();this.draw3D(e,C.modelViewProjectionMatrix,C.modelMatrix,C.normalMatrix,f,u);const E=this.screenSlices[this.screenSlices.length-1];E.leftTopWidthHeight=S,E.axCorSag=t,E.sliceFrac=1/0,E.AxyzMxy=this.xyMM2xyzMM(t,p),E.leftTopMM=C.leftTopMM,E.fovMM=C.fovMM;return}if(h.enable(h.DEPTH_TEST),h.blendFunc(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA),h.disable(h.BLEND),h.depthFunc(h.ALWAYS),h.disable(h.CULL_FACE),this.volumes.length>0){let S=this.sliceMMShader;if(this.opts.is2DSliceShader&&(S=this.slice2DShader),this.opts.isV1SliceShader&&(S=this.sliceV1Shader),this.customSliceShader&&(S=this.customSliceShader),!S)throw new Error("slice Shader undefined");S.use(this.gl),h.uniform1f(S.uniforms.overlayOutlineWidth,this.overlayOutlineWidth),h.uniform1f(S.uniforms.overlayAlphaShader,this.overlayAlphaShader),h.uniform1i(S.uniforms.isAlphaClipDark,this.isAlphaClipDark?1:0),h.uniform1i(S.uniforms.backgroundMasksOverlays,this.backgroundMasksOverlays),h.uniform1f(S.uniforms.drawOpacity,this.drawOpacity),h.uniform1f(S.uniforms.drawRimOpacity,this.drawRimOpacity),h.enable(h.BLEND),h.blendFunc(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA),h.uniform1f(S.uniforms.opacity,this.volumes[0].opacity),h.uniform1i(S.uniforms.axCorSag,t),h.uniform1f(S.uniforms.slice,p),h.uniformMatrix4fv(S.uniforms.frac2mm,!1,i),h.uniformMatrix4fv(S.uniforms.mvpMtx,!1,C.modelViewProjectionMatrix.slice()),h.bindVertexArray(this.genericVAO),h.drawArrays(h.TRIANGLE_STRIP,0,4),h.bindVertexArray(this.unusedVAO),this.screenSlices.push({leftTopWidthHeight:e,axCorSag:t,sliceFrac:p,AxyzMxy:this.xyMM2xyzMM(t,p),leftTopMM:C.leftTopMM,screen2frac:[],fovMM:C.fovMM})}if(h.depthMask(!0),h.depthFunc(h.LEQUAL),isNaN(n)&&this.drawCrosshairs3D(!0,1,C.modelViewProjectionMatrix,!0,this.opts.isSliceMM),this.opts.meshThicknessOn2D>0){this.opts.meshThicknessOn2D!==1/0&&(C=this.calculateMvpMatrix2D(e,a.mnMM,a.mxMM,this.opts.meshThicknessOn2D,v,f,u,l));const S=lt(C.modelViewProjectionMatrix);Tr(S,S,o),this.drawMesh3D(!0,1,S,C.modelMatrix,C.normalMatrix,!0)}isNaN(n)&&this.drawCrosshairs3D(!1,.15,C.modelViewProjectionMatrix,!0,this.opts.isSliceMM),d&&this.opts.isOrientationTextVisible&&this.drawSliceOrientationText(e,t),this.readyForSync=!0}draw2D(e,t,n=NaN,i=[NaN,NaN]){const[a,o,l,u]=this.getBoundsRegion();let f;e[2]===0&&e[3]===0?this.opts.bounds?f=[a,o,l,u]:f=[0,0,this.gl.canvas.width,this.gl.canvas.height]:f=e.slice();const h=[NaN,NaN];if(i[0]===1/0){const d=this.sliceScale().volScale;let m=this.scaleSlice(d[0],d[1],[0,0],[f[2],f[3]]);t===1&&(m=this.scaleSlice(d[0],d[2],[0,0],[f[2],f[3]])),t===2&&(m=this.scaleSlice(d[1],d[2],[0,0],[f[2],f[3]])),i[0]=m[2],i[1]=m[3]}isNaN(i[0])?this.draw2DMain(f,t,n):(h[0]=Math.floor(.5*(f[2]-i[0])),h[1]=Math.floor(.5*(f[3]-i[1])),f[0]+=h[0],f[1]+=h[1],f[2]=i[0],f[3]=i[1],this.draw2DMain(f,t,n)),!(n===1/0||n===-1/0||t===4)&&f[2]!==0&&f[3]!==0&&this.opts.isOrientationTextVisible&&this.drawSliceOrientationText(f,t,h)}calculateMvpMatrix(e,t=[0,0,0,0],n,i){const a=NE({canvasWidth:this.gl.canvas.width,canvasHeight:this.gl.canvas.height,leftTopWidthHeight:t,azimuth:n,elevation:i,furthestFromPivot:this.furthestFromPivot,pivot3D:this.pivot3D,volScaleMultiplier:this.scene.volScaleMultiplier,position:this.position});return[a.mvpMatrix,a.modelMatrix,a.normalMatrix]}calculateModelMatrix(e,t){if(!this.back)throw new Error("back undefined");return a0({azimuth:e,elevation:t,obliqueRAS:this.back.obliqueRAS})}calculateRayDirection(e,t){return Tv({azimuth:e,elevation:t,obliqueRAS:this.back?.obliqueRAS})}sceneExtentsMinMax(e=!0){return Wd({volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D},e)}setPivot3D(){const[e,t]=this.sceneExtentsMinMax(),n=IE({sceneMin:e,sceneMax:t});this.pivot3D=n.pivot3D,this.furthestFromPivot=n.furthestFromPivot,this.extentsMin=n.extentsMin,this.extentsMax=n.extentsMax}getMaxVols(){return VE({volumes:this.volumes})}detectPartialllyLoaded4D(){if(this.volumes.length<1)return!1;for(let e=0;e<this.volumes.length;e++)if(this.volumes[e].nFrame4D<this.volumes[e].hdr.dims[4])return!0;return!1}drawGraph(){if(this.getMaxVols()<2)return;const e=this.graph,[t,n,i,a]=this.getBoundsRegion();let o=0;if(e.autoSizeMultiplanar&&this.opts.sliceType===3)for(let K=0;K<this.screenSlices.length;K++){const te=this.screenSlices[K].axCorSag;if(te===0&&(o=this.screenSlices[K].leftTopWidthHeight[1]),te!==2)continue;const ae=this.screenSlices[K].leftTopWidthHeight.slice();ae[1]===o?(e.LTWH[0]=ae[0]+ae[2],e.LTWH[1]=ae[1]):(e.LTWH[0]=ae[0],e.LTWH[1]=ae[1]+ae[3]),e.LTWH[2]=ae[2],e.LTWH[3]=ae[2]}if(e.LTWH[0]=Math.max(t,e.LTWH[0]),e.LTWH[1]=Math.max(n,e.LTWH[1]),e.LTWH[2]=Math.min(i,e.LTWH[2]),e.LTWH[3]=Math.min(a,e.LTWH[3]),e.opacity<=0||e.LTWH[2]<=5||e.LTWH[3]<=5||Math.floor(e.LTWH[0]+e.LTWH[2])>t+i||Math.floor(e.LTWH[1]+e.LTWH[3])>n+a)return;e.backColor=[.15,.15,.15,e.opacity],e.lineColor=[1,1,1,1],this.opts.backColor[0]+this.opts.backColor[1]+this.opts.backColor[2]>1.5&&(e.backColor=[.95,.95,.95,e.opacity],e.lineColor=[0,0,0,1]);const l=.2,u=.3;e.lineColor[3]=l,e.textColor=e.lineColor.slice(),e.textColor[3]=1,e.lineThickness=3,e.gridLineThickness=1,e.lineAlpha=1,e.lines=[];const f=[];if(e.vols.length<1)this.volumes[0]!=null&&f.push(0);else for(let K=0;K<e.vols.length;K++){const te=e.vols[K];this.volumes[te]==null||this.volumes[te].nFrame4D<2||f.push(te)}if(f.length<1)return;const h=this.volumes[f[0]].nFrame4D;if(this.graph.selectedColumn=this.volumes[f[0]].frame4D,h<2){G.debug("Unable to generate a graph: Selected volume is 3D not 4D");return}for(let K=0;K<f.length;K++){e.lines[K]=[];const te=this.frac2vox(this.scene.crosshairPos),ae=this.volumes[f[K]];let fe=ae.nFrame4D;fe=Math.min(fe,h);for(let de=0;de<fe;de++){const he=ae.getValue(te[0],te[1],te[2],de);e.lines[K].push(he)}}e.lineRGB=[[.8,0,0],[0,.7,0],[0,0,.9],[.7,.7,0],[.8,0,.8],[0,.7,.7],[.6,.6,.6],[0,0,0]];let d=e.lines[0][0],m=e.lines[0][0];for(let K=0;K<e.lines.length;K++)for(let te=0;te<e.lines[K].length;te++){const ae=e.lines[K][te];d=Math.min(ae,d),m=Math.max(ae,m)}const p=this.volumes[f[0]].cal_min,A=this.volumes[f[0]].cal_max;if(e.isRangeCalMinMax&&p<A&&isFinite(p)&&isFinite(A)&&(d=p,m=A),e.normalizeValues&&m>d){const K=m-d;for(let te=0;te<e.lines.length;te++)for(let ae=0;ae<e.lines[te].length;ae++){const fe=e.lines[te][ae];e.lines[te][ae]=(fe-d)/K}d=0,m=1}d>=m&&(m=d+1),this.drawRect(e.LTWH,e.backColor);const[v,y,w]=mp(d,m),C=Math.max(0,-1*Math.floor(Math.log(v)/Math.log(10)));d=Math.min(y,d),m=Math.max(w,m);function S(K){return K.toFixed(6).replace(/\.?0*$/,"")}let E=this.fontPx*.7;const M=i/this.uiData.dpr,R=a/this.uiData.dpr,D=M*R,T=800*600;D<T?E=0:E=Math.max(E,this.opts.fontMinPx);const F=E/this.fontPx;let U=0,I=y;if(E>0)for(;I<=m;){const K=I.toFixed(C),te=this.textWidth(E,K);U=Math.max(te,U),I+=v}const V=.05,N=Math.abs(e.LTWH[2]),Y=Math.abs(e.LTWH[3]),P=[e.LTWH[0]+V*N+U,e.LTWH[1]+V*Y,e.LTWH[2]-U-2*V*N,e.LTWH[3]-E-2.5*V*Y];this.graph.LTWH=e.LTWH,this.graph.plotLTWH=P,this.drawRect(P,this.opts.backColor);const Q=m-d,k=P[3]/Q,j=P[2]/(e.lines[0].length-1),H=P[1]+P[3];I=y+.5*v;const Z=e.lineColor.slice();for(Z[3]=.5*e.lineColor[3];I<=m;){const K=H-(I-d)*k;this.drawLine([P[0],K,P[0]+P[2],K],e.gridLineThickness,Z),I+=v}I=y;const J=.5*e.gridLineThickness;for(;I<=m;){const K=H-(I-d)*k;this.drawLine([P[0]-J,K,P[0]+P[2]+e.gridLineThickness,K],e.gridLineThickness,e.lineColor);const te=I.toFixed(C);E>0&&this.drawTextLeft([P[0]-6,K],te,F,e.textColor),I+=v}let X=1;for(;e.lines[0].length/X>20;)X*=5;for(let K=0;K<e.lines[0].length;K+=X){const te=K*j+P[0];let ae=e.gridLineThickness;if(K%2===1)ae*=.5,this.drawLine([te,P[1],te,P[1]+P[3]],ae,Z);else{const fe=S(K);E>0&&this.drawTextBelow([te,2+P[1]+P[3]],fe,F,e.textColor),this.drawLine([te,P[1],te,P[1]+P[3]],ae,e.lineColor)}}for(let K=0;K<e.lines.length;K++){let te=[1,0,0,e.lineAlpha];K<e.lineRGB.length&&(te=[e.lineRGB[K][0],e.lineRGB[K][1],e.lineRGB[K][2],e.lineAlpha]);for(let ae=1;ae<e.lines[K].length;ae++){const fe=(ae-1)*j,de=ae*j,he=(e.lines[K][ae-1]-d)*k,Pe=(e.lines[K][ae]-d)*k,Re=[P[0]+fe,P[1]+P[3]-he,P[0]+de,P[1]+P[3]-Pe];this.drawLine(Re,e.lineThickness,te)}}if(e.selectedColumn>=0&&e.selectedColumn<e.lines[0].length){const K=e.selectedColumn*j+P[0];this.drawLine([K,P[1],K,P[1]+P[3]],e.lineThickness,[e.lineRGB[0][0],e.lineRGB[0][1],e.lineRGB[0][2],u])}E>0&&e.LTWH[1]+e.LTWH[3]>P[1]+P[3]+E*2.4&&this.drawTextBelow([P[0]+.5*P[2],P[1]+P[3]+E*1.2],"Volume",F,e.textColor),this.detectPartialllyLoaded4D()&&this.drawTextBelow([P[0]+P[2],P[1]+P[3]+E*.5],"...",F,e.textColor)}depthPicker(e,t){if(!this.uiData.mouseDepthPicker)return;this.uiData.mouseDepthPicker=!1;const n=this.gl,i=this.mousePos[0]*e[2]/e[2],a=n.canvas.height-this.mousePos[1]*e[3]/e[3]-1,o=new Uint8Array(4);if(n.readPixels(i,a,1,1,n.RGBA,n.UNSIGNED_BYTE,o),this.selectedObjectId=o[3],this.selectedObjectId===this.VOLUME_ID){this.scene.crosshairPos=new Float32Array(o.slice(0,3)).map(m=>m/255);return}const l=GC(o);if(l>1)return;const u=(this.mousePos[0]-e[0])/e[2],f=(n.canvas.height-this.mousePos[1]-e[1])/e[3],h=HC(u,f,l,t),d=this.mm2frac(h,0,!0);d[0]<0||d[0]>1||d[1]<0||d[1]>1||d[2]<0||d[2]>1||(this.scene.crosshairPos=this.mm2frac(h,0,!0))}drawImage3D(e,t,n){vE({gl:this.gl,mvpMatrix:e,azimuth:t,elevation:n,volumesLength:this.volumes.length,volumeObject3D:this.volumeObject3D,unusedVAO:this.unusedVAO,renderShader:this.renderShader,pickingImageShader:this.pickingImageShader,mouseDepthPicker:this.uiData.mouseDepthPicker,backgroundMasksOverlays:this.backgroundMasksOverlays,gradientTextureAmount:this.gradientTextureAmount,gradientTexture:this.gradientTexture,drawBitmap:this.drawBitmap,renderDrawAmbientOcclusion:this.renderDrawAmbientOcclusion,drawOpacity:this.drawOpacity,paqdUniforms:this.opts.paqdUniforms,matRAS:this.back.matRAS,crosshairPos:this.scene.crosshairPos,clipPlaneDepthAziElevs:this.scene.clipPlaneDepthAziElevs,isClipPlanesCutaway:this.opts.isClipPlanesCutaway,obliqueRAS:this.back?.obliqueRAS})}drawOrientationCube(e,t=0,n=0){if(!this.opts.isOrientCube)return;const i=.05*Math.min(e[2],e[3]);if(i<5)return;const a=this.gl;a.enable(a.CULL_FACE),a.cullFace(a.BACK),a.disable(a.DEPTH_TEST),this.orientCubeShader.use(this.gl),a.bindVertexArray(this.orientCubeShaderVAO);const o=Ue(),l=Ue();yc(l,0,a.canvas.width,0,a.canvas.height,-10*i,10*i);let u=0;e[1]===0&&(u=a.canvas.height-this.effectiveCanvasHeight()),Ba(o,o,[1.8*i+e[0],u+1.8*i+e[1],0]),bA(o,o,[i,i,i]),vc(o,o,Ji(270-n)),xc(o,o,Ji(-t));const f=Ue();Tr(f,l,o),a.uniformMatrix4fv(this.orientCubeShader.uniforms.u_matrix,!1,f),a.drawArrays(a.TRIANGLE_STRIP,0,168),a.bindVertexArray(this.unusedVAO),this.gl.disable(this.gl.CULL_FACE)}createOnLocationChange(e=NaN){const[t,n,i]=this.sceneExtentsMinMax(!0),a=Math.max(Math.max(i[0],i[1]),i[2]);function o(m){return Math.max(0,-Math.ceil(Math.log10(Math.abs(m))))}let l=o(a*.001);const u=this.frac2mm(this.scene.crosshairPos,0,!0);function f(m,p=0){return parseFloat(Number(m).toFixed(p))}let h=f(u[0],l)+""+f(u[1],l)+""+f(u[2],l);if(this.volumes.length>0&&this.volumes[0].nFrame4D>0&&(h+=""+f(this.volumes[0].frame4D)),this.volumes.length>0){let m=" = ";for(let v=0;v<this.volumes.length;v++){const y=this.volumes[v].mm2vox(u);let w=this.volumes[v].getValue(y[0],y[1],y[2],this.volumes[v].frame4D);if(l=3,this.volumes[v].colormapLabel!==null){const C=Math.round(w);if(this.volumes[v].hdr.intent_code===1002&&this.volumes[v].hdr.datatypeCode===2304){const S=this.volumes[v].getValues(y[0],y[1],y[2],this.volumes[v].frame4D);if(S[2]>2){const E=Math.round(100*S[2]/255);if(m+=this.volumes[v].colormapLabel.labels[S[0]]+` (${E}%)`,S[3]>2){const M=Math.round(100*S[3]/255);m+=" "+this.volumes[v].colormapLabel.labels[S[1]]+` (${M}%)`}}}else C>=0&&this.volumes[v].colormapLabel.labels&&C<this.volumes[v].colormapLabel.labels.length?m+=this.volumes[v].colormapLabel.labels[C]:m+="undefined("+f(w,l)+")"}else m+=f(w,l);this.volumes[v].imaginary&&(w=this.volumes[v].getValue(y[0],y[1],y[2],this.volumes[v].frame4D,!0),w>=0&&(m+="+"),m+=f(w,l)),m+="   "}h+=m;const p=this.back.dimsRAS,A=p[1]*p[2]*p[3];if(this.drawBitmap&&this.drawBitmap.length===A){const v=this.frac2vox(this.scene.crosshairPos),y=v[0]+v[1]*p[1]+v[2]*p[1]*p[2];h+=" "+this.drawLut.labels[this.drawBitmap[y]]}}const d={mm:this.frac2mm(this.scene.crosshairPos,0,!0),axCorSag:e,vox:this.frac2vox(this.scene.crosshairPos),frac:this.scene.crosshairPos,xy:[this.mousePos[0],this.mousePos[1]],values:this.volumes.map(m=>{const p=this.frac2mm(this.scene.crosshairPos,0,!0),A=m.mm2vox(p),v=m.getValue(A[0],A[1],A[2],m.frame4D);return{name:m.name,value:v,id:m.id,mm:p,vox:A}}),string:h};this.onLocationChange(d)}addLabel(e,t,n,i,a){const o={textColor:this.opts.legendTextColor,textScale:1,textAlignment:"left",lineWidth:0,lineColor:this.opts.legendTextColor,lineTerminator:"none",bulletScale:0,bulletColor:this.opts.legendTextColor},l=t?{...o,...t}:{...o},u=new _d(e,{...l},n,i,a);return this.document.labels.push(u),u}calculateScreenPoint(e,t,n){const i=mi();return Ft(i,[...e,1],t),i[3]!==0&&(i[0]=(i[0]/i[3]+1)*.5*n[2],i[1]=(1-i[1]/i[3])*.5*n[3],i[2]/=i[3],i[0]+=n[0],i[1]+=n[1]),i}getLabelAtPoint(e){const t=this.legendFontScaling,n=this.fontPx*t,i=this.fontPx*t;for(const h of this.document.labels){if(h.anchor==null||h.anchor===0)continue;const d=this.fontPx*h.style.textScale*t,m=this.textHeight(d,h.text),p=this.textWidth(d,h.text);if(!(h.anchor&1&&e[0]>p)&&!(h.anchor&2&&(e[0]<(this.gl.canvas.width-p)/2||e[0]>(this.gl.canvas.width+p)/2))&&!(h.anchor&4&&e[0]<this.gl.canvas.width-p)&&!(h.anchor&8&&(e[1]<i/2||e[1]>m+i/2))&&!(h.anchor&16&&(e[1]<(this.gl.canvas.height-m-i)/2||e[1]>(this.gl.canvas.height+m-i/2)/2))&&!(h.anchor&32&&(e[1]<this.gl.canvas.height-m-i||e[1]>this.gl.canvas.height-i/2)))return h}G.debug("screenPoint",e);const a=this.getLegendPanelHeight(t),o=this.getLegendPanelWidth(),l=this.gl.canvas.width-o;let u=(this.canvas.height-a)/2;if(G.debug("panelrect",l,u,l+o,u+a),e[0]<l||e[1]<u||e[0]>l+o||e[1]>u+a)return null;const f=this.getConnectomeLabels();for(const h of f){const d=this.fontPx*h.style.textScale*t,m=this.textHeight(d,h.text);if(e[1]>=u&&e[1]<=u+m+n/2)return G.debug(`label clicked ${h.text}`),h;u+=m,u+=n/2}return null}drawLabelLine(e,t,n,i,a=!1){const o=Array.isArray(e.points)&&Array.isArray(e.points[0])?e.points:[e.points];for(const l of o){const u=this.calculateScreenPoint(l,n,i);a?this.drawDottedLine([...t,u[0],u[1]],e.style.lineWidth,e.style.lineColor):this.draw3DLine(t,[u[0],u[1],u[2]],e.style.lineWidth,e.style.lineColor)}}draw3DLabel(e,t,n,i,a,o,l,u=1){const f=e.text,h=t[0],d=t[1],m=this.fontPx*u,p=this.textHeight(e.style.textScale,f)*m;if(e.style.lineWidth>0&&Array.isArray(e.points)&&this.drawLabelLine(e,[h,d+p],n,i,l),e.style.bulletScale){const y=e.style.bulletScale*p,w=p-y,C=d+w/2+y/2,S=h+(a-y)/2;this.drawCircle([S,C,y,y],e.style.bulletColor)}let A=h;if(o)if(e.style.textAlignment!=="left"){const y=this.textWidth(e.style.textScale,e.text)*m;if(e.style.textAlignment==="right")A=h+o-m*1.5-y;else{const w=o-(a||m);A+=(w-y)/2}}else A+=a;const v=e.style.textScale;this.drawText([A,d],f,v,e.style.textColor)}draw3DLabels(e,t,n=!1){const i=this.getConnectomeLabels();if(!this.opts.showLegend||i.length===0)return;let a=this.getLegendPanelHeight(1);if(!this.canvas||a<1)return;const o=this.gl;if(o.disable(o.CULL_FACE),o.viewport(0,0,this.canvas.width,this.canvas.height),this.legendFontScaling=1,a>this.canvas.height){const A=10*this.uiData.dpr;this.legendFontScaling=Math.max(this.canvas.height-A,1)/a,G.debug(`Legend too large for screen, font reduction factor x${this.legendFontScaling}`),a=this.getLegendPanelHeight(this.legendFontScaling)}const l=this.fontPx*this.legendFontScaling,u=this.getBulletMarginWidth(),f=this.getLegendPanelWidth(),h=o.canvas.width-f;let d=(this.canvas.height-a)/2;this.drawRect([o.canvas.width-f,d,f-l,a],this.opts.legendBackgroundColor);const m=o.getParameter(o.BLEND),p=o.getParameter(o.DEPTH_FUNC);n||(o.disable(o.BLEND),o.depthFunc(o.LEQUAL));for(const A of i){this.draw3DLabel(A,[h,d],e,t,u,f,n,this.legendFontScaling);const v=this.fontPx*A.style.textScale,y=this.textHeight(v,A.text)*this.legendFontScaling;d+=y,d+=l/2}n||(o.depthFunc(p),m&&o.enable(o.BLEND))}drawAnchoredLabels(){const e=this.fontPx,t=this.document.labels.filter(n=>n.anchor!=null&&n.anchor!==0);for(const n of t){const i=n.text,a=this.textHeight(n.style.textScale,i)*e,o=this.textWidth(n.style.textScale,i)*e;let l,u;const h=this.fontPx*1,d=h;let m=h/4,p=0,A=0;n.anchor&1&&(l=0),n.anchor&4&&(l=this.canvas.width-o,p-=h/4),n.anchor&2&&(l=(this.canvas.width-o)/2,p-=h/4,m+=h/4),n.anchor&8&&(u=0),n.anchor&16&&(u=(this.canvas.height-a-h)/2,A-=h/4),n.anchor&32&&(u=this.canvas.height-a-h,A-=h/4),this.drawRect([l+p,u+A,o+m,a+d],n.style.backgroundColor),this.draw3DLabel(n,[l,u])}}draw3D(e=[0,0,0,0],t=null,n=null,i=null,a=null,o=0){const l=this.gl,[u,f,h,d]=this.getBoundsRegion();let m=[...e];(m[2]===0||m[3]===0)&&(m=this.opts.bounds?[u,f,h,d]:[0,0,l.canvas.width,l.canvas.height]);const p=a!==null;this.setPivot3D(),p||(a=this.scene.renderAzimuth,o=this.scene.renderElevation),t===null&&([t,n,i]=this.calculateMvpMatrix(null,m,a,o));const A=[...m];this.screenSlices.push({leftTopWidthHeight:m.slice(),axCorSag:4,sliceFrac:0,AxyzMxy:[],leftTopMM:[],fovMM:[YC(n),0]});const v=[m[0],l.canvas.height-m[3]-m[1],m[2],m[3]];if(m[1]=l.canvas.height-m[3]-m[1],l.clear(l.DEPTH_BUFFER_BIT),l.enable(l.DEPTH_TEST),l.depthFunc(l.ALWAYS),l.depthMask(!0),this.draw3DLabels(t,A,!1),this.gl.viewport(v[0],v[1],v[2],v[3]),this.volumes.length>0&&(this.updateInterpolation(0,!0),this.updateInterpolation(1,!0),this.drawImage3D(t,a,o)),this.updateInterpolation(0),this.updateInterpolation(1),p||this.drawCrosshairs3D(!0,1,t),this.drawMesh3D(!0,1,t,n,i),this.uiData.mouseDepthPicker){this.depthPicker(m,t),this.createOnLocationChange(),this.draw3D(A,t,n,i,a,o);return}this.opts.meshXRay>0&&this.drawMesh3D(!1,this.opts.meshXRay,t,n,i),this.gl.disable(this.gl.CULL_FACE),this.draw3DLabels(t,A,!1),l.viewport(m[0],m[1],m[2],m[3]),p||this.drawCrosshairs3D(!1,.15,t),l.viewport(u,f,h,d),this.drawOrientationCube(m,a,o);const y="azimuth: "+this.scene.renderAzimuth.toFixed(0)+" elevation: "+this.scene.renderElevation.toFixed(0);return this.readyForSync=!0,this.sync(),this.draw3DLabels(t,A,!0),y}drawMesh3D(e=!0,t=1,n,i,a,o=!1){this.meshes.length<1||(n||([n,i,a]=this.calculateMvpMatrix(this.volumeObject3D,void 0,this.scene.renderAzimuth,this.scene.renderElevation)),UE({gl:this.gl,meshes:this.meshes,isDepthTest:e,alpha:t,mvpMatrix:n,modelMatrix:i,normalMatrix:a,is2D:o,meshShaders:this.meshShaders,pickingMeshShader:this.pickingMeshShader,fiberShader:this.fiberShader,mouseDepthPicker:this.uiData.mouseDepthPicker,matCapTexture:this.matCapTexture,unusedVAO:this.unusedVAO,meshXRay:this.opts.meshXRay,meshThicknessOn2D:this.opts.meshThicknessOn2D,frac2mm:l=>this.frac2mm(l,0,this.opts.isSliceMM),crosshairPos:this.scene.crosshairPos}),this.readyForSync=!0)}drawCrosshairs3D(e=!0,t=1,n=null,i=!1,a=!0){if(!this.opts.show3Dcrosshair&&!i||this.opts.crosshairWidth<=0&&i)return;const o=this.gl,l=this.frac2mm(this.scene.crosshairPos,0,a);let u=1;const[f,h,d]=this.sceneExtentsMinMax(a);if(this.volumes.length>0){if(!this.back)throw new Error("back undefined");u=.5*Math.min(Math.min(this.back.pixDims[1],this.back.pixDims[2]),this.back.pixDims[3])}else(d[0]<50||d[0]>1e3)&&(u=d[0]*.02);if(u*=this.opts.crosshairWidth,this.opts?.crosshairWidthUnit==="percent"&&(u=d[0]*this.opts.crosshairWidth*.5*.01),this.opts?.crosshairWidthUnit==="mm"&&(u=this.opts.crosshairWidth*.5),(this.crosshairs3D===null||this.crosshairs3D.mm[0]!==l[0]||this.crosshairs3D.mm[1]!==l[1]||this.crosshairs3D.mm[2]!==l[2])&&(this.crosshairs3D!==null&&(o.deleteBuffer(this.crosshairs3D.indexBuffer),o.deleteBuffer(this.crosshairs3D.vertexBuffer)),this.crosshairs3D=Br.generateCrosshairs(this.gl,1,l,f,h,u,20,this.opts.crosshairGap),this.crosshairs3D.mm=l),!this.surfaceShader)throw new Error("surfaceShader undefined");const m=this.surfaceShader;m.use(this.gl),n==null&&([n]=this.calculateMvpMatrix(this.crosshairs3D,void 0,this.scene.renderAzimuth,this.scene.renderElevation)),o.uniformMatrix4fv(m.uniforms.mvpMtx,!1,n),o.disable(o.CULL_FACE),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.crosshairs3D.indexBuffer),o.enable(o.DEPTH_TEST);const p=[...this.opts.crosshairColor];e?(o.disable(o.BLEND),o.depthFunc(o.LEQUAL)):(o.enable(o.BLEND),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),o.depthFunc(o.ALWAYS)),p[3]=t,o.uniform4fv(m.uniforms.surfaceColor,p),o.bindVertexArray(this.crosshairs3D.vao),o.drawElements(o.TRIANGLES,this.crosshairs3D.indexCount,o.UNSIGNED_INT,0),o.bindVertexArray(this.unusedVAO)}mm2frac(e,t=0,n=!1){return hv(e,{volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D,volIdx:t,isSliceMM:n||this.opts.isSliceMM})}vox2frac(e,t=0){return XC(e,this.volumes,t)}frac2vox(e,t=0){return jC(e,this.volumes,t)}moveCrosshairInVox(e,t,n){const i=this.frac2vox(this.scene.crosshairPos),a=gD({x:e,y:t,z:n,currentVox:i,dimsRAS:this.volumes[0].dimsRAS});this.scene.crosshairPos=this.vox2frac(a.newVox),this.createOnLocationChange(),this.opts.is2DSliceShader&&a.zChanged&&(this.updateGLVolume(),this.refreshDrawing(!1)),this.drawScene()}frac2mm(e,t=0,n=!1){return Pc(e,{volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D,volIdx:t,isSliceMM:n||this.opts.isSliceMM})}screenXY2TextureFrac(e,t,n,i=!0){return Zd(e,t,this.screenSlices,n,{volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D,isSliceMM:this.opts.isSliceMM,restrict0to1:i})}canvasPos2frac(e){return QC(e,this.screenSlices,{volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D,isSliceMM:this.opts.isSliceMM})}frac2canvasPosWithTile(e,t){return ZC(e,this.screenSlices,{volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D,isSliceMM:this.opts.isSliceMM,preferredSliceType:t})}frac2canvasPos(e){return WC(e,this.screenSlices,{volumes:this.volumes,meshes:this.meshes,volumeObject3D:this.volumeObject3D,isSliceMM:this.opts.isSliceMM,sliceType:this.opts.sliceType})}scaleSlice(e,t,n=[0,0],i=[0,0]){const a=i[0]===0?this.effectiveCanvasWidth()-n[0]:i[0]-n[0],o=i[1]===0?this.effectiveCanvasHeight()-n[1]:i[1]-n[1];let l=a/e;t*l>o&&(l=o/t);const u=e*l,f=t*l;return[(a-u)*.5,(o-f)*.5,u,f,l]}drawThumbnail(){if(!this.bmpShader)throw new Error("bmpShader undefined");this.bmpShader.use(this.gl);const[e,t,n,i]=this.getBoundsRegion();this.gl.uniform2f(this.bmpShader.uniforms.canvasWidthHeight,n,i);const a=_E(n,i,this.bmpTextureWH),o=e+a.left,l=t+a.top;this.gl.uniform4f(this.bmpShader.uniforms.leftTopWidthHeight,o,l,a.width,a.height),this.gl.bindVertexArray(this.genericVAO),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawLine(e,t=1,n=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl),n[3]<0&&(n=this.opts.crosshairColor),this.gl.uniform4fv(this.lineShader.uniforms.lineColor,n),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,t),this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,e),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}draw3DLine(e,t,n=1,i=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.line3DShader)throw new Error("line3DShader undefined");this.line3DShader.use(this.gl),i[3]<0&&(i=this.opts.crosshairColor),this.gl.uniform4fv(this.line3DShader.uniforms.lineColor,i),this.gl.uniform2fv(this.line3DShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.line3DShader.uniforms.thickness,n),this.gl.uniform2fv(this.line3DShader.uniforms.startXY,e),this.gl.uniform3fv(this.line3DShader.uniforms.endXYZ,t),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindVertexArray(this.unusedVAO)}drawDottedLine(e,t=1,n=[1,0,0,-1]){if(this.gl.bindVertexArray(this.genericVAO),!this.lineShader)throw new Error("lineShader undefined");this.lineShader.use(this.gl);const i=n[3]<0?[...this.opts.crosshairColor]:[...n];i[3]=.3,this.gl.uniform4fv(this.lineShader.uniforms.lineColor,i),this.gl.uniform2fv(this.lineShader.uniforms.canvasWidthHeight,[this.gl.canvas.width,this.gl.canvas.height]),this.gl.uniform1f(this.lineShader.uniforms.thickness,t);const a=qE(e,this.fontPx,1);for(const o of a)this.gl.uniform4fv(this.lineShader.uniforms.startXYendXY,[o.startX,o.startY,o.endX,o.endY]),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);this.gl.bindVertexArray(this.unusedVAO)}drawGraphLine(e,t=[1,0,0,.5],n=2){this.drawLine(e,n,t)}drawCrossLinesMM(e,t,n,i,a){if(e<0||this.screenSlices.length<=e)return;const o=this.screenSlices[e];let l=o.sliceFrac;l===1/0&&G.debug("Rendering approximate cross lines in world view mode"),l===1/0&&(l=.5);const{linesH:f,linesV:h}=xp(t,n,i,a),d=Math.max(1,this.opts.crosshairWidth),m=p=>{const A=Ty(0,0);return A[0]=o.leftTopWidthHeight[0]+(p[0]-o.leftTopMM[0])/o.fovMM[0]*o.leftTopWidthHeight[2],A[1]=o.leftTopWidthHeight[1]+o.leftTopWidthHeight[3]-(p[1]-o.leftTopMM[1])/o.fovMM[1]*o.leftTopWidthHeight[3],A};if(f.length>0&&t===0){const p=l,A=1;for(let v=0;v<f.length;v++){const y=this.frac2mm([.5,.5,.5]);y[A]=f[v];let w=this.mm2frac(y);w=w[A];let C=this.frac2mm([0,w,p]);C=at(C,[0,1,2]);let S=this.frac2mm([1,w,p]);S=at(S,[0,1,2]),C=m(C),S=m(S),this.drawLine([C[0],C[1],S[0],S[1]],d)}}if(f.length>0&&t===1){const p=l,A=2;for(let v=0;v<f.length;v++){const y=this.frac2mm([.5,.5,.5]);y[A]=f[v];let w=this.mm2frac(y);w=w[A];let C=this.frac2mm([0,p,w]);C=at(C,[0,2,1]);let S=this.frac2mm([1,p,w]);S=at(S,[0,2,1]),C=m(C),S=m(S),this.drawLine([C[0],C[1],S[0],S[1]],d)}}if(f.length>0&&t===2){const p=l,A=2;for(let v=0;v<f.length;v++){const y=this.frac2mm([.5,.5,.5]);y[A]=f[v];let w=this.mm2frac(y);w=w[A];let C=this.frac2mm([p,0,w]);C=at(C,[1,2,0]);let S=this.frac2mm([p,1,w]);S=at(S,[1,2,0]),C=m(C),S=m(S),this.drawLine([C[0],C[1],S[0],S[1]],d)}}if(h.length>0&&t===0){const p=l,A=0;for(let v=0;v<h.length;v++){const y=this.frac2mm([.5,.5,.5]);y[A]=h[v];let w=this.mm2frac(y);w=w[A];let C=this.frac2mm([w,0,p]);C=at(C,[0,1,2]);let S=this.frac2mm([w,1,p]);S=at(S,[0,1,2]),C=m(C),S=m(S),this.drawLine([C[0],C[1],S[0],S[1]],d)}}if(h.length>0&&t===1){const p=l,A=0;for(let v=0;v<h.length;v++){const y=this.frac2mm([.5,.5,.5]);y[A]=h[v];let w=this.mm2frac(y);w=w[A];let C=this.frac2mm([w,p,0]);C=at(C,[0,2,1]);let S=this.frac2mm([w,p,1]);S=at(S,[0,2,1]),C=m(C),S=m(S),this.drawLine([C[0],C[1],S[0],S[1]],d)}}if(h.length>0&&t===2){const p=l,A=1;for(let v=0;v<h.length;v++){const y=this.frac2mm([.5,.5,.5]);y[A]=h[v];let w=this.mm2frac(y);w=w[A];let C=this.frac2mm([p,w,0]);C=at(C,[1,2,0]);let S=this.frac2mm([p,w,1]);S=at(S,[1,2,0]),C=m(C),S=m(S),this.drawLine([C[0],C[1],S[0],S[1]],d)}}}drawCrossLines(e,t,n,i,a){if(e<0||this.screenSlices.length<=e)return;if(this.opts.isSliceMM)return this.drawCrossLinesMM(e,t,n,i,a);if(this.screenSlices[e].sliceFrac===1/0)return this.drawCrossLinesMM(e,t,n,i,a);const o=this.screenSlices[e],{linesH:l,linesV:u}=xp(t,n,i,a);if(l.length>0){const f=o.leftTopWidthHeight.slice();let h=2;t===0&&(h=1);const d=this.frac2mm([.5,.5,.5]);for(let m=0;m<l.length;m++){d[h]=l[m];const p=this.mm2frac(d);this.drawRect([f[0],f[1]+f[3]-p[h]*f[3],f[2],1])}}if(u.length>0){const f=o.leftTopWidthHeight.slice(),h=o.fovMM[0]<0;let d=0;t===2&&(d=1);const m=this.frac2mm([.5,.5,.5]);for(let p=0;p<u.length;p++){m[d]=u[p];const A=this.mm2frac(m);h?this.drawRect([f[0]+(f[2]-A[d]*f[2]),f[1],1,f[3]]):this.drawRect([f[0]+A[d]*f[2],f[1],1,f[3]])}}}drawMosaic(e){this.screenSlices=[];const[t,n,i,a]=this.getBoundsRegion(),o=this.screenFieldOfViewMM(0,!0),l=this.screenFieldOfViewMM(0);e=e.replaceAll(";"," ;").trim();const u=[],f=[],h=[],d=e.split(/\s+/);let m=1;const p=this.fontPx;let A=0,v=0,y=0;this.volumes[0]?.dims||(y=Math.ceil(this.opts.tileMargin*.3));for(let w=0;w<2;w++){let C=!1,S=!1,E=0,M=0,R=0,D=0,T=!1,F=0,U=0,I=0,V=0;for(let P=0;P<d.length;P++){const Q=d[P];if(Q.includes("X")){S=!0;continue}if(Q.includes("L")){T=!Q.includes("-");continue}if(Q.includes("H")){P++,U=Math.abs(Math.max(0,Math.min(1,parseFloat(d[P]))));continue}if(Q.includes("V")){P++;continue}if(Q.includes("A")){F=0;continue}if(Q.includes("C")){F=1;continue}if(Q.includes("S")){F=2;continue}if(Q.includes("R")){C=!0;continue}if(Q.includes(";")){R+=E,D=Math.max(D,M+I),E=0,M=0,I=0;continue}V=I,U>0&&!C&&(V=Math.round(V*(1-U))),M+=V,V=0;const k=parseFloat(Q);if(isNaN(k))continue;let j=0,H=l;if(C&&(H=o),F===2?V=H[1]:V=H[0],F===0?j=H[1]:j=H[2],w===0)C||(F===0&&u.push(k),F===1&&f.push(k),F===2&&h.push(k));else{const Z=[t+A+m*M,n+v+m*R,m*V,m*j];if(this.fontPx=T?p:0,C){let J=k<0?-1/0:1/0;Object.is(k,-0)&&(J=-1/0),this.draw2D(Z,F,J)}else this.draw2D(Z,F,k);S&&this.drawCrossLines(this.screenSlices.length-1,F,u,f,h),C=!1,S=!1}I=V,M+=y,E=Math.max(E,j)}if(R+=E,D=Math.max(D,M+I),D<=0||R<=0)break;const N=(i-2*this.opts.tileMargin-y)/D,Y=(a-2*this.opts.tileMargin)/R;m=Math.min(N,Y),this.opts.centerMosaic?(A=Math.floor(.5*(i-D*m)),v=Math.floor(.5*(a-R*m))):(A=this.opts.tileMargin,v=this.opts.tileMargin)}this.fontPx=p}calculateWidthHeight(e,t,n,i){return mE(e,t,n,i)}getBoundsRegionCSS(){const e=this.gl.canvas.getBoundingClientRect();return yD({bounds:this.opts.bounds,rectWidth:e.width,rectHeight:e.height})}eventInBounds(e){const t=this.gl.canvas.getBoundingClientRect();let n,i;if(e instanceof MouseEvent)n=e.clientX,i=e.clientY;else if(e instanceof TouchEvent){const l=e.touches[0]??e.changedTouches[0];if(!l)return!1;n=l.clientX,i=l.clientY}else n=e.clientX,i=e.clientY;const a=n-t.left,o=i-t.top;return RD({x:a,y:o,boundsRegion:this.getBoundsRegionCSS()})}cursorInBounds(){return FD({mouseX:this.mousePos[0],mouseY:this.mousePos[1],boundsRegion:this.getBoundsRegion()})}getBoundsRegion(){const e=this.gl,t=this.uiData?.dpr||window.devicePixelRatio||1,n=e.canvas;return xD({bounds:this.opts.bounds,canvasWidth:e.canvas.width,canvasHeight:e.canvas.height,cssWidth:n.clientWidth,cssHeight:n.clientHeight,dpr:t})}inBounds(e,t){return uD({x:e,y:t,dpr:this.uiData.dpr,canvasHeight:this.gl.canvas.height,boundsRegion:this.getBoundsRegion()})}bindTextures(){this.gl.activeTexture(Le.TEXTURE0_BACK_VOL),this.gl.bindTexture(this.gl.TEXTURE_3D,this.volumeTexture),this.gl.activeTexture(Le.TEXTURE2_OVERLAY_VOL),this.gl.bindTexture(this.gl.TEXTURE_3D,this.overlayTexture),this.gl.activeTexture(Le.TEXTURE8_PAQD),this.gl.bindTexture(this.gl.TEXTURE_3D,this.paqdTexture),this.gl.activeTexture(Le.TEXTURE3_FONT),this.gl.bindTexture(this.gl.TEXTURE_2D,this.fontTexture),this.gl.activeTexture(Le.TEXTURE1_COLORMAPS),this.gl.bindTexture(this.gl.TEXTURE_2D,this.colormapTexture),this.gl.activeTexture(Le.TEXTURE5_MATCAP),this.gl.bindTexture(this.gl.TEXTURE_2D,this.matCapTexture),this.gl.activeTexture(Le.TEXTURE6_GRADIENT),this.gl.bindTexture(this.gl.TEXTURE_3D,this.gradientTexture)}clearBounds(e=this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT,t){const n=this.gl,[i,a,o,l]=t??this.getBoundsRegion(),u=n.canvas.height-a-l;e&n.DEPTH_BUFFER_BIT&&n.clearDepth(1),n.enable(n.SCISSOR_TEST),n.scissor(i,u,o,l),e&n.COLOR_BUFFER_BIT&&n.clearColor(this.opts.backColor[0],this.opts.backColor[1],this.opts.backColor[2],this.opts.backColor[3]),n.clear(e),n.disable(n.SCISSOR_TEST)}drawBoundsBorder(){if(!this.opts.showBoundsBorder)return;const[e,t,n,i]=this.getBoundsRegion();this.drawBoundsBox([e,t,n,i],this.opts.boundsBorderColor,this.opts.selectionBoxLineThickness)}drawSceneCore(){if(!this.initialized)return;this.colorbarHeight=0;const[e,t,n,i]=this.getBoundsRegion();if(this.gl.viewport(e,t,n,i),this.clearBounds(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.bindTextures(),this.bmpTexture&&this.thumbnailVisible){this.drawThumbnail();return}let a="";if(this.volumes.length===0||typeof this.volumes[0].dims>"u"){if(this.meshes.length>0){if(this.sliceMosaicString.length>0){this.opts.isColorbar&&this.reserveColorbarPanel(),this.drawMosaic(this.sliceMosaicString),this.opts.isColorbar&&this.drawColorbar();return}this.screenSlices=[],this.draw3D([e,t,n,i]),this.opts.isColorbar&&this.drawColorbar();return}this.drawLoadingText(this.opts.loadingText);return}const o=this.scene.clipPlaneDepthAziElevs?.[this.uiData.activeClipPlaneIndex]?.[0]??2;if(HD({isDragging:this.uiData.isDragging,activeClipPlaneDepth:o,dragStartTileIndex:this.inRenderTile(this.uiData.dragStart[0],this.uiData.dragStart[1])})){const d=this.uiData.dragStart[0]-this.uiData.dragEnd[0],m=this.uiData.dragStart[1]-this.uiData.dragEnd[1],p=zD({startDepthAziElev:this.uiData.dragClipPlaneStartDepthAziElev,dragDeltaX:d,dragDeltaY:m});if(p.changed)return this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex]=p.depthAziElev,this.setClipPlane(this.scene.clipPlaneDepthAziElevs[this.uiData.activeClipPlaneIndex])}if(this.sliceMosaicString.length<1&&this.opts.sliceType===4){this.opts.isColorbar&&this.reserveColorbarPanel(),this.screenSlices=[],this.draw3D(),this.opts.isColorbar&&this.drawColorbar();return}this.opts.isColorbar&&this.reserveColorbarPanel();const u=this.getMaxVols(),f=this.opts.sliceType===3&&u>1&&this.graph.autoSizeMultiplanar&&this.graph.opacity>0;if(this.sliceMosaicString.length>0)this.drawMosaic(this.sliceMosaicString);else{const d=[0,0];let m=!1;if(this.screenSlices=[],this.customLayout&&this.customLayout.length>0){this.screenSlices=[];const{volScale:p}=this.sliceScale();for(const A of this.customLayout){const{sliceType:v,position:y,sliceMM:w}=A,C=[e+y[0]*n,t+y[1]*i,y[2]*n,y[3]*i];if(C[0]+C[2]>e+n&&(G.warn("adjusting slice width because it would have been clipped"),C[2]=e+n-C[0]),C[1]+C[3]>t+i&&(G.warn("adjusting slice height because it would have been clipped"),C[3]=t+i-C[1]),v===4)this.draw3D(C);else{const S=this.calculateWidthHeight(v,p,C[2],C[3]);this.draw2D(C,v,w??NaN,S)}}}else if(this.opts.sliceType===0||this.opts.sliceType===1||this.opts.sliceType===2){const{volScale:p}=this.sliceScale(),A=[e,t,n,i],v=this.calculateWidthHeight(this.opts.sliceType,p,A[2],A[3]);this.draw2D([0,0,0,0],this.opts.sliceType,NaN,v)}else{let p=function(fe,de){return[(fe-1)*C+fe*S,(de-1)*C+de*S]},A=!1;this.opts.multiplanarForceRender?(A=!0,this.opts.multiplanarForceRender?this.opts.multiplanarShowRender=1:this.opts.multiplanarShowRender=2,delete this.opts.multiplanarForceRender):this.opts.multiplanarShowRender===1&&(A=!0);const v=isFinite(this.drawPenLocation[0])&&this.opts.drawingEnabled,{volScale:y}=this.sliceScale(),w=y.slice();this.opts.multiplanarEqualSize&&(y[0]=1,y[1]=1,y[2]=1),typeof this.opts.multiplanarPadPixels!="number"&&G.debug("multiplanarPadPixels must be numeric");const C=parseFloat(`${this.opts.multiplanarPadPixels}`)*this.uiData.dpr;let S=this.opts.tileMargin*this.uiData.dpr;S<0&&(S=2*(2+Math.ceil(this.fontPx)));const[E,M,R,D]=this.getBoundsRegion();let T=[this.effectiveCanvasWidth(),this.effectiveCanvasHeight()];this.opts.heroImageFraction>0&&this.opts.heroImageFraction<1&&(A=!1,m=!0,T[0]>T[1]&&this.opts.multiplanarLayout!==3?d[0]=T[0]*this.opts.heroImageFraction:d[1]=T[1]*this.opts.heroImageFraction,T=[T[0]-d[0],T[1]-d[1]]);const F=this.scaleSlice(y[0]+y[1],y[1]+y[2],p(2,2),T),U=Math.max(Math.max(y[1],y[2]),y[0]),I=this.scaleSlice(y[0]+y[0]+y[1],Math.max(y[1],y[2]),p(3,1),T),V=this.scaleSlice(y[0]+y[0]+y[1]+U,Math.max(y[1],y[2]),p(4,1),T),N=this.scaleSlice(U,y[1]+y[2]+y[2],p(1,3),T),Y=this.scaleSlice(U,y[1]+y[2]+y[2]+U,p(1,4),T);let P=!v&&(u<2||!f),Q=!1,k=!1,j=!1;this.opts.multiplanarLayout===1?Q=!0:this.opts.multiplanarLayout===2?k=!0:this.opts.multiplanarLayout===3?j=!0:N[4]>I[4]&&N[4]>F[4]?Q=!0:I[4]>F[4]?j=!0:k=!0;let H=F;if(Q?(H=N,!m&&(A||this.opts.multiplanarShowRender===2&&Y[4]>=N[4])?H=Y:P=!1):j&&(H=I,!m&&(A||this.opts.multiplanarShowRender===2&&V[4]>=I[4])?H=V:P=!1),m){const fe=d[0]===0?R:d[0],de=d[1]===0?D:d[1];if(this.opts?.heroSliceType===0||this.opts?.heroSliceType===1||this.opts?.heroSliceType===2)this.draw2D([E,M,fe,de],this.opts.heroSliceType,NaN,[1/0,1/0]);else{const he=H.slice();fe===R&&(he[0]=0),this.draw3D([E+he[0],M,fe,de])}H[0]+=d[0],H[1]+=d[1],P=!1}const Z=y[0]*H[4]+S,J=y[1]*H[4]+S,X=y[2]*H[4]+S,K=w[0]*H[4],te=w[1]*H[4],ae=w[2]*H[4];if(Q){if(this.draw2D([E+H[0],M+H[1],Z,J],0,NaN,[K,te]),this.draw2D([E+H[0],M+H[1]+J+C,Z,X],1,NaN,[K,ae]),this.draw2D([E+H[0],M+H[1]+J+C+X+C,J,X],2,NaN,[te,ae]),P){const fe=U*H[4];this.draw3D([E+H[0],M+H[1]+J+X+X+C*3,fe,fe])}}else if(j){if(this.draw2D([E+H[0],M+H[1],Z,J],0,NaN,[K,te]),this.draw2D([E+H[0]+Z+C,M+H[1],Z,X],1,NaN,[K,ae]),this.draw2D([E+H[0]+Z+Z+C*2,M+H[1],J,X],2,NaN,[te,ae]),P){const fe=U*H[4];this.draw3D([E+H[0]+Z+Z+J+C*3,M+H[1],fe,fe])}}else k&&(A||(P=!1),this.opts.multiplanarShowRender===2&&(P=!0),m&&(P=!1),this.draw2D([E+H[0],M+H[1]+X+C,Z,J],0,NaN,[K,te]),this.draw2D([E+H[0],M+H[1],Z,X],1,NaN,[K,ae]),this.draw2D([E+H[0]+Z+C,M+H[1],J,X],2,NaN,[te,ae]),P&&this.draw3D([E+H[0]+Z+C,M+H[1]+X+C,J,J]))}}if(this.opts.isRuler&&this.drawRuler(),this.opts.isColorbar&&this.drawColorbar(),f&&this.drawGraph(),this.uiData.isDragging){if(this.uiData.mouseButtonCenterDown){this.dragForCenterButton([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.getCurrentDragMode()===4){this.dragForSlicer3D([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.getCurrentDragMode()===3){this.dragForPanZoom([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]);return}if(this.inRenderTile(this.uiData.dragStart[0],this.uiData.dragStart[1])>=0)return;this.getCurrentDragMode()===2&&this.drawMeasurementTool([this.uiData.dragStart[0],this.uiData.dragStart[1],this.uiData.dragEnd[0],this.uiData.dragEnd[1]]),this.getCurrentDragMode()===7&&this.drawAngleMeasurementTool();const d=this.getCurrentDragMode();if(d===1||d===6){const m=Math.abs(this.uiData.dragStart[0]-this.uiData.dragEnd[0]),p=Math.abs(this.uiData.dragStart[1]-this.uiData.dragEnd[1]);this.drawSelectionBox([Math.min(this.uiData.dragStart[0],this.uiData.dragEnd[0]),Math.min(this.uiData.dragStart[1],this.uiData.dragEnd[1]),m,p])}}for(const d of this.document.completedMeasurements)if(this.shouldDrawOnCurrentSlice(d.sliceIndex,d.sliceType,d.slicePosition)){const m=this.mm2frac(d.startMM),p=this.mm2frac(d.endMM),A=this.frac2canvasPosWithTile(m,d.sliceType),v=this.frac2canvasPosWithTile(p,d.sliceType);A&&v&&A.tileIndex===v.tileIndex&&this.drawMeasurementTool([A.pos[0],A.pos[1],v.pos[0],v.pos[1]])}for(let d=0;d<this.document.completedAngles.length;d++){const m=this.document.completedAngles[d];if(this.shouldDrawOnCurrentSlice(m.sliceIndex,m.sliceType,m.slicePosition)){const A=this.mm2frac(m.firstLineMM.start),v=this.mm2frac(m.firstLineMM.end),y=this.mm2frac(m.secondLineMM.start),w=this.mm2frac(m.secondLineMM.end),C=this.frac2canvasPosWithTile(A,m.sliceType),S=this.frac2canvasPosWithTile(v,m.sliceType),E=this.frac2canvasPosWithTile(y,m.sliceType),M=this.frac2canvasPosWithTile(w,m.sliceType);if(C&&S&&E&&M&&C.tileIndex===S.tileIndex&&C.tileIndex===E.tileIndex&&C.tileIndex===M.tileIndex){this.drawMeasurementTool([C.pos[0],C.pos[1],S.pos[0],S.pos[1]],!1),this.drawMeasurementTool([E.pos[0],E.pos[1],M.pos[0],M.pos[1]],!1);const R={firstLine:[C.pos[0],C.pos[1],S.pos[0],S.pos[1]],secondLine:[E.pos[0],E.pos[1],M.pos[0],M.pos[1]],sliceIndex:m.sliceIndex,sliceType:m.sliceType,slicePosition:m.slicePosition};this.drawAngleTextForAngle(R)}}}const h=this.frac2mm([this.scene.crosshairPos[0],this.scene.crosshairPos[1],this.scene.crosshairPos[2]]);return a=h[0].toFixed(2)+""+h[1].toFixed(2)+""+h[2].toFixed(2),this.readyForSync=!0,this.sync(),this.drawAnchoredLabels(),this.drawBoundsBorder(),a}drawScene(){if(this.isBusy){this.needsRefresh=!0;return}this.isBusy=!1,this.needsRefresh=!1;let e=this.drawSceneCore();return this._gl!==null&&this.gl.finish(),this.needsRefresh&&(e=this.drawScene()),e}r8Tex(e,t,n,i=!1){return NC(this.gl,e,t,n,i)}r16Tex(e,t,n,i){return IC(this.gl,e,t,n,i)}rgbaTex2D(e,t,n,i=null,a=!0){return VC(this.gl,e,t,n,i,a)}rgbaTex(e,t,n,i=!1){return OC(this.gl,e,t,n,i)}rgba16Tex(e,t,n,i=!1){return LC(this.gl,e,t,n,i)}requestCORSIfNotSameOrigin(e,t){fv(e,t)}async loadPngAsTexture(e,t){const n=await PC(this.gl,e,t,this.fontShader,this.bmpShader,this.fontTexture,this.bmpTexture,this.matCapTexture,i=>{this.bmpTextureWH=i},()=>{this.drawScene()});return t===3?this.fontTexture=n:t===4?this.bmpTexture=n:t===5&&(this.matCapTexture=n),n}async loadFontTexture(e){return this.loadPngAsTexture(e,3)}async loadBmpTexture(e){return this.loadPngAsTexture(e,4)}async loadMatCapTexture(e){return this.loadPngAsTexture(e,5)}get gl(){if(!this._gl)throw new Error("unable to get WebGL context. Maybe the browser doesn't support WebGL2.");return this._gl}set gl(e){this._gl=e}findDrawingBoundarySlices(e){if(!this.back||!this.back.dims||!this.drawBitmap)return null;const t={dimX:this.back.dims[1],dimY:this.back.dims[2],dimZ:this.back.dims[3]};return KD(e,this.drawBitmap,t)}interpolateMaskSlices(e,t,n={}){if(!this.back||!this.back.dims||!this.drawBitmap)throw new Error("Background image and drawing bitmap must be loaded");const i={dimX:this.back.dims[1],dimY:this.back.dims[2],dimZ:this.back.dims[3]},a=this.back.img,o=this.back.global_max;$D(this.drawBitmap,i,a,o,e,t,n,()=>this.refreshDrawing(!0))}};Ra=new WeakMap;function Hv(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Hv(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function Xv(){for(var e,t,n=0,i="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Hv(e))&&(i&&(i+=" "),i+=t);return i}const jT=(e,t)=>{const n=new Array(e.length+t.length);for(let i=0;i<e.length;i++)n[i]=e[i];for(let i=0;i<t.length;i++)n[e.length+i]=t[i];return n},qT=(e,t)=>({classGroupId:e,validator:t}),jv=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),Ec="-",zp=[],_T="arbitrary..",KT=e=>{const t=WT(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return QT(l);const u=l.split(Ec),f=u[0]===""&&u.length>1?1:0;return qv(u,f,t)},getConflictingClassGroupIds:(l,u)=>{if(u){const f=i[l],h=n[l];return f?h?jT(h,f):f:h||zp}return n[l]||zp}}},qv=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const a=e[t],o=n.nextPart.get(a);if(o){const h=qv(e,t+1,o);if(h)return h}const l=n.validators;if(l===null)return;const u=t===0?e.join(Ec):e.slice(t).join(Ec),f=l.length;for(let h=0;h<f;h++){const d=l[h];if(d.validator(u))return d.classGroupId}},QT=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),i=t.slice(0,n);return i?_T+i:void 0})(),WT=e=>{const{theme:t,classGroups:n}=e;return ZT(n,t)},ZT=(e,t)=>{const n=jv();for(const i in e){const a=e[i];f0(a,n,i,t)}return n},f0=(e,t,n,i)=>{const a=e.length;for(let o=0;o<a;o++){const l=e[o];JT(l,t,n,i)}},JT=(e,t,n,i)=>{if(typeof e=="string"){$T(e,t,n);return}if(typeof e=="function"){eR(e,t,n,i);return}tR(e,t,n,i)},$T=(e,t,n)=>{const i=e===""?t:_v(t,e);i.classGroupId=n},eR=(e,t,n,i)=>{if(nR(e)){f0(e(i),t,n,i);return}t.validators===null&&(t.validators=[]),t.validators.push(qT(n,e))},tR=(e,t,n,i)=>{const a=Object.entries(e),o=a.length;for(let l=0;l<o;l++){const[u,f]=a[l];f0(f,_v(t,u),n,i)}},_v=(e,t)=>{let n=e;const i=t.split(Ec),a=i.length;for(let o=0;o<a;o++){const l=i[o];let u=n.nextPart.get(l);u||(u=jv(),n.nextPart.set(l,u)),n=u}return n},nR=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,iR=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),i=Object.create(null);const a=(o,l)=>{n[o]=l,t++,t>e&&(t=0,i=n,n=Object.create(null))};return{get(o){let l=n[o];if(l!==void 0)return l;if((l=i[o])!==void 0)return a(o,l),l},set(o,l){o in n?n[o]=l:a(o,l)}}},pd="!",kp=":",rR=[],Gp=(e,t,n,i,a)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:i,isExternal:a}),aR=e=>{const{prefix:t,experimentalParseClassName:n}=e;let i=a=>{const o=[];let l=0,u=0,f=0,h;const d=a.length;for(let y=0;y<d;y++){const w=a[y];if(l===0&&u===0){if(w===kp){o.push(a.slice(f,y)),f=y+1;continue}if(w==="/"){h=y;continue}}w==="["?l++:w==="]"?l--:w==="("?u++:w===")"&&u--}const m=o.length===0?a:a.slice(f);let p=m,A=!1;m.endsWith(pd)?(p=m.slice(0,-1),A=!0):m.startsWith(pd)&&(p=m.slice(1),A=!0);const v=h&&h>f?h-f:void 0;return Gp(o,A,p,v)};if(t){const a=t+kp,o=i;i=l=>l.startsWith(a)?o(l.slice(a.length)):Gp(rR,!1,l,void 0,!0)}if(n){const a=i;i=o=>n({className:o,parseClassName:a})}return i},sR=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,i)=>{t.set(n,1e6+i)}),n=>{const i=[];let a=[];for(let o=0;o<n.length;o++){const l=n[o],u=l[0]==="[",f=t.has(l);u||f?(a.length>0&&(a.sort(),i.push(...a),a=[]),i.push(l)):a.push(l)}return a.length>0&&(a.sort(),i.push(...a)),i}},oR=e=>({cache:iR(e.cacheSize),parseClassName:aR(e),sortModifiers:sR(e),...KT(e)}),lR=/\s+/,cR=(e,t)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:a,sortModifiers:o}=t,l=[],u=e.trim().split(lR);let f="";for(let h=u.length-1;h>=0;h-=1){const d=u[h],{isExternal:m,modifiers:p,hasImportantModifier:A,baseClassName:v,maybePostfixModifierPosition:y}=n(d);if(m){f=d+(f.length>0?" "+f:f);continue}let w=!!y,C=i(w?v.substring(0,y):v);if(!C){if(!w){f=d+(f.length>0?" "+f:f);continue}if(C=i(v),!C){f=d+(f.length>0?" "+f:f);continue}w=!1}const S=p.length===0?"":p.length===1?p[0]:o(p).join(":"),E=A?S+pd:S,M=E+C;if(l.indexOf(M)>-1)continue;l.push(M);const R=a(C,w);for(let D=0;D<R.length;++D){const T=R[D];l.push(E+T)}f=d+(f.length>0?" "+f:f)}return f},uR=(...e)=>{let t=0,n,i,a="";for(;t<e.length;)(n=e[t++])&&(i=Kv(n))&&(a&&(a+=" "),a+=i);return a},Kv=e=>{if(typeof e=="string")return e;let t,n="";for(let i=0;i<e.length;i++)e[i]&&(t=Kv(e[i]))&&(n&&(n+=" "),n+=t);return n},fR=(e,...t)=>{let n,i,a,o;const l=f=>{const h=t.reduce((d,m)=>m(d),e());return n=oR(h),i=n.cache.get,a=n.cache.set,o=u,u(f)},u=f=>{const h=i(f);if(h)return h;const d=cR(f,n);return a(f,d),d};return o=l,(...f)=>o(uR(...f))},hR=[],At=e=>{const t=n=>n[e]||hR;return t.isThemeGetter=!0,t},Qv=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Wv=/^\((?:(\w[\w-]*):)?(.+)\)$/i,dR=/^\d+\/\d+$/,mR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,pR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,AR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ba=e=>dR.test(e),Te=e=>!!e&&!Number.isNaN(Number(e)),Xi=e=>!!e&&Number.isInteger(Number(e)),Gh=e=>e.endsWith("%")&&Te(e.slice(0,-1)),fi=e=>mR.test(e),xR=()=>!0,yR=e=>gR.test(e)&&!pR.test(e),Zv=()=>!1,wR=e=>AR.test(e),bR=e=>vR.test(e),CR=e=>!pe(e)&&!Ae(e),SR=e=>Pa(e,ex,Zv),pe=e=>Qv.test(e),Sr=e=>Pa(e,tx,yR),Yh=e=>Pa(e,RR,Te),Yp=e=>Pa(e,Jv,Zv),MR=e=>Pa(e,$v,bR),ql=e=>Pa(e,nx,wR),Ae=e=>Wv.test(e),zs=e=>za(e,tx),ER=e=>za(e,FR),Hp=e=>za(e,Jv),DR=e=>za(e,ex),TR=e=>za(e,$v),_l=e=>za(e,nx,!0),Pa=(e,t,n)=>{const i=Qv.exec(e);return i?i[1]?t(i[1]):n(i[2]):!1},za=(e,t,n=!1)=>{const i=Wv.exec(e);return i?i[1]?t(i[1]):n:!1},Jv=e=>e==="position"||e==="percentage",$v=e=>e==="image"||e==="url",ex=e=>e==="length"||e==="size"||e==="bg-size",tx=e=>e==="length",RR=e=>e==="number",FR=e=>e==="family-name",nx=e=>e==="shadow",BR=()=>{const e=At("color"),t=At("font"),n=At("text"),i=At("font-weight"),a=At("tracking"),o=At("leading"),l=At("breakpoint"),u=At("container"),f=At("spacing"),h=At("radius"),d=At("shadow"),m=At("inset-shadow"),p=At("text-shadow"),A=At("drop-shadow"),v=At("blur"),y=At("perspective"),w=At("aspect"),C=At("ease"),S=At("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],R=()=>[...M(),Ae,pe],D=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto","contain","none"],F=()=>[Ae,pe,f],U=()=>[ba,"full","auto",...F()],I=()=>[Xi,"none","subgrid",Ae,pe],V=()=>["auto",{span:["full",Xi,Ae,pe]},Xi,Ae,pe],N=()=>[Xi,"auto",Ae,pe],Y=()=>["auto","min","max","fr",Ae,pe],P=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Q=()=>["start","end","center","stretch","center-safe","end-safe"],k=()=>["auto",...F()],j=()=>[ba,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...F()],H=()=>[e,Ae,pe],Z=()=>[...M(),Hp,Yp,{position:[Ae,pe]}],J=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",DR,SR,{size:[Ae,pe]}],K=()=>[Gh,zs,Sr],te=()=>["","none","full",h,Ae,pe],ae=()=>["",Te,zs,Sr],fe=()=>["solid","dashed","dotted","double"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>[Te,Gh,Hp,Yp],Pe=()=>["","none",v,Ae,pe],Re=()=>["none",Te,Ae,pe],Lt=()=>["none",Te,Ae,pe],Wt=()=>[Te,Ae,pe],Zt=()=>[ba,"full",...F()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[fi],breakpoint:[fi],color:[xR],container:[fi],"drop-shadow":[fi],ease:["in","out","in-out"],font:[CR],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[fi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[fi],shadow:[fi],spacing:["px",Te],text:[fi],"text-shadow":[fi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ba,pe,Ae,w]}],container:["container"],columns:[{columns:[Te,pe,Ae,u]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:R()}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:U()}],"inset-x":[{"inset-x":U()}],"inset-y":[{"inset-y":U()}],start:[{start:U()}],end:[{end:U()}],top:[{top:U()}],right:[{right:U()}],bottom:[{bottom:U()}],left:[{left:U()}],visibility:["visible","invisible","collapse"],z:[{z:[Xi,"auto",Ae,pe]}],basis:[{basis:[ba,"full","auto",u,...F()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Te,ba,"auto","initial","none",pe]}],grow:[{grow:["",Te,Ae,pe]}],shrink:[{shrink:["",Te,Ae,pe]}],order:[{order:[Xi,"first","last","none",Ae,pe]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:V()}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:V()}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Y()}],"auto-rows":[{"auto-rows":Y()}],gap:[{gap:F()}],"gap-x":[{"gap-x":F()}],"gap-y":[{"gap-y":F()}],"justify-content":[{justify:[...P(),"normal"]}],"justify-items":[{"justify-items":[...Q(),"normal"]}],"justify-self":[{"justify-self":["auto",...Q()]}],"align-content":[{content:["normal",...P()]}],"align-items":[{items:[...Q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Q(),{baseline:["","last"]}]}],"place-content":[{"place-content":P()}],"place-items":[{"place-items":[...Q(),"baseline"]}],"place-self":[{"place-self":["auto",...Q()]}],p:[{p:F()}],px:[{px:F()}],py:[{py:F()}],ps:[{ps:F()}],pe:[{pe:F()}],pt:[{pt:F()}],pr:[{pr:F()}],pb:[{pb:F()}],pl:[{pl:F()}],m:[{m:k()}],mx:[{mx:k()}],my:[{my:k()}],ms:[{ms:k()}],me:[{me:k()}],mt:[{mt:k()}],mr:[{mr:k()}],mb:[{mb:k()}],ml:[{ml:k()}],"space-x":[{"space-x":F()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":F()}],"space-y-reverse":["space-y-reverse"],size:[{size:j()}],w:[{w:[u,"screen",...j()]}],"min-w":[{"min-w":[u,"screen","none",...j()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...j()]}],h:[{h:["screen","lh",...j()]}],"min-h":[{"min-h":["screen","lh","none",...j()]}],"max-h":[{"max-h":["screen","lh",...j()]}],"font-size":[{text:["base",n,zs,Sr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Ae,Yh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Gh,pe]}],"font-family":[{font:[ER,pe,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Ae,pe]}],"line-clamp":[{"line-clamp":[Te,"none",Ae,Yh]}],leading:[{leading:[o,...F()]}],"list-image":[{"list-image":["none",Ae,pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ae,pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Te,"from-font","auto",Ae,Sr]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[Te,"auto",Ae,pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae,pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae,pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Z()}],"bg-repeat":[{bg:J()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Xi,Ae,pe],radial:["",Ae,pe],conic:[Xi,Ae,pe]},TR,MR]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:K()}],"gradient-via-pos":[{via:K()}],"gradient-to-pos":[{to:K()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:ae()}],"border-w-x":[{"border-x":ae()}],"border-w-y":[{"border-y":ae()}],"border-w-s":[{"border-s":ae()}],"border-w-e":[{"border-e":ae()}],"border-w-t":[{"border-t":ae()}],"border-w-r":[{"border-r":ae()}],"border-w-b":[{"border-b":ae()}],"border-w-l":[{"border-l":ae()}],"divide-x":[{"divide-x":ae()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ae()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...fe(),"hidden","none"]}],"divide-style":[{divide:[...fe(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...fe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Te,Ae,pe]}],"outline-w":[{outline:["",Te,zs,Sr]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",d,_l,ql]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",m,_l,ql]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[Te,Sr]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":ae()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",p,_l,ql]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[Te,Ae,pe]}],"mix-blend":[{"mix-blend":[...de(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":de()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Te]}],"mask-image-linear-from-pos":[{"mask-linear-from":he()}],"mask-image-linear-to-pos":[{"mask-linear-to":he()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":he()}],"mask-image-t-to-pos":[{"mask-t-to":he()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":he()}],"mask-image-r-to-pos":[{"mask-r-to":he()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":he()}],"mask-image-b-to-pos":[{"mask-b-to":he()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":he()}],"mask-image-l-to-pos":[{"mask-l-to":he()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":he()}],"mask-image-x-to-pos":[{"mask-x-to":he()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":he()}],"mask-image-y-to-pos":[{"mask-y-to":he()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[Ae,pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":he()}],"mask-image-radial-to-pos":[{"mask-radial-to":he()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[Te]}],"mask-image-conic-from-pos":[{"mask-conic-from":he()}],"mask-image-conic-to-pos":[{"mask-conic-to":he()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Z()}],"mask-repeat":[{mask:J()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ae,pe]}],filter:[{filter:["","none",Ae,pe]}],blur:[{blur:Pe()}],brightness:[{brightness:[Te,Ae,pe]}],contrast:[{contrast:[Te,Ae,pe]}],"drop-shadow":[{"drop-shadow":["","none",A,_l,ql]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",Te,Ae,pe]}],"hue-rotate":[{"hue-rotate":[Te,Ae,pe]}],invert:[{invert:["",Te,Ae,pe]}],saturate:[{saturate:[Te,Ae,pe]}],sepia:[{sepia:["",Te,Ae,pe]}],"backdrop-filter":[{"backdrop-filter":["","none",Ae,pe]}],"backdrop-blur":[{"backdrop-blur":Pe()}],"backdrop-brightness":[{"backdrop-brightness":[Te,Ae,pe]}],"backdrop-contrast":[{"backdrop-contrast":[Te,Ae,pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Te,Ae,pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Te,Ae,pe]}],"backdrop-invert":[{"backdrop-invert":["",Te,Ae,pe]}],"backdrop-opacity":[{"backdrop-opacity":[Te,Ae,pe]}],"backdrop-saturate":[{"backdrop-saturate":[Te,Ae,pe]}],"backdrop-sepia":[{"backdrop-sepia":["",Te,Ae,pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":F()}],"border-spacing-x":[{"border-spacing-x":F()}],"border-spacing-y":[{"border-spacing-y":F()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ae,pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Te,"initial",Ae,pe]}],ease:[{ease:["linear","initial",C,Ae,pe]}],delay:[{delay:[Te,Ae,pe]}],animate:[{animate:["none",S,Ae,pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Ae,pe]}],"perspective-origin":[{"perspective-origin":R()}],rotate:[{rotate:Re()}],"rotate-x":[{"rotate-x":Re()}],"rotate-y":[{"rotate-y":Re()}],"rotate-z":[{"rotate-z":Re()}],scale:[{scale:Lt()}],"scale-x":[{"scale-x":Lt()}],"scale-y":[{"scale-y":Lt()}],"scale-z":[{"scale-z":Lt()}],"scale-3d":["scale-3d"],skew:[{skew:Wt()}],"skew-x":[{"skew-x":Wt()}],"skew-y":[{"skew-y":Wt()}],transform:[{transform:[Ae,pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:R()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Zt()}],"translate-x":[{"translate-x":Zt()}],"translate-y":[{"translate-y":Zt()}],"translate-z":[{"translate-z":Zt()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae,pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae,pe]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[Te,zs,Sr,Yh]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},UR=fR(BR);function mo(...e){return UR(Xv(e))}function NR({className:e,type:t,...n}){return $.jsx("input",{type:t,"data-slot":"input",className:mo("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function Xp(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ir(...e){return t=>{let n=!1;const i=e.map(a=>{const o=Xp(a,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<i.length;a++){const o=i[a];typeof o=="function"?o():Xp(e[a],null)}}}}function Qt(...e){return z.useCallback(Ir(...e),e)}var IR=Symbol.for("react.lazy"),Dc=Dd[" use ".trim().toString()];function VR(e){return typeof e=="object"&&e!==null&&"then"in e}function ix(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===IR&&"_payload"in e&&VR(e._payload)}function OR(e){const t=PR(e),n=z.forwardRef((i,a)=>{let{children:o,...l}=i;ix(o)&&typeof Dc=="function"&&(o=Dc(o._payload));const u=z.Children.toArray(o),f=u.find(kR);if(f){const h=f.props.children,d=u.map(m=>m===f?z.Children.count(h)>1?z.Children.only(null):z.isValidElement(h)?h.props.children:null:m);return $.jsx(t,{...l,ref:a,children:z.isValidElement(h)?z.cloneElement(h,void 0,d):null})}return $.jsx(t,{...l,ref:a,children:o})});return n.displayName=`${e}.Slot`,n}var LR=OR("Slot");function PR(e){const t=z.forwardRef((n,i)=>{let{children:a,...o}=n;if(ix(a)&&typeof Dc=="function"&&(a=Dc(a._payload)),z.isValidElement(a)){const l=YR(a),u=GR(o,a.props);return a.type!==z.Fragment&&(u.ref=i?Ir(i,l):l),z.cloneElement(a,u)}return z.Children.count(a)>1?z.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var zR=Symbol("radix.slottable");function kR(e){return z.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===zR}function GR(e,t){const n={...t};for(const i in t){const a=e[i],o=t[i];/^on[A-Z]/.test(i)?a&&o?n[i]=(...u)=>{const f=o(...u);return a(...u),f}:a&&(n[i]=a):i==="style"?n[i]={...a,...o}:i==="className"&&(n[i]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function YR(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const jp=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,qp=Xv,HR=(e,t)=>n=>{var i;if(t?.variants==null)return qp(e,n?.class,n?.className);const{variants:a,defaultVariants:o}=t,l=Object.keys(a).map(h=>{const d=n?.[h],m=o?.[h];if(d===null)return null;const p=jp(d)||jp(m);return a[h][p]}),u=n&&Object.entries(n).reduce((h,d)=>{let[m,p]=d;return p===void 0||(h[m]=p),h},{}),f=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((h,d)=>{let{class:m,className:p,...A}=d;return Object.entries(A).every(v=>{let[y,w]=v;return Array.isArray(w)?w.includes({...o,...u}[y]):{...o,...u}[y]===w})?[...h,m,p]:h},[]);return qp(e,l,f,n?.class,n?.className)},XR=HR("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function ks({className:e,variant:t="default",size:n="default",asChild:i=!1,...a}){const o=i?LR:"button";return $.jsx(o,{"data-slot":"button","data-variant":t,"data-size":n,className:mo(XR({variant:t,size:n,className:e})),...a})}function ze(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e?.(a),n===!1||!a.defaultPrevented)return t?.(a)}}function go(e,t=[]){let n=[];function i(o,l){const u=z.createContext(l),f=n.length;n=[...n,l];const h=m=>{const{scope:p,children:A,...v}=m,y=p?.[e]?.[f]||u,w=z.useMemo(()=>v,Object.values(v));return $.jsx(y.Provider,{value:w,children:A})};h.displayName=o+"Provider";function d(m,p){const A=p?.[e]?.[f]||u,v=z.useContext(A);if(v)return v;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[h,d]}const a=()=>{const o=n.map(l=>z.createContext(l));return function(u){const f=u?.[e]||o;return z.useMemo(()=>({[`__scope${e}`]:{...u,[e]:f}}),[u,f])}};return a.scopeName=e,[i,jR(a,...t)]}function jR(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const l=i.reduce((u,{useScope:f,scopeName:h})=>{const m=f(o)[`__scope${h}`];return{...u,...m}},{});return z.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}var er=globalThis?.document?z.useLayoutEffect:()=>{},qR=Dd[" useInsertionEffect ".trim().toString()]||er;function rx({prop:e,defaultProp:t,onChange:n=()=>{},caller:i}){const[a,o,l]=_R({defaultProp:t,onChange:n}),u=e!==void 0,f=u?e:a;{const d=z.useRef(e!==void 0);z.useEffect(()=>{const m=d.current;m!==u&&console.warn(`${i} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=u},[u,i])}const h=z.useCallback(d=>{if(u){const m=KR(d)?d(e):d;m!==e&&l.current?.(m)}else o(d)},[u,e,o,l]);return[f,h]}function _R({defaultProp:e,onChange:t}){const[n,i]=z.useState(e),a=z.useRef(n),o=z.useRef(t);return qR(()=>{o.current=t},[t]),z.useEffect(()=>{a.current!==n&&(o.current?.(n),a.current=n)},[n,a]),[n,i,o]}function KR(e){return typeof e=="function"}var h0=xA();const QR=Md(h0);function WR(e){const t=ZR(e),n=z.forwardRef((i,a)=>{const{children:o,...l}=i,u=z.Children.toArray(o),f=u.find($R);if(f){const h=f.props.children,d=u.map(m=>m===f?z.Children.count(h)>1?z.Children.only(null):z.isValidElement(h)?h.props.children:null:m);return $.jsx(t,{...l,ref:a,children:z.isValidElement(h)?z.cloneElement(h,void 0,d):null})}return $.jsx(t,{...l,ref:a,children:o})});return n.displayName=`${e}.Slot`,n}function ZR(e){const t=z.forwardRef((n,i)=>{const{children:a,...o}=n;if(z.isValidElement(a)){const l=t7(a),u=e7(o,a.props);return a.type!==z.Fragment&&(u.ref=i?Ir(i,l):l),z.cloneElement(a,u)}return z.Children.count(a)>1?z.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var JR=Symbol("radix.slottable");function $R(e){return z.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===JR}function e7(e,t){const n={...t};for(const i in t){const a=e[i],o=t[i];/^on[A-Z]/.test(i)?a&&o?n[i]=(...u)=>{const f=o(...u);return a(...u),f}:a&&(n[i]=a):i==="style"?n[i]={...a,...o}:i==="className"&&(n[i]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function t7(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var n7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vt=n7.reduce((e,t)=>{const n=WR(`Primitive.${t}`),i=z.forwardRef((a,o)=>{const{asChild:l,...u}=a,f=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),$.jsx(f,{...u,ref:o})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function ax(e,t){e&&h0.flushSync(()=>e.dispatchEvent(t))}function _p(e){const t=i7(e),n=z.forwardRef((i,a)=>{const{children:o,...l}=i,u=z.Children.toArray(o),f=u.find(a7);if(f){const h=f.props.children,d=u.map(m=>m===f?z.Children.count(h)>1?z.Children.only(null):z.isValidElement(h)?h.props.children:null:m);return $.jsx(t,{...l,ref:a,children:z.isValidElement(h)?z.cloneElement(h,void 0,d):null})}return $.jsx(t,{...l,ref:a,children:o})});return n.displayName=`${e}.Slot`,n}function i7(e){const t=z.forwardRef((n,i)=>{const{children:a,...o}=n;if(z.isValidElement(a)){const l=o7(a),u=s7(o,a.props);return a.type!==z.Fragment&&(u.ref=i?Ir(i,l):l),z.cloneElement(a,u)}return z.Children.count(a)>1?z.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var r7=Symbol("radix.slottable");function a7(e){return z.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===r7}function s7(e,t){const n={...t};for(const i in t){const a=e[i],o=t[i];/^on[A-Z]/.test(i)?a&&o?n[i]=(...u)=>{const f=o(...u);return a(...u),f}:a&&(n[i]=a):i==="style"?n[i]={...a,...o}:i==="className"&&(n[i]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function o7(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function sx(e){const t=e+"CollectionProvider",[n,i]=go(t),[a,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=y=>{const{scope:w,children:C}=y,S=qi.useRef(null),E=qi.useRef(new Map).current;return $.jsx(a,{scope:w,itemMap:E,collectionRef:S,children:C})};l.displayName=t;const u=e+"CollectionSlot",f=_p(u),h=qi.forwardRef((y,w)=>{const{scope:C,children:S}=y,E=o(u,C),M=Qt(w,E.collectionRef);return $.jsx(f,{ref:M,children:S})});h.displayName=u;const d=e+"CollectionItemSlot",m="data-radix-collection-item",p=_p(d),A=qi.forwardRef((y,w)=>{const{scope:C,children:S,...E}=y,M=qi.useRef(null),R=Qt(w,M),D=o(d,C);return qi.useEffect(()=>(D.itemMap.set(M,{ref:M,...E}),()=>{D.itemMap.delete(M)})),$.jsx(p,{[m]:"",ref:R,children:S})});A.displayName=d;function v(y){const w=o(e+"CollectionConsumer",y);return qi.useCallback(()=>{const S=w.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((D,T)=>E.indexOf(D.ref.current)-E.indexOf(T.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:l,Slot:h,ItemSlot:A},v,i]}var l7=z.createContext(void 0);function ox(e){const t=z.useContext(l7);return e||t||"ltr"}function gi(e){const t=z.useRef(e);return z.useEffect(()=>{t.current=e}),z.useMemo(()=>(...n)=>t.current?.(...n),[])}function c7(e,t=globalThis?.document){const n=gi(e);z.useEffect(()=>{const i=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var u7="DismissableLayer",Ad="dismissableLayer.update",f7="dismissableLayer.pointerDownOutside",h7="dismissableLayer.focusOutside",Kp,lx=z.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cx=z.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:u,...f}=e,h=z.useContext(lx),[d,m]=z.useState(null),p=d?.ownerDocument??globalThis?.document,[,A]=z.useState({}),v=Qt(t,T=>m(T)),y=Array.from(h.layers),[w]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),C=y.indexOf(w),S=d?y.indexOf(d):-1,E=h.layersWithOutsidePointerEventsDisabled.size>0,M=S>=C,R=g7(T=>{const F=T.target,U=[...h.branches].some(I=>I.contains(F));!M||U||(a?.(T),l?.(T),T.defaultPrevented||u?.())},p),D=p7(T=>{const F=T.target;[...h.branches].some(I=>I.contains(F))||(o?.(T),l?.(T),T.defaultPrevented||u?.())},p);return c7(T=>{S===h.layers.size-1&&(i?.(T),!T.defaultPrevented&&u&&(T.preventDefault(),u()))},p),z.useEffect(()=>{if(d)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(Kp=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(d)),h.layers.add(d),Qp(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Kp)}},[d,p,n,h]),z.useEffect(()=>()=>{d&&(h.layers.delete(d),h.layersWithOutsidePointerEventsDisabled.delete(d),Qp())},[d,h]),z.useEffect(()=>{const T=()=>A({});return document.addEventListener(Ad,T),()=>document.removeEventListener(Ad,T)},[]),$.jsx(Vt.div,{...f,ref:v,style:{pointerEvents:E?M?"auto":"none":void 0,...e.style},onFocusCapture:ze(e.onFocusCapture,D.onFocusCapture),onBlurCapture:ze(e.onBlurCapture,D.onBlurCapture),onPointerDownCapture:ze(e.onPointerDownCapture,R.onPointerDownCapture)})});cx.displayName=u7;var d7="DismissableLayerBranch",m7=z.forwardRef((e,t)=>{const n=z.useContext(lx),i=z.useRef(null),a=Qt(t,i);return z.useEffect(()=>{const o=i.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),$.jsx(Vt.div,{...e,ref:a})});m7.displayName=d7;function g7(e,t=globalThis?.document){const n=gi(e),i=z.useRef(!1),a=z.useRef(()=>{});return z.useEffect(()=>{const o=u=>{if(u.target&&!i.current){let f=function(){ux(f7,n,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=f,t.addEventListener("click",a.current,{once:!0})):f()}else t.removeEventListener("click",a.current);i.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function p7(e,t=globalThis?.document){const n=gi(e),i=z.useRef(!1);return z.useEffect(()=>{const a=o=>{o.target&&!i.current&&ux(h7,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function Qp(){const e=new CustomEvent(Ad);document.dispatchEvent(e)}function ux(e,t,n,{discrete:i}){const a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),i?ax(a,o):a.dispatchEvent(o)}var Hh=0;function A7(){z.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Wp()),document.body.insertAdjacentElement("beforeend",e[1]??Wp()),Hh++,()=>{Hh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Hh--}},[])}function Wp(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Xh="focusScope.autoFocusOnMount",jh="focusScope.autoFocusOnUnmount",Zp={bubbles:!1,cancelable:!0},v7="FocusScope",fx=z.forwardRef((e,t)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...l}=e,[u,f]=z.useState(null),h=gi(a),d=gi(o),m=z.useRef(null),p=Qt(t,y=>f(y)),A=z.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;z.useEffect(()=>{if(i){let y=function(E){if(A.paused||!u)return;const M=E.target;u.contains(M)?m.current=M:Ki(m.current,{select:!0})},w=function(E){if(A.paused||!u)return;const M=E.relatedTarget;M!==null&&(u.contains(M)||Ki(m.current,{select:!0}))},C=function(E){if(document.activeElement===document.body)for(const R of E)R.removedNodes.length>0&&Ki(u)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const S=new MutationObserver(C);return u&&S.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),S.disconnect()}}},[i,u,A.paused]),z.useEffect(()=>{if(u){$p.add(A);const y=document.activeElement;if(!u.contains(y)){const C=new CustomEvent(Xh,Zp);u.addEventListener(Xh,h),u.dispatchEvent(C),C.defaultPrevented||(x7(S7(hx(u)),{select:!0}),document.activeElement===y&&Ki(u))}return()=>{u.removeEventListener(Xh,h),setTimeout(()=>{const C=new CustomEvent(jh,Zp);u.addEventListener(jh,d),u.dispatchEvent(C),C.defaultPrevented||Ki(y??document.body,{select:!0}),u.removeEventListener(jh,d),$p.remove(A)},0)}}},[u,h,d,A]);const v=z.useCallback(y=>{if(!n&&!i||A.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,C=document.activeElement;if(w&&C){const S=y.currentTarget,[E,M]=y7(S);E&&M?!y.shiftKey&&C===M?(y.preventDefault(),n&&Ki(E,{select:!0})):y.shiftKey&&C===E&&(y.preventDefault(),n&&Ki(M,{select:!0})):C===S&&y.preventDefault()}},[n,i,A.paused]);return $.jsx(Vt.div,{tabIndex:-1,...l,ref:p,onKeyDown:v})});fx.displayName=v7;function x7(e,{select:t=!1}={}){const n=document.activeElement;for(const i of e)if(Ki(i,{select:t}),document.activeElement!==n)return}function y7(e){const t=hx(e),n=Jp(t,e),i=Jp(t.reverse(),e);return[n,i]}function hx(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const a=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||a?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Jp(e,t){for(const n of e)if(!w7(n,{upTo:t}))return n}function w7(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function b7(e){return e instanceof HTMLInputElement&&"select"in e}function Ki(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&b7(e)&&t&&e.select()}}var $p=C7();function C7(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=eA(e,t),e.unshift(t)},remove(t){e=eA(e,t),e[0]?.resume()}}}function eA(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function S7(e){return e.filter(t=>t.tagName!=="A")}var M7=Dd[" useId ".trim().toString()]||(()=>{}),E7=0;function vd(e){const[t,n]=z.useState(M7());return er(()=>{n(i=>i??String(E7++))},[e]),e||(t?`radix-${t}`:"")}const D7=["top","right","bottom","left"],tr=Math.min,cn=Math.max,Tc=Math.round,Kl=Math.floor,Hn=e=>({x:e,y:e}),T7={left:"right",right:"left",bottom:"top",top:"bottom"},R7={start:"end",end:"start"};function xd(e,t,n){return cn(e,tr(t,n))}function pi(e,t){return typeof e=="function"?e(t):e}function Ai(e){return e.split("-")[0]}function ka(e){return e.split("-")[1]}function d0(e){return e==="x"?"y":"x"}function m0(e){return e==="y"?"height":"width"}const F7=new Set(["top","bottom"]);function Yn(e){return F7.has(Ai(e))?"y":"x"}function g0(e){return d0(Yn(e))}function B7(e,t,n){n===void 0&&(n=!1);const i=ka(e),a=g0(e),o=m0(a);let l=a==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(l=Rc(l)),[l,Rc(l)]}function U7(e){const t=Rc(e);return[yd(e),t,yd(t)]}function yd(e){return e.replace(/start|end/g,t=>R7[t])}const tA=["left","right"],nA=["right","left"],N7=["top","bottom"],I7=["bottom","top"];function V7(e,t,n){switch(e){case"top":case"bottom":return n?t?nA:tA:t?tA:nA;case"left":case"right":return t?N7:I7;default:return[]}}function O7(e,t,n,i){const a=ka(e);let o=V7(Ai(e),n==="start",i);return a&&(o=o.map(l=>l+"-"+a),t&&(o=o.concat(o.map(yd)))),o}function Rc(e){return e.replace(/left|right|bottom|top/g,t=>T7[t])}function L7(e){return{top:0,right:0,bottom:0,left:0,...e}}function dx(e){return typeof e!="number"?L7(e):{top:e,right:e,bottom:e,left:e}}function Fc(e){const{x:t,y:n,width:i,height:a}=e;return{width:i,height:a,top:n,left:t,right:t+i,bottom:n+a,x:t,y:n}}function iA(e,t,n){let{reference:i,floating:a}=e;const o=Yn(t),l=g0(t),u=m0(l),f=Ai(t),h=o==="y",d=i.x+i.width/2-a.width/2,m=i.y+i.height/2-a.height/2,p=i[u]/2-a[u]/2;let A;switch(f){case"top":A={x:d,y:i.y-a.height};break;case"bottom":A={x:d,y:i.y+i.height};break;case"right":A={x:i.x+i.width,y:m};break;case"left":A={x:i.x-a.width,y:m};break;default:A={x:i.x,y:i.y}}switch(ka(t)){case"start":A[l]-=p*(n&&h?-1:1);break;case"end":A[l]+=p*(n&&h?-1:1);break}return A}const P7=async(e,t,n)=>{const{placement:i="bottom",strategy:a="absolute",middleware:o=[],platform:l}=n,u=o.filter(Boolean),f=await(l.isRTL==null?void 0:l.isRTL(t));let h=await l.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:m}=iA(h,i,f),p=i,A={},v=0;for(let y=0;y<u.length;y++){const{name:w,fn:C}=u[y],{x:S,y:E,data:M,reset:R}=await C({x:d,y:m,initialPlacement:i,placement:p,strategy:a,middlewareData:A,rects:h,platform:l,elements:{reference:e,floating:t}});d=S??d,m=E??m,A={...A,[w]:{...A[w],...M}},R&&v<=50&&(v++,typeof R=="object"&&(R.placement&&(p=R.placement),R.rects&&(h=R.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:a}):R.rects),{x:d,y:m}=iA(h,p,f)),y=-1)}return{x:d,y:m,placement:p,strategy:a,middlewareData:A}};async function io(e,t){var n;t===void 0&&(t={});const{x:i,y:a,platform:o,rects:l,elements:u,strategy:f}=e,{boundary:h="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:p=!1,padding:A=0}=pi(t,e),v=dx(A),w=u[p?m==="floating"?"reference":"floating":m],C=Fc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:h,rootBoundary:d,strategy:f})),S=m==="floating"?{x:i,y:a,width:l.floating.width,height:l.floating.height}:l.reference,E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),M=await(o.isElement==null?void 0:o.isElement(E))?await(o.getScale==null?void 0:o.getScale(E))||{x:1,y:1}:{x:1,y:1},R=Fc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:S,offsetParent:E,strategy:f}):S);return{top:(C.top-R.top+v.top)/M.y,bottom:(R.bottom-C.bottom+v.bottom)/M.y,left:(C.left-R.left+v.left)/M.x,right:(R.right-C.right+v.right)/M.x}}const z7=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:a,rects:o,platform:l,elements:u,middlewareData:f}=t,{element:h,padding:d=0}=pi(e,t)||{};if(h==null)return{};const m=dx(d),p={x:n,y:i},A=g0(a),v=m0(A),y=await l.getDimensions(h),w=A==="y",C=w?"top":"left",S=w?"bottom":"right",E=w?"clientHeight":"clientWidth",M=o.reference[v]+o.reference[A]-p[A]-o.floating[v],R=p[A]-o.reference[A],D=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let T=D?D[E]:0;(!T||!await(l.isElement==null?void 0:l.isElement(D)))&&(T=u.floating[E]||o.floating[v]);const F=M/2-R/2,U=T/2-y[v]/2-1,I=tr(m[C],U),V=tr(m[S],U),N=I,Y=T-y[v]-V,P=T/2-y[v]/2+F,Q=xd(N,P,Y),k=!f.arrow&&ka(a)!=null&&P!==Q&&o.reference[v]/2-(P<N?I:V)-y[v]/2<0,j=k?P<N?P-N:P-Y:0;return{[A]:p[A]+j,data:{[A]:Q,centerOffset:P-Q-j,...k&&{alignmentOffset:j}},reset:k}}}),k7=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:a,middlewareData:o,rects:l,initialPlacement:u,platform:f,elements:h}=t,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:A="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...w}=pi(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const C=Ai(a),S=Yn(u),E=Ai(u)===u,M=await(f.isRTL==null?void 0:f.isRTL(h.floating)),R=p||(E||!y?[Rc(u)]:U7(u)),D=v!=="none";!p&&D&&R.push(...O7(u,y,v,M));const T=[u,...R],F=await io(t,w),U=[];let I=((i=o.flip)==null?void 0:i.overflows)||[];if(d&&U.push(F[C]),m){const P=B7(a,l,M);U.push(F[P[0]],F[P[1]])}if(I=[...I,{placement:a,overflows:U}],!U.every(P=>P<=0)){var V,N;const P=(((V=o.flip)==null?void 0:V.index)||0)+1,Q=T[P];if(Q&&(!(m==="alignment"?S!==Yn(Q):!1)||I.every(H=>Yn(H.placement)===S?H.overflows[0]>0:!0)))return{data:{index:P,overflows:I},reset:{placement:Q}};let k=(N=I.filter(j=>j.overflows[0]<=0).sort((j,H)=>j.overflows[1]-H.overflows[1])[0])==null?void 0:N.placement;if(!k)switch(A){case"bestFit":{var Y;const j=(Y=I.filter(H=>{if(D){const Z=Yn(H.placement);return Z===S||Z==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(Z=>Z>0).reduce((Z,J)=>Z+J,0)]).sort((H,Z)=>H[1]-Z[1])[0])==null?void 0:Y[0];j&&(k=j);break}case"initialPlacement":k=u;break}if(a!==k)return{reset:{placement:k}}}return{}}}};function rA(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function aA(e){return D7.some(t=>e[t]>=0)}const G7=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...a}=pi(e,t);switch(i){case"referenceHidden":{const o=await io(t,{...a,elementContext:"reference"}),l=rA(o,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:aA(l)}}}case"escaped":{const o=await io(t,{...a,altBoundary:!0}),l=rA(o,n.floating);return{data:{escapedOffsets:l,escaped:aA(l)}}}default:return{}}}}},mx=new Set(["left","top"]);async function Y7(e,t){const{placement:n,platform:i,elements:a}=e,o=await(i.isRTL==null?void 0:i.isRTL(a.floating)),l=Ai(n),u=ka(n),f=Yn(n)==="y",h=mx.has(l)?-1:1,d=o&&f?-1:1,m=pi(t,e);let{mainAxis:p,crossAxis:A,alignmentAxis:v}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return u&&typeof v=="number"&&(A=u==="end"?v*-1:v),f?{x:A*d,y:p*h}:{x:p*h,y:A*d}}const H7=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:a,y:o,placement:l,middlewareData:u}=t,f=await Y7(t,e);return l===((n=u.offset)==null?void 0:n.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:a+f.x,y:o+f.y,data:{...f,placement:l}}}}},X7=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:a}=t,{mainAxis:o=!0,crossAxis:l=!1,limiter:u={fn:w=>{let{x:C,y:S}=w;return{x:C,y:S}}},...f}=pi(e,t),h={x:n,y:i},d=await io(t,f),m=Yn(Ai(a)),p=d0(m);let A=h[p],v=h[m];if(o){const w=p==="y"?"top":"left",C=p==="y"?"bottom":"right",S=A+d[w],E=A-d[C];A=xd(S,A,E)}if(l){const w=m==="y"?"top":"left",C=m==="y"?"bottom":"right",S=v+d[w],E=v-d[C];v=xd(S,v,E)}const y=u.fn({...t,[p]:A,[m]:v});return{...y,data:{x:y.x-n,y:y.y-i,enabled:{[p]:o,[m]:l}}}}}},j7=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:i,placement:a,rects:o,middlewareData:l}=t,{offset:u=0,mainAxis:f=!0,crossAxis:h=!0}=pi(e,t),d={x:n,y:i},m=Yn(a),p=d0(m);let A=d[p],v=d[m];const y=pi(u,t),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(f){const E=p==="y"?"height":"width",M=o.reference[p]-o.floating[E]+w.mainAxis,R=o.reference[p]+o.reference[E]-w.mainAxis;A<M?A=M:A>R&&(A=R)}if(h){var C,S;const E=p==="y"?"width":"height",M=mx.has(Ai(a)),R=o.reference[m]-o.floating[E]+(M&&((C=l.offset)==null?void 0:C[m])||0)+(M?0:w.crossAxis),D=o.reference[m]+o.reference[E]+(M?0:((S=l.offset)==null?void 0:S[m])||0)-(M?w.crossAxis:0);v<R?v=R:v>D&&(v=D)}return{[p]:A,[m]:v}}}},q7=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,i;const{placement:a,rects:o,platform:l,elements:u}=t,{apply:f=()=>{},...h}=pi(e,t),d=await io(t,h),m=Ai(a),p=ka(a),A=Yn(a)==="y",{width:v,height:y}=o.floating;let w,C;m==="top"||m==="bottom"?(w=m,C=p===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(C=m,w=p==="end"?"top":"bottom");const S=y-d.top-d.bottom,E=v-d.left-d.right,M=tr(y-d[w],S),R=tr(v-d[C],E),D=!t.middlewareData.shift;let T=M,F=R;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(F=E),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(T=S),D&&!p){const I=cn(d.left,0),V=cn(d.right,0),N=cn(d.top,0),Y=cn(d.bottom,0);A?F=v-2*(I!==0||V!==0?I+V:cn(d.left,d.right)):T=y-2*(N!==0||Y!==0?N+Y:cn(d.top,d.bottom))}await f({...t,availableWidth:F,availableHeight:T});const U=await l.getDimensions(u.floating);return v!==U.width||y!==U.height?{reset:{rects:!0}}:{}}}};function Gc(){return typeof window<"u"}function Ga(e){return gx(e)?(e.nodeName||"").toLowerCase():"#document"}function un(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function jn(e){var t;return(t=(gx(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function gx(e){return Gc()?e instanceof Node||e instanceof un(e).Node:!1}function Un(e){return Gc()?e instanceof Element||e instanceof un(e).Element:!1}function Xn(e){return Gc()?e instanceof HTMLElement||e instanceof un(e).HTMLElement:!1}function sA(e){return!Gc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof un(e).ShadowRoot}const _7=new Set(["inline","contents"]);function po(e){const{overflow:t,overflowX:n,overflowY:i,display:a}=Nn(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!_7.has(a)}const K7=new Set(["table","td","th"]);function Q7(e){return K7.has(Ga(e))}const W7=[":popover-open",":modal"];function Yc(e){return W7.some(t=>{try{return e.matches(t)}catch{return!1}})}const Z7=["transform","translate","scale","rotate","perspective"],J7=["transform","translate","scale","rotate","perspective","filter"],$7=["paint","layout","strict","content"];function p0(e){const t=A0(),n=Un(e)?Nn(e):e;return Z7.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||J7.some(i=>(n.willChange||"").includes(i))||$7.some(i=>(n.contain||"").includes(i))}function eF(e){let t=nr(e);for(;Xn(t)&&!Va(t);){if(p0(t))return t;if(Yc(t))return null;t=nr(t)}return null}function A0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const tF=new Set(["html","body","#document"]);function Va(e){return tF.has(Ga(e))}function Nn(e){return un(e).getComputedStyle(e)}function Hc(e){return Un(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function nr(e){if(Ga(e)==="html")return e;const t=e.assignedSlot||e.parentNode||sA(e)&&e.host||jn(e);return sA(t)?t.host:t}function px(e){const t=nr(e);return Va(t)?e.ownerDocument?e.ownerDocument.body:e.body:Xn(t)&&po(t)?t:px(t)}function ro(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=px(e),o=a===((i=e.ownerDocument)==null?void 0:i.body),l=un(a);if(o){const u=wd(l);return t.concat(l,l.visualViewport||[],po(a)?a:[],u&&n?ro(u):[])}return t.concat(a,ro(a,[],n))}function wd(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ax(e){const t=Nn(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const a=Xn(e),o=a?e.offsetWidth:n,l=a?e.offsetHeight:i,u=Tc(n)!==o||Tc(i)!==l;return u&&(n=o,i=l),{width:n,height:i,$:u}}function v0(e){return Un(e)?e:e.contextElement}function Na(e){const t=v0(e);if(!Xn(t))return Hn(1);const n=t.getBoundingClientRect(),{width:i,height:a,$:o}=Ax(t);let l=(o?Tc(n.width):n.width)/i,u=(o?Tc(n.height):n.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const nF=Hn(0);function vx(e){const t=un(e);return!A0()||!t.visualViewport?nF:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function iF(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==un(e)?!1:t}function Ur(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),o=v0(e);let l=Hn(1);t&&(i?Un(i)&&(l=Na(i)):l=Na(e));const u=iF(o,n,i)?vx(o):Hn(0);let f=(a.left+u.x)/l.x,h=(a.top+u.y)/l.y,d=a.width/l.x,m=a.height/l.y;if(o){const p=un(o),A=i&&Un(i)?un(i):i;let v=p,y=wd(v);for(;y&&i&&A!==v;){const w=Na(y),C=y.getBoundingClientRect(),S=Nn(y),E=C.left+(y.clientLeft+parseFloat(S.paddingLeft))*w.x,M=C.top+(y.clientTop+parseFloat(S.paddingTop))*w.y;f*=w.x,h*=w.y,d*=w.x,m*=w.y,f+=E,h+=M,v=un(y),y=wd(v)}}return Fc({width:d,height:m,x:f,y:h})}function Xc(e,t){const n=Hc(e).scrollLeft;return t?t.left+n:Ur(jn(e)).left+n}function xx(e,t){const n=e.getBoundingClientRect(),i=n.left+t.scrollLeft-Xc(e,n),a=n.top+t.scrollTop;return{x:i,y:a}}function rF(e){let{elements:t,rect:n,offsetParent:i,strategy:a}=e;const o=a==="fixed",l=jn(i),u=t?Yc(t.floating):!1;if(i===l||u&&o)return n;let f={scrollLeft:0,scrollTop:0},h=Hn(1);const d=Hn(0),m=Xn(i);if((m||!m&&!o)&&((Ga(i)!=="body"||po(l))&&(f=Hc(i)),Xn(i))){const A=Ur(i);h=Na(i),d.x=A.x+i.clientLeft,d.y=A.y+i.clientTop}const p=l&&!m&&!o?xx(l,f):Hn(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-f.scrollLeft*h.x+d.x+p.x,y:n.y*h.y-f.scrollTop*h.y+d.y+p.y}}function aF(e){return Array.from(e.getClientRects())}function sF(e){const t=jn(e),n=Hc(e),i=e.ownerDocument.body,a=cn(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),o=cn(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let l=-n.scrollLeft+Xc(e);const u=-n.scrollTop;return Nn(i).direction==="rtl"&&(l+=cn(t.clientWidth,i.clientWidth)-a),{width:a,height:o,x:l,y:u}}const oA=25;function oF(e,t){const n=un(e),i=jn(e),a=n.visualViewport;let o=i.clientWidth,l=i.clientHeight,u=0,f=0;if(a){o=a.width,l=a.height;const d=A0();(!d||d&&t==="fixed")&&(u=a.offsetLeft,f=a.offsetTop)}const h=Xc(i);if(h<=0){const d=i.ownerDocument,m=d.body,p=getComputedStyle(m),A=d.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,v=Math.abs(i.clientWidth-m.clientWidth-A);v<=oA&&(o-=v)}else h<=oA&&(o+=h);return{width:o,height:l,x:u,y:f}}const lF=new Set(["absolute","fixed"]);function cF(e,t){const n=Ur(e,!0,t==="fixed"),i=n.top+e.clientTop,a=n.left+e.clientLeft,o=Xn(e)?Na(e):Hn(1),l=e.clientWidth*o.x,u=e.clientHeight*o.y,f=a*o.x,h=i*o.y;return{width:l,height:u,x:f,y:h}}function lA(e,t,n){let i;if(t==="viewport")i=oF(e,n);else if(t==="document")i=sF(jn(e));else if(Un(t))i=cF(t,n);else{const a=vx(e);i={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Fc(i)}function yx(e,t){const n=nr(e);return n===t||!Un(n)||Va(n)?!1:Nn(n).position==="fixed"||yx(n,t)}function uF(e,t){const n=t.get(e);if(n)return n;let i=ro(e,[],!1).filter(u=>Un(u)&&Ga(u)!=="body"),a=null;const o=Nn(e).position==="fixed";let l=o?nr(e):e;for(;Un(l)&&!Va(l);){const u=Nn(l),f=p0(l);!f&&u.position==="fixed"&&(a=null),(o?!f&&!a:!f&&u.position==="static"&&!!a&&lF.has(a.position)||po(l)&&!f&&yx(e,l))?i=i.filter(d=>d!==l):a=u,l=nr(l)}return t.set(e,i),i}function fF(e){let{element:t,boundary:n,rootBoundary:i,strategy:a}=e;const l=[...n==="clippingAncestors"?Yc(t)?[]:uF(t,this._c):[].concat(n),i],u=l[0],f=l.reduce((h,d)=>{const m=lA(t,d,a);return h.top=cn(m.top,h.top),h.right=tr(m.right,h.right),h.bottom=tr(m.bottom,h.bottom),h.left=cn(m.left,h.left),h},lA(t,u,a));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function hF(e){const{width:t,height:n}=Ax(e);return{width:t,height:n}}function dF(e,t,n){const i=Xn(t),a=jn(t),o=n==="fixed",l=Ur(e,!0,o,t);let u={scrollLeft:0,scrollTop:0};const f=Hn(0);function h(){f.x=Xc(a)}if(i||!i&&!o)if((Ga(t)!=="body"||po(a))&&(u=Hc(t)),i){const A=Ur(t,!0,o,t);f.x=A.x+t.clientLeft,f.y=A.y+t.clientTop}else a&&h();o&&!i&&a&&h();const d=a&&!i&&!o?xx(a,u):Hn(0),m=l.left+u.scrollLeft-f.x-d.x,p=l.top+u.scrollTop-f.y-d.y;return{x:m,y:p,width:l.width,height:l.height}}function qh(e){return Nn(e).position==="static"}function cA(e,t){if(!Xn(e)||Nn(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return jn(e)===n&&(n=n.ownerDocument.body),n}function wx(e,t){const n=un(e);if(Yc(e))return n;if(!Xn(e)){let a=nr(e);for(;a&&!Va(a);){if(Un(a)&&!qh(a))return a;a=nr(a)}return n}let i=cA(e,t);for(;i&&Q7(i)&&qh(i);)i=cA(i,t);return i&&Va(i)&&qh(i)&&!p0(i)?n:i||eF(e)||n}const mF=async function(e){const t=this.getOffsetParent||wx,n=this.getDimensions,i=await n(e.floating);return{reference:dF(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function gF(e){return Nn(e).direction==="rtl"}const pF={convertOffsetParentRelativeRectToViewportRelativeRect:rF,getDocumentElement:jn,getClippingRect:fF,getOffsetParent:wx,getElementRects:mF,getClientRects:aF,getDimensions:hF,getScale:Na,isElement:Un,isRTL:gF};function bx(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function AF(e,t){let n=null,i;const a=jn(e);function o(){var u;clearTimeout(i),(u=n)==null||u.disconnect(),n=null}function l(u,f){u===void 0&&(u=!1),f===void 0&&(f=1),o();const h=e.getBoundingClientRect(),{left:d,top:m,width:p,height:A}=h;if(u||t(),!p||!A)return;const v=Kl(m),y=Kl(a.clientWidth-(d+p)),w=Kl(a.clientHeight-(m+A)),C=Kl(d),E={rootMargin:-v+"px "+-y+"px "+-w+"px "+-C+"px",threshold:cn(0,tr(1,f))||1};let M=!0;function R(D){const T=D[0].intersectionRatio;if(T!==f){if(!M)return l();T?l(!1,T):i=setTimeout(()=>{l(!1,1e-7)},1e3)}T===1&&!bx(h,e.getBoundingClientRect())&&l(),M=!1}try{n=new IntersectionObserver(R,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(R,E)}n.observe(e)}return l(!0),o}function vF(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:f=!1}=i,h=v0(e),d=a||o?[...h?ro(h):[],...ro(t)]:[];d.forEach(C=>{a&&C.addEventListener("scroll",n,{passive:!0}),o&&C.addEventListener("resize",n)});const m=h&&u?AF(h,n):null;let p=-1,A=null;l&&(A=new ResizeObserver(C=>{let[S]=C;S&&S.target===h&&A&&(A.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=A)==null||E.observe(t)})),n()}),h&&!f&&A.observe(h),A.observe(t));let v,y=f?Ur(e):null;f&&w();function w(){const C=Ur(e);y&&!bx(y,C)&&n(),y=C,v=requestAnimationFrame(w)}return n(),()=>{var C;d.forEach(S=>{a&&S.removeEventListener("scroll",n),o&&S.removeEventListener("resize",n)}),m?.(),(C=A)==null||C.disconnect(),A=null,f&&cancelAnimationFrame(v)}}const xF=H7,yF=X7,wF=k7,bF=q7,CF=G7,uA=z7,SF=j7,MF=(e,t,n)=>{const i=new Map,a={platform:pF,...n},o={...a.platform,_c:i};return P7(e,t,{...a,platform:o})};var EF=typeof document<"u",DF=function(){},gc=EF?z.useLayoutEffect:DF;function Bc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;i--!==0;)if(!Bc(e[i],t[i]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(t,a[i]))return!1;for(i=n;i--!==0;){const o=a[i];if(!(o==="_owner"&&e.$$typeof)&&!Bc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Cx(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function fA(e,t){const n=Cx(e);return Math.round(t*n)/n}function _h(e){const t=z.useRef(e);return gc(()=>{t.current=e}),t}function TF(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:a,elements:{reference:o,floating:l}={},transform:u=!0,whileElementsMounted:f,open:h}=e,[d,m]=z.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,A]=z.useState(i);Bc(p,i)||A(i);const[v,y]=z.useState(null),[w,C]=z.useState(null),S=z.useCallback(H=>{H!==D.current&&(D.current=H,y(H))},[]),E=z.useCallback(H=>{H!==T.current&&(T.current=H,C(H))},[]),M=o||v,R=l||w,D=z.useRef(null),T=z.useRef(null),F=z.useRef(d),U=f!=null,I=_h(f),V=_h(a),N=_h(h),Y=z.useCallback(()=>{if(!D.current||!T.current)return;const H={placement:t,strategy:n,middleware:p};V.current&&(H.platform=V.current),MF(D.current,T.current,H).then(Z=>{const J={...Z,isPositioned:N.current!==!1};P.current&&!Bc(F.current,J)&&(F.current=J,h0.flushSync(()=>{m(J)}))})},[p,t,n,V,N]);gc(()=>{h===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,m(H=>({...H,isPositioned:!1})))},[h]);const P=z.useRef(!1);gc(()=>(P.current=!0,()=>{P.current=!1}),[]),gc(()=>{if(M&&(D.current=M),R&&(T.current=R),M&&R){if(I.current)return I.current(M,R,Y);Y()}},[M,R,Y,I,U]);const Q=z.useMemo(()=>({reference:D,floating:T,setReference:S,setFloating:E}),[S,E]),k=z.useMemo(()=>({reference:M,floating:R}),[M,R]),j=z.useMemo(()=>{const H={position:n,left:0,top:0};if(!k.floating)return H;const Z=fA(k.floating,d.x),J=fA(k.floating,d.y);return u?{...H,transform:"translate("+Z+"px, "+J+"px)",...Cx(k.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:J}},[n,u,k.floating,d.x,d.y]);return z.useMemo(()=>({...d,update:Y,refs:Q,elements:k,floatingStyles:j}),[d,Y,Q,k,j])}const RF=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:i,padding:a}=typeof e=="function"?e(n):e;return i&&t(i)?i.current!=null?uA({element:i.current,padding:a}).fn(n):{}:i?uA({element:i,padding:a}).fn(n):{}}}},FF=(e,t)=>({...xF(e),options:[e,t]}),BF=(e,t)=>({...yF(e),options:[e,t]}),UF=(e,t)=>({...SF(e),options:[e,t]}),NF=(e,t)=>({...wF(e),options:[e,t]}),IF=(e,t)=>({...bF(e),options:[e,t]}),VF=(e,t)=>({...CF(e),options:[e,t]}),OF=(e,t)=>({...RF(e),options:[e,t]});var LF="Arrow",Sx=z.forwardRef((e,t)=>{const{children:n,width:i=10,height:a=5,...o}=e;return $.jsx(Vt.svg,{...o,ref:t,width:i,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:$.jsx("polygon",{points:"0,0 30,0 15,10"})})});Sx.displayName=LF;var PF=Sx;function zF(e){const[t,n]=z.useState(void 0);return er(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let l,u;if("borderBoxSize"in o){const f=o.borderBoxSize,h=Array.isArray(f)?f[0]:f;l=h.inlineSize,u=h.blockSize}else l=e.offsetWidth,u=e.offsetHeight;n({width:l,height:u})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}var x0="Popper",[Mx,Ex]=go(x0),[kF,Dx]=Mx(x0),Tx=e=>{const{__scopePopper:t,children:n}=e,[i,a]=z.useState(null);return $.jsx(kF,{scope:t,anchor:i,onAnchorChange:a,children:n})};Tx.displayName=x0;var Rx="PopperAnchor",Fx=z.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:i,...a}=e,o=Dx(Rx,n),l=z.useRef(null),u=Qt(t,l),f=z.useRef(null);return z.useEffect(()=>{const h=f.current;f.current=i?.current||l.current,h!==f.current&&o.onAnchorChange(f.current)}),i?null:$.jsx(Vt.div,{...a,ref:u})});Fx.displayName=Rx;var y0="PopperContent",[GF,YF]=Mx(y0),Bx=z.forwardRef((e,t)=>{const{__scopePopper:n,side:i="bottom",sideOffset:a=0,align:o="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:f=!0,collisionBoundary:h=[],collisionPadding:d=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:A="optimized",onPlaced:v,...y}=e,w=Dx(y0,n),[C,S]=z.useState(null),E=Qt(t,he=>S(he)),[M,R]=z.useState(null),D=zF(M),T=D?.width??0,F=D?.height??0,U=i+(o!=="center"?"-"+o:""),I=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},V=Array.isArray(h)?h:[h],N=V.length>0,Y={padding:I,boundary:V.filter(XF),altBoundary:N},{refs:P,floatingStyles:Q,placement:k,isPositioned:j,middlewareData:H}=TF({strategy:"fixed",placement:U,whileElementsMounted:(...he)=>vF(...he,{animationFrame:A==="always"}),elements:{reference:w.anchor},middleware:[FF({mainAxis:a+F,alignmentAxis:l}),f&&BF({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?UF():void 0,...Y}),f&&NF({...Y}),IF({...Y,apply:({elements:he,rects:Pe,availableWidth:Re,availableHeight:Lt})=>{const{width:Wt,height:Zt}=Pe.reference,In=he.floating.style;In.setProperty("--radix-popper-available-width",`${Re}px`),In.setProperty("--radix-popper-available-height",`${Lt}px`),In.setProperty("--radix-popper-anchor-width",`${Wt}px`),In.setProperty("--radix-popper-anchor-height",`${Zt}px`)}}),M&&OF({element:M,padding:u}),jF({arrowWidth:T,arrowHeight:F}),p&&VF({strategy:"referenceHidden",...Y})]}),[Z,J]=Ix(k),X=gi(v);er(()=>{j&&X?.()},[j,X]);const K=H.arrow?.x,te=H.arrow?.y,ae=H.arrow?.centerOffset!==0,[fe,de]=z.useState();return er(()=>{C&&de(window.getComputedStyle(C).zIndex)},[C]),$.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...Q,transform:j?Q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[H.transformOrigin?.x,H.transformOrigin?.y].join(" "),...H.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:$.jsx(GF,{scope:n,placedSide:Z,onArrowChange:R,arrowX:K,arrowY:te,shouldHideArrow:ae,children:$.jsx(Vt.div,{"data-side":Z,"data-align":J,...y,ref:E,style:{...y.style,animation:j?void 0:"none"}})})})});Bx.displayName=y0;var Ux="PopperArrow",HF={top:"bottom",right:"left",bottom:"top",left:"right"},Nx=z.forwardRef(function(t,n){const{__scopePopper:i,...a}=t,o=YF(Ux,i),l=HF[o.placedSide];return $.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:$.jsx(PF,{...a,ref:n,style:{...a.style,display:"block"}})})});Nx.displayName=Ux;function XF(e){return e!==null}var jF=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:i,middlewareData:a}=t,l=a.arrow?.centerOffset!==0,u=l?0:e.arrowWidth,f=l?0:e.arrowHeight,[h,d]=Ix(n),m={start:"0%",center:"50%",end:"100%"}[d],p=(a.arrow?.x??0)+u/2,A=(a.arrow?.y??0)+f/2;let v="",y="";return h==="bottom"?(v=l?m:`${p}px`,y=`${-f}px`):h==="top"?(v=l?m:`${p}px`,y=`${i.floating.height+f}px`):h==="right"?(v=`${-f}px`,y=l?m:`${A}px`):h==="left"&&(v=`${i.floating.width+f}px`,y=l?m:`${A}px`),{data:{x:v,y}}}});function Ix(e){const[t,n="center"]=e.split("-");return[t,n]}var qF=Tx,_F=Fx,KF=Bx,QF=Nx,WF="Portal",Vx=z.forwardRef((e,t)=>{const{container:n,...i}=e,[a,o]=z.useState(!1);er(()=>o(!0),[]);const l=n||a&&globalThis?.document?.body;return l?QR.createPortal($.jsx(Vt.div,{...i,ref:t}),l):null});Vx.displayName=WF;function ZF(e,t){return z.useReducer((n,i)=>t[n][i]??n,e)}var Ao=e=>{const{present:t,children:n}=e,i=JF(t),a=typeof n=="function"?n({present:i.isPresent}):z.Children.only(n),o=Qt(i.ref,$F(a));return typeof n=="function"||i.isPresent?z.cloneElement(a,{ref:o}):null};Ao.displayName="Presence";function JF(e){const[t,n]=z.useState(),i=z.useRef(null),a=z.useRef(e),o=z.useRef("none"),l=e?"mounted":"unmounted",[u,f]=ZF(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return z.useEffect(()=>{const h=Ql(i.current);o.current=u==="mounted"?h:"none"},[u]),er(()=>{const h=i.current,d=a.current;if(d!==e){const p=o.current,A=Ql(h);e?f("MOUNT"):A==="none"||h?.display==="none"?f("UNMOUNT"):f(d&&p!==A?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,f]),er(()=>{if(t){let h;const d=t.ownerDocument.defaultView??window,m=A=>{const y=Ql(i.current).includes(CSS.escape(A.animationName));if(A.target===t&&y&&(f("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",h=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},p=A=>{A.target===t&&(o.current=Ql(i.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{d.clearTimeout(h),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else f("ANIMATION_END")},[t,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:z.useCallback(h=>{i.current=h?getComputedStyle(h):null,n(h)},[])}}function Ql(e){return e?.animationName||"none"}function $F(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Kh="rovingFocusGroup.onEntryFocus",eB={bubbles:!1,cancelable:!0},vo="RovingFocusGroup",[bd,Ox,tB]=sx(vo),[nB,Lx]=go(vo,[tB]),[iB,rB]=nB(vo),Px=z.forwardRef((e,t)=>$.jsx(bd.Provider,{scope:e.__scopeRovingFocusGroup,children:$.jsx(bd.Slot,{scope:e.__scopeRovingFocusGroup,children:$.jsx(aB,{...e,ref:t})})}));Px.displayName=vo;var aB=z.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:a=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:f,onEntryFocus:h,preventScrollOnEntryFocus:d=!1,...m}=e,p=z.useRef(null),A=Qt(t,p),v=ox(o),[y,w]=rx({prop:l,defaultProp:u??null,onChange:f,caller:vo}),[C,S]=z.useState(!1),E=gi(h),M=Ox(n),R=z.useRef(!1),[D,T]=z.useState(0);return z.useEffect(()=>{const F=p.current;if(F)return F.addEventListener(Kh,E),()=>F.removeEventListener(Kh,E)},[E]),$.jsx(iB,{scope:n,orientation:i,dir:v,loop:a,currentTabStopId:y,onItemFocus:z.useCallback(F=>w(F),[w]),onItemShiftTab:z.useCallback(()=>S(!0),[]),onFocusableItemAdd:z.useCallback(()=>T(F=>F+1),[]),onFocusableItemRemove:z.useCallback(()=>T(F=>F-1),[]),children:$.jsx(Vt.div,{tabIndex:C||D===0?-1:0,"data-orientation":i,...m,ref:A,style:{outline:"none",...e.style},onMouseDown:ze(e.onMouseDown,()=>{R.current=!0}),onFocus:ze(e.onFocus,F=>{const U=!R.current;if(F.target===F.currentTarget&&U&&!C){const I=new CustomEvent(Kh,eB);if(F.currentTarget.dispatchEvent(I),!I.defaultPrevented){const V=M().filter(k=>k.focusable),N=V.find(k=>k.active),Y=V.find(k=>k.id===y),Q=[N,Y,...V].filter(Boolean).map(k=>k.ref.current);Gx(Q,d)}}R.current=!1}),onBlur:ze(e.onBlur,()=>S(!1))})})}),zx="RovingFocusGroupItem",kx=z.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:a=!1,tabStopId:o,children:l,...u}=e,f=vd(),h=o||f,d=rB(zx,n),m=d.currentTabStopId===h,p=Ox(n),{onFocusableItemAdd:A,onFocusableItemRemove:v,currentTabStopId:y}=d;return z.useEffect(()=>{if(i)return A(),()=>v()},[i,A,v]),$.jsx(bd.ItemSlot,{scope:n,id:h,focusable:i,active:a,children:$.jsx(Vt.span,{tabIndex:m?0:-1,"data-orientation":d.orientation,...u,ref:t,onMouseDown:ze(e.onMouseDown,w=>{i?d.onItemFocus(h):w.preventDefault()}),onFocus:ze(e.onFocus,()=>d.onItemFocus(h)),onKeyDown:ze(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const C=lB(w,d.orientation,d.dir);if(C!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let E=p().filter(M=>M.focusable).map(M=>M.ref.current);if(C==="last")E.reverse();else if(C==="prev"||C==="next"){C==="prev"&&E.reverse();const M=E.indexOf(w.currentTarget);E=d.loop?cB(E,M+1):E.slice(M+1)}setTimeout(()=>Gx(E))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:y!=null}):l})})});kx.displayName=zx;var sB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function oB(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function lB(e,t,n){const i=oB(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return sB[i]}function Gx(e,t=!1){const n=document.activeElement;for(const i of e)if(i===n||(i.focus({preventScroll:t}),document.activeElement!==n))return}function cB(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var uB=Px,fB=kx;function hB(e){const t=dB(e),n=z.forwardRef((i,a)=>{const{children:o,...l}=i,u=z.Children.toArray(o),f=u.find(gB);if(f){const h=f.props.children,d=u.map(m=>m===f?z.Children.count(h)>1?z.Children.only(null):z.isValidElement(h)?h.props.children:null:m);return $.jsx(t,{...l,ref:a,children:z.isValidElement(h)?z.cloneElement(h,void 0,d):null})}return $.jsx(t,{...l,ref:a,children:o})});return n.displayName=`${e}.Slot`,n}function dB(e){const t=z.forwardRef((n,i)=>{const{children:a,...o}=n;if(z.isValidElement(a)){const l=AB(a),u=pB(o,a.props);return a.type!==z.Fragment&&(u.ref=i?Ir(i,l):l),z.cloneElement(a,u)}return z.Children.count(a)>1?z.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var mB=Symbol("radix.slottable");function gB(e){return z.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===mB}function pB(e,t){const n={...t};for(const i in t){const a=e[i],o=t[i];/^on[A-Z]/.test(i)?a&&o?n[i]=(...u)=>{const f=o(...u);return a(...u),f}:a&&(n[i]=a):i==="style"?n[i]={...a,...o}:i==="className"&&(n[i]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function AB(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var vB=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ca=new WeakMap,Wl=new WeakMap,Zl={},Qh=0,Yx=function(e){return e&&(e.host||Yx(e.parentNode))},xB=function(e,t){return t.map(function(n){if(e.contains(n))return n;var i=Yx(n);return i&&e.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},yB=function(e,t,n,i){var a=xB(t,Array.isArray(e)?e:[e]);Zl[n]||(Zl[n]=new WeakMap);var o=Zl[n],l=[],u=new Set,f=new Set(a),h=function(m){!m||u.has(m)||(u.add(m),h(m.parentNode))};a.forEach(h);var d=function(m){!m||f.has(m)||Array.prototype.forEach.call(m.children,function(p){if(u.has(p))d(p);else try{var A=p.getAttribute(i),v=A!==null&&A!=="false",y=(Ca.get(p)||0)+1,w=(o.get(p)||0)+1;Ca.set(p,y),o.set(p,w),l.push(p),y===1&&v&&Wl.set(p,!0),w===1&&p.setAttribute(n,"true"),v||p.setAttribute(i,"true")}catch(C){console.error("aria-hidden: cannot operate on ",p,C)}})};return d(t),u.clear(),Qh++,function(){l.forEach(function(m){var p=Ca.get(m)-1,A=o.get(m)-1;Ca.set(m,p),o.set(m,A),p||(Wl.has(m)||m.removeAttribute(i),Wl.delete(m)),A||m.removeAttribute(n)}),Qh--,Qh||(Ca=new WeakMap,Ca=new WeakMap,Wl=new WeakMap,Zl={})}},wB=function(e,t,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),a=vB(e);return a?(i.push.apply(i,Array.from(a.querySelectorAll("[aria-live], script"))),yB(i,a,n,"aria-hidden")):function(){return null}},Gn=function(){return Gn=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Gn.apply(this,arguments)};function Hx(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n}function bB(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,o;i<a;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}var pc="right-scroll-bar-position",Ac="width-before-scroll-bar",CB="with-scroll-bars-hidden",SB="--removed-body-scroll-bar-size";function Wh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function MB(e,t){var n=z.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(i){var a=n.value;a!==i&&(n.value=i,n.callback(i,a))}}}})[0];return n.callback=t,n.facade}var EB=typeof window<"u"?z.useLayoutEffect:z.useEffect,hA=new WeakMap;function DB(e,t){var n=MB(null,function(i){return e.forEach(function(a){return Wh(a,i)})});return EB(function(){var i=hA.get(n);if(i){var a=new Set(i),o=new Set(e),l=n.current;a.forEach(function(u){o.has(u)||Wh(u,null)}),o.forEach(function(u){a.has(u)||Wh(u,l)})}hA.set(n,e)},[e]),n}function TB(e){return e}function RB(e,t){t===void 0&&(t=TB);var n=[],i=!1,a={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var l=t(o,i);return n.push(l),function(){n=n.filter(function(u){return u!==l})}},assignSyncMedium:function(o){for(i=!0;n.length;){var l=n;n=[],l.forEach(o)}n={push:function(u){return o(u)},filter:function(){return n}}},assignMedium:function(o){i=!0;var l=[];if(n.length){var u=n;n=[],u.forEach(o),l=n}var f=function(){var d=l;l=[],d.forEach(o)},h=function(){return Promise.resolve().then(f)};h(),n={push:function(d){l.push(d),h()},filter:function(d){return l=l.filter(d),n}}}};return a}function FB(e){e===void 0&&(e={});var t=RB(null);return t.options=Gn({async:!0,ssr:!1},e),t}var Xx=function(e){var t=e.sideCar,n=Hx(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return z.createElement(i,Gn({},n))};Xx.isSideCarExport=!0;function BB(e,t){return e.useMedium(t),Xx}var jx=FB(),Zh=function(){},jc=z.forwardRef(function(e,t){var n=z.useRef(null),i=z.useState({onScrollCapture:Zh,onWheelCapture:Zh,onTouchMoveCapture:Zh}),a=i[0],o=i[1],l=e.forwardProps,u=e.children,f=e.className,h=e.removeScrollBar,d=e.enabled,m=e.shards,p=e.sideCar,A=e.noRelative,v=e.noIsolation,y=e.inert,w=e.allowPinchZoom,C=e.as,S=C===void 0?"div":C,E=e.gapMode,M=Hx(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=p,D=DB([n,t]),T=Gn(Gn({},M),a);return z.createElement(z.Fragment,null,d&&z.createElement(R,{sideCar:jx,removeScrollBar:h,shards:m,noRelative:A,noIsolation:v,inert:y,setCallbacks:o,allowPinchZoom:!!w,lockRef:n,gapMode:E}),l?z.cloneElement(z.Children.only(u),Gn(Gn({},T),{ref:D})):z.createElement(S,Gn({},T,{className:f,ref:D}),u))});jc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};jc.classNames={fullWidth:Ac,zeroRight:pc};var UB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function NB(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=UB();return t&&e.setAttribute("nonce",t),e}function IB(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function VB(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var OB=function(){var e=0,t=null;return{add:function(n){e==0&&(t=NB())&&(IB(t,n),VB(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},LB=function(){var e=OB();return function(t,n){z.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},qx=function(){var e=LB(),t=function(n){var i=n.styles,a=n.dynamic;return e(i,a),null};return t},PB={left:0,top:0,right:0,gap:0},Jh=function(e){return parseInt(e||"",10)||0},zB=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Jh(n),Jh(i),Jh(a)]},kB=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return PB;var t=zB(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},GB=qx(),Ia="data-scroll-locked",YB=function(e,t,n,i){var a=e.left,o=e.top,l=e.right,u=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(CB,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(u,"px ").concat(i,`;
  }
  body[`).concat(Ia,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(pc,` {
    right: `).concat(u,"px ").concat(i,`;
  }
  
  .`).concat(Ac,` {
    margin-right: `).concat(u,"px ").concat(i,`;
  }
  
  .`).concat(pc," .").concat(pc,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Ac," .").concat(Ac,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Ia,`] {
    `).concat(SB,": ").concat(u,`px;
  }
`)},dA=function(){var e=parseInt(document.body.getAttribute(Ia)||"0",10);return isFinite(e)?e:0},HB=function(){z.useEffect(function(){return document.body.setAttribute(Ia,(dA()+1).toString()),function(){var e=dA()-1;e<=0?document.body.removeAttribute(Ia):document.body.setAttribute(Ia,e.toString())}},[])},XB=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,a=i===void 0?"margin":i;HB();var o=z.useMemo(function(){return kB(a)},[a]);return z.createElement(GB,{styles:YB(o,!t,a,n?"":"!important")})},Cd=!1;if(typeof window<"u")try{var Jl=Object.defineProperty({},"passive",{get:function(){return Cd=!0,!0}});window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{Cd=!1}var Sa=Cd?{passive:!1}:!1,jB=function(e){return e.tagName==="TEXTAREA"},_x=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!jB(e)&&n[t]==="visible")},qB=function(e){return _x(e,"overflowY")},_B=function(e){return _x(e,"overflowX")},mA=function(e,t){var n=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var a=Kx(e,i);if(a){var o=Qx(e,i),l=o[1],u=o[2];if(l>u)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},KB=function(e){var t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;return[t,n,i]},QB=function(e){var t=e.scrollLeft,n=e.scrollWidth,i=e.clientWidth;return[t,n,i]},Kx=function(e,t){return e==="v"?qB(t):_B(t)},Qx=function(e,t){return e==="v"?KB(t):QB(t)},WB=function(e,t){return e==="h"&&t==="rtl"?-1:1},ZB=function(e,t,n,i,a){var o=WB(e,window.getComputedStyle(t).direction),l=o*i,u=n.target,f=t.contains(u),h=!1,d=l>0,m=0,p=0;do{if(!u)break;var A=Qx(e,u),v=A[0],y=A[1],w=A[2],C=y-w-o*v;(v||C)&&Kx(e,u)&&(m+=C,p+=v);var S=u.parentNode;u=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!f&&u!==document.body||f&&(t.contains(u)||t===u));return(d&&Math.abs(m)<1||!d&&Math.abs(p)<1)&&(h=!0),h},$l=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},gA=function(e){return[e.deltaX,e.deltaY]},pA=function(e){return e&&"current"in e?e.current:e},JB=function(e,t){return e[0]===t[0]&&e[1]===t[1]},$B=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},eU=0,Ma=[];function tU(e){var t=z.useRef([]),n=z.useRef([0,0]),i=z.useRef(),a=z.useState(eU++)[0],o=z.useState(qx)[0],l=z.useRef(e);z.useEffect(function(){l.current=e},[e]),z.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var y=bB([e.lockRef.current],(e.shards||[]).map(pA),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var u=z.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!l.current.allowPinchZoom;var C=$l(y),S=n.current,E="deltaX"in y?y.deltaX:S[0]-C[0],M="deltaY"in y?y.deltaY:S[1]-C[1],R,D=y.target,T=Math.abs(E)>Math.abs(M)?"h":"v";if("touches"in y&&T==="h"&&D.type==="range")return!1;var F=window.getSelection(),U=F&&F.anchorNode,I=U?U===D||U.contains(D):!1;if(I)return!1;var V=mA(T,D);if(!V)return!0;if(V?R=T:(R=T==="v"?"h":"v",V=mA(T,D)),!V)return!1;if(!i.current&&"changedTouches"in y&&(E||M)&&(i.current=R),!R)return!0;var N=i.current||R;return ZB(N,w,y,N==="h"?E:M)},[]),f=z.useCallback(function(y){var w=y;if(!(!Ma.length||Ma[Ma.length-1]!==o)){var C="deltaY"in w?gA(w):$l(w),S=t.current.filter(function(R){return R.name===w.type&&(R.target===w.target||w.target===R.shadowParent)&&JB(R.delta,C)})[0];if(S&&S.should){w.cancelable&&w.preventDefault();return}if(!S){var E=(l.current.shards||[]).map(pA).filter(Boolean).filter(function(R){return R.contains(w.target)}),M=E.length>0?u(w,E[0]):!l.current.noIsolation;M&&w.cancelable&&w.preventDefault()}}},[]),h=z.useCallback(function(y,w,C,S){var E={name:y,delta:w,target:C,should:S,shadowParent:nU(C)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(M){return M!==E})},1)},[]),d=z.useCallback(function(y){n.current=$l(y),i.current=void 0},[]),m=z.useCallback(function(y){h(y.type,gA(y),y.target,u(y,e.lockRef.current))},[]),p=z.useCallback(function(y){h(y.type,$l(y),y.target,u(y,e.lockRef.current))},[]);z.useEffect(function(){return Ma.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",f,Sa),document.addEventListener("touchmove",f,Sa),document.addEventListener("touchstart",d,Sa),function(){Ma=Ma.filter(function(y){return y!==o}),document.removeEventListener("wheel",f,Sa),document.removeEventListener("touchmove",f,Sa),document.removeEventListener("touchstart",d,Sa)}},[]);var A=e.removeScrollBar,v=e.inert;return z.createElement(z.Fragment,null,v?z.createElement(o,{styles:$B(a)}):null,A?z.createElement(XB,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function nU(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const iU=BB(jx,tU);var Wx=z.forwardRef(function(e,t){return z.createElement(jc,Gn({},e,{ref:t,sideCar:iU}))});Wx.classNames=jc.classNames;var Sd=["Enter"," "],rU=["ArrowDown","PageUp","Home"],Zx=["ArrowUp","PageDown","End"],aU=[...rU,...Zx],sU={ltr:[...Sd,"ArrowRight"],rtl:[...Sd,"ArrowLeft"]},oU={ltr:["ArrowLeft"],rtl:["ArrowRight"]},xo="Menu",[ao,lU,cU]=sx(xo),[Vr,Jx]=go(xo,[cU,Ex,Lx]),qc=Ex(),$x=Lx(),[uU,Or]=Vr(xo),[fU,yo]=Vr(xo),e5=e=>{const{__scopeMenu:t,open:n=!1,children:i,dir:a,onOpenChange:o,modal:l=!0}=e,u=qc(t),[f,h]=z.useState(null),d=z.useRef(!1),m=gi(o),p=ox(a);return z.useEffect(()=>{const A=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",A,{capture:!0}),()=>{document.removeEventListener("keydown",A,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),$.jsx(qF,{...u,children:$.jsx(uU,{scope:t,open:n,onOpenChange:m,content:f,onContentChange:h,children:$.jsx(fU,{scope:t,onClose:z.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:d,dir:p,modal:l,children:i})})})};e5.displayName=xo;var hU="MenuAnchor",w0=z.forwardRef((e,t)=>{const{__scopeMenu:n,...i}=e,a=qc(n);return $.jsx(_F,{...a,...i,ref:t})});w0.displayName=hU;var b0="MenuPortal",[dU,t5]=Vr(b0,{forceMount:void 0}),n5=e=>{const{__scopeMenu:t,forceMount:n,children:i,container:a}=e,o=Or(b0,t);return $.jsx(dU,{scope:t,forceMount:n,children:$.jsx(Ao,{present:n||o.open,children:$.jsx(Vx,{asChild:!0,container:a,children:i})})})};n5.displayName=b0;var Sn="MenuContent",[mU,C0]=Vr(Sn),i5=z.forwardRef((e,t)=>{const n=t5(Sn,e.__scopeMenu),{forceMount:i=n.forceMount,...a}=e,o=Or(Sn,e.__scopeMenu),l=yo(Sn,e.__scopeMenu);return $.jsx(ao.Provider,{scope:e.__scopeMenu,children:$.jsx(Ao,{present:i||o.open,children:$.jsx(ao.Slot,{scope:e.__scopeMenu,children:l.modal?$.jsx(gU,{...a,ref:t}):$.jsx(pU,{...a,ref:t})})})})}),gU=z.forwardRef((e,t)=>{const n=Or(Sn,e.__scopeMenu),i=z.useRef(null),a=Qt(t,i);return z.useEffect(()=>{const o=i.current;if(o)return wB(o)},[]),$.jsx(S0,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ze(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),pU=z.forwardRef((e,t)=>{const n=Or(Sn,e.__scopeMenu);return $.jsx(S0,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),AU=hB("MenuContent.ScrollLock"),S0=z.forwardRef((e,t)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:u,onEntryFocus:f,onEscapeKeyDown:h,onPointerDownOutside:d,onFocusOutside:m,onInteractOutside:p,onDismiss:A,disableOutsideScroll:v,...y}=e,w=Or(Sn,n),C=yo(Sn,n),S=qc(n),E=$x(n),M=lU(n),[R,D]=z.useState(null),T=z.useRef(null),F=Qt(t,T,w.onContentChange),U=z.useRef(0),I=z.useRef(""),V=z.useRef(0),N=z.useRef(null),Y=z.useRef("right"),P=z.useRef(0),Q=v?Wx:z.Fragment,k=v?{as:AU,allowPinchZoom:!0}:void 0,j=Z=>{const J=I.current+Z,X=M().filter(he=>!he.disabled),K=document.activeElement,te=X.find(he=>he.ref.current===K)?.textValue,ae=X.map(he=>he.textValue),fe=RU(ae,J,te),de=X.find(he=>he.textValue===fe)?.ref.current;(function he(Pe){I.current=Pe,window.clearTimeout(U.current),Pe!==""&&(U.current=window.setTimeout(()=>he(""),1e3))})(J),de&&setTimeout(()=>de.focus())};z.useEffect(()=>()=>window.clearTimeout(U.current),[]),A7();const H=z.useCallback(Z=>Y.current===N.current?.side&&BU(Z,N.current?.area),[]);return $.jsx(mU,{scope:n,searchRef:I,onItemEnter:z.useCallback(Z=>{H(Z)&&Z.preventDefault()},[H]),onItemLeave:z.useCallback(Z=>{H(Z)||(T.current?.focus(),D(null))},[H]),onTriggerLeave:z.useCallback(Z=>{H(Z)&&Z.preventDefault()},[H]),pointerGraceTimerRef:V,onPointerGraceIntentChange:z.useCallback(Z=>{N.current=Z},[]),children:$.jsx(Q,{...k,children:$.jsx(fx,{asChild:!0,trapped:a,onMountAutoFocus:ze(o,Z=>{Z.preventDefault(),T.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:$.jsx(cx,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:h,onPointerDownOutside:d,onFocusOutside:m,onInteractOutside:p,onDismiss:A,children:$.jsx(uB,{asChild:!0,...E,dir:C.dir,orientation:"vertical",loop:i,currentTabStopId:R,onCurrentTabStopIdChange:D,onEntryFocus:ze(f,Z=>{C.isUsingKeyboardRef.current||Z.preventDefault()}),preventScrollOnEntryFocus:!0,children:$.jsx(KF,{role:"menu","aria-orientation":"vertical","data-state":x5(w.open),"data-radix-menu-content":"",dir:C.dir,...S,...y,ref:F,style:{outline:"none",...y.style},onKeyDown:ze(y.onKeyDown,Z=>{const X=Z.target.closest("[data-radix-menu-content]")===Z.currentTarget,K=Z.ctrlKey||Z.altKey||Z.metaKey,te=Z.key.length===1;X&&(Z.key==="Tab"&&Z.preventDefault(),!K&&te&&j(Z.key));const ae=T.current;if(Z.target!==ae||!aU.includes(Z.key))return;Z.preventDefault();const de=M().filter(he=>!he.disabled).map(he=>he.ref.current);Zx.includes(Z.key)&&de.reverse(),DU(de)}),onBlur:ze(e.onBlur,Z=>{Z.currentTarget.contains(Z.target)||(window.clearTimeout(U.current),I.current="")}),onPointerMove:ze(e.onPointerMove,so(Z=>{const J=Z.target,X=P.current!==Z.clientX;if(Z.currentTarget.contains(J)&&X){const K=Z.clientX>P.current?"right":"left";Y.current=K,P.current=Z.clientX}}))})})})})})})});i5.displayName=Sn;var vU="MenuGroup",M0=z.forwardRef((e,t)=>{const{__scopeMenu:n,...i}=e;return $.jsx(Vt.div,{role:"group",...i,ref:t})});M0.displayName=vU;var xU="MenuLabel",r5=z.forwardRef((e,t)=>{const{__scopeMenu:n,...i}=e;return $.jsx(Vt.div,{...i,ref:t})});r5.displayName=xU;var Uc="MenuItem",AA="menu.itemSelect",_c=z.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:i,...a}=e,o=z.useRef(null),l=yo(Uc,e.__scopeMenu),u=C0(Uc,e.__scopeMenu),f=Qt(t,o),h=z.useRef(!1),d=()=>{const m=o.current;if(!n&&m){const p=new CustomEvent(AA,{bubbles:!0,cancelable:!0});m.addEventListener(AA,A=>i?.(A),{once:!0}),ax(m,p),p.defaultPrevented?h.current=!1:l.onClose()}};return $.jsx(a5,{...a,ref:f,disabled:n,onClick:ze(e.onClick,d),onPointerDown:m=>{e.onPointerDown?.(m),h.current=!0},onPointerUp:ze(e.onPointerUp,m=>{h.current||m.currentTarget?.click()}),onKeyDown:ze(e.onKeyDown,m=>{const p=u.searchRef.current!=="";n||p&&m.key===" "||Sd.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});_c.displayName=Uc;var a5=z.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:i=!1,textValue:a,...o}=e,l=C0(Uc,n),u=$x(n),f=z.useRef(null),h=Qt(t,f),[d,m]=z.useState(!1),[p,A]=z.useState("");return z.useEffect(()=>{const v=f.current;v&&A((v.textContent??"").trim())},[o.children]),$.jsx(ao.ItemSlot,{scope:n,disabled:i,textValue:a??p,children:$.jsx(fB,{asChild:!0,...u,focusable:!i,children:$.jsx(Vt.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...o,ref:h,onPointerMove:ze(e.onPointerMove,so(v=>{i?l.onItemLeave(v):(l.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ze(e.onPointerLeave,so(v=>l.onItemLeave(v))),onFocus:ze(e.onFocus,()=>m(!0)),onBlur:ze(e.onBlur,()=>m(!1))})})})}),yU="MenuCheckboxItem",s5=z.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:i,...a}=e;return $.jsx(f5,{scope:e.__scopeMenu,checked:n,children:$.jsx(_c,{role:"menuitemcheckbox","aria-checked":Nc(n)?"mixed":n,...a,ref:t,"data-state":D0(n),onSelect:ze(a.onSelect,()=>i?.(Nc(n)?!0:!n),{checkForDefaultPrevented:!1})})})});s5.displayName=yU;var o5="MenuRadioGroup",[wU,bU]=Vr(o5,{value:void 0,onValueChange:()=>{}}),l5=z.forwardRef((e,t)=>{const{value:n,onValueChange:i,...a}=e,o=gi(i);return $.jsx(wU,{scope:e.__scopeMenu,value:n,onValueChange:o,children:$.jsx(M0,{...a,ref:t})})});l5.displayName=o5;var c5="MenuRadioItem",u5=z.forwardRef((e,t)=>{const{value:n,...i}=e,a=bU(c5,e.__scopeMenu),o=n===a.value;return $.jsx(f5,{scope:e.__scopeMenu,checked:o,children:$.jsx(_c,{role:"menuitemradio","aria-checked":o,...i,ref:t,"data-state":D0(o),onSelect:ze(i.onSelect,()=>a.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});u5.displayName=c5;var E0="MenuItemIndicator",[f5,CU]=Vr(E0,{checked:!1}),h5=z.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:i,...a}=e,o=CU(E0,n);return $.jsx(Ao,{present:i||Nc(o.checked)||o.checked===!0,children:$.jsx(Vt.span,{...a,ref:t,"data-state":D0(o.checked)})})});h5.displayName=E0;var SU="MenuSeparator",d5=z.forwardRef((e,t)=>{const{__scopeMenu:n,...i}=e;return $.jsx(Vt.div,{role:"separator","aria-orientation":"horizontal",...i,ref:t})});d5.displayName=SU;var MU="MenuArrow",m5=z.forwardRef((e,t)=>{const{__scopeMenu:n,...i}=e,a=qc(n);return $.jsx(QF,{...a,...i,ref:t})});m5.displayName=MU;var EU="MenuSub",[LN,g5]=Vr(EU),Zs="MenuSubTrigger",p5=z.forwardRef((e,t)=>{const n=Or(Zs,e.__scopeMenu),i=yo(Zs,e.__scopeMenu),a=g5(Zs,e.__scopeMenu),o=C0(Zs,e.__scopeMenu),l=z.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:f}=o,h={__scopeMenu:e.__scopeMenu},d=z.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return z.useEffect(()=>d,[d]),z.useEffect(()=>{const m=u.current;return()=>{window.clearTimeout(m),f(null)}},[u,f]),$.jsx(w0,{asChild:!0,...h,children:$.jsx(a5,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":x5(n.open),...e,ref:Ir(t,a.onTriggerChange),onClick:m=>{e.onClick?.(m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ze(e.onPointerMove,so(m=>{o.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!n.open&&!l.current&&(o.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:ze(e.onPointerLeave,so(m=>{d();const p=n.content?.getBoundingClientRect();if(p){const A=n.content?.dataset.side,v=A==="right",y=v?-5:5,w=p[v?"left":"right"],C=p[v?"right":"left"];o.onPointerGraceIntentChange({area:[{x:m.clientX+y,y:m.clientY},{x:w,y:p.top},{x:C,y:p.top},{x:C,y:p.bottom},{x:w,y:p.bottom}],side:A}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(m),m.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:ze(e.onKeyDown,m=>{const p=o.searchRef.current!=="";e.disabled||p&&m.key===" "||sU[i.dir].includes(m.key)&&(n.onOpenChange(!0),n.content?.focus(),m.preventDefault())})})})});p5.displayName=Zs;var A5="MenuSubContent",v5=z.forwardRef((e,t)=>{const n=t5(Sn,e.__scopeMenu),{forceMount:i=n.forceMount,...a}=e,o=Or(Sn,e.__scopeMenu),l=yo(Sn,e.__scopeMenu),u=g5(A5,e.__scopeMenu),f=z.useRef(null),h=Qt(t,f);return $.jsx(ao.Provider,{scope:e.__scopeMenu,children:$.jsx(Ao,{present:i||o.open,children:$.jsx(ao.Slot,{scope:e.__scopeMenu,children:$.jsx(S0,{id:u.contentId,"aria-labelledby":u.triggerId,...a,ref:h,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{l.isUsingKeyboardRef.current&&f.current?.focus(),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ze(e.onFocusOutside,d=>{d.target!==u.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:ze(e.onEscapeKeyDown,d=>{l.onClose(),d.preventDefault()}),onKeyDown:ze(e.onKeyDown,d=>{const m=d.currentTarget.contains(d.target),p=oU[l.dir].includes(d.key);m&&p&&(o.onOpenChange(!1),u.trigger?.focus(),d.preventDefault())})})})})})});v5.displayName=A5;function x5(e){return e?"open":"closed"}function Nc(e){return e==="indeterminate"}function D0(e){return Nc(e)?"indeterminate":e?"checked":"unchecked"}function DU(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function TU(e,t){return e.map((n,i)=>e[(t+i)%e.length])}function RU(e,t,n){const a=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let l=TU(e,Math.max(o,0));a.length===1&&(l=l.filter(h=>h!==n));const f=l.find(h=>h.toLowerCase().startsWith(a.toLowerCase()));return f!==n?f:void 0}function FU(e,t){const{x:n,y:i}=e;let a=!1;for(let o=0,l=t.length-1;o<t.length;l=o++){const u=t[o],f=t[l],h=u.x,d=u.y,m=f.x,p=f.y;d>i!=p>i&&n<(m-h)*(i-d)/(p-d)+h&&(a=!a)}return a}function BU(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return FU(n,t)}function so(e){return t=>t.pointerType==="mouse"?e(t):void 0}var UU=e5,NU=w0,IU=n5,VU=i5,OU=M0,LU=r5,PU=_c,zU=s5,kU=l5,GU=u5,YU=h5,HU=d5,XU=m5,jU=p5,qU=v5,Kc="DropdownMenu",[_U]=go(Kc,[Jx]),Ot=Jx(),[KU,y5]=_U(Kc),w5=e=>{const{__scopeDropdownMenu:t,children:n,dir:i,open:a,defaultOpen:o,onOpenChange:l,modal:u=!0}=e,f=Ot(t),h=z.useRef(null),[d,m]=rx({prop:a,defaultProp:o??!1,onChange:l,caller:Kc});return $.jsx(KU,{scope:t,triggerId:vd(),triggerRef:h,contentId:vd(),open:d,onOpenChange:m,onOpenToggle:z.useCallback(()=>m(p=>!p),[m]),modal:u,children:$.jsx(UU,{...f,open:d,onOpenChange:m,dir:i,modal:u,children:n})})};w5.displayName=Kc;var b5="DropdownMenuTrigger",C5=z.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...a}=e,o=y5(b5,n),l=Ot(n);return $.jsx(NU,{asChild:!0,...l,children:$.jsx(Vt.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...a,ref:Ir(t,o.triggerRef),onPointerDown:ze(e.onPointerDown,u=>{!i&&u.button===0&&u.ctrlKey===!1&&(o.onOpenToggle(),o.open||u.preventDefault())}),onKeyDown:ze(e.onKeyDown,u=>{i||(["Enter"," "].includes(u.key)&&o.onOpenToggle(),u.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});C5.displayName=b5;var QU="DropdownMenuPortal",S5=e=>{const{__scopeDropdownMenu:t,...n}=e,i=Ot(t);return $.jsx(IU,{...i,...n})};S5.displayName=QU;var M5="DropdownMenuContent",E5=z.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,a=y5(M5,n),o=Ot(n),l=z.useRef(!1);return $.jsx(VU,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...i,ref:t,onCloseAutoFocus:ze(e.onCloseAutoFocus,u=>{l.current||a.triggerRef.current?.focus(),l.current=!1,u.preventDefault()}),onInteractOutside:ze(e.onInteractOutside,u=>{const f=u.detail.originalEvent,h=f.button===0&&f.ctrlKey===!0,d=f.button===2||h;(!a.modal||d)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});E5.displayName=M5;var WU="DropdownMenuGroup",ZU=z.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,a=Ot(n);return $.jsx(OU,{...a,...i,ref:t})});ZU.displayName=WU;var JU="DropdownMenuLabel",$U=z.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,a=Ot(n);return $.jsx(LU,{...a,...i,ref:t})});$U.displayName=JU;var eN="DropdownMenuItem",D5=z.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,a=Ot(n);return $.jsx(PU,{...a,...i,ref:t})});D5.displayName=eN;var tN="DropdownMenuCheckboxItem",nN=z.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,a=Ot(n);return $.jsx(zU,{...a,...i,ref:t})});nN.displayName=tN;var iN="DropdownMenuRadioGroup",rN=z.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,a=Ot(n);return $.jsx(kU,{...a,...i,ref:t})});rN.displayName=iN;var aN="DropdownMenuRadioItem",sN=z.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,a=Ot(n);return $.jsx(GU,{...a,...i,ref:t})});sN.displayName=aN;var oN="DropdownMenuItemIndicator",lN=z.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,a=Ot(n);return $.jsx(YU,{...a,...i,ref:t})});lN.displayName=oN;var cN="DropdownMenuSeparator",T5=z.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,a=Ot(n);return $.jsx(HU,{...a,...i,ref:t})});T5.displayName=cN;var uN="DropdownMenuArrow",fN=z.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,a=Ot(n);return $.jsx(XU,{...a,...i,ref:t})});fN.displayName=uN;var hN="DropdownMenuSubTrigger",dN=z.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,a=Ot(n);return $.jsx(jU,{...a,...i,ref:t})});dN.displayName=hN;var mN="DropdownMenuSubContent",gN=z.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...i}=e,a=Ot(n);return $.jsx(qU,{...a,...i,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gN.displayName=mN;var pN=w5,AN=C5,vN=S5,xN=E5,yN=D5,wN=T5;const bN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CN=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),vA=e=>{const t=CN(e);return t.charAt(0).toUpperCase()+t.slice(1)},R5=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),SN=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var MN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const EN=z.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:o,iconNode:l,...u},f)=>z.createElement("svg",{ref:f,...MN,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:R5("lucide",a),...!o&&!SN(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,d])=>z.createElement(h,d)),...Array.isArray(o)?o:[o]]));const DN=(e,t)=>{const n=z.forwardRef(({className:i,...a},o)=>z.createElement(EN,{ref:o,iconNode:t,className:R5(`lucide-${bN(vA(e))}`,`lucide-${e}`,i),...a}));return n.displayName=vA(e),n};const TN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ji=DN("check",TN);function ec({...e}){return $.jsx(pN,{"data-slot":"dropdown-menu",...e})}function tc({...e}){return $.jsx(AN,{"data-slot":"dropdown-menu-trigger",...e})}function nc({className:e,sideOffset:t=4,...n}){return $.jsx(vN,{children:$.jsx(xN,{"data-slot":"dropdown-menu-content",sideOffset:t,className:mo("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function Rn({className:e,inset:t,variant:n="default",...i}){return $.jsx(yN,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:mo("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...i})}function $h({className:e,...t}){return $.jsx(wN,{"data-slot":"dropdown-menu-separator",className:mo("bg-border -mx-1 my-1 h-px",e),...t})}const RN=[{label:"Axial",value:kn.AXIAL},{label:"Coronal",value:kn.CORONAL},{label:"Sagittal",value:kn.SAGITTAL},{label:"Render",value:kn.RENDER},{label:"Multiplanar (A+C+S)",value:kn.MULTIPLANAR}],FN=["gray","plasma","viridis","inferno"],BN=[{label:"Contrast",value:Dr.contrast},{label:"Measurement",value:Dr.measurement},{label:"Pan",value:Dr.pan},{label:"None",value:Dr.none}],UN=()=>{const[e,t]=z.useState("https://s3.amazonaws.com/openneuro.org/ds007122/sub-01/ses-01/anat/sub-01_ses-01_T1w.nii.gz?versionId=pw4fvQg5wq.9H4uWaoVAzRVBjznhIbXK&AWSAccessKeyId=AKIARTA7OOV5WQ3DGSOB&Signature=7fsZV4YFGC60PxSh4YDrTVyTUjI%3D&Expires=1768221668"),[n,i]=z.useState(""),[a,o]=z.useState(kn.MULTIPLANAR),[l,u]=z.useState(!0),[f,h]=z.useState(!1),[d,m]=z.useState(!0),[p,A]=z.useState(!1),[v,y]=z.useState("gray"),[w,C]=z.useState(!0),[S,E]=z.useState(Dr.contrast),[M,R]=z.useState(!0),D=z.useRef(null),T=z.useRef(null),F=z.useCallback(J=>{i(J.string)},[]),U=z.useCallback(async()=>{T.current&&T.current.cleanup();const J=new XT({dragAndDropEnabled:!0,show3Dcrosshair:d,onLocationChange:F});if(J.opts.isColorbar=l,J.setRadiologicalConvention(f),J.setRenderAzimuthElevation(120,10),J.setSliceMM(!0),J.opts.multiplanarShowRender=M?_s.ALWAYS:_s.NEVER,J.graph.autoSizeMultiplanar=!1,J.graph.opacity=1,J.opts.dragMode=S,w?J.opts.backColor=[0,0,0,1]:J.opts.backColor=[1,1,1,1],T.current=J,!D.current)throw new Error("Canvas not found");await J.attachToCanvas(D.current),p?J.setClipPlane([.3,270,0]):J.setClipPlane([2,270,0]);const X=[{url:e}];await J.loadVolumes(X),J.setSliceType(a)},[e,l,f,d,p,w,S,a,M,F]),I=z.useCallback(()=>{T.current&&T.current.saveScene("ScreenShot.png")},[]),V=z.useCallback(()=>{T.current&&T.current.volumes.length>0&&alert(T.current.volumes[0].hdr?.toFormattedString())},[]),N=z.useCallback((J,X)=>{o(J),J===kn.MULTIPLANAR&&R(X??!0),T.current&&(J===kn.MULTIPLANAR&&(T.current.opts.multiplanarShowRender=X?_s.ALWAYS:_s.NEVER),T.current.setSliceType(J))},[]),Y=z.useCallback(J=>{y(J),T.current&&T.current.volumes.length>0&&(T.current.volumes[0].colormap=J,T.current.updateGLVolume())},[]),P=z.useCallback(()=>{const J=!l;u(J),T.current&&(T.current.opts.isColorbar=J,T.current.drawScene())},[l]),Q=z.useCallback(()=>{const J=!f;h(J),T.current&&(T.current.opts.isRadiologicalConvention=J,T.current.drawScene())},[f]),k=z.useCallback(()=>{const J=!d;m(J),T.current&&(T.current.opts.show3Dcrosshair=J,T.current.drawScene())},[d]),j=z.useCallback(()=>{const J=!p;A(J),T.current&&(J?T.current.setClipPlane([.3,270,0]):T.current.setClipPlane([2,270,0]),T.current.drawScene())},[p]),H=z.useCallback(()=>{const J=!w;C(J),T.current&&(J?T.current.opts.backColor=[0,0,0,1]:T.current.opts.backColor=[1,1,1,1],T.current.drawScene())},[w]),Z=z.useCallback(J=>{E(J),T.current&&(T.current.opts.dragMode=J)},[]);return $.jsxs("div",{className:"flex flex-col h-screen]",children:[$.jsxs("div",{className:"flex gap-2 p-2 bg-background",children:[$.jsxs(ec,{children:[$.jsx(tc,{asChild:!0,children:$.jsx(ks,{variant:"ghost",size:"sm",children:"File"})}),$.jsxs(nc,{children:[$.jsx(Rn,{onClick:I,children:"Screen Shot"}),$.jsx(Rn,{onClick:V,children:"Show Header"}),$.jsx($h,{}),$.jsx(Rn,{asChild:!0,children:$.jsx("a",{href:"https://github.com/niivue/niivue",target:"_blank",rel:"noopener noreferrer",children:"About"})})]})]}),$.jsxs(ec,{children:[$.jsx(tc,{asChild:!0,children:$.jsx(ks,{variant:"ghost",size:"sm",children:"View"})}),$.jsxs(nc,{children:[RN.map(J=>$.jsx(Rn,{onClick:()=>N(J.value,J.value===kn.MULTIPLANAR),children:$.jsxs("span",{className:"flex items-center gap-2",children:[a===J.value&&$.jsx(ji,{className:"h-4 w-4"}),J.label]})},J.value)),$.jsx($h,{}),$.jsx(Rn,{onClick:P,children:$.jsxs("span",{className:"flex items-center gap-2",children:[l&&$.jsx(ji,{className:"h-4 w-4"}),"Colorbar"]})}),$.jsx(Rn,{onClick:Q,children:$.jsxs("span",{className:"flex items-center gap-2",children:[f&&$.jsx(ji,{className:"h-4 w-4"}),"Radiological"]})}),$.jsx(Rn,{onClick:k,children:$.jsxs("span",{className:"flex items-center gap-2",children:[d&&$.jsx(ji,{className:"h-4 w-4"}),"Render Crosshair"]})}),$.jsx(Rn,{onClick:j,children:$.jsxs("span",{className:"flex items-center gap-2",children:[p&&$.jsx(ji,{className:"h-4 w-4"}),"Render Clip Plane"]})})]})]}),$.jsxs(ec,{children:[$.jsx(tc,{asChild:!0,children:$.jsx(ks,{variant:"ghost",size:"sm",children:"Color"})}),$.jsxs(nc,{children:[FN.map(J=>$.jsx(Rn,{onClick:()=>Y(J),children:$.jsxs("span",{className:"flex items-center gap-2",children:[v===J&&$.jsx(ji,{className:"h-4 w-4"}),J.charAt(0).toUpperCase()+J.slice(1)]})},J)),$.jsx($h,{}),$.jsx(Rn,{onClick:H,children:$.jsxs("span",{className:"flex items-center gap-2",children:[w&&$.jsx(ji,{className:"h-4 w-4"}),"Dark Background"]})})]})]}),$.jsxs(ec,{children:[$.jsx(tc,{asChild:!0,children:$.jsx(ks,{variant:"ghost",size:"sm",children:"Drag"})}),$.jsx(nc,{children:BN.map(J=>$.jsx(Rn,{onClick:()=>Z(J.value),children:$.jsxs("span",{className:"flex items-center gap-2",children:[S===J.value&&$.jsx(ji,{className:"h-4 w-4"}),J.label]})},J.value))})]})]}),$.jsx("div",{className:"p-3 border-t bg-background",children:$.jsxs("div",{className:"flex gap-2 w-full",children:[$.jsx(NR,{className:"flex-1",type:"text",value:e,onChange:J=>t(J.target.value),placeholder:"Enter nii file URL"}),$.jsx(ks,{size:"sm",onClick:U,disabled:!e,children:"Load"})]})}),$.jsx("main",{className:"flex-1 p-3",children:$.jsx("div",{className:"p-3 w-full h-[80vh] border border-neutral-600 rounded-md",children:$.jsx("canvas",{ref:D})})}),!!n&&$.jsxs("div",{className:"p-2 bg-background text-sm text-muted-foreground",children:["Intensity: ",n||""]})]})};function NN(){return $.jsx(fy,{children:$.jsx("div",{children:$.jsx(UN,{})})})}ly.createRoot(document.getElementById("root")).render($.jsx(z.StrictMode,{children:$.jsx(NN,{})}));
